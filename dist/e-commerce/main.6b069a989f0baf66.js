"use strict";var ez=Object.defineProperty,tz=Object.defineProperties,nz=Object.getOwnPropertyDescriptors,nV=Object.getOwnPropertySymbols,rz=Object.prototype.hasOwnProperty,iz=Object.prototype.propertyIsEnumerable,rV=(rt,Te,L)=>Te in rt?ez(rt,Te,{enumerable:!0,configurable:!0,writable:!0,value:L}):rt[Te]=L,DA=(rt,Te)=>{for(var L in Te||(Te={}))rz.call(Te,L)&&rV(rt,L,Te[L]);if(nV)for(var L of nV(Te))iz.call(Te,L)&&rV(rt,L,Te[L]);return rt},AA=(rt,Te)=>tz(rt,nz(Te));(self.webpackChunkE_Commerce=self.webpackChunkE_Commerce||[]).push([[179],{2011:(rt,Te,L)=>{L.d(Te,{hO:()=>Ze,xv:()=>ye,Dh:()=>_e,GT:()=>pe,cc:()=>xe,on:()=>z,pX:()=>le});var c=L(5e3),X=L(9260),V=L(4976);rt=L.hmd(rt);const ce=["ngOnDestroy"],le=(Re,ot,ut,Fe={})=>new Proxy(Re,{get:(Ee,ve)=>ut.runOutsideAngular(()=>{var ze;if(Re[ve])return(null===(ze=null==Fe?void 0:Fe.spy)||void 0===ze?void 0:ze.get)&&Fe.spy.get(ve,Re[ve]),Re[ve];if(ce.indexOf(ve)>-1)return()=>{};const je=ot.toPromise().then(Ct=>{const oe=Ct&&Ct[ve];return"function"==typeof oe?oe.bind(Ct):oe&&oe.then?oe.then(xt=>ut.run(()=>xt)):ut.run(()=>oe)});return new Proxy(()=>{},{get:(Ct,oe)=>je[oe],apply:(Ct,oe,xt)=>je.then(Rt=>{var Tt;const sn=Rt&&Rt(...xt);return(null===(Tt=null==Fe?void 0:Fe.spy)||void 0===Tt?void 0:Tt.apply)&&Fe.spy.apply(ve,xt,sn),sn})})})}),pe=(Re,ot)=>{ot.forEach(ut=>{Object.getOwnPropertyNames(ut.prototype||ut).forEach(Fe=>{Object.defineProperty(Re.prototype,Fe,Object.getOwnPropertyDescriptor(ut.prototype||ut,Fe))})})};class he{constructor(ot){return ot}}const _e=new c.OlP("angularfire2.app.options"),ye=new c.OlP("angularfire2.app.name");function z(Re,ot,ut){const Ee="object"==typeof ut&&ut||{};Ee.name=Ee.name||"string"==typeof ut&&ut||"[DEFAULT]";const ze=X.Z.apps.filter(je=>je&&je.name===Ee.name)[0]||ot.runOutsideAngular(()=>X.Z.initializeApp(Re,Ee));try{JSON.stringify(Re)!==JSON.stringify(ze.options)&&q("error",`${ze.name} Firebase App already initialized with different options${rt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(je){}return new he(ze)}const q=(Re,...ot)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[Re](...ot)},ee={provide:he,useFactory:z,deps:[_e,c.R0b,[new c.FiY,ye]]};let Ze=(()=>{class Re{constructor(ut){X.Z.registerVersion("angularfire",V.q4.full,"core"),X.Z.registerVersion("angularfire",V.q4.full,"app-compat"),X.Z.registerVersion("angular",c.q4F.full,ut.toString())}static initializeApp(ut,Fe){return{ngModule:Re,providers:[{provide:_e,useValue:ut},{provide:ye,useValue:Fe}]}}}return Re.\u0275fac=function(ut){return new(ut||Re)(c.LFG(c.Lbi))},Re.\u0275mod=c.oAB({type:Re}),Re.\u0275inj=c.cJS({providers:[ee]}),Re})();function xe(Re,ot,ut,Fe,Ee){const[,ve,ze]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===Re)||[];if(ve)return function Ve(Re,ot){try{return Re.toString()===ot.toString()}catch(ut){return Re===ot}}(Ee,ze)||(ge("error",`${ot} was already initialized on the ${ut} Firebase App with different settings.${Ge?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:Ee,was:ze})),ve;{const je=Fe();return globalThis.\u0275AngularfireInstanceCache.push([Re,je,Ee]),je}}const Ge=!!rt.hot,ge=(Re,...ot)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[Re](...ot)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(rt,Te,L)=>{L.d(Te,{q4:()=>Zl,iC:()=>aa,HU:()=>$h,vb:()=>oc,JM:()=>bd});var c=L(5e3),X=L(259),V=L(5861),ce=L(6881),le=L(2090),pe=L(4859),he=L(1877);let ye,z;const Ze=new WeakMap,xe=new WeakMap,Ve=new WeakMap,Ge=new WeakMap,ge=new WeakMap;let ut={get(C,I,M){if(C instanceof IDBTransaction){if("done"===I)return xe.get(C);if("objectStoreNames"===I)return C.objectStoreNames||Ve.get(C);if("store"===I)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return ze(C[I])},set:(C,I,M)=>(C[I]=M,!0),has:(C,I)=>C instanceof IDBTransaction&&("done"===I||"store"===I)||I in C};function ve(C){return"function"==typeof C?function Ee(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ee(){return z||(z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...I){return C.apply(je(this),I),ze(Ze.get(this))}:function(...I){return ze(C.apply(je(this),I))}:function(I,...M){const U=C.call(je(this),I,...M);return Ve.set(U,I.sort?I.sort():[I]),ze(U)}}(C):(C instanceof IDBTransaction&&function ot(C){if(xe.has(C))return;const I=new Promise((M,U)=>{const W=()=>{C.removeEventListener("complete",K),C.removeEventListener("error",de),C.removeEventListener("abort",de)},K=()=>{M(),W()},de=()=>{U(C.error||new DOMException("AbortError","AbortError")),W()};C.addEventListener("complete",K),C.addEventListener("error",de),C.addEventListener("abort",de)});xe.set(C,I)}(C),((C,I)=>I.some(M=>C instanceof M))(C,function q(){return ye||(ye=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,ut):C)}function ze(C){if(C instanceof IDBRequest)return function Re(C){const I=new Promise((M,U)=>{const W=()=>{C.removeEventListener("success",K),C.removeEventListener("error",de)},K=()=>{M(ze(C.result)),W()},de=()=>{U(C.error),W()};C.addEventListener("success",K),C.addEventListener("error",de)});return I.then(M=>{M instanceof IDBCursor&&Ze.set(M,C)}).catch(()=>{}),ge.set(I,C),I}(C);if(Ge.has(C))return Ge.get(C);const I=ve(C);return I!==C&&(Ge.set(C,I),ge.set(I,C)),I}const je=C=>ge.get(C),xt=["get","getKey","getAll","getAllKeys","count"],Rt=["put","add","delete","clear"],Tt=new Map;function sn(C,I){if(!(C instanceof IDBDatabase)||I in C||"string"!=typeof I)return;if(Tt.get(I))return Tt.get(I);const M=I.replace(/FromIndex$/,""),U=I!==M,W=Rt.includes(M);if(!(M in(U?IDBIndex:IDBObjectStore).prototype)||!W&&!xt.includes(M))return;const K=function(){var de=(0,V.Z)(function*(Ke,...$e){const it=this.transaction(Ke,W?"readwrite":"readonly");let Nt=it.store;return U&&(Nt=Nt.index($e.shift())),(yield Promise.all([Nt[M](...$e),W&&it.done]))[0]});return function($e){return de.apply(this,arguments)}}();return Tt.set(I,K),K}!function Fe(C){ut=C(ut)}(C=>AA(DA({},C),{get:(I,M,U)=>sn(I,M)||C.get(I,M,U),has:(I,M)=>!!sn(I,M)||C.has(I,M)}));const ht="@firebase/installations",bs="w:0.6.4",re="FIS_v2",ct=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Bt(C){return C instanceof le.ZR&&C.code.includes("request-failed")}function Jt({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function ft(C){return{token:C.token,requestStatus:2,expiresIn:Ii(C.expiresIn),creationTime:Date.now()}}function on(C,I){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,V.Z)(function*(C,I){const U=(yield I.json()).error;return ct.create("request-failed",{requestName:C,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function xn({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function Ln(C,{refreshToken:I}){const M=xn(C);return M.append("Authorization",function mt(C){return`${re} ${C}`}(I)),M}function Cr(C){return or.apply(this,arguments)}function or(){return(or=(0,V.Z)(function*(C){const I=yield C();return I.status>=500&&I.status<600?C():I})).apply(this,arguments)}function Ii(C){return Number(C.replace("s","000"))}function Ta(C,I){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,V.Z)(function*({appConfig:C,heartbeatServiceProvider:I},{fid:M}){const U=Jt(C),W=xn(C),K=I.getImmediate({optional:!0});if(K){const it=yield K.getHeartbeatsHeader();it&&W.append("x-firebase-client",it)}const Ke={method:"POST",headers:W,body:JSON.stringify({fid:M,authVersion:re,appId:C.appId,sdkVersion:bs})},$e=yield Cr(()=>fetch(U,Ke));if($e.ok){const it=yield $e.json();return{fid:it.fid||M,registrationStatus:2,refreshToken:it.refreshToken,authToken:ft(it.authToken)}}throw yield on("Create Installation",$e)})).apply(this,arguments)}function ar(C){return new Promise(I=>{setTimeout(I,C)})}const xu=/^[cdef][\w-]{21}$/;function kr(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const M=function br(C){return function Su(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return xu.test(M)?M:""}catch(C){return""}}function Di(C){return`${C.appName}!${C.appId}`}const Lt=new Map;function wt(C,I){const M=Di(C);Gs(M,I),function $t(C,I){const M=function $n(){return!ui&&"BroadcastChannel"in self&&(ui=new BroadcastChannel("[Firebase] FID Change"),ui.onmessage=C=>{Gs(C.data.key,C.data.fid)}),ui}();M&&M.postMessage({key:C,fid:I}),function Ai(){0===Lt.size&&ui&&(ui.close(),ui=null)}()}(M,I)}function Gs(C,I){const M=Lt.get(C);if(M)for(const U of M)U(I)}let ui=null;const Xt="firebase-installations-store";let is=null;function Yr(){return is||(is=function Ct(C,I,{blocked:M,upgrade:U,blocking:W,terminated:K}={}){const de=indexedDB.open(C,I),Ke=ze(de);return U&&de.addEventListener("upgradeneeded",$e=>{U(ze(de.result),$e.oldVersion,$e.newVersion,ze(de.transaction))}),M&&de.addEventListener("blocked",()=>M()),Ke.then($e=>{K&&$e.addEventListener("close",()=>K()),W&&$e.addEventListener("versionchange",()=>W())}).catch(()=>{}),Ke}("firebase-installations-database",1,{upgrade:(C,I)=>{0===I&&C.createObjectStore(Xt)}})),is}function Mn(C,I){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,V.Z)(function*(C,I){const M=Di(C),W=(yield Yr()).transaction(Xt,"readwrite"),K=W.objectStore(Xt),de=yield K.get(M);return yield K.put(I,M),yield W.done,(!de||de.fid!==I.fid)&&wt(C,I.fid),I})).apply(this,arguments)}function _o(C){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,V.Z)(function*(C){const I=Di(C),U=(yield Yr()).transaction(Xt,"readwrite");yield U.objectStore(Xt).delete(I),yield U.done})).apply(this,arguments)}function Ts(C,I){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,V.Z)(function*(C,I){const M=Di(C),W=(yield Yr()).transaction(Xt,"readwrite"),K=W.objectStore(Xt),de=yield K.get(M),Ke=I(de);return void 0===Ke?yield K.delete(M):yield K.put(Ke,M),yield W.done,Ke&&(!de||de.fid!==Ke.fid)&&wt(C,Ke.fid),Ke})).apply(this,arguments)}function H(C){return B.apply(this,arguments)}function B(){return(B=(0,V.Z)(function*(C){let I;const M=yield Ts(C.appConfig,U=>{const W=Z(U),K=Ae(C,W);return I=K.registrationPromise,K.installationEntry});return""===M.fid?{installationEntry:yield I}:{installationEntry:M,registrationPromise:I}})).apply(this,arguments)}function Z(C){return Cn(C||{fid:kr(),registrationStatus:0})}function Ae(C,I){if(0===I.registrationStatus){if(!navigator.onLine)return{installationEntry:I,registrationPromise:Promise.reject(ct.create("app-offline"))};const M={fid:I.fid,registrationStatus:1,registrationTime:Date.now()},U=function se(C,I){return nt.apply(this,arguments)}(C,M);return{installationEntry:M,registrationPromise:U}}return 1===I.registrationStatus?{installationEntry:I,registrationPromise:kt(C)}:{installationEntry:I}}function nt(){return(nt=(0,V.Z)(function*(C,I){try{const M=yield Ta(C,I);return Mn(C.appConfig,M)}catch(M){throw Bt(M)&&409===M.customData.serverCode?yield _o(C.appConfig):yield Mn(C.appConfig,{fid:I.fid,registrationStatus:0}),M}})).apply(this,arguments)}function kt(C){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,V.Z)(function*(C){let I=yield Vn(C.appConfig);for(;1===I.registrationStatus;)yield ar(100),I=yield Vn(C.appConfig);if(0===I.registrationStatus){const{installationEntry:M,registrationPromise:U}=yield H(C);return U||M}return I})).apply(this,arguments)}function Vn(C){return Ts(C,I=>{if(!I)throw ct.create("installation-not-found");return Cn(I)})}function Cn(C){return function hn(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function zt(C,I){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,V.Z)(function*({appConfig:C,heartbeatServiceProvider:I},M){const U=Gi(C,M),W=Ln(C,M),K=I.getImmediate({optional:!0});if(K){const it=yield K.getHeartbeatsHeader();it&&W.append("x-firebase-client",it)}const Ke={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:bs,appId:C.appId}})},$e=yield Cr(()=>fetch(U,Ke));if($e.ok)return ft(yield $e.json());throw yield on("Generate Auth Token",$e)})).apply(this,arguments)}function Gi(C,{fid:I}){return`${Jt(C)}/${I}/authTokens:generate`}function ci(C){return qi.apply(this,arguments)}function qi(){return(qi=(0,V.Z)(function*(C,I=!1){let M;const U=yield Ts(C.appConfig,K=>{if(!lt(K))throw ct.create("not-registered");const de=K.authToken;if(!I&&Gt(de))return K;if(1===de.requestStatus)return M=ae(C,I),K;{if(!navigator.onLine)throw ct.create("app-offline");const Ke=rn(K);return M=me(C,Ke),Ke}});return M?yield M:U.authToken})).apply(this,arguments)}function ae(C,I){return ne.apply(this,arguments)}function ne(){return(ne=(0,V.Z)(function*(C,I){let M=yield Me(C.appConfig);for(;1===M.authToken.requestStatus;)yield ar(100),M=yield Me(C.appConfig);const U=M.authToken;return 0===U.requestStatus?ci(C,I):U})).apply(this,arguments)}function Me(C){return Ts(C,I=>{if(!lt(I))throw ct.create("not-registered");return function Tr(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(I.authToken)?Object.assign(Object.assign({},I),{authToken:{requestStatus:0}}):I})}function me(C,I){return He.apply(this,arguments)}function He(){return(He=(0,V.Z)(function*(C,I){try{const M=yield zt(C,I),U=Object.assign(Object.assign({},I),{authToken:M});return yield Mn(C.appConfig,U),M}catch(M){if(!Bt(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const U=Object.assign(Object.assign({},I),{authToken:{requestStatus:0}});yield Mn(C.appConfig,U)}else yield _o(C.appConfig);throw M}})).apply(this,arguments)}function lt(C){return void 0!==C&&2===C.registrationStatus}function Gt(C){return 2===C.requestStatus&&!function qn(C){const I=Date.now();return I<C.creationTime||C.creationTime+C.expiresIn<I+36e5}(C)}function rn(C){const I={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:I})}function yo(){return(yo=(0,V.Z)(function*(C){const I=C,{installationEntry:M,registrationPromise:U}=yield H(I);return U?U.catch(console.error):ci(I).catch(console.error),M.fid})).apply(this,arguments)}function jt(){return(jt=(0,V.Z)(function*(C,I=!1){const M=C;return yield bl(M),(yield ci(M,I)).token})).apply(this,arguments)}function bl(C){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,V.Z)(function*(C){const{registrationPromise:I}=yield H(C);I&&(yield I)})).apply(this,arguments)}function Da(C){return ct.create("missing-app-config-values",{valueName:C})}const Si="installations",Yc=C=>{const I=C.getProvider("app").getImmediate(),M=function Kc(C){if(!C||!C.options)throw Da("App Configuration");if(!C.name)throw Da("App Name");const I=["projectId","apiKey","appId"];for(const M of I)if(!C.options[M])throw Da(M);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(I);return{app:I,appConfig:M,heartbeatServiceProvider:(0,ce._getProvider)(I,"heartbeat"),_delete:()=>Promise.resolve()}},Eo=C=>{const I=C.getProvider("app").getImmediate(),M=(0,ce._getProvider)(I,Si).getImmediate();return{getId:()=>function vn(C){return yo.apply(this,arguments)}(M),getToken:W=>function Ia(C){return jt.apply(this,arguments)}(M,W)}};(function Aa(){(0,ce._registerComponent)(new pe.wA(Si,Yc,"PUBLIC")),(0,ce._registerComponent)(new pe.wA("installations-internal",Eo,"PRIVATE"))})(),(0,ce.registerVersion)(ht,"0.6.4"),(0,ce.registerVersion)(ht,"0.6.4","esm2017");const Jr="@firebase/remote-config",Xr=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Mi{constructor(I,M,U,W){this.client=I,this.storage=M,this.storageCache=U,this.logger=W}isCachedDataFresh(I,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-M,W=U<=I;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${I}. Is cache hit: ${W}.`),W}fetch(I){var M=this;return(0,V.Z)(function*(){const[U,W]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(W&&M.isCachedDataFresh(I.cacheMaxAgeMillis,U))return W;I.eTag=W&&W.eTag;const K=yield M.client.fetch(I),de=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===K.status&&de.push(M.storage.setLastSuccessfulFetchResponse(K)),yield Promise.all(de),K})()}}function Il(C=navigator){return C.languages&&C.languages[0]||C.language}class Sa{constructor(I,M,U,W,K,de){this.firebaseInstallations=I,this.sdkVersion=M,this.namespace=U,this.projectId=W,this.apiKey=K,this.appId=de}fetch(I){var M=this;return(0,V.Z)(function*(){const[U,W]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),de=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Ke={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":I.eTag||"*"},$e={sdk_version:M.sdkVersion,app_instance_id:U,app_instance_id_token:W,app_id:M.appId,language_code:Il()},it={method:"POST",headers:Ke,body:JSON.stringify($e)},Nt=fetch(de,it),Et=new Promise((Fs,gi)=>{I.signal.addEventListener(()=>{const lc=new Error("The operation was aborted.");lc.name="AbortError",gi(lc)})});let Wr;try{yield Promise.race([Nt,Et]),Wr=yield Nt}catch(Fs){let gi="fetch-client-network";throw"AbortError"===(null==Fs?void 0:Fs.name)&&(gi="fetch-timeout"),Xr.create(gi,{originalErrorMessage:null==Fs?void 0:Fs.message})}let dr=Wr.status;const la=Wr.headers.get("ETag")||void 0;let Qa,Fi;if(200===Wr.status){let Fs;try{Fs=yield Wr.json()}catch(gi){throw Xr.create("fetch-client-parse",{originalErrorMessage:null==gi?void 0:gi.message})}Qa=Fs.entries,Fi=Fs.state}if("INSTANCE_STATE_UNSPECIFIED"===Fi?dr=500:"NO_CHANGE"===Fi?dr=304:("NO_TEMPLATE"===Fi||"EMPTY_CONFIG"===Fi)&&(Qa={}),304!==dr&&200!==dr)throw Xr.create("fetch-status",{httpStatus:dr});return{status:dr,eTag:la,config:Qa}})()}}class ed{constructor(I,M){this.client=I,this.storage=M}fetch(I){var M=this;return(0,V.Z)(function*(){const U=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(I,U)})()}attemptFetch(I,{throttleEndTimeMillis:M,backoffCount:U}){var W=this;return(0,V.Z)(function*(){yield function yp(C,I){return new Promise((M,U)=>{const W=Math.max(I-Date.now(),0),K=setTimeout(M,W);C.addEventListener(()=>{clearTimeout(K),U(Xr.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}(I.signal,M);try{const K=yield W.client.fetch(I);return yield W.storage.deleteThrottleMetadata(),K}catch(K){if(!function xh(C){if(!(C instanceof le.ZR&&C.customData))return!1;const I=Number(C.customData.httpStatus);return 429===I||500===I||503===I||504===I}(K))throw K;const de={throttleEndTimeMillis:Date.now()+(0,le.$s)(U),backoffCount:U+1};return yield W.storage.setThrottleMetadata(de),W.attemptFetch(I,de)}})()}}class td{constructor(I,M,U,W,K){this.app=I,this._client=M,this._storageCache=U,this._storage=W,this._logger=K,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function xa(C,I){const M=C.target.error||void 0;return Xr.create(I,{originalErrorMessage:M&&(null==M?void 0:M.message)})}const Nn="app_namespace_store";class Tv{constructor(I,M,U,W=function Ma(){return new Promise((C,I)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=U=>{I(xa(U,"storage-open"))},M.onsuccess=U=>{C(U.target.result)},M.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(Nn,{keyPath:"compositeKey"})}}catch(M){I(Xr.create("storage-open",{originalErrorMessage:null==M?void 0:M.message}))}})}()){this.appId=I,this.appName=M,this.namespace=U,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(I){return this.set("last_fetch_status",I)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(I){return this.set("last_successful_fetch_timestamp_millis",I)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(I){return this.set("last_successful_fetch_response",I)}getActiveConfig(){return this.get("active_config")}setActiveConfig(I){return this.set("active_config",I)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(I){return this.set("active_config_etag",I)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(I){return this.set("throttle_metadata",I)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(I){var M=this;return(0,V.Z)(function*(){const U=yield M.openDbPromise;return new Promise((W,K)=>{const Ke=U.transaction([Nn],"readonly").objectStore(Nn),$e=M.createCompositeKey(I);try{const it=Ke.get($e);it.onerror=Nt=>{K(xa(Nt,"storage-get"))},it.onsuccess=Nt=>{const Et=Nt.target.result;W(Et?Et.value:void 0)}}catch(it){K(Xr.create("storage-get",{originalErrorMessage:null==it?void 0:it.message}))}})})()}set(I,M){var U=this;return(0,V.Z)(function*(){const W=yield U.openDbPromise;return new Promise((K,de)=>{const $e=W.transaction([Nn],"readwrite").objectStore(Nn),it=U.createCompositeKey(I);try{const Nt=$e.put({compositeKey:it,value:M});Nt.onerror=Et=>{de(xa(Et,"storage-set"))},Nt.onsuccess=()=>{K()}}catch(Nt){de(Xr.create("storage-set",{originalErrorMessage:null==Nt?void 0:Nt.message}))}})})()}delete(I){var M=this;return(0,V.Z)(function*(){const U=yield M.openDbPromise;return new Promise((W,K)=>{const Ke=U.transaction([Nn],"readwrite").objectStore(Nn),$e=M.createCompositeKey(I);try{const it=Ke.delete($e);it.onerror=Nt=>{K(xa(Nt,"storage-delete"))},it.onsuccess=()=>{W()}}catch(it){K(Xr.create("storage-delete",{originalErrorMessage:null==it?void 0:it.message}))}})})()}createCompositeKey(I){return[this.appId,this.appName,this.namespace,I].join()}}class nd{constructor(I){this.storage=I}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var I=this;return(0,V.Z)(function*(){const M=I.storage.getLastFetchStatus(),U=I.storage.getLastSuccessfulFetchTimestampMillis(),W=I.storage.getActiveConfig(),K=yield M;K&&(I.lastFetchStatus=K);const de=yield U;de&&(I.lastSuccessfulFetchTimestampMillis=de);const Ke=yield W;Ke&&(I.activeConfig=Ke)})()}setLastFetchStatus(I){return this.lastFetchStatus=I,this.storage.setLastFetchStatus(I)}setLastSuccessfulFetchTimestampMillis(I){return this.lastSuccessfulFetchTimestampMillis=I,this.storage.setLastSuccessfulFetchTimestampMillis(I)}setActiveConfig(I){return this.activeConfig=I,this.storage.setActiveConfig(I)}}function Km(){return On.apply(this,arguments)}function On(){return(On=(0,V.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch(C){return!1}})).apply(this,arguments)}let Ru,pn;!function ss(){(0,ce._registerComponent)(new pe.wA("remote-config",function C(I,{instanceIdentifier:M}){const U=I.getProvider("app").getImmediate(),W=I.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Xr.create("registration-window");if(!(0,le.hl)())throw Xr.create("indexed-db-unavailable");const{projectId:K,apiKey:de,appId:Ke}=U.options;if(!K)throw Xr.create("registration-project-id");if(!de)throw Xr.create("registration-api-key");if(!Ke)throw Xr.create("registration-app-id");const $e=new Tv(Ke,U.name,M=M||"firebase"),it=new nd($e),Nt=new he.Yd(Jr);Nt.logLevel=he.in.ERROR;const Et=new Sa(W,ce.SDK_VERSION,M,K,de,Ke),Wr=new ed(Et,$e),dr=new Mi(Wr,$e,it,Nt),la=new td(U,dr,it,$e,Nt);return function Wm(C){const I=(0,le.m9)(C);I._initializePromise||(I._initializePromise=I._storageCache.loadFromStorage().then(()=>{I._isInitializationComplete=!0}))}(la),la},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(Jr,"0.4.4"),(0,ce.registerVersion)(Jr,"0.4.4","esm2017")}();const Oa=new WeakMap,Dr=new WeakMap,ku=new WeakMap,Gr=new WeakMap,os=new WeakMap;let as={get(C,I,M){if(C instanceof IDBTransaction){if("done"===I)return Dr.get(C);if("objectStoreNames"===I)return C.objectStoreNames||ku.get(C);if("store"===I)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return di(C[I])},set:(C,I,M)=>(C[I]=M,!0),has:(C,I)=>C instanceof IDBTransaction&&("done"===I||"store"===I)||I in C};function Ra(C){return"function"==typeof C?function Ds(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Na(){return pn||(pn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...I){return C.apply(Dt(this),I),di(Oa.get(this))}:function(...I){return di(C.apply(Dt(this),I))}:function(I,...M){const U=C.call(Dt(this),I,...M);return ku.set(U,I.sort?I.sort():[I]),di(U)}}(C):(C instanceof IDBTransaction&&function zo(C){if(Dr.has(C))return;const I=new Promise((M,U)=>{const W=()=>{C.removeEventListener("complete",K),C.removeEventListener("error",de),C.removeEventListener("abort",de)},K=()=>{M(),W()},de=()=>{U(C.error||new DOMException("AbortError","AbortError")),W()};C.addEventListener("complete",K),C.addEventListener("error",de),C.addEventListener("abort",de)});Dr.set(C,I)}(C),((C,I)=>I.some(M=>C instanceof M))(C,function wp(){return Ru||(Ru=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,as):C)}function di(C){if(C instanceof IDBRequest)return function Pi(C){const I=new Promise((M,U)=>{const W=()=>{C.removeEventListener("success",K),C.removeEventListener("error",de)},K=()=>{M(di(C.result)),W()},de=()=>{U(C.error),W()};C.addEventListener("success",K),C.addEventListener("error",de)});return I.then(M=>{M instanceof IDBCursor&&Oa.set(M,C)}).catch(()=>{}),os.set(I,C),I}(C);if(Gr.has(C))return Gr.get(C);const I=Ra(C);return I!==C&&(Gr.set(C,I),os.set(I,C)),I}const Dt=C=>os.get(C);function Al(C,I,{blocked:M,upgrade:U,blocking:W,terminated:K}={}){const de=indexedDB.open(C,I),Ke=di(de);return U&&de.addEventListener("upgradeneeded",$e=>{U(di(de.result),$e.oldVersion,$e.newVersion,di(de.transaction))}),M&&de.addEventListener("blocked",()=>M()),Ke.then($e=>{K&&$e.addEventListener("close",()=>K()),W&&$e.addEventListener("versionchange",()=>W())}).catch(()=>{}),Ke}function Wo(C,{blocked:I}={}){const M=indexedDB.deleteDatabase(C);return I&&M.addEventListener("blocked",()=>I()),di(M).then(()=>{})}const Fu=["get","getKey","getAll","getAllKeys","count"],Mh=["put","add","delete","clear"],ka=new Map;function sd(C,I){if(!(C instanceof IDBDatabase)||I in C||"string"!=typeof I)return;if(ka.get(I))return ka.get(I);const M=I.replace(/FromIndex$/,""),U=I!==M,W=Mh.includes(M);if(!(M in(U?IDBIndex:IDBObjectStore).prototype)||!W&&!Fu.includes(M))return;const K=function(){var de=(0,V.Z)(function*(Ke,...$e){const it=this.transaction(Ke,W?"readwrite":"readonly");let Nt=it.store;return U&&(Nt=Nt.index($e.shift())),(yield Promise.all([Nt[M](...$e),W&&it.done]))[0]});return function($e){return de.apply(this,arguments)}}();return ka.set(I,K),K}!function id(C){as=C(as)}(C=>AA(DA({},C),{get:(I,M,U)=>sd(I,M)||C.get(I,M,U),has:(I,M)=>!!sd(I,M)||C.has(I,M)}));const od="/firebase-messaging-sw.js",Pe="/firebase-cloud-messaging-push-scope",Yt="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Rn="google.c.a.c_id",Sl="google.c.a.c_l",Zo="google.c.a.ts",ls="google.c.a.e";var Co=(()=>{return(C=Co||(Co={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",Co;var C})();function As(C){const I=new Uint8Array(C);return btoa(String.fromCharCode(...I)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Fa(C){const M=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(M),W=new Uint8Array(U.length);for(let K=0;K<U.length;++K)W[K]=U.charCodeAt(K);return W}const bo="fcm_token_details_db",Kn="fcm_token_object_Store";function zs(C){return Va.apply(this,arguments)}function Va(){return Va=(0,V.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(K=>K.name).includes(bo))return null;let I=null;return(yield Al(bo,5,{upgrade:(U=(0,V.Z)(function*(W,K,de,Ke){var $e;if(K<2||!W.objectStoreNames.contains(Kn))return;const it=Ke.objectStore(Kn),Nt=yield it.index("fcmSenderId").get(C);if(yield it.clear(),Nt)if(2===K){const Et=Nt;if(!Et.auth||!Et.p256dh||!Et.endpoint)return;I={token:Et.fcmToken,createTime:null!==($e=Et.createTime)&&void 0!==$e?$e:Date.now(),subscriptionOptions:{auth:Et.auth,p256dh:Et.p256dh,endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:"string"==typeof Et.vapidKey?Et.vapidKey:As(Et.vapidKey)}}}else if(3===K){const Et=Nt;I={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:As(Et.auth),p256dh:As(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:As(Et.vapidKey)}}}else if(4===K){const Et=Nt;I={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:As(Et.auth),p256dh:As(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:As(Et.vapidKey)}}}}),function(K,de,Ke,$e){return U.apply(this,arguments)})})).close(),yield Wo(bo),yield Wo("fcm_vapid_details_db"),yield Wo("undefined"),Ua(I)?I:null;var U}),Va.apply(this,arguments)}function Ua(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:I}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof I.auth&&I.auth.length>0&&"string"==typeof I.p256dh&&I.p256dh.length>0&&"string"==typeof I.endpoint&&I.endpoint.length>0&&"string"==typeof I.swScope&&I.swScope.length>0&&"string"==typeof I.vapidKey&&I.vapidKey.length>0}const Ss="firebase-messaging-store";let Vu=null;function xl(){return Vu||(Vu=Al("firebase-messaging-database",1,{upgrade:(C,I)=>{0===I&&C.createObjectStore(Ss)}})),Vu}function Uu(C){return To.apply(this,arguments)}function To(){return(To=(0,V.Z)(function*(C){const I=Io(C),U=yield(yield xl()).transaction(Ss).objectStore(Ss).get(I);if(U)return U;{const W=yield zs(C.appConfig.senderId);if(W)return yield ad(C,W),W}})).apply(this,arguments)}function ad(C,I){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,V.Z)(function*(C,I){const M=Io(C),W=(yield xl()).transaction(Ss,"readwrite");return yield W.objectStore(Ss).put(I,M),yield W.done,I})).apply(this,arguments)}function Ym(C){return ld.apply(this,arguments)}function ld(){return(ld=(0,V.Z)(function*(C){const I=Io(C),U=(yield xl()).transaction(Ss,"readwrite");yield U.objectStore(Ss).delete(I),yield U.done})).apply(this,arguments)}function Io({appConfig:C}){return C.appId}const Ar=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ud(C,I){return cd.apply(this,arguments)}function cd(){return(cd=(0,V.Z)(function*(C,I){const M=yield kn(C),U=Cp(I),W={method:"POST",headers:M,body:JSON.stringify(U)};let K;try{K=yield(yield fetch(hi(C.appConfig),W)).json()}catch(de){throw Ar.create("token-subscribe-failed",{errorInfo:null==de?void 0:de.toString()})}if(K.error)throw Ar.create("token-subscribe-failed",{errorInfo:K.error.message});if(!K.token)throw Ar.create("token-subscribe-no-token");return K.token})).apply(this,arguments)}function Yo(C,I){return xs.apply(this,arguments)}function xs(){return(xs=(0,V.Z)(function*(C,I){const M=yield kn(C),U=Cp(I.subscriptionOptions),W={method:"PATCH",headers:M,body:JSON.stringify(U)};let K;try{K=yield(yield fetch(`${hi(C.appConfig)}/${I.token}`,W)).json()}catch(de){throw Ar.create("token-update-failed",{errorInfo:null==de?void 0:de.toString()})}if(K.error)throw Ar.create("token-update-failed",{errorInfo:K.error.message});if(!K.token)throw Ar.create("token-update-no-token");return K.token})).apply(this,arguments)}function Bu(C,I){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,V.Z)(function*(C,I){const U={method:"DELETE",headers:yield kn(C)};try{const K=yield(yield fetch(`${hi(C.appConfig)}/${I}`,U)).json();if(K.error)throw Ar.create("token-unsubscribe-failed",{errorInfo:K.error.message})}catch(W){throw Ar.create("token-unsubscribe-failed",{errorInfo:null==W?void 0:W.toString()})}})).apply(this,arguments)}function hi({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function kn(C){return ju.apply(this,arguments)}function ju(){return(ju=(0,V.Z)(function*({appConfig:C,installations:I}){const M=yield I.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Cp({p256dh:C,auth:I,endpoint:M,vapidKey:U}){const W={web:{endpoint:M,auth:I,p256dh:C}};return U!==Yt&&(W.web.applicationPubKey=U),W}const Oh=6048e5;function bp(C){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,V.Z)(function*(C){const I=yield Tp(C.swRegistration,C.vapidKey),M={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:I.endpoint,auth:As(I.getKey("auth")),p256dh:As(I.getKey("p256dh"))},U=yield Uu(C.firebaseDependencies);if(U){if(qu(U.subscriptionOptions,M))return Date.now()>=U.createTime+Oh?$u(C,{token:U.token,createTime:Date.now(),subscriptionOptions:M}):U.token;try{yield Bu(C.firebaseDependencies,U.token)}catch(W){console.warn(W)}return Gu(C.firebaseDependencies,M)}return Gu(C.firebaseDependencies,M)})).apply(this,arguments)}function Rh(C){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,V.Z)(function*(C){const I=yield Uu(C.firebaseDependencies);I&&(yield Bu(C.firebaseDependencies,I.token),yield Ym(C.firebaseDependencies));const M=yield C.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function $u(C,I){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,V.Z)(function*(C,I){try{const M=yield Yo(C.firebaseDependencies,I),U=Object.assign(Object.assign({},I),{token:M,createTime:Date.now()});return yield ad(C.firebaseDependencies,U),M}catch(M){throw yield Rh(C),M}})).apply(this,arguments)}function Gu(C,I){return Do.apply(this,arguments)}function Do(){return(Do=(0,V.Z)(function*(C,I){const U={token:yield ud(C,I),createTime:Date.now(),subscriptionOptions:I};return yield ad(C,U),U.token})).apply(this,arguments)}function Tp(C,I){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,V.Z)(function*(C,I){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Fa(I)})})).apply(this,arguments)}function qu(C,I){return I.vapidKey===C.vapidKey&&I.endpoint===C.endpoint&&I.auth===C.auth&&I.p256dh===C.p256dh}function Ip(C){const I={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function Qm(C,I){if(!I.notification)return;C.notification={};const M=I.notification.title;M&&(C.notification.title=M);const U=I.notification.body;U&&(C.notification.body=U);const W=I.notification.image;W&&(C.notification.image=W);const K=I.notification.icon;K&&(C.notification.icon=K)}(I,C),function Ba(C,I){!I.data||(C.data=I.data)}(I,C),function kh(C,I){var M,U,W,K,de;if(!I.fcmOptions&&!(null===(M=I.notification)||void 0===M?void 0:M.click_action))return;C.fcmOptions={};const Ke=null!==(W=null===(U=I.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==W?W:null===(K=I.notification)||void 0===K?void 0:K.click_action;Ke&&(C.fcmOptions.link=Ke);const $e=null===(de=I.fcmOptions)||void 0===de?void 0:de.analytics_label;$e&&(C.fcmOptions.analyticsLabel=$e)}(I,C),I}function Dp(C){return"object"==typeof C&&!!C&&Rn in C}function Ap(C,I){const M=[];for(let U=0;U<C.length;U++)M.push(C.charAt(U)),U<I.length&&M.push(I.charAt(U));return M.join("")}function Jo(C){return Ar.create("missing-app-config-values",{valueName:C})}Ap("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ap("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class It{constructor(I,M,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function er(C){if(!C||!C.options)throw Jo("App Configuration Object");if(!C.name)throw Jo("App Name");const I=["projectId","apiKey","appId","messagingSenderId"],{options:M}=C;for(const U of I)if(!M[U])throw Jo(U);return{appName:C.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(I);this.firebaseDependencies={app:I,appConfig:W,installations:M,analyticsProvider:U}}_delete(){return Promise.resolve()}}function mr(C){return ei.apply(this,arguments)}function ei(){return(ei=(0,V.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(od,{scope:Pe}),C.swRegistration.update().catch(()=>{})}catch(I){throw Ar.create("failed-service-worker-registration",{browserErrorMessage:null==I?void 0:I.message})}})).apply(this,arguments)}function qr(C,I){return ja.apply(this,arguments)}function ja(){return(ja=(0,V.Z)(function*(C,I){if(!I&&!C.swRegistration&&(yield mr(C)),I||!C.swRegistration){if(!(I instanceof ServiceWorkerRegistration))throw Ar.create("invalid-sw-registration");C.swRegistration=I}})).apply(this,arguments)}function Ao(C,I){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,V.Z)(function*(C,I){I?C.vapidKey=I:C.vapidKey||(C.vapidKey=Yt)})).apply(this,arguments)}function Zs(){return(Zs=(0,V.Z)(function*(C,I){if(!navigator)throw Ar.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ar.create("permission-blocked");return yield Ao(C,null==I?void 0:I.vapidKey),yield qr(C,null==I?void 0:I.serviceWorkerRegistration),bp(C)})).apply(this,arguments)}function dd(C,I,M){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,V.Z)(function*(C,I,M){const U=bt(I);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:M[Rn],message_name:M[Sl],message_time:M[Zo],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function bt(C){switch(C){case Co.NOTIFICATION_CLICKED:return"notification_open";case Co.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ha(){return(Ha=(0,V.Z)(function*(C,I){const M=I.data;if(!M.isFirebaseMessaging)return;C.onMessageHandler&&M.messageType===Co.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(Ip(M)):C.onMessageHandler.next(Ip(M)));const U=M.data;Dp(U)&&"1"===U[ls]&&(yield dd(C,M.messageType,U))})).apply(this,arguments)}const $a="@firebase/messaging",Tn=C=>{const I=new It(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Lh(C,I){return Ha.apply(this,arguments)}(I,M)),I},zu=C=>{const I=C.getProvider("messaging").getImmediate();return{getToken:U=>function Fh(C,I){return Zs.apply(this,arguments)}(I,U)}};function Pl(){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,V.Z)(function*(){try{yield(0,le.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function fd(){(0,ce._registerComponent)(new pe.wA("messaging",Tn,"PUBLIC")),(0,ce._registerComponent)(new pe.wA("messaging-internal",zu,"PRIVATE")),(0,ce.registerVersion)($a,"0.12.4"),(0,ce.registerVersion)($a,"0.12.4","esm2017")}();const gn="analytics",ea="firebase_id",Ys="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ol="https://www.googletagmanager.com/gtag/js",Kt=new he.Yd("@firebase/analytics"),zn=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Qs(C){if(!C.startsWith(Ol)){const I=zn.create("invalid-gtag-resource",{gtagURL:C});return Kt.warn(I.message),""}return C}function fi(C){return Promise.all(C.map(I=>I.catch(M=>M)))}function Ni(C,I){const M=function ur(C,I){let M;return window.trustedTypes&&(M=window.trustedTypes.createPolicy(C,I)),M}("firebase-js-sdk-policy",{createScriptURL:Qs}),U=document.createElement("script"),W=`${Ol}?l=${C}&id=${I}`;U.src=M?null==M?void 0:M.createScriptURL(W):W,U.async=!0,document.head.appendChild(U)}function Ga(C,I,M,U,W,K){return qa.apply(this,arguments)}function qa(){return(qa=(0,V.Z)(function*(C,I,M,U,W,K){const de=U[W];try{if(de)yield I[de];else{const $e=(yield fi(M)).find(it=>it.measurementId===W);$e&&(yield I[$e.appId])}}catch(Ke){Kt.error(Ke)}C("config",W,K)})).apply(this,arguments)}function Un(C,I,M,U,W){return gd.apply(this,arguments)}function gd(){return(gd=(0,V.Z)(function*(C,I,M,U,W){try{let K=[];if(W&&W.send_to){let de=W.send_to;Array.isArray(de)||(de=[de]);const Ke=yield fi(M);for(const $e of de){const it=Ke.find(Et=>Et.measurementId===$e),Nt=it&&I[it.appId];if(!Nt){K=[];break}K.push(Nt)}}0===K.length&&(K=Object.values(I)),yield Promise.all(K),C("event",U,W||{})}catch(K){Kt.error(K)}})).apply(this,arguments)}function za(C){const I=window.document.getElementsByTagName("script");for(const M of Object.values(I))if(M.src&&M.src.includes(Ol)&&M.src.includes(C))return M;return null}const xo=new class Ri{constructor(I={},M=1e3){this.throttleMetadata=I,this.intervalMillis=M}getThrottleMetadata(I){return this.throttleMetadata[I]}setThrottleMetadata(I,M){this.throttleMetadata[I]=M}deleteThrottleMetadata(I){delete this.throttleMetadata[I]}};function Zu(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function cr(C){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,V.Z)(function*(C){var I;const{appId:M,apiKey:U}=C,W={method:"GET",headers:Zu(U)},K=Ys.replace("{app-id}",M),de=yield fetch(K,W);if(200!==de.status&&304!==de.status){let Ke="";try{const $e=yield de.json();(null===(I=$e.error)||void 0===I?void 0:I.message)&&(Ke=$e.error.message)}catch($e){}throw zn.create("config-fetch-failed",{httpStatus:de.status,responseMessage:Ke})}return de.json()})).apply(this,arguments)}function kl(C){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,V.Z)(function*(C,I=xo,M){const{appId:U,apiKey:W,measurementId:K}=C.options;if(!U)throw zn.create("no-app-id");if(!W){if(K)return{measurementId:K,appId:U};throw zn.create("no-api-key")}const de=I.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ke=new Vl;return setTimeout((0,V.Z)(function*(){Ke.abort()}),void 0!==M?M:6e4),Vh({appId:U,apiKey:W,measurementId:K},de,Ke,I)})).apply(this,arguments)}function Vh(C,I,M){return pi.apply(this,arguments)}function pi(){return(pi=(0,V.Z)(function*(C,{throttleEndTimeMillis:I,backoffCount:M},U,W=xo){var K;const{appId:de,measurementId:Ke}=C;try{yield Ns(U,I)}catch($e){if(Ke)return Kt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ke} provided in the "measurementId" field in the local Firebase config. [${null==$e?void 0:$e.message}]`),{appId:de,measurementId:Ke};throw $e}try{const $e=yield cr(C);return W.deleteThrottleMetadata(de),$e}catch($e){const it=$e;if(!Ll(it)){if(W.deleteThrottleMetadata(de),Ke)return Kt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ke} provided in the "measurementId" field in the local Firebase config. [${null==it?void 0:it.message}]`),{appId:de,measurementId:Ke};throw $e}const Nt=503===Number(null===(K=null==it?void 0:it.customData)||void 0===K?void 0:K.httpStatus)?(0,le.$s)(M,W.intervalMillis,30):(0,le.$s)(M,W.intervalMillis),Et={throttleEndTimeMillis:Date.now()+Nt,backoffCount:M+1};return W.setThrottleMetadata(de,Et),Kt.debug(`Calling attemptFetch again in ${Nt} millis`),Vh(C,Et,U,W)}})).apply(this,arguments)}function Ns(C,I){return new Promise((M,U)=>{const W=Math.max(I-Date.now(),0),K=setTimeout(M,W);C.addEventListener(()=>{clearTimeout(K),U(zn.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}function Ll(C){if(!(C instanceof le.ZR&&C.customData))return!1;const I=Number(C.customData.httpStatus);return 429===I||500===I||503===I||504===I}class Vl{constructor(){this.listeners=[]}addEventListener(I){this.listeners.push(I)}abort(){this.listeners.forEach(I=>I())}}let ta,Zi;function _d(){return(_d=(0,V.Z)(function*(C,I,M,U,W){if(W&&W.global)C("event",M,U);else{const K=yield I;C("event",M,Object.assign(Object.assign({},U),{send_to:K}))}})).apply(this,arguments)}function Bl(C){Zi=C}function Wa(C){ta=C}function Ju(){return yd.apply(this,arguments)}function yd(){return(yd=(0,V.Z)(function*(){if(!(0,le.hl)())return Kt.warn(zn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(C){return Kt.warn(zn.create("indexeddb-unavailable",{errorInfo:null==C?void 0:C.toString()}).message),!1}return!0})).apply(this,arguments)}function yr(){return(yr=(0,V.Z)(function*(C,I,M,U,W,K,de){var Ke;const $e=kl(C);$e.then(dr=>{M[dr.measurementId]=dr.appId,C.options.measurementId&&dr.measurementId!==C.options.measurementId&&Kt.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${dr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(dr=>Kt.error(dr)),I.push($e);const it=Ju().then(dr=>{if(dr)return U.getId()}),[Nt,Et]=yield Promise.all([$e,it]);za(K)||Ni(K,Nt.measurementId),Zi&&(W("consent","default",Zi),Bl(void 0)),W("js",new Date);const Wr=null!==(Ke=null==de?void 0:de.config)&&void 0!==Ke?Ke:{};return Wr.origin="firebase",Wr.update=!0,null!=Et&&(Wr[ea]=Et),W("config",Nt.measurementId,Wr),ta&&(W("set",ta),Wa(void 0)),Nt.measurementId})).apply(this,arguments)}class Za{constructor(I){this.app=I}_delete(){return delete zr[this.app.options.appId],Promise.resolve()}}let zr={},jl=[];const Ka={};let vd,Ki,Xu="dataLayer",ec=!1;function Qt(C,I,M){!function No(){const C=[];if((0,le.ru)()&&C.push("This is a browser extension environment."),(0,le.zI)()||C.push("Cookies are not available."),C.length>0){const I=C.map((U,W)=>`(${W+1}) ${U}`).join(" "),M=zn.create("invalid-analytics-context",{errorInfo:I});Kt.warn(M.message)}}();const U=C.options.appId;if(!U)throw zn.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw zn.create("no-api-key");Kt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=zr[U])throw zn.create("already-exists",{id:U});if(!ec){!function Wn(C){let I=[];Array.isArray(window[C])?I=window[C]:window[C]=I}(Xu);const{wrappedGtag:K,gtagCore:de}=function xp(C,I,M,U,W){let K=function(...de){window[U].push(arguments)};return window[W]&&"function"==typeof window[W]&&(K=window[W]),window[W]=function md(C,I,M,U){function K(){return(K=(0,V.Z)(function*(de,...Ke){try{if("event"===de){const[$e,it]=Ke;yield Un(C,I,M,$e,it)}else if("config"===de){const[$e,it]=Ke;yield Ga(C,I,M,U,$e,it)}else if("consent"===de){const[$e]=Ke;C("consent","update",$e)}else if("get"===de){const[$e,it,Nt]=Ke;C("get",$e,it,Nt)}else if("set"===de){const[$e]=Ke;C("set",$e)}else C(de,...Ke)}catch($e){Kt.error($e)}})).apply(this,arguments)}return function W(de){return K.apply(this,arguments)}}(K,C,I,M),{gtagCore:K,wrappedGtag:window[W]}}(zr,jl,Ka,Xu,"gtag");Ki=K,vd=de,ec=!0}return zr[U]=function tr(C,I,M,U,W,K,de){return yr.apply(this,arguments)}(C,jl,Ka,I,vd,Xu,M),new Za(C)}function Xs(){return $l.apply(this,arguments)}function $l(){return($l=(0,V.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch(C){return!1}})).apply(this,arguments)}const ia="@firebase/analytics";!function zl(){(0,ce._registerComponent)(new pe.wA(gn,(I,{options:M})=>Qt(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ce._registerComponent)(new pe.wA("analytics-internal",function C(I){try{const M=I.getProvider(gn).getImmediate();return{logEvent:(U,W,K)=>function ra(C,I,M,U){C=(0,le.m9)(C),function Uh(C,I,M,U,W){return _d.apply(this,arguments)}(Ki,zr[C.app.options.appId],I,M,U).catch(W=>Kt.error(W))}(M,U,W,K)}}catch(M){throw zn.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ce.registerVersion)(ia,"0.10.0"),(0,ce.registerVersion)(ia,"0.10.0","esm2017")}();var rc=L(4408),Op=L(7565);const Wl=new class fs extends Op.v{}(class Np extends rc.o{constructor(I,M){super(I,M),this.scheduler=I,this.work=M}schedule(I,M=0){return M>0?super.schedule(I,M):(this.delay=M,this.state=I,this.scheduler.flush(this),this)}execute(I,M){return M>0||this.closed?super.execute(I,M):this._execute(I,M)}requestAsyncId(I,M,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(I,M,U):(I.flush(this),0)}});var jh=L(4986),Hh=L(8505),Cd=L(9468),ic=L(5363);const Zl=new c.GfV("7.6.1"),Ya="__angularfire_symbol__analyticsIsSupportedValue",ki="__angularfire_symbol__analyticsIsSupported",ps="__angularfire_symbol__remoteConfigIsSupportedValue",sa="__angularfire_symbol__remoteConfigIsSupported",Os="__angularfire_symbol__messagingIsSupportedValue",sc="__angularfire_symbol__messagingIsSupported";function bd(C,I,M){if(I){if(1===I.length)return I[0];const K=I.filter(de=>de.app===M);if(1===K.length)return K[0]}return M.container.getProvider(C).getImmediate({optional:!0})}globalThis[ki]||(globalThis[ki]=Xs().then(C=>globalThis[Ya]=C).catch(()=>globalThis[Ya]=!1)),globalThis[sc]||(globalThis[sc]=Pl().then(C=>globalThis[Os]=C).catch(()=>globalThis[Os]=!1)),globalThis[sa]||(globalThis[sa]=Km().then(C=>globalThis[ps]=C).catch(()=>globalThis[ps]=!1));const oc=(C,I)=>{const M=I?[I]:(0,X.C6)(),U=[];return M.forEach(W=>{W.container.getProvider(C).instances.forEach(de=>{U.includes(de)||U.push(de)})}),U};function Rs(){}class ks{constructor(I,M=Wl){this.zone=I,this.delegate=M}now(){return this.delegate.now()}schedule(I,M,U){const W=this.zone;return this.delegate.schedule(function(de){W.runGuarded(()=>{I.apply(this,[de])})},M,U)}}class Td{constructor(I){this.zone=I,this.task=null}call(I,M){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Rs,{},Rs,Rs)),M.pipe((0,Hh.b)({next:U,complete:U,error:U})).subscribe(I).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let $h=(()=>{class C{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new ks(Zone.current)),this.insideAngular=M.run(()=>new ks(Zone.current,jh.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(M){return new(M||C)(c.LFG(c.R0b))},C.\u0275prov=c.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function gs(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function aa(C){return gs(),function Id(C){return function(M){return(M=M.lift(new Td(C.ngZone))).pipe((0,Cd.R)(C.outsideAngular),(0,ic.Q)(C.insideAngular))}}(gs())(C)}},2090:(rt,Te,L)=>{L.d(Te,{BH:()=>ve,LL:()=>we,ZR:()=>ke,gQ:()=>br,zI:()=>Ie,hu:()=>X,g5:()=>V,US:()=>pe,tV:()=>z,h$:()=>_e,L:()=>ye,$s:()=>_o,r3:()=>or,Sg:()=>ze,ne:()=>Di,p$:()=>q,vZ:()=>Jn,ZB:()=>ee,gK:()=>$t,pd:()=>kr,aH:()=>Fe,Pz:()=>Ee,m9:()=>Hr,z$:()=>je,GJ:()=>Cr,jU:()=>xt,ru:()=>Rt,xb:()=>mt,w1:()=>ht,hl:()=>re,uI:()=>Ct,UG:()=>oe,Yr:()=>go,b$:()=>Tt,G6:()=>bs,w9:()=>Ln,cI:()=>Jt,UI:()=>Ta,xO:()=>xu,zd:()=>lr,DV:()=>Ii,ug:()=>qs,dS:()=>At,Wl:()=>ft,Dv:()=>Gs,Wj:()=>$n,lb:()=>Ai,eu:()=>te});const X=function(H,B){if(!H)throw V(B)},V=function(H){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+H)},ce=function(H){const B=[];let Z=0;for(let Ae=0;Ae<H.length;Ae++){let se=H.charCodeAt(Ae);se<128?B[Z++]=se:se<2048?(B[Z++]=se>>6|192,B[Z++]=63&se|128):55296==(64512&se)&&Ae+1<H.length&&56320==(64512&H.charCodeAt(Ae+1))?(se=65536+((1023&se)<<10)+(1023&H.charCodeAt(++Ae)),B[Z++]=se>>18|240,B[Z++]=se>>12&63|128,B[Z++]=se>>6&63|128,B[Z++]=63&se|128):(B[Z++]=se>>12|224,B[Z++]=se>>6&63|128,B[Z++]=63&se|128)}return B},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,B){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ae=[];for(let se=0;se<H.length;se+=3){const nt=H[se],kt=se+1<H.length,Pt=kt?H[se+1]:0,Vn=se+2<H.length,Cn=Vn?H[se+2]:0;let Fr=(15&Pt)<<2|Cn>>6,Gi=63&Cn;Vn||(Gi=64,kt||(Fr=64)),Ae.push(Z[nt>>2],Z[(3&nt)<<4|Pt>>4],Z[Fr],Z[Gi])}return Ae.join("")},encodeString(H,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(H):this.encodeByteArray(ce(H),B)},decodeString(H,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(H):function(H){const B=[];let Z=0,Ae=0;for(;Z<H.length;){const se=H[Z++];if(se<128)B[Ae++]=String.fromCharCode(se);else if(se>191&&se<224){const nt=H[Z++];B[Ae++]=String.fromCharCode((31&se)<<6|63&nt)}else if(se>239&&se<365){const Vn=((7&se)<<18|(63&H[Z++])<<12|(63&H[Z++])<<6|63&H[Z++])-65536;B[Ae++]=String.fromCharCode(55296+(Vn>>10)),B[Ae++]=String.fromCharCode(56320+(1023&Vn))}else{const nt=H[Z++],kt=H[Z++];B[Ae++]=String.fromCharCode((15&se)<<12|(63&nt)<<6|63&kt)}}return B.join("")}(this.decodeStringToByteArray(H,B))},decodeStringToByteArray(H,B){this.init_();const Z=B?this.charToByteMapWebSafe_:this.charToByteMap_,Ae=[];for(let se=0;se<H.length;){const nt=Z[H.charAt(se++)],Pt=se<H.length?Z[H.charAt(se)]:0;++se;const Cn=se<H.length?Z[H.charAt(se)]:64;++se;const zt=se<H.length?Z[H.charAt(se)]:64;if(++se,null==nt||null==Pt||null==Cn||null==zt)throw new he;Ae.push(nt<<2|Pt>>4),64!==Cn&&(Ae.push(Pt<<4&240|Cn>>2),64!==zt&&Ae.push(Cn<<6&192|zt))}return Ae},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}};class he extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _e=function(H){const B=ce(H);return pe.encodeByteArray(B,!0)},ye=function(H){return _e(H).replace(/\./g,"")},z=function(H){try{return pe.decodeString(H,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function q(H){return ee(void 0,H)}function ee(H,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return B}for(const Z in B)!B.hasOwnProperty(Z)||!Ze(Z)||(H[Z]=ee(H[Z],B[Z]));return H}function Ze(H){return"__proto__"!==H}const Re=()=>{try{return function xe(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if("undefined"==typeof document)return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Z){return}const B=H&&z(H[1]);return B&&JSON.parse(B)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},Fe=()=>{var H;return null===(H=Re())||void 0===H?void 0:H.config},Ee=H=>{var B;return null===(B=Re())||void 0===B?void 0:B[`_${H}`]};class ve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,Z)=>{this.resolve=B,this.reject=Z})}wrapCallback(B){return(Z,Ae)=>{Z?this.reject(Z):this.resolve(Ae),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(Z):B(Z,Ae))}}}function ze(H,B){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ae=B||"demo-project",se=H.iat||0,nt=H.sub||H.user_id;if(!nt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const kt=Object.assign({iss:`https://securetoken.google.com/${Ae}`,aud:Ae,iat:se,exp:se+3600,auth_time:se,sub:nt,user_id:nt,firebase:{sign_in_provider:"custom",identities:{}}},H);return[ye(JSON.stringify({alg:"none",type:"JWT"})),ye(JSON.stringify(kt)),""].join(".")}function je(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ct(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function oe(){var H;const B=null===(H=Re())||void 0===H?void 0:H.forceEnvironment;if("node"===B)return!0;if("browser"===B)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Z){return!1}}function xt(){return"object"==typeof self&&self.self===self}function Rt(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function Tt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ht(){const H=je();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function go(){return!1}function bs(){return!oe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function re(){try{return"object"==typeof indexedDB}catch(H){return!1}}function te(){return new Promise((H,B)=>{try{let Z=!0;const Ae="validate-browser-context-for-indexeddb-analytics-module",se=self.indexedDB.open(Ae);se.onsuccess=()=>{se.result.close(),Z||self.indexedDB.deleteDatabase(Ae),H(!0)},se.onupgradeneeded=()=>{Z=!1},se.onerror=()=>{var nt;B((null===(nt=se.error)||void 0===nt?void 0:nt.message)||"")}}catch(Z){B(Z)}})}function Ie(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ke extends Error{constructor(B,Z,Ae){super(Z),this.code=B,this.customData=Ae,this.name="FirebaseError",Object.setPrototypeOf(this,ke.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,we.prototype.create)}}class we{constructor(B,Z,Ae){this.service=B,this.serviceName=Z,this.errors=Ae}create(B,...Z){const Ae=Z[0]||{},se=`${this.service}/${B}`,nt=this.errors[B],kt=nt?function ct(H,B){return H.replace(Bt,(Z,Ae)=>{const se=B[Ae];return null!=se?String(se):`<${Ae}?>`})}(nt,Ae):"Error";return new ke(se,`${this.serviceName}: ${kt} (${se}).`,Ae)}}const Bt=/\{\$([^}]+)}/g;function Jt(H){return JSON.parse(H)}function ft(H){return JSON.stringify(H)}const on=function(H){let B={},Z={},Ae={},se="";try{const nt=H.split(".");B=Jt(z(nt[0])||""),Z=Jt(z(nt[1])||""),se=nt[2],Ae=Z.d||{},delete Z.d}catch(nt){}return{header:B,claims:Z,data:Ae,signature:se}},Ln=function(H){const Z=on(H).claims;return!!Z&&"object"==typeof Z&&Z.hasOwnProperty("iat")},Cr=function(H){const B=on(H).claims;return"object"==typeof B&&!0===B.admin};function or(H,B){return Object.prototype.hasOwnProperty.call(H,B)}function Ii(H,B){if(Object.prototype.hasOwnProperty.call(H,B))return H[B]}function mt(H){for(const B in H)if(Object.prototype.hasOwnProperty.call(H,B))return!1;return!0}function Ta(H,B,Z){const Ae={};for(const se in H)Object.prototype.hasOwnProperty.call(H,se)&&(Ae[se]=B.call(Z,H[se],se,H));return Ae}function Jn(H,B){if(H===B)return!0;const Z=Object.keys(H),Ae=Object.keys(B);for(const se of Z){if(!Ae.includes(se))return!1;const nt=H[se],kt=B[se];if(ar(nt)&&ar(kt)){if(!Jn(nt,kt))return!1}else if(nt!==kt)return!1}for(const se of Ae)if(!Z.includes(se))return!1;return!0}function ar(H){return null!==H&&"object"==typeof H}function xu(H){const B=[];for(const[Z,Ae]of Object.entries(H))Array.isArray(Ae)?Ae.forEach(se=>{B.push(encodeURIComponent(Z)+"="+encodeURIComponent(se))}):B.push(encodeURIComponent(Z)+"="+encodeURIComponent(Ae));return B.length?"&"+B.join("&"):""}function lr(H){const B={};return H.replace(/^\?/,"").split("&").forEach(Ae=>{if(Ae){const[se,nt]=Ae.split("=");B[decodeURIComponent(se)]=decodeURIComponent(nt)}}),B}function kr(H){const B=H.indexOf("?");if(!B)return"";const Z=H.indexOf("#",B);return H.substring(B,Z>0?Z:void 0)}class br{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let B=1;B<this.blockSize;++B)this.pad_[B]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(B,Z){Z||(Z=0);const Ae=this.W_;if("string"==typeof B)for(let zt=0;zt<16;zt++)Ae[zt]=B.charCodeAt(Z)<<24|B.charCodeAt(Z+1)<<16|B.charCodeAt(Z+2)<<8|B.charCodeAt(Z+3),Z+=4;else for(let zt=0;zt<16;zt++)Ae[zt]=B[Z]<<24|B[Z+1]<<16|B[Z+2]<<8|B[Z+3],Z+=4;for(let zt=16;zt<80;zt++){const Fr=Ae[zt-3]^Ae[zt-8]^Ae[zt-14]^Ae[zt-16];Ae[zt]=4294967295&(Fr<<1|Fr>>>31)}let Cn,hn,se=this.chain_[0],nt=this.chain_[1],kt=this.chain_[2],Pt=this.chain_[3],Vn=this.chain_[4];for(let zt=0;zt<80;zt++){zt<40?zt<20?(Cn=Pt^nt&(kt^Pt),hn=1518500249):(Cn=nt^kt^Pt,hn=1859775393):zt<60?(Cn=nt&kt|Pt&(nt|kt),hn=2400959708):(Cn=nt^kt^Pt,hn=3395469782);const Fr=(se<<5|se>>>27)+Cn+Vn+hn+Ae[zt]&4294967295;Vn=Pt,Pt=kt,kt=4294967295&(nt<<30|nt>>>2),nt=se,se=Fr}this.chain_[0]=this.chain_[0]+se&4294967295,this.chain_[1]=this.chain_[1]+nt&4294967295,this.chain_[2]=this.chain_[2]+kt&4294967295,this.chain_[3]=this.chain_[3]+Pt&4294967295,this.chain_[4]=this.chain_[4]+Vn&4294967295}update(B,Z){if(null==B)return;void 0===Z&&(Z=B.length);const Ae=Z-this.blockSize;let se=0;const nt=this.buf_;let kt=this.inbuf_;for(;se<Z;){if(0===kt)for(;se<=Ae;)this.compress_(B,se),se+=this.blockSize;if("string"==typeof B){for(;se<Z;)if(nt[kt]=B.charCodeAt(se),++kt,++se,kt===this.blockSize){this.compress_(nt),kt=0;break}}else for(;se<Z;)if(nt[kt]=B[se],++kt,++se,kt===this.blockSize){this.compress_(nt),kt=0;break}}this.inbuf_=kt,this.total_+=Z}digest(){const B=[];let Z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let se=this.blockSize-1;se>=56;se--)this.buf_[se]=255&Z,Z/=256;this.compress_(this.buf_);let Ae=0;for(let se=0;se<5;se++)for(let nt=24;nt>=0;nt-=8)B[Ae]=this.chain_[se]>>nt&255,++Ae;return B}}function Di(H,B){const Z=new Lt(H,B);return Z.subscribe.bind(Z)}class Lt{constructor(B,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{B(this)}).catch(Ae=>{this.error(Ae)})}next(B){this.forEachObserver(Z=>{Z.next(B)})}error(B){this.forEachObserver(Z=>{Z.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,Z,Ae){let se;if(void 0===B&&void 0===Z&&void 0===Ae)throw new Error("Missing Observer.");se=function Mt(H,B){if("object"!=typeof H||null===H)return!1;for(const Z of B)if(Z in H&&"function"==typeof H[Z])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:Z,complete:Ae},void 0===se.next&&(se.next=mo),void 0===se.error&&(se.error=mo),void 0===se.complete&&(se.complete=mo);const nt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?se.error(this.finalError):se.complete()}catch(kt){}}),this.observers.push(se),nt}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,B)}sendOne(B,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{Z(this.observers[B])}catch(Ae){"undefined"!=typeof console&&console.error&&console.error(Ae)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mo(){}const Gs=function(H,B,Z,Ae){let se;if(Ae<B?se="at least "+B:Ae>Z&&(se=0===Z?"none":"no more than "+Z),se)throw new Error(H+" failed: Was called with "+Ae+(1===Ae?" argument.":" arguments.")+" Expects "+se+".")};function $t(H,B){return`${H} failed: ${B} argument `}function $n(H,B,Z,Ae){if((!Ae||Z)&&"function"!=typeof Z)throw new Error($t(H,B)+"must be a valid function.")}function Ai(H,B,Z,Ae){if((!Ae||Z)&&("object"!=typeof Z||null===Z))throw new Error($t(H,B)+"must be a valid context object.")}const At=function(H){const B=[];let Z=0;for(let Ae=0;Ae<H.length;Ae++){let se=H.charCodeAt(Ae);if(se>=55296&&se<=56319){const nt=se-55296;Ae++,X(Ae<H.length,"Surrogate pair missing trail surrogate."),se=65536+(nt<<10)+(H.charCodeAt(Ae)-56320)}se<128?B[Z++]=se:se<2048?(B[Z++]=se>>6|192,B[Z++]=63&se|128):se<65536?(B[Z++]=se>>12|224,B[Z++]=se>>6&63|128,B[Z++]=63&se|128):(B[Z++]=se>>18|240,B[Z++]=se>>12&63|128,B[Z++]=se>>6&63|128,B[Z++]=63&se|128)}return B},qs=function(H){let B=0;for(let Z=0;Z<H.length;Z++){const Ae=H.charCodeAt(Z);Ae<128?B++:Ae<2048?B+=2:Ae>=55296&&Ae<=56319?(B+=4,Z++):B+=3}return B};function _o(H,B=1e3,Z=2){const Ae=B*Math.pow(Z,H),se=Math.round(.5*Ae*(Math.random()-.5)*2);return Math.min(144e5,Ae+se)}function Hr(H){return H&&H._delegate?H._delegate:H}},9529:(rt,Te,L)=>{var c=L(5e3);let X=null;function V(){return X}const he=new c.OlP("DocumentToken");let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function ye(){return(0,c.LFG)(q)}()},providedIn:"platform"}),n})();const z=new c.OlP("Location Initialized");let q=(()=>{class n extends _e{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return V().getBaseHref(this._doc)}onPopState(t){const r=V().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=V().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ee()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ee()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(he))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Ze(){return new q((0,c.LFG)(he))}()},providedIn:"platform"}),n})();function ee(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ve(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ge(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Re(n){const e=(0,c.LFG)(he).location;return new ut((0,c.LFG)(_e),e&&e.origin||"")}()},providedIn:"root"}),n})();const ot=new c.OlP("appBaseHref");let ut=(()=>{class n extends ge{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ge(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const u=this.prepareExternalUrl(i+Ge(o));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,o){const u=this.prepareExternalUrl(i+Ge(o));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(_e),c.LFG(ot,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let u=this.prepareExternalUrl(i+Ge(o));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,o){let u=this.prepareExternalUrl(i+Ge(o));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(_e),c.LFG(ot,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ee=(()=>{class n{constructor(t,r){this._subject=new c.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ve(je(i)),this._platformStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ge(r))}normalize(t){return n.stripTrailingSlash(function ze(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ge(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ge(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ge,n.joinWithSlash=xe,n.stripTrailingSlash=Ve,n.\u0275fac=function(t){return new(t||n)(c.LFG(ge),c.LFG(_e))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function ve(){return new Ee((0,c.LFG)(ge),(0,c.LFG)(_e))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}const Ct={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var oe=(()=>((oe=oe||{})[oe.Decimal=0]="Decimal",oe[oe.Percent=1]="Percent",oe[oe.Currency=2]="Currency",oe[oe.Scientific=3]="Scientific",oe))(),ht=(()=>((ht=ht||{})[ht.Decimal=0]="Decimal",ht[ht.Group=1]="Group",ht[ht.List=2]="List",ht[ht.PercentSign=3]="PercentSign",ht[ht.PlusSign=4]="PlusSign",ht[ht.MinusSign=5]="MinusSign",ht[ht.Exponential=6]="Exponential",ht[ht.SuperscriptingExponent=7]="SuperscriptingExponent",ht[ht.PerMille=8]="PerMille",ht[ht.Infinity=9]="Infinity",ht[ht.NaN=10]="NaN",ht[ht.TimeSeparator=11]="TimeSeparator",ht[ht.CurrencyDecimal=12]="CurrencyDecimal",ht[ht.CurrencyGroup=13]="CurrencyGroup",ht))();function Jt(n,e){const t=(0,c.cg1)(n),r=t[c.wAp.NumberSymbols][e];if(void 0===r){if(e===ht.CurrencyDecimal)return t[c.wAp.NumberSymbols][ht.Decimal];if(e===ht.CurrencyGroup)return t[c.wAp.NumberSymbols][ht.Group]}return r}function ft(n,e){return(0,c.cg1)(n)[c.wAp.NumberFormats][e]}const Vn=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function ne(n,e,t,r,i,o,u=!1){let h="",m=!1;if(isFinite(n)){let v=function qn(n){let r,i,o,u,h,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;"0"===e.charAt(o);o++);if(o===(h=e.length))r=[0],i=1;else{for(h--;"0"===e.charAt(h);)h--;for(i-=o,r=[],u=0;o<=h;o++,u++)r[u]=Number(e.charAt(o))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);u&&(v=function Gt(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(v));let T=e.minInt,A=e.minFrac,O=e.maxFrac;if(o){const Je=o.match(Vn);if(null===Je)throw new Error(`${o} is not a valid digit info`);const et=Je[1],pt=Je[3],Wt=Je[5];null!=et&&(T=Tr(et)),null!=pt&&(A=Tr(pt)),null!=Wt?O=Tr(Wt):null!=pt&&A>O&&(O=A)}!function rn(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const o=Math.min(Math.max(e,i),t);let u=o+n.integerLen,h=r[u];if(u>0){r.splice(Math.max(n.integerLen,u));for(let A=u;A<r.length;A++)r[A]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,u=o+1),r[0]=0;for(let A=1;A<u;A++)r[A]=0}if(h>=5)if(u-1<0){for(let A=0;A>u;A--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[u-1]++;for(;i<Math.max(0,o);i++)r.push(0);let m=0!==o;const v=e+n.integerLen,T=r.reduceRight(function(A,O,F,j){return j[F]=(O+=A)<10?O:O-10,m&&(0===j[F]&&F>=v?j.pop():m=!1),O>=10?1:0},0);T&&(r.unshift(T),n.integerLen++)}(v,A,O);let F=v.digits,j=v.integerLen;const Q=v.exponent;let fe=[];for(m=F.every(Je=>!Je);j<T;j++)F.unshift(0);for(;j<0;j++)F.unshift(0);j>0?fe=F.splice(j,F.length):(fe=F,F=[0]);const qe=[];for(F.length>=e.lgSize&&qe.unshift(F.splice(-e.lgSize,F.length).join(""));F.length>e.gSize;)qe.unshift(F.splice(-e.gSize,F.length).join(""));F.length&&qe.unshift(F.join("")),h=qe.join(Jt(t,r)),fe.length&&(h+=Jt(t,i)+fe.join("")),Q&&(h+=Jt(t,ht.Exponential)+"+"+Q)}else h=Jt(t,ht.Infinity);return h=n<0&&!m?e.negPre+h+e.negSuf:e.posPre+h+e.posSuf,h}function lt(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],o=r[1],u=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],h=u[0],m=u[1]||"";t.posPre=h.substr(0,h.indexOf("#"));for(let T=0;T<m.length;T++){const A=m.charAt(T);"0"===A?t.minFrac=t.maxFrac=T+1:"#"===A?t.maxFrac=T+1:t.posSuf+=A}const v=h.split(",");if(t.gSize=v[1]?v[1].length:0,t.lgSize=v[2]||v[1]?(v[2]||v[1]).length:0,o){const T=i.length-t.posPre.length-t.posSuf.length,A=o.indexOf("#");t.negPre=o.substr(0,A).replace(/'/g,""),t.negSuf=o.substr(A+T).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function Tr(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}class vo{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ir=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new vo(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===o?void 0:o);else if(null!==o){const h=r.get(o);r.move(h,u),bn(h,i)}});for(let i=0,o=r.length;i<o;i++){const h=r.get(i).context;h.index=i,h.count=o,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{bn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function bn(n,e){n.context.$implicit=e.item}let $r=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Pn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Kc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Kc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Pn{constructor(){this.$implicit=null,this.ngIf=null}}function Kc(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}function xi(n,e){return new c.vHH(2100,"")}let Sh=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!Il(t))return null;i=i||this._locale;try{return function He(n,e,t){return ne(n,lt(ft(e,oe.Decimal),Jt(e,ht.MinusSign)),e,ht.Group,ht.Decimal,t)}(Sa(t),i,r)}catch(o){throw xi()}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.soG,16))},n.\u0275pipe=c.Yjl({name:"number",type:n,pure:!0}),n})(),Mi=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",o,u){if(!Il(t))return null;u=u||this._locale,"boolean"==typeof i&&(i=i?"symbol":"code");let h=r||this._defaultCurrencyCode;"code"!==i&&(h="symbol"===i||"symbol-narrow"===i?function Su(n,e,t="en"){const r=function Ln(n){return(0,c.cg1)(n)[c.wAp.Currencies]}(t)[n]||Ct[n]||[],i=r[1];return"narrow"===e&&"string"==typeof i?i:r[0]||n}(h,"symbol"===i?"wide":"narrow",u):i);try{return function Me(n,e,t,r,i){const u=lt(ft(e,oe.Currency),Jt(e,ht.MinusSign));return u.minFrac=function lr(n){let e;const t=Ct[n];return t&&(e=t[2]),"number"==typeof e?e:2}(r),u.maxFrac=u.minFrac,ne(n,u,e,ht.CurrencyGroup,ht.CurrencyDecimal,i).replace("\xa4",t).replace("\xa4","").trim()}(Sa(t),u,h,r,o)}catch(m){throw xi()}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.soG,16),c.Y36(c.EJc,16))},n.\u0275pipe=c.Yjl({name:"currency",type:n,pure:!0}),n})();function Il(n){return!(null==n||""===n||n!=n)}function Sa(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}let ed=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const Dl="browser";function Nn(n){return n===Dl}function Ou(n){return"server"===n}let nd=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new ss((0,c.LFG)(he),window)}),n})();class ss{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Is(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const u=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Pa(this.window.history)||Pa(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Pa(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ru extends class rd extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function le(n){X||(X=n)}(new Ru)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function wp(){return pn=pn||document.querySelector("base"),pn?pn.getAttribute("href"):null}();return null==t?null:function Oa(n){Na=Na||document.createElement("a"),Na.setAttribute("href",n);const e=Na.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){pn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function bl(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Na,pn=null;const Dr=new c.OlP("TRANSITION_ID"),Gr=[{provide:c.ip1,useFactory:function ku(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=V(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[Dr,he,c.zs3],multi:!0}];class os{static init(){(0,c.VLi)(new os)}addToWindow(e){c.dqk.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const i=c.dqk.getAllAngularTestabilities();let o=i.length,u=!1;const h=function(m){u=u||m,o--,0==o&&r(u)};i.forEach(function(m){m.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?V().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Pi=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const zo=new c.OlP("EventManagerPlugins");let as=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const u=i[o];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(zo),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class id{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=V().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Ds=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ra=(()=>{class n extends Ds{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(o=>{const u=this._doc.createElement("style");u.textContent=o,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(di),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(di))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(he))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function di(n){V().remove(n)}const Dt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Al=/%COMP%/g;function Pe(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Pe(n,i,t):(i=i.replace(Al,n),t.push(i))}return t}function Yt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Rn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Sl(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Lu(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case c.ifc.ShadowDom:return new Co(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Pe(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(as),c.LFG(Ra),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Sl{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Dt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=Dt[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Dt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,i&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Yt(r)):this.eventManager.addEventListener(e,t,Yt(r))}}class Lu extends Sl{constructor(e,t,r,i){super(e),this.component=r;const o=Pe(i+"-"+r.id,r.styles,[]);t.addStyles(o),this.contentAttr=function sd(n){return"_ngcontent-%COMP%".replace(Al,n)}(i+"-"+r.id),this.hostAttr=function od(n){return"_nghost-%COMP%".replace(Al,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Co extends Sl{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Pe(i.id,i.styles,[]);for(let u=0;u<o.length;u++){const h=document.createElement("style");h.textContent=o[u],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let As=(()=>{class n extends id{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(he))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Fa=["alt","control","meta","shift"],La={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Kn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},zs={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Va=(()=>{class n extends id{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),u=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>V().onAndCancel(t,o.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let u="";if(Fa.forEach(m=>{const v=r.indexOf(m);v>-1&&(r.splice(v,1),u+=m+".")}),u+=o,0!=r.length||0===o.length)return null;const h={};return h.domEventName=i,h.fullKey=u,h}static getEventFullKey(t){let r="",i=function Ua(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Kn.hasOwnProperty(e)&&(e=Kn[e]))}return La[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Fa.forEach(o=>{o!=i&&zs[o](t)&&(r+=o+".")}),r+=i,r}static eventCallback(t,r,i){return o=>{n.getEventFullKey(o)===t&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(he))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const xl=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:Dl},{provide:c.g9A,useValue:function us(){Ru.makeCurrent(),os.init()},multi:!0},{provide:he,useFactory:function Ss(){return(0,c.RDi)(document),document},deps:[]}]),Uu=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function Ep(){return new c.qLn},deps:[]},{provide:zo,useClass:As,multi:!0,deps:[he,c.R0b,c.Lbi]},{provide:zo,useClass:Va,multi:!0,deps:[he]},{provide:Rn,useClass:Rn,deps:[as,Ra,c.AFp]},{provide:c.FYo,useExisting:Rn},{provide:Ds,useExisting:Ra},{provide:Ra,useClass:Ra,deps:[he]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b]},{provide:as,useClass:as,deps:[zo,c.R0b]},{provide:class On{},useClass:Pi,deps:[]}];let To=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:Dr,useExisting:c.AFp},Gr]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(n,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:Uu,imports:[ed,c.hGG]}),n})();"undefined"!=typeof window&&window;let Ba=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):c.LFG(Dp),r},providedIn:"root"}),n})(),Dp=(()=>{class n extends Ba{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case c.q3G.NONE:return r;case c.q3G.HTML:return(0,c.qzn)(r,"HTML")?(0,c.z3N)(r):(0,c.EiD)(this._doc,String(r)).toString();case c.q3G.STYLE:return(0,c.qzn)(r,"Style")?(0,c.z3N)(r):r;case c.q3G.SCRIPT:if((0,c.qzn)(r,"Script"))return(0,c.z3N)(r);throw new Error("unsafe value used in a script context");case c.q3G.URL:return(0,c.yhl)(r),(0,c.qzn)(r,"URL")?(0,c.z3N)(r):(0,c.mCW)(String(r));case c.q3G.RESOURCE_URL:if((0,c.qzn)(r,"ResourceURL"))return(0,c.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,c.JVY)(t)}bypassSecurityTrustStyle(t){return(0,c.L6k)(t)}bypassSecurityTrustScript(t){return(0,c.eBb)(t)}bypassSecurityTrustUrl(t){return(0,c.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,c.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(he))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function kh(n){return new Dp(n.get(he))}(c.LFG(c.zs3)),r},providedIn:"root"}),n})();var er=L(8996),Jo=L(3269);function It(...n){const e=(0,Jo.yG)(n);return(0,er.D)(n,e)}var mr=L(7579);class ei extends mr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var qr=L(8306);const{isArray:ja}=Array,{getPrototypeOf:Ao,prototype:Ms,keys:Fh}=Object;function Zs(n){if(1===n.length){const e=n[0];if(ja(e))return{args:e,keys:null};if(function dd(n){return n&&"object"==typeof n&&Ao(n)===Ms}(e)){const t=Fh(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ps=L(4671),bt=L(4004);const{isArray:Lh}=Array;function $a(n){return(0,bt.U)(e=>function Ha(n,e){return Lh(e)?n(...e):n(e)}(n,e))}function hd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Tn=L(5403),zu=L(9672);function Xo(n,e,t){n?(0,zu.f)(t,n,e):e()}var cs=L(576);function ds(n,e){const t=(0,cs.m)(n)?n:()=>n,r=i=>i.error(t());return new qr.y(e?i=>e.schedule(r,0,i):r)}const hs=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Wu=L(8189);function So(...n){return function pd(){return(0,Wu.J)(1)}()((0,er.D)(n,(0,Jo.yG)(n)))}var Ks=L(8421);function gn(n){return new qr.y(e=>{(0,Ks.Xf)(n()).subscribe(e)})}var ea=L(515),Nl=L(727),_r=L(4482);function Ys(){return(0,_r.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Tn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ol extends qr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,_r.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Nl.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Tn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Nl.w0.EMPTY)}return e}refCount(){return Ys()(this)}}function Kt(n,e){return(0,_r.e)((t,r)=>{let i=null,o=0,u=!1;const h=()=>u&&!i&&r.complete();t.subscribe((0,Tn.x)(r,m=>{null==i||i.unsubscribe();let v=0;const T=o++;(0,Ks.Xf)(n(m,T)).subscribe(i=(0,Tn.x)(r,A=>r.next(e?e(m,A,T,v++):A),()=>{i=null,h()}))},()=>{u=!0,h()}))})}function ti(n){return n<=0?()=>ea.E:(0,_r.e)((e,t)=>{let r=0;e.subscribe((0,Tn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function zn(...n){const e=(0,Jo.yG)(n);return(0,_r.e)((t,r)=>{(e?So(n,t,e):So(n,t)).subscribe(r)})}function Qs(n,e,t,r,i){return(o,u)=>{let h=t,m=e,v=0;o.subscribe((0,Tn.x)(u,T=>{const A=v++;m=h?n(m,T,A):(h=!0,T),r&&u.next(m)},i&&(()=>{h&&u.next(m),u.complete()})))}}function fi(n,e){return(0,_r.e)(Qs(n,e,arguments.length>=2,!0))}function ur(n,e){return(0,_r.e)((t,r)=>{let i=0;t.subscribe((0,Tn.x)(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Ni(n){return(0,_r.e)((e,t)=>{let o,r=null,i=!1;r=e.subscribe((0,Tn.x)(t,void 0,void 0,u=>{o=(0,Ks.Xf)(n(u,Ni(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}var Wn=L(5577);function Ga(n,e){return(0,cs.m)(e)?(0,Wn.z)(n,e,1):(0,Wn.z)(n,1)}function qa(n){return n<=0?()=>ea.E:(0,_r.e)((e,t)=>{let r=[];e.subscribe((0,Tn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Un(n=gd){return(0,_r.e)((e,t)=>{let r=!1;e.subscribe((0,Tn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function gd(){return new hs}function md(n){return(0,_r.e)((e,t)=>{let r=!1;e.subscribe((0,Tn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function za(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ur((i,o)=>n(i,o,r)):Ps.y,ti(1),t?md(e):Un(()=>new hs))}var Oi=L(8505);class Ri{constructor(e,t){this.id=e,this.url=t}}class xo extends Ri{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zu extends Ri{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class cr extends Ri{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Rl extends Ri{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class kl extends Ri{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fl extends Ri{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vh extends Ri{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class pi extends Ri{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ns extends Ri{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ll{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Vl{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ta{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uh{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _d{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mp{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ku{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const en="primary";class Yu{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Sr(n){return new Yu(n)}const Mo="ngNavigationCancelingError";function Po(n){const e=Error("NavigationCancelingError: "+n);return e[Mo]=!0,e}function Bh(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const u=r[o],h=n[o];if(u.startsWith(":"))i[u.substring(1)]=h;else if(u!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Zi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Bl(n[i],e[i]))return!1;return!0}function Bl(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function Wa(n){return Array.prototype.concat.apply([],n)}function Ju(n){return n.length>0?n[n.length-1]:null}function tr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function yr(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,er.D)(Promise.resolve(n)):It(n)}const zr={exact:function Hl(n,e,t){if(!Xs(n.segments,e.segments)||!Js(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Hl(n.children[r],e.children[r],t))return!1;return!0},subset:Ki},jl={exact:function Xu(n,e){return Zi(n,e)},subset:function vd(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Bl(n[t],e[t]))},ignored:()=>!0};function Ka(n,e,t){return zr[t.paths](n.root,e.root,t.matrixParams)&&jl[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Ki(n,e,t){return ec(n,e,e.segments,t)}function ec(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Xs(i,t)||e.hasChildren()||!Js(i,t,r))}if(n.segments.length===t.length){if(!Xs(n.segments,t)||!Js(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Ki(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Xs(n.segments,i)&&Js(n.segments,i,r)&&n.children[en])&&ec(n.children[en],e,o,r)}}function Js(n,e,t){return e.every((r,i)=>jl[t](n[i].parameters,r.parameters))}class No{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Sr(this.queryParams)),this._queryParamMap}toString(){return wd.serialize(this)}}class Qt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,tr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gl(this)}}class nr{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Sr(this.parameters)),this._parameterMap}toString(){return zl(this)}}function Xs(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class eo{}class Pp{parse(e){const t=new Cd(e);return new No(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${to(e.root,!0)}`,r=function Np(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${nc(t)}=${nc(i)}`).join("&"):`${nc(t)}=${nc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function ra(n){return encodeURI(n)}(e.fragment)}`:""}`}}const wd=new Pp;function Gl(n){return n.segments.map(e=>zl(e)).join("/")}function to(n,e){if(!n.hasChildren())return Gl(n);if(e){const t=n.children[en]?to(n.children[en],!1):"",r=[];return tr(n.children,(i,o)=>{o!==en&&r.push(`${o}:${to(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function $l(n,e){let t=[];return tr(n.children,(r,i)=>{i===en&&(t=t.concat(e(r,i)))}),tr(n.children,(r,i)=>{i!==en&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===en?[to(n.children[en],!1)]:[`${i}:${to(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[en]?`${Gl(n)}/${t[0]}`:`${Gl(n)}/(${t.join("//")})`}}function na(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nc(n){return na(n).replace(/%3B/gi,";")}function Ed(n){return na(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ia(n){return decodeURIComponent(n)}function ql(n){return ia(n.replace(/\+/g,"%20"))}function zl(n){return`${Ed(n.path)}${function rc(n){return Object.keys(n).map(e=>`;${Ed(e)}=${Ed(n[e])}`).join("")}(n.parameters)}`}const Op=/^[^\/()?;=#]+/;function fs(n){const e=n.match(Op);return e?e[0]:""}const Wl=/^[^=?&#]+/,jh=/^[^&#]+/;class Cd{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qt([],{}):new Qt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[en]=new Qt(e,t)),r}parseSegment(){const e=fs(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new nr(ia(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=fs(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=fs(this.remaining);i&&(r=i,this.capture(r))}e[ia(t)]=ia(r)}parseQueryParam(e){const t=function Jm(n){const e=n.match(Wl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function Hh(n){const e=n.match(jh);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=ql(t),o=ql(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=fs(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let o;r.indexOf(":")>-1?(o=r.substr(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=en);const u=this.parseChildren();t[o]=1===Object.keys(u).length?u[en]:new Qt([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class ic{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Zl(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Zl(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ya(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ya(e,this._root).map(t=>t.value)}}function Zl(n,e){if(n===e.value)return e;for(const t of e.children){const r=Zl(n,t);if(r)return r}return null}function Ya(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ya(n,t);if(r.length)return r.unshift(e),r}return[]}class ki{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ps(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class sa extends ic{constructor(e,t){super(e),this.snapshot=t,oc(this,e)}toString(){return this.snapshot.toString()}}function Os(n,e){const t=function sc(n,e){const u=new Yl([],{},{},"",{},en,e,null,n.root,-1,{});return new bd("",new ki(u,[]))}(n,e),r=new ei([new nr("",{})]),i=new ei({}),o=new ei({}),u=new ei({}),h=new ei(""),m=new no(r,i,u,h,o,en,e,t.root);return m.snapshot=t.root,new sa(new ki(m,[]),t)}class no{constructor(e,t,r,i,o,u,h,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=u,this.component=h,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,bt.U)(e=>Sr(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,bt.U)(e=>Sr(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Rp(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function Kl(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Yl{constructor(e,t,r,i,o,u,h,m,v,T,A){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=u,this.component=h,this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=T,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Sr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Sr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class bd extends ic{constructor(e,t){super(t),this.url=e,oc(this,t)}toString(){return Rs(this._root)}}function oc(n,e){e.value._routerState=n,e.children.forEach(t=>oc(n,t))}function Rs(n){const e=n.children.length>0?` { ${n.children.map(Rs).join(", ")} } `:"";return`${n.value}${e}`}function ks(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Zi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Zi(e.params,t.params)||n.params.next(t.params),function Ul(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Zi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Zi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Td(n,e){const t=Zi(n.params,e.params)&&function tc(n,e){return Xs(n,e)&&n.every((t,r)=>Zi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Td(n.parent,e.parent))}function gs(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function ac(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return gs(n,r,i);return gs(n,r)})}(n,e,t);return new ki(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const u=o.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(h=>gs(n,h)),u}}const r=function oa(n){return new no(new ei(n.url),new ei(n.params),new ei(n.queryParams),new ei(n.fragment),new ei(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>gs(n,o));return new ki(r,i)}}function Ro(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function aa(n){return"object"==typeof n&&null!=n&&n.outlets}function Id(n,e,t,r,i){let o={};if(r&&tr(r,(h,m)=>{o[m]=Array.isArray(h)?h.map(v=>`${v}`):`${h}`}),n===e)return new No(t,o,i);const u=Gh(n,e,t);return new No(u,o,i)}function Gh(n,e,t){const r={};return tr(n.children,(i,o)=>{r[o]=i===e?t:Gh(i,e,t)}),new Qt(n.segments,r)}class kp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ro(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(aa);if(i&&i!==Ju(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class I{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function K(n,e,t){if(n||(n=new Qt([],{})),0===n.segments.length&&n.hasChildren())return de(n,e,t);const r=function Ke(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const u=n.segments[i],h=t[r];if(aa(h))break;const m=`${h}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!Et(m,v,u))return o;r+=2}else{if(!Et(m,{},u))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new Qt(n.segments.slice(0,r.pathIndex),{});return o.children[en]=new Qt(n.segments.slice(r.pathIndex),n.children),de(o,0,i)}return r.match&&0===i.length?new Qt(n.segments,{}):r.match&&!n.hasChildren()?$e(n,e,t):r.match?de(n,0,i):$e(n,e,t)}function de(n,e,t){if(0===t.length)return new Qt(n.segments,{});{const r=function W(n){return aa(n[0])?n[0].outlets:{[en]:n}}(t),i={};return tr(r,(o,u)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[u]=K(n.children[u],e,o))}),tr(n.children,(o,u)=>{void 0===r[u]&&(i[u]=o)}),new Qt(n.segments,i)}}function $e(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(aa(o)){const m=it(o.outlets);return new Qt(r,m)}if(0===i&&Ro(t[0])){r.push(new nr(n.segments[e].path,Nt(t[0]))),i++;continue}const u=aa(o)?o.outlets[en]:`${o}`,h=i<t.length-1?t[i+1]:null;u&&h&&Ro(h)?(r.push(new nr(u,Nt(h))),i+=2):(r.push(new nr(u,{})),i++)}return new Qt(r,{})}function it(n){const e={};return tr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=$e(new Qt([],{}),0,t))}),e}function Nt(n){const e={};return tr(n,(t,r)=>e[r]=`${t}`),e}function Et(n,e,t){return n==t.path&&Zi(e,t.parameters)}class dr{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ks(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ps(t);e.children.forEach(o=>{const u=o.value.outlet;this.deactivateRoutes(o,i[u],r),delete i[u]}),tr(i,(o,u)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ps(e);for(const u of Object.keys(o))this.deactivateRouteAndItsChildren(o[u],i);if(r&&r.outlet){const u=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ps(e);for(const u of Object.keys(o))this.deactivateRouteAndItsChildren(o[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=ps(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Mp(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Uh(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(ks(i),i===o)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(h.contexts),u.attachRef=h.componentRef,u.route=h.route.value,u.outlet&&u.outlet.attach(h.componentRef,h.route.value),ks(h.route.value),this.activateChildRoutes(e,null,u.children)}else{const h=function la(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),m=h?h.module.componentFactoryResolver:null;u.attachRef=null,u.route=i,u.resolver=m,u.outlet&&u.outlet.activateWith(i,m),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class Qa{constructor(e,t){this.routes=e,this.module=t}}function Fi(n){return"function"==typeof n}function gi(n){return n instanceof No}const uc=Symbol("INITIAL_VALUE");function Ql(){return Kt(n=>function fd(...n){const e=(0,Jo.yG)(n),t=(0,Jo.jO)(n),{args:r,keys:i}=Zs(n);if(0===r.length)return(0,er.D)([],e);const o=new qr.y(function Pl(n,e,t=Ps.y){return r=>{Xo(e,()=>{const{length:i}=n,o=new Array(i);let u=i,h=i;for(let m=0;m<i;m++)Xo(e,()=>{const v=(0,er.D)(n[m],e);let T=!1;v.subscribe((0,Tn.x)(r,A=>{o[m]=A,T||(T=!0,h--),h||r.next(t(o.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>hd(i,u):Ps.y));return t?o.pipe($a(t)):o}(n.map(e=>e.pipe(ti(1),zn(uc)))).pipe(fi((e,t)=>{let r=!1;return t.reduce((i,o,u)=>i!==uc?i:(o===uc&&(r=!0),r||!1!==o&&u!==t.length-1&&!gi(o)?i:o),e)},uc),ur(e=>e!==uc),(0,bt.U)(e=>gi(e)?e:!0===e),ti(1)))}class qh{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new cc,this.attachRef=null}}class cc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new qh,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Ad=(()=>{class n{constructor(t,r,i,o,u){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=o||en,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const u=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,m=new Dv(t,h,this.location.injector);this.activated=this.location.createComponent(u,this.location.length,m),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(cc),c.Y36(c.s_b),c.Y36(c._Vd),c.$8M("name"),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Dv{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===no?this.route:e===cc?this.childContexts:this.parent.get(e,t)}}let Lp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},directives:[Ad],encapsulation:2}),n})();function Sd(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Xm(r,Vp(e,r))}}function Xm(n,e){n.children&&Sd(n.children,e)}function Vp(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function zh(n){const e=n.children&&n.children.map(zh),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==en&&(t.component=Lp),t}function mn(n){return n.outlet||en}function e_(n,e){const t=n.filter(r=>mn(r)===e);return t.push(...n.filter(r=>mn(r)!==e)),t}const Ja={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function dc(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Ja):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||Bh)(t,n,e);if(!o)return Object.assign({},Ja);const u={};tr(o.posParams,(m,v)=>{u[v]=m.path});const h=o.consumed.length>0?Object.assign(Object.assign({},u),o.consumed[o.consumed.length-1].parameters):u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:h,positionalParamSegments:null!==(r=o.posParams)&&void 0!==r?r:{}}}function xd(n,e,t,r,i="corrected"){if(t.length>0&&function Bp(n,e,t){return t.some(r=>Wh(n,e,r)&&mn(r)!==en)}(n,t,r)){const u=new Qt(e,function Av(n,e,t,r){const i={};i[en]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&mn(o)!==en){const u=new Qt([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[mn(o)]=u}return i}(n,e,r,new Qt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function Sv(n,e,t){return t.some(r=>Wh(n,e,r))}(n,t,r)){const u=new Qt(n.segments,function Up(n,e,t,r,i,o){const u={};for(const h of r)if(Wh(n,t,h)&&!i[mn(h)]){const m=new Qt([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===o?n.segments.length:e.length,u[mn(h)]=m}return Object.assign(Object.assign({},i),u)}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const o=new Qt(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function Wh(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function jp(n,e,t,r){return!!(mn(n)===r||r!==en&&Wh(e,t,n))&&("**"===n.path||dc(e,n,t).matched)}function xv(n,e,t){return 0===e.length&&!n.children[t]}class Xa{constructor(e){this.segmentGroup=e||null}}class Zr{constructor(e){this.urlTree=e}}function Jl(n){return ds(new Xa(n))}function Hp(n){return ds(new Zr(n))}class Zh{constructor(e,t,r,i,o){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=e.get(c.h0i)}apply(){const e=xd(this.urlTree.root,[],[],this.config).segmentGroup,t=new Qt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,en).pipe((0,bt.U)(o=>this.createUrlTree(Gp(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ni(o=>{if(o instanceof Zr)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof Xa?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,en).pipe((0,bt.U)(i=>this.createUrlTree(Gp(i),e.queryParams,e.fragment))).pipe(Ni(i=>{throw i instanceof Xa?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Qt([],{[en]:e}):e;return new No(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,bt.U)(o=>new Qt([],o))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,er.D)(i).pipe(Ga(o=>{const u=r.children[o],h=e_(t,o);return this.expandSegmentGroup(e,h,u,o).pipe((0,bt.U)(m=>({segment:m,outlet:o})))}),fi((o,u)=>(o[u.outlet]=u.segment,o),{}),function xp(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ur((i,o)=>n(i,o,r)):Ps.y,qa(1),t?md(e):Un(()=>new hs))}())}expandSegment(e,t,r,i,o,u){return(0,er.D)(r).pipe(Ga(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,o,u).pipe(Ni(v=>{if(v instanceof Xa)return It(null);throw v}))),za(h=>!!h),Ni((h,m)=>{if(h instanceof hs||"EmptyError"===h.name)return xv(t,i,o)?It(new Qt([],{})):Jl(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,o,u,h){return jp(i,t,o,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,o,u):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u):Jl(t):Jl(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Hp(o):this.lineralizeSegments(r,o).pipe((0,Wn.z)(u=>{const h=new Qt(u,{});return this.expandSegment(e,h,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u){const{matched:h,consumedSegments:m,remainingSegments:v,positionalParamSegments:T}=dc(t,i,o);if(!h)return Jl(t);const A=this.applyRedirectCommands(m,i.redirectTo,T);return i.redirectTo.startsWith("/")?Hp(A):this.lineralizeSegments(i,A).pipe((0,Wn.z)(O=>this.expandSegment(e,t,r,O.concat(v),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){if("**"===r.path)return r.loadChildren?(r._loadedConfig?It(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,bt.U)(A=>(r._loadedConfig=A,new Qt(i,{})))):It(new Qt(i,{}));const{matched:u,consumedSegments:h,remainingSegments:m}=dc(t,r,i);return u?this.getChildConfig(e,r,i).pipe((0,Wn.z)(T=>{const A=T.module,O=T.routes,{segmentGroup:F,slicedSegments:j}=xd(t,h,m,O),Q=new Qt(F.segments,F.children);if(0===j.length&&Q.hasChildren())return this.expandChildren(A,O,Q).pipe((0,bt.U)(et=>new Qt(h,et)));if(0===O.length&&0===j.length)return It(new Qt(h,{}));const fe=mn(r)===o;return this.expandSegment(A,Q,O,j,fe?en:o,!0).pipe((0,bt.U)(Je=>new Qt(h.concat(Je.segments),Je.children)))})):Jl(t)}getChildConfig(e,t,r){return t.children?It(new Qa(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?It(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Wn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,bt.U)(o=>(t._loadedConfig=o,o))):function mi(n){return ds(Po(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):It(new Qa([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?It(i.map(u=>{const h=e.get(u);let m;if(function lc(n){return n&&Fi(n.canLoad)}(h))m=h.canLoad(t,r);else{if(!Fi(h))throw new Error("Invalid CanLoad guard");m=h(t,r)}return yr(m)})).pipe(Ql(),(0,Oi.b)(u=>{if(!gi(u))return;const h=Po(`Redirecting to "${this.urlSerializer.serialize(u)}"`);throw h.url=u,h}),(0,bt.U)(u=>!0===u)):It(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return It(r);if(i.numberOfChildren>1||!i.children[en])return ds(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[en]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new No(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return tr(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[o]=t[h]}else r[o]=i}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let u={};return tr(t.children,(h,m)=>{u[m]=this.createSegmentGroup(e,h,r,i)}),new Qt(o,u)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Gp(n){const e={};for(const r of Object.keys(n.children)){const o=Gp(n.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function $p(n){if(1===n.numberOfChildren&&n.children[en]){const e=n.children[en];return new Qt(n.segments.concat(e.segments),e.children)}return n}(new Qt(n.segments,e))}class Kh{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Xl{constructor(e,t){this.component=e,this.route=t}}function Mv(n,e,t){const r=n._root;return tu(r,e?e._root:null,t,[r.value])}function eu(n,e,t){const r=function Pv(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function tu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=ps(e);return n.children.forEach(u=>{(function Nv(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,u=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(u&&o.routeConfig===u.routeConfig){const m=function i_(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Xs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Xs(n.url,e.url)||!Zi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Td(n,e)||!Zi(n.queryParams,e.queryParams);default:return!Td(n,e)}}(u,o,o.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new Kh(r)):(o.data=u.data,o._resolvedData=u._resolvedData),tu(n,e,o.component?h?h.children:null:t,r,i),m&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Xl(h.outlet.component,u))}else u&&nu(e,h,i),i.canActivateChecks.push(new Kh(r)),tu(n,null,o.component?h?h.children:null:t,r,i)})(u,o[u.value.outlet],t,r.concat([u.value]),i),delete o[u.value.outlet]}),tr(o,(u,h)=>nu(u,t.getContext(h),i)),i}function nu(n,e,t){const r=ps(n),i=n.value;tr(r,(o,u)=>{nu(o,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new Xl(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class o_{}function a_(n){return new qr.y(e=>e.error(n))}class qp{constructor(e,t,r,i,o,u){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=u}recognize(){const e=xd(this.urlTree.root,[],[],this.config.filter(u=>void 0===u.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,en);if(null===t)return null;const r=new Yl([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},en,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ki(r,t),o=new bd(this.url,i);return this.inheritParamsAndData(o._root),o}inheritParamsAndData(e){const t=e.value,r=Rp(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const o of Object.keys(t.children)){const u=t.children[o],h=e_(e,o),m=this.processSegmentGroup(h,u,o);if(null===m)return null;r.push(...m)}const i=Qh(r);return function zp(n){n.sort((e,t)=>e.value.outlet===en?-1:t.value.outlet===en?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const o of e){const u=this.processSegmentAgainstRoute(o,t,r,i);if(null!==u)return u}return xv(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!jp(e,t,r,i))return null;let o,u=[],h=[];if("**"===e.path){const F=r.length>0?Ju(r).parameters:{};o=new Yl(r,F,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,c_(e),mn(e),e.component,e,Vr(t),Li(t)+r.length,Uv(e))}else{const F=dc(t,e,r);if(!F.matched)return null;u=F.consumedSegments,h=F.remainingSegments,o=new Yl(u,F.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,c_(e),mn(e),e.component,e,Vr(t),Li(t)+u.length,Uv(e))}const m=function u_(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:v,slicedSegments:T}=xd(t,u,h,m.filter(F=>void 0===F.redirectTo),this.relativeLinkResolution);if(0===T.length&&v.hasChildren()){const F=this.processChildren(m,v);return null===F?null:[new ki(o,F)]}if(0===m.length&&0===T.length)return[new ki(o,[])];const A=mn(e)===i,O=this.processSegment(m,v,T,A?en:i);return null===O?null:[new ki(o,O)]}}function Vv(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Qh(n){const e=[],t=new Set;for(const r of n){if(!Vv(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Qh(r.children);e.push(new ki(r.value,i))}return e.filter(r=>!t.has(r))}function Vr(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Li(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function c_(n){return n.data||{}}function Uv(n){return n.resolve||{}}function ef(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Nd(n){return Kt(e=>{const t=n(e);return t?(0,er.D)(t).pipe((0,bt.U)(()=>e)):It(e)})}class f_ extends class h_{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const hc=new c.OlP("ROUTES");class ni{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,bt.U)(o=>{this.onLoadEndListener&&this.onLoadEndListener(t);const u=o.create(e);return new Qa(Wa(u.injector.get(hc,void 0,c.XFs.Self|c.XFs.Optional)).map(zh),u)}),Ni(o=>{throw t._loader$=void 0,o}));return t._loader$=new Ol(i,()=>new mr.x).pipe(Ys()),t._loader$}loadModuleFactory(e){return yr(e()).pipe((0,Wn.z)(t=>t instanceof c.YKP?It(t):(0,er.D)(this.compiler.compileModuleAsync(t))))}}class p_{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function fc(n){throw n}function ro(n,e,t){return e.parse("/")}function ru(n,e){return It(null)}const g_={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},nf={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ur=(()=>{class n{constructor(t,r,i,o,u,h,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new mr.x,this.errorHandler=fc,this.malformedUriErrorHandler=ro,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ru,afterPreactivation:ru},this.urlHandlingStrategy=new p_,this.routeReuseStrategy=new f_,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(c.h0i),this.console=u.get(c.c2e);const A=u.get(c.R0b);this.isNgZoneEnabled=A instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function Za(){return new No(new Qt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ni(u,h,O=>this.triggerEvent(new Ll(O)),O=>this.triggerEvent(new Vl(O))),this.routerState=Os(this.currentUrlTree,this.rootComponentType),this.transitions=new ei({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ur(i=>0!==i.id),(0,bt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Kt(i=>{let o=!1,u=!1;return It(i).pipe((0,Oi.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Kt(h=>{const m=this.browserUrlTree.toString(),v=!this.navigated||h.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return m_(h.source)&&(this.browserUrlTree=h.extractedUrl),It(h).pipe(Kt(A=>{const O=this.transitions.getValue();return r.next(new xo(A.id,this.serializeUrl(A.extractedUrl),A.source,A.restoredState)),O!==this.transitions.getValue()?ea.E:Promise.resolve(A)}),function n_(n,e,t,r){return Kt(i=>function Md(n,e,t,r,i){return new Zh(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,bt.U)(o=>Object.assign(Object.assign({},i),{urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Oi.b)(A=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:A.urlAfterRedirects})}),function Jh(n,e,t,r,i){return(0,Wn.z)(o=>function l_(n,e,t,r,i="emptyOnly",o="legacy"){try{const u=new qp(n,e,t,r,i,o).recognize();return null===u?a_(new o_):It(u)}catch(u){return a_(u)}}(n,e,o.urlAfterRedirects,t(o.urlAfterRedirects),r,i).pipe((0,bt.U)(u=>Object.assign(Object.assign({},o),{targetSnapshot:u}))))}(this.rootComponentType,this.config,A=>this.serializeUrl(A),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Oi.b)(A=>{if("eager"===this.urlUpdateStrategy){if(!A.extras.skipLocationChange){const F=this.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);this.setBrowserUrl(F,A)}this.browserUrlTree=A.urlAfterRedirects}const O=new kl(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);r.next(O)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:O,extractedUrl:F,source:j,restoredState:Q,extras:fe}=h,qe=new xo(O,this.serializeUrl(F),j,Q);r.next(qe);const Je=Os(F,this.rootComponentType).snapshot;return It(Object.assign(Object.assign({},h),{targetSnapshot:Je,urlAfterRedirects:F,extras:Object.assign(Object.assign({},fe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),ea.E}),Nd(h=>{const{targetSnapshot:m,id:v,extractedUrl:T,rawUrl:A,extras:{skipLocationChange:O,replaceUrl:F}}=h;return this.hooks.beforePreactivation(m,{navigationId:v,appliedUrlTree:T,rawUrlTree:A,skipLocationChange:!!O,replaceUrl:!!F})}),(0,Oi.b)(h=>{const m=new Fl(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(m)}),(0,bt.U)(h=>Object.assign(Object.assign({},h),{guards:Mv(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function Ov(n,e){return(0,Wn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:u}}=t;return 0===u.length&&0===o.length?It(Object.assign(Object.assign({},t),{guardsResult:!0})):function Rv(n,e,t,r){return(0,er.D)(n).pipe((0,Wn.z)(i=>function Lv(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?It(o.map(h=>{const m=eu(h,e,i);let v;if(function SA(n){return n&&Fi(n.canDeactivate)}(m))v=yr(m.canDeactivate(n,e,t,r));else{if(!Fi(m))throw new Error("Invalid CanDeactivate guard");v=yr(m(n,e,t,r))}return v.pipe(za())})).pipe(Ql()):It(!0)}(i.component,i.route,t,e,r)),za(i=>!0!==i,!0))}(u,r,i,n).pipe((0,Wn.z)(h=>h&&function Fs(n){return"boolean"==typeof n}(h)?function Yh(n,e,t,r){return(0,er.D)(e).pipe(Ga(i=>So(function kv(n,e){return null!==n&&e&&e(new ta(n)),It(!0)}(i.route.parent,r),function Pd(n,e){return null!==n&&e&&e(new _d(n)),It(!0)}(i.route,r),function Fv(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(u=>function r_(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>gn(()=>It(u.guards.map(m=>{const v=eu(m,u.node,t);let T;if(function Fp(n){return n&&Fi(n.canActivateChild)}(v))T=yr(v.canActivateChild(r,n));else{if(!Fi(v))throw new Error("Invalid CanActivateChild guard");T=yr(v(r,n))}return T.pipe(za())})).pipe(Ql())));return It(o).pipe(Ql())}(n,i.path,t),function s_(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return It(!0);const i=r.map(o=>gn(()=>{const u=eu(o,e,t);let h;if(function Dd(n){return n&&Fi(n.canActivate)}(u))h=yr(u.canActivate(e,n));else{if(!Fi(u))throw new Error("Invalid CanActivate guard");h=yr(u(e,n))}return h.pipe(za())}));return It(i).pipe(Ql())}(n,i.route,t))),za(i=>!0!==i,!0))}(r,o,n,e):It(h)),(0,bt.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Oi.b)(h=>{if(gi(h.guardsResult)){const v=Po(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw v.url=h.guardsResult,v}const m=new Vh(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(m)}),ur(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),Nd(h=>{if(h.guards.canActivateChecks.length)return It(h).pipe((0,Oi.b)(m=>{const v=new pi(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),Kt(m=>{let v=!1;return It(m).pipe(function d_(n,e){return(0,Wn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return It(t);let o=0;return(0,er.D)(i).pipe(Ga(u=>function ko(n,e,t,r){return function Xh(n,e,t,r){const i=ef(n);if(0===i.length)return It({});const o={};return(0,er.D)(i).pipe((0,Wn.z)(u=>function el(n,e,t,r){const i=eu(n,e,r);return yr(i.resolve?i.resolve(e,t):i(e,t))}(n[u],e,t,r).pipe((0,Oi.b)(h=>{o[u]=h}))),qa(1),(0,Wn.z)(()=>ef(o).length===i.length?It(o):ea.E))}(n._resolve,n,e,r).pipe((0,bt.U)(o=>(n._resolvedData=o,n.data=Object.assign(Object.assign({},n.data),Rp(n,t).resolve),null)))}(u.route,r,n,e)),(0,Oi.b)(()=>o++),qa(1),(0,Wn.z)(u=>o===i.length?It(t):ea.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Oi.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),(0,Oi.b)(m=>{const v=new Ns(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}))}),Nd(h=>{const{targetSnapshot:m,id:v,extractedUrl:T,rawUrl:A,extras:{skipLocationChange:O,replaceUrl:F}}=h;return this.hooks.afterPreactivation(m,{navigationId:v,appliedUrlTree:T,rawUrlTree:A,skipLocationChange:!!O,replaceUrl:!!F})}),(0,bt.U)(h=>{const m=function $h(n,e,t){const r=gs(n,e._root,t?t._root:void 0);return new sa(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:m})}),(0,Oi.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,bt.U)(r=>(new dr(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Oi.b)({next(){o=!0},complete(){o=!0}}),function Iv(n){return(0,_r.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var h;o||u||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===i.id&&(this.currentNavigation=null)}),Ni(h=>{if(u=!0,function Qu(n){return n&&n[Mo]}(h)){const m=gi(h.url);m||(this.navigated=!0,this.restoreHistory(i,!0));const v=new cr(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(v),m?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),A={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||m_(i.source)};this.scheduleNavigation(T,"imperative",null,A,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new Rl(i.id,this.serializeUrl(i.extractedUrl),h);r.next(m);try{i.resolve(this.errorHandler(h))}catch(v){i.reject(v)}}return ea.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const o={replaceUrl:!0},u=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(u){const m=Object.assign({},u);delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(o.state=m)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Sd(t),this.config=t.map(zh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:u,queryParamsHandling:h,preserveFragment:m}=r,v=i||this.routerState.root,T=m?this.currentUrlTree.fragment:u;let A=null;switch(h){case"merge":A=Object.assign(Object.assign({},this.currentUrlTree.queryParams),o);break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=o||null}return null!==A&&(A=this.removeEmptyProps(A)),function Oo(n,e,t,r,i){if(0===t.length)return Id(e.root,e.root,e.root,r,i);const o=function C(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new kp(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,u)=>{if("object"==typeof o&&null!=o){if(o.outlets){const h={};return tr(o.outlets,(m,v)=>{h[v]="string"==typeof m?m.split("/"):m}),[...i,{outlets:h}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===u?(o.split("/").forEach((h,m)=>{0==m&&"."===h||(0==m&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,o]},[]);return new kp(t,e,r)}(t);if(o.toRoot())return Id(e.root,e.root,new Qt([],{}),r,i);const u=function M(n,e,t){if(n.isAbsolute)return new I(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const o=t.snapshot._urlSegment;return new I(o,o===e.root,0)}const r=Ro(n.commands[0])?0:1;return function U(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new I(r,!1,i-o)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(o,e,n),h=u.processChildren?de(u.segmentGroup,u.index,o.commands):K(u.segmentGroup,u.index,o.commands);return Id(e.root,u.segmentGroup,h,r,i)}(v,this.currentUrlTree,t,A,null!=T?T:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=gi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Wp(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},g_):!1===r?Object.assign({},nf):r,gi(t))return Ka(this.currentUrlTree,t,i);const o=this.parseUrl(t);return Ka(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Zu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,o,u){var h,m;if(this.disposed)return Promise.resolve(!1);let v,T,A;u?(v=u.resolve,T=u.reject,A=u.promise):A=new Promise((j,Q)=>{v=j,T=Q});const O=++this.navigationId;let F;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),F=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?null!==(h=this.browserPageId)&&void 0!==h?h:0:(null!==(m=this.browserPageId)&&void 0!==m?m:0)+1):F=0,this.setTransition({id:O,targetPageId:F,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:o,resolve:v,reject:T,promise:A,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),A.catch(j=>Promise.reject(j))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),o=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,r=!1){var i,o;if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===u?this.currentUrlTree===(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(u)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new cr(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function m_(n){return"imperative"!==n}let iu=(()=>{class n{constructor(t,r,i,o,u){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=u,this.commands=null,this.onChanges=new mr.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:gc(this.skipLocationChange),replaceUrl:gc(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:gc(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ur),c.Y36(no),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})(),pc=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new mr.x,this.subscription=t.events.subscribe(o=>{o instanceof Zu&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,o,u){if(0!==t||r||i||o||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:gc(this.skipLocationChange),replaceUrl:gc(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:gc(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ur),c.Y36(no),c.Y36(ge))},n.\u0275dir=c.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&c.NdJ("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&t&&c.uIk("target",r.target)("href",r.href,c.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})();function gc(n){return""===n||!!n}class g{}class S{preload(e,t){return It(null)}}let N=(()=>{class n{constructor(t,r,i,o){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=new ni(i,r,m=>t.triggerEvent(new Ll(m)),m=>t.triggerEvent(new Vl(m)))}setUpPreloading(){this.subscription=this.router.events.pipe(ur(t=>t instanceof Zu),Ga(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(c.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r)if(o.loadChildren&&!o.canLoad&&o._loadedConfig){const u=o._loadedConfig;i.push(this.processRoutes(u.module,u.routes))}else o.loadChildren&&!o.canLoad?i.push(this.preloadConfig(t,o)):o.children&&i.push(this.processRoutes(t,o.children));return(0,er.D)(i).pipe((0,Wu.J)(),(0,bt.U)(o=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?It(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Wn.z)(o=>(r._loadedConfig=o,this.processRoutes(o.module,o.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ur),c.LFG(c.Sil),c.LFG(c.zs3),c.LFG(g))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),$=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof xo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Zu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ku&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Ku(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Se=new c.OlP("ROUTER_CONFIGURATION"),Ue=new c.OlP("ROUTER_FORROOT_GUARD"),tt=[Ee,{provide:eo,useClass:Pp},{provide:Ur,useFactory:function rf(n,e,t,r,i,o,u={},h,m){const v=new Ur(null,n,e,t,r,i,Wa(o));return h&&(v.urlHandlingStrategy=h),m&&(v.routeReuseStrategy=m),function Kp(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,v),u.enableTracing&&v.events.subscribe(T=>{var A,O;null===(A=console.group)||void 0===A||A.call(console,`Router Event: ${T.constructor.name}`),console.log(T.toString()),console.log(T),null===(O=console.groupEnd)||void 0===O||O.call(console)}),v},deps:[eo,cc,Ee,c.zs3,c.Sil,hc,Se,[class tf{},new c.FiY],[class Od{},new c.FiY]]},cc,{provide:no,useFactory:function mc(n){return n.routerState.root},deps:[Ur]},N,S,class E{preload(e,t){return t().pipe(Ni(()=>It(null)))}},{provide:Se,useValue:{enableTracing:!1}}];function st(){return new c.PXZ("Router",Ur)}let Fn=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[tt,kd(t),{provide:Ue,useFactory:Zp,deps:[[Ur,new c.FiY,new c.tp0]]},{provide:Se,useValue:r||{}},{provide:ge,useFactory:Rd,deps:[_e,[new c.tBr(ot),new c.FiY],Se]},{provide:$,useFactory:io,deps:[Ur,nd,Se]},{provide:g,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:S},{provide:c.PXZ,multi:!0,useFactory:st},[su,{provide:c.ip1,multi:!0,useFactory:Yp,deps:[su]},{provide:sf,useFactory:Fd,deps:[su]},{provide:c.tb,multi:!0,useExisting:sf}]]}}static forChild(t){return{ngModule:n,providers:[kd(t)]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ue,8),c.LFG(Ur,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function io(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new $(n,e,t)}function Rd(n,e,t={}){return t.useHash?new Fe(n,e):new ut(n,e)}function Zp(n){return"guarded"}function kd(n){return[{provide:c.deG,multi:!0,useValue:n},{provide:hc,multi:!0,useValue:n}]}let su=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new mr.x}appInitializer(){return this.injector.get(z,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),o=this.injector.get(Ur),u=this.injector.get(Se);return"disabled"===u.initialNavigation?(o.setUpLocationChangeListener(),r(!0)):"enabled"===u.initialNavigation||"enabledBlocking"===u.initialNavigation?(o.hooks.afterPreactivation=()=>this.initNavigation?It(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),o.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Se),i=this.injector.get(N),o=this.injector.get($),u=this.injector.get(Ur),h=this.injector.get(c.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&u.initialNavigation(),i.setUpPreloading(),o.init(),u.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Yp(n){return n.appInitializer.bind(n)}function Fd(n){return n.bootstrapListener.bind(n)}const sf=new c.OlP("Router Initializer");let jv=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),Ld=(()=>{class n extends jv{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const tl=new c.OlP("NgValueAccessor"),TC={provide:tl,useExisting:(0,c.Gpc)(()=>Vd),multi:!0},IC=new c.OlP("CompositionEventMode");let Vd=(()=>{class n extends jv{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function aN(){const n=V()?V().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(IC,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[c._Bn([TC]),c.qOj]}),n})();function ou(n){return null==n||0===n.length}function DC(n){return null!=n&&"number"==typeof n.length}const Yi=new c.OlP("NgValidators"),_i=new c.OlP("NgAsyncValidators"),xA=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class au{static min(e){return function AC(n){return e=>{if(ou(e.value)||ou(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function SC(n){return e=>{if(ou(e.value)||ou(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return xC(e)}static requiredTrue(e){return function MC(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Hv(n){return ou(n.value)||xA.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function PC(n){return e=>ou(e.value)||!DC(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function NC(n){return e=>DC(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function OC(n){if(!n)return Ut;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ou(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return RC(e)}static composeAsync(e){return nl(e)}}function xC(n){return ou(n.value)?{required:!0}:null}function Ut(n){return null}function $v(n){return null!=n}function Gv(n){const e=(0,c.QGY)(n)?(0,er.D)(n):n;return(0,c.CqO)(e),e}function qv(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Jp(n,e){return e.map(t=>t(n))}function zv(n){return n.map(e=>function ua(n){return!n.validate}(e)?e:t=>e.validate(t))}function RC(n){if(!n)return null;const e=n.filter($v);return 0==e.length?null:function(t){return qv(Jp(t,e))}}function Xp(n){return null!=n?RC(zv(n)):null}function nl(n){if(!n)return null;const e=n.filter($v);return 0==e.length?null:function(t){return function Bv(...n){const e=(0,Jo.jO)(n),{args:t,keys:r}=Zs(n),i=new qr.y(o=>{const{length:u}=t;if(!u)return void o.complete();const h=new Array(u);let m=u,v=u;for(let T=0;T<u;T++){let A=!1;(0,Ks.Xf)(t[T]).subscribe((0,Tn.x)(o,O=>{A||(A=!0,v--),h[T]=O},()=>m--,void 0,()=>{(!m||!A)&&(v||o.next(r?hd(r,h):h),o.complete())}))}});return e?i.pipe($a(e)):i}(Jp(t,e).map(Gv)).pipe((0,bt.U)(qv))}}function eg(n){return null!=n?nl(zv(n)):null}function Wv(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function y_(n){return n._rawValidators}function MA(n){return n._rawAsyncValidators}function v_(n){return n?Array.isArray(n)?n:[n]:[]}function Zv(n,e){return Array.isArray(n)?n.includes(e):n===e}function tg(n,e){const t=v_(e);return v_(n).forEach(i=>{Zv(t,i)||t.push(i)}),t}function ng(n,e){return v_(e).filter(t=>!Zv(n,t))}class w_{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Xp(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=eg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class rl extends w_{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Vi extends w_{get formDirective(){return null}get path(){return null}}class PA{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let rg=(()=>{class n extends PA{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(rl,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[c.qOj]}),n})(),of=(()=>{class n extends PA{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Vi,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[c.qOj]}),n})();function Yv(n,e){return[...e.path,n]}function C_(n,e){b_(n,e),e.valueAccessor.writeValue(n.value),function VC(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&UC(n,e)})}(n,e),function yc(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Qv(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&UC(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function kA(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ca(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),lf(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function af(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function b_(n,e){const t=y_(n);null!==e.validator?n.setValidators(Wv(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=MA(n);null!==e.asyncValidator?n.setAsyncValidators(Wv(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();af(e._rawValidators,i),af(e._rawAsyncValidators,i)}function lf(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=y_(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(u=>u!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const i=MA(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(u=>u!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}const r=()=>{};return af(e._rawValidators,r),af(e._rawAsyncValidators,r),t}function UC(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Jv(n,e){b_(n,e)}function e0(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function Ud(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function sg(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===Vd?t=o:function ig(n){return Object.getPrototypeOf(n.constructor)===Ld}(o)?r=o:i=o}),i||r||t||null}function vc(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const og="VALID",ag="INVALID",Bd="PENDING",jd="DISABLED";function I_(n){return(s0(n)?n.validators:n)||null}function lg(n){return Array.isArray(n)?Xp(n):n||null}function n0(n,e){return(s0(e)?e.asyncValidators:n)||null}function r0(n){return Array.isArray(n)?eg(n):n||null}function s0(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const D_=n=>n instanceof a0,ug=n=>n instanceof A_,jC=n=>n instanceof VA;function o0(n){return D_(n)?n.value:n.getRawValue()}function HC(n,e){const t=ug(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new c.vHH(1e3,"");if(!r[e])throw new c.vHH(1001,"")}function $C(n,e){ug(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new c.vHH(1002,"")})}class ms{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=lg(this._rawValidators),this._composedAsyncValidatorFn=r0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===og}get invalid(){return this.status===ag}get pending(){return this.status==Bd}get disabled(){return this.status===jd}get enabled(){return this.status!==jd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=lg(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=r0(e)}addValidators(e){this.setValidators(tg(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(tg(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ng(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ng(e,this._rawAsyncValidators))}hasValidator(e){return Zv(this._rawValidators,e)}hasAsyncValidator(e){return Zv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Bd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=jd,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=og,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===og||this.status===Bd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?jd:og}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Bd,this._hasOwnPendingAsyncValidator=!0;const t=Gv(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function t0(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=ug(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:jC(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?jd:this.errors?ag:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Bd)?Bd:this._anyControlsHaveStatus(ag)?ag:og}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){s0(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class a0 extends ms{constructor(e=null,t,r){super(I_(t),n0(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),s0(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){vc(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){vc(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class A_ extends ms{constructor(e,t,r){super(I_(t),n0(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){$C(this,e),Object.keys(e).forEach(r=>{HC(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=o0(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class VA extends ms{constructor(e,t,r){super(I_(t),n0(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){$C(this,e),e.forEach((r,i)=>{HC(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>o0(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const mN={provide:Vi,useExisting:(0,c.Gpc)(()=>cf)},uf=(()=>Promise.resolve(null))();let cf=(()=>{class n extends Vi{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new c.vpe,this.form=new A_({},Xp(t),eg(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){uf.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),C_(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){uf.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){uf.then(()=>{const r=this._findContainer(t.path),i=new A_({});Jv(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){uf.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){uf.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Ud(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Yi,10),c.Y36(_i,10))},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([mN]),c.qOj]}),n})();const jA={provide:rl,useExisting:(0,c.Gpc)(()=>S_)},u0=(()=>Promise.resolve(null))();let S_=(()=>{class n extends rl{constructor(t,r,i,o,u){super(),this._changeDetectorRef=u,this.control=new a0,this._registered=!1,this.update=new c.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=sg(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),e0(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){C_(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){u0.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;u0.then(()=>{var o;i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),null===(o=this._changeDetectorRef)||void 0===o||o.markForCheck()})}_getPath(t){return this._parent?Yv(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Vi,9),c.Y36(Yi,10),c.Y36(_i,10),c.Y36(tl,10),c.Y36(c.sBO,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([jA]),c.qOj,c.TTD]}),n})(),df=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const zC={provide:tl,useExisting:(0,c.Gpc)(()=>x_),multi:!0};let x_=(()=>{class n extends Ld{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},features:[c._Bn([zC]),c.qOj]}),n})(),M_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const d0=new c.OlP("NgModelWithFormControlWarning"),h0={provide:Vi,useExisting:(0,c.Gpc)(()=>cg)};let cg=(()=>{class n extends Vi{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(lf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return C_(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ca(t.control||null,t,!1),vc(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,Ud(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(ca(r||null,t),D_(i)&&(C_(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);Jv(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function FA(n,e){return lf(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){b_(this.form,this),this._oldForm&&lf(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Yi,10),c.Y36(_i,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([h0]),c.qOj,c.TTD]}),n})();const g0={provide:rl,useExisting:(0,c.Gpc)(()=>dg)};let dg=(()=>{class n extends rl{constructor(t,r,i,o,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new c.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=sg(0,o)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),e0(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Yv(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(c.Y36(Vi,13),c.Y36(Yi,10),c.Y36(_i,10),c.Y36(tl,10),c.Y36(d0,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[c._Bn([g0]),c.qOj,c.TTD]}),n})(),ff=(()=>{class n{constructor(){this._validator=Ut}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Ut,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,features:[c.TTD]}),n})();const YA={provide:Yi,useExisting:(0,c.Gpc)(()=>fg),multi:!0};let fg=(()=>{class n extends ff{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function KA(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>xC}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[c._Bn([YA]),c.qOj]}),n})(),rb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[M_]]}),n})(),JA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[rb]}),n})(),ib=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:d0,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[rb]}),n})(),Fo=(()=>{class n{group(t,r=null){const i=this._reduceControls(t);let h,o=null,u=null;return null!=r&&(function XA(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(o=null!=r.validators?r.validators:null,u=null!=r.asyncValidators?r.asyncValidators:null,h=null!=r.updateOn?r.updateOn:void 0):(o=null!=r.validator?r.validator:null,u=null!=r.asyncValidator?r.asyncValidator:null)),new A_(i,{asyncValidators:u,updateOn:h,validators:o})}control(t,r,i){return new a0(t,r,i)}array(t,r,i){const o=t.map(u=>this._createControl(u));return new VA(o,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return D_(t)||ug(t)||jC(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:ib}),n})();var mf=L(6451),gg=L(5363),ob=L(6063);class ab extends mr.x{constructor(e=1/0,t=1/0,r=ob.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:u}=this;t||(r.push(e),!i&&r.push(o.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let u=0;u<o.length&&!e.closed;u+=r?1:2)e.next(o[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const u=t.now();let h=0;for(let m=1;m<r.length&&r[m]<=u;m+=2)h=m;h&&r.splice(0,h+1)}}}var lb=L(3099);function ub(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,lb.B)({connector:()=>new ab(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function cb(n,e){return(0,cs.m)(e)?Kt(()=>n,e):Kt(()=>n)}var D0=L(9468),Yn=L(4976),Ls=L(2011);L(259);var Ce=L(5861),so=L(6881),cu=L(4859),k=L(2090),da=L(1877);const S0=new Map,hb={activated:!1,tokenObservers:[]},sS={initialized:!1,enabled:!1};function xr(n){return S0.get(n)||Object.assign({},hb)}function Hd(){return sS}class sl{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ce.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function yg(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const vr=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Vs(n){if(!xr(n).activated)throw vr.create("use-before-activation",{appName:n.name})}function hu(n,e){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,Ce.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const A=yield i.getHeartbeatsHeader();A&&(r["X-Firebase-Client"]=A)}const o={method:"POST",body:JSON.stringify(e),headers:r};let u,h;try{u=yield fetch(n,o)}catch(A){throw vr.create("fetch-network-error",{originalErrorMessage:null==A?void 0:A.message})}if(200!==u.status)throw vr.create("fetch-status-error",{httpStatus:u.status});try{h=yield u.json()}catch(A){throw vr.create("fetch-parse-error",{originalErrorMessage:null==A?void 0:A.message})}const m=h.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw vr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const v=1e3*Number(m[1]),T=Date.now();return{token:h.token,expireTimeMillis:T+v,issuedAtTimeMillis:T}})).apply(this,arguments)}function Gd(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const ol="firebase-app-check-store";let wg=null;function P0(){return wg||(wg=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(vr.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(ol,{keyPath:"compositeKey"})}}catch(t){e(vr.create("storage-open",{originalErrorMessage:null==t?void 0:t.message}))}}),wg)}function R_(){return(R_=(0,Ce.Z)(function*(n,e){const r=(yield P0()).transaction(ol,"readwrite"),o=r.objectStore(ol).put({compositeKey:n,value:e});return new Promise((u,h)=>{o.onsuccess=m=>{u()},r.onerror=m=>{var v;h(vr.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})})).apply(this,arguments)}const Eg=new da.Yd("@firebase/app-check");function R0(n,e){return(0,k.hl)()?function gb(n,e){return function N0(n,e){return R_.apply(this,arguments)}(function vb(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Eg.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function F_(){return Hd().enabled}function F0(){return L0.apply(this,arguments)}function L0(){return(L0=(0,Ce.Z)(function*(){const n=Hd();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const uS={error:"UNKNOWN_ERROR"};function V0(n){return k.US.encodeString(JSON.stringify(n),!1)}function Ef(n){return U0.apply(this,arguments)}function U0(){return(U0=(0,Ce.Z)(function*(n,e=!1){const t=n.app;Vs(t);const r=xr(t);let o,i=r.token;if(i&&!ha(i)&&(r.token=void 0,i=void 0),!i){const m=yield r.cachedTokenPromise;m&&(ha(m)?i=m:yield R0(t,void 0))}if(!e&&i&&ha(i))return{token:i.token};let h,u=!1;if(F_()){r.exchangeTokenPromise||(r.exchangeTokenPromise=hu(Gd(t,yield F0()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),u=!0);const m=yield r.exchangeTokenPromise;return yield R0(t,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),u=!0),i=yield xr(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?Eg.warn(m.message):Eg.error(m),o=m}return i?o?h=ha(i)?{token:i.token,internalError:o}:Ib(o):(h={token:i.token},r.token=i,yield R0(t,i)):h=Ib(o),u&&Tb(t,h),h})).apply(this,arguments)}function Cb(){return(Cb=(0,Ce.Z)(function*(n){const e=n.app;Vs(e);const{provider:t}=xr(e);if(F_()){const r=yield F0(),{token:i}=yield hu(Gd(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function B0(n,e){const t=xr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function j0(n){const{app:e}=n,t=xr(e);let r=t.tokenRefresher;r||(r=function AN(n){const{app:e}=n;return new sl((0,Ce.Z)(function*(){let r;if(r=xr(e).token?yield Ef(n,!0):yield Ef(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=xr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Tb(n,e){const t=xr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function ha(n){return n.expireTimeMillis-Date.now()>0}function Ib(n){return{token:V0(uS),error:n}}class Db{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=xr(this.app);for(const t of e)B0(this.app,t.next);return Promise.resolve()}}const kb="app-check-internal";!function B_(){(0,so._registerComponent)(new cu.wA("app-check",n=>function dS(n,e){return new Db(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(kb).initialize()})),(0,so._registerComponent)(new cu.wA(kb,n=>function Ab(n){return{getToken:e=>Ef(n,e),getLimitedUseToken:()=>function cS(n){return Cb.apply(this,arguments)}(n),addTokenListener:e=>function bb(n,e,t,r){const{app:i}=n,o=xr(i);if(o.tokenObservers=[...o.tokenObservers,{next:t,error:r,type:e}],o.token&&ha(o.token)){const h=o.token;Promise.resolve().then(()=>{t({token:h.token}),j0(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>j0(n))}(n,"INTERNAL",e),removeTokenListener:e=>B0(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,so.registerVersion)("@firebase/app-check","0.8.0")}();class bg{constructor(){return(0,Yn.vb)("app-check")}}"undefined"!=typeof window&&window;var Z0=L(9260);const $_=new c.OlP("angularfire2.auth.use-emulator"),G_=new c.OlP("angularfire2.auth.settings"),q_=new c.OlP("angularfire2.auth.tenant-id"),z_=new c.OlP("angularfire2.auth.langugage-code"),W_=new c.OlP("angularfire2.auth.use-device-language"),Z_=new c.OlP("angularfire.auth.persistence"),$b=(n,e,t,r,i,o,u,h)=>(0,Ls.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,o&&m.useDeviceLanguage(),u)for(const[v,T]of Object.entries(u))m.settings[v]=T;return h&&m.setPersistence(h),m},[t,r,i,o,u,h]);let qd=(()=>{class n{constructor(t,r,i,o,u,h,m,v,T,A,O,F){const j=new mr.x,Q=It(void 0).pipe((0,gg.Q)(u.outsideAngular),Kt(()=>o.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,2644)))),(0,bt.U)(()=>(0,Ls.on)(t,o,r)),(0,bt.U)(fe=>$b(fe,o,h,v,T,A,m,O)),ub({bufferSize:1,refCount:!1}));if(Ou(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=It(null);else{Q.pipe(za()).subscribe();const qe=Q.pipe(Kt(pt=>pt.getRedirectResult().then(Wt=>Wt,()=>null)),Yn.iC,ub({bufferSize:1,refCount:!1})),Je=Q.pipe(Kt(pt=>new qr.y(Wt=>({unsubscribe:o.runOutsideAngular(()=>pt.onAuthStateChanged(Zt=>Wt.next(Zt),Zt=>Wt.error(Zt),()=>Wt.complete()))})))),et=Q.pipe(Kt(pt=>new qr.y(Wt=>({unsubscribe:o.runOutsideAngular(()=>pt.onIdTokenChanged(Zt=>Wt.next(Zt),Zt=>Wt.error(Zt),()=>Wt.complete()))}))));this.authState=qe.pipe(cb(Je),(0,D0.R)(u.outsideAngular),(0,gg.Q)(u.insideAngular)),this.user=qe.pipe(cb(et),(0,D0.R)(u.outsideAngular),(0,gg.Q)(u.insideAngular)),this.idToken=this.user.pipe(Kt(pt=>pt?(0,er.D)(pt.getIdToken()):It(null))),this.idTokenResult=this.user.pipe(Kt(pt=>pt?(0,er.D)(pt.getIdTokenResult()):It(null))),this.credential=(0,mf.T)(qe,j,this.authState.pipe(ur(pt=>!pt))).pipe((0,bt.U)(pt=>(null==pt?void 0:pt.user)?pt:null),(0,D0.R)(u.outsideAngular),(0,gg.Q)(u.insideAngular))}return(0,Ls.pX)(this,Q,o,{spy:{apply:(fe,qe,Je)=>{(fe.startsWith("signIn")||fe.startsWith("createUser"))&&Je.then(et=>j.next(et))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ls.Dh),c.LFG(Ls.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Yn.HU),c.LFG($_,8),c.LFG(G_,8),c.LFG(q_,8),c.LFG(z_,8),c.LFG(W_,8),c.LFG(Z_,8),c.LFG(bg,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var Tg=L(4986);function K0(){return(0,_r.e)((n,e)=>{let t,r=!1;n.subscribe((0,Tn.x)(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Kr(n,e=Ps.y){return n=null!=n?n:Gb,(0,_r.e)((t,r)=>{let i,o=!0;t.subscribe((0,Tn.x)(r,u=>{const h=e(u);(o||!n(i,h))&&(o=!1,i=h,r.next(u))}))})}function Gb(n,e){return n===e}L(2644);var Xe,qb=L(3942),zb="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},fa={},K_=K_||{},Ft=zb||self;function Y_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ig(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Y0="closure_uid_"+(1e9*Math.random()>>>0),Zb=0;function kN(n,e,t){return n.call.apply(n.bind,arguments)}function Q0(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function yi(n,e,t){return(yi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?kN:Q0).apply(null,arguments)}function oo(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function vi(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,o){for(var u=Array(arguments.length-2),h=2;h<arguments.length;h++)u[h-2]=arguments[h];return e.prototype[i].apply(r,u)}}function fu(){this.s=this.s,this.o=this.o}fu.prototype.s=!1,fu.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Wb(n){Object.prototype.hasOwnProperty.call(n,Y0)&&n[Y0]||(n[Y0]=++Zb)}(this)},fu.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Lo=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function ao(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function J0(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Y_(r)){const i=n.length||0,o=r.length||0;n.length=i+o;for(let u=0;u<o;u++)n[i+u]=r[u]}else n.push(r)}}function Ui(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ui.prototype.h=function(){this.defaultPrevented=!0};var bS=function(){if(!Ft.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ft.addEventListener("test",()=>{},e),Ft.removeEventListener("test",()=>{},e)}catch(t){}return n}();function Dg(n){return/^[\s\xa0]*$/.test(n)}function Q_(){var n=Ft.navigator;return n&&(n=n.userAgent)?n:""}function ll(n){return-1!=Q_().indexOf(n)}function Ag(n){return Ag[" "](n),n}Ag[" "]=function(){};var ey,n,TS=ll("Opera"),zd=ll("Trident")||ll("MSIE"),Kb=ll("Edge"),J_=Kb||zd,X0=ll("Gecko")&&!(-1!=Q_().toLowerCase().indexOf("webkit")&&!ll("Edge"))&&!(ll("Trident")||ll("MSIE"))&&!ll("Edge"),X_=-1!=Q_().toLowerCase().indexOf("webkit")&&!ll("Edge");function Yb(){var n=Ft.document;return n?n.documentMode:void 0}e:{var ty="",xg=(n=Q_(),X0?/rv:([^\);]+)(\)|;)/.exec(n):Kb?/Edge\/([\d\.]+)/.exec(n):zd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):X_?/WebKit\/(\S+)/.exec(n):TS?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(xg&&(ty=xg?xg[1]:""),zd){var Tf=Yb();if(null!=Tf&&Tf>parseFloat(ty)){ey=String(Tf);break e}}ey=ty}var Qb=Ft.document&&zd&&(Yb()||parseInt(ey,10))||void 0;function If(n,e){if(Ui.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(X0){e:{try{Ag(e.nodeName);var i=!0;break e}catch(o){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Jb[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&If.$.h.call(this)}}vi(If,Ui);var Jb={2:"touch",3:"pen",4:"mouse"};If.prototype.h=function(){If.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Df="closure_listenable_"+(1e6*Math.random()|0),Xb=0;function eT(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++Xb,this.fa=this.ia=!1}function ry(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function tw(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function tT(n){const e={};for(const t in n)e[t]=n[t];return e}const nT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rT(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<nT.length;o++)t=nT[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function iy(n){this.src=n,this.g={},this.h=0}function nw(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=Lo(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(ry(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function rw(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.fa&&o.listener==e&&o.capture==!!t&&o.la==r)return i}return-1}iy.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var u=rw(n,e,r,i);return-1<u?(e=n[u],t||(e.ia=!1)):((e=new eT(e,this.src,o,!!r,i)).ia=t,n.push(e)),e};var iw="closure_lm_"+(1e6*Math.random()|0),sw={};function iT(n,e,t,r,i){if(r&&r.once)return oT(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)iT(n,e[o],t,r,i);return null}return t=ay(t),n&&n[Df]?n.O(e,t,Ig(r)?!!r.capture:!!r,i):sT(n,e,t,!1,r,i)}function sT(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var u=Ig(i)?!!i.capture:!!i,h=sy(n);if(h||(n[iw]=h=new iy(n)),(t=h.add(e,t,r,u,o)).proxy)return t;if(r=function DS(){const e=uT;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)bS||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(lT(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function oT(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)oT(n,e[o],t,r,i);return null}return t=ay(t),n&&n[Df]?n.P(e,t,Ig(r)?!!r.capture:!!r,i):sT(n,e,t,!0,r,i)}function aT(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)aT(n,e[o],t,r,i);else r=Ig(r)?!!r.capture:!!r,t=ay(t),n&&n[Df]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=rw(o=n.g[e],t,r,i))&&(ry(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=sy(n))&&(e=n.g[e.toString()],n=-1,e&&(n=rw(e,t,r,i)),(t=-1<n?e[n]:null)&&ow(t))}function ow(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Df])nw(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(lT(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=sy(e))?(nw(t,n),0==t.h&&(t.src=null,e[iw]=null)):ry(n)}}}function lT(n){return n in sw?sw[n]:sw[n]="on"+n}function uT(n,e){if(n.fa)n=!0;else{e=new If(e,this);var t=n.listener,r=n.la||n.src;n.ia&&ow(n),n=t.call(r,e)}return n}function sy(n){return(n=n[iw])instanceof iy?n:null}var oy="__closure_events_fn_"+(1e9*Math.random()>>>0);function ay(n){return"function"==typeof n?n:(n[oy]||(n[oy]=function(e){return n.handleEvent(e)}),n[oy])}function ri(){fu.call(this),this.i=new iy(this),this.S=this,this.J=null}function wi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Ui(e,n);else if(e instanceof Ui)e.target=e.target||n;else{var i=e;rT(e=new Ui(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var u=e.g=t[o];i=Mg(u,r,!0,e)&&i}if(i=Mg(u=e.g=n,r,!0,e)&&i,i=Mg(u,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Mg(u=e.g=t[o],r,!1,e)&&i}function Mg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var u=e[o];if(u&&!u.fa&&u.capture==t){var h=u.listener,m=u.la||u.src;u.ia&&nw(n.i,u),i=!1!==h.call(m,r)&&i}}return i&&!r.defaultPrevented}vi(ri,fu),ri.prototype[Df]=!0,ri.prototype.removeEventListener=function(n,e,t,r){aT(this,n,e,t,r)},ri.prototype.N=function(){if(ri.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)ry(t[r]);delete n.g[e],n.h--}}this.J=null},ri.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ri.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var ly=Ft.JSON.stringify;function dT(){var n=hT;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var bc=new class cT{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new AS,n=>n.reset());class AS{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function SS(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Af(n){Ft.setTimeout(()=>{throw n},0)}let uy,Wd=!1,hT=new class aw{constructor(){this.h=this.g=null}add(e,t){const r=bc.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},lw=()=>{const n=Ft.Promise.resolve(void 0);uy=()=>{n.then(fT)}};var fT=()=>{for(var n;n=dT();){try{n.h.call(n.g)}catch(t){Af(t)}var e=bc;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Wd=!1};function uw(n,e){ri.call(this),this.h=n||1,this.g=e||Ft,this.j=yi(this.qb,this),this.l=Date.now()}function St(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function cw(n,e,t){if("function"==typeof n)t&&(n=yi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=yi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ft.setTimeout(n,e||0)}function pT(n){n.g=cw(()=>{n.g=null,n.i&&(n.i=!1,pT(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}vi(uw,ri),(Xe=uw.prototype).ga=!1,Xe.T=null,Xe.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),wi(this,"tick"),this.ga&&(St(this),this.start()))}},Xe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xe.N=function(){uw.$.N.call(this),St(this),delete this.g};class xS extends fu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:pT(this)}N(){super.N(),this.g&&(Ft.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tc(n){fu.call(this),this.h=n,this.g={}}vi(Tc,fu);var gT=[];function Pg(n,e,t,r){Array.isArray(t)||(t&&(gT[0]=t.toString()),t=gT);for(var i=0;i<t.length;i++){var o=iT(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function Ng(n){tw(n.g,function(e,t){this.g.hasOwnProperty(t)&&ow(e)},n),n.g={}}function rr(){this.g=!0}function Sf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function _T(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var u=1;u<i.length;u++)i[u]=""}}}return ly(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}Tc.prototype.N=function(){Tc.$.N.call(this),Ng(this)},Tc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},rr.prototype.Ea=function(){this.g=!1},rr.prototype.info=function(){};var Ic={},dw=null;function Og(){return dw=dw||new ri}function yT(n){Ui.call(this,Ic.Ta,n)}function Rg(n){const e=Og();wi(e,new yT(e))}function vT(n,e){Ui.call(this,Ic.STAT_EVENT,n),this.stat=e}function ii(n){const e=Og();wi(e,new vT(e,n))}function wT(n,e){Ui.call(this,Ic.Ua,n),this.size=e}function kg(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ft.setTimeout(function(){n()},e)}Ic.Ta="serverreachability",vi(yT,Ui),Ic.STAT_EVENT="statevent",vi(vT,Ui),Ic.Ua="timingevent",vi(wT,Ui);var cy={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Fg={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function dy(){}function fw(){}dy.prototype.h=null;var pw,Lg={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Zd(){Ui.call(this,"d")}function Kd(){Ui.call(this,"c")}function hy(){}function Vg(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Tc(this),this.P=ET,this.V=new uw(n=J_?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new gw}function gw(){this.i=null,this.g="",this.h=!1}vi(Zd,Ui),vi(Kd,Ui),vi(hy,dy),hy.prototype.g=function(){return new XMLHttpRequest},hy.prototype.i=function(){return{}},pw=new hy;var ET=45e3,fy={},py={};function gy(n,e,t){n.L=1,n.v=yy(pu(e)),n.s=t,n.S=!0,CT(n,null)}function CT(n,e){n.G=Date.now(),my(n),n.A=pu(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),OT(t.i,"t",r),n.C=0,t=n.l.J,n.h=new gw,n.g=YT(n.l,t?e:null,!n.s),0<n.O&&(n.M=new xS(yi(n.Pa,n,n.g),n.O)),Pg(n.U,n.g,"readystatechange",n.nb),e=n.I?tT(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Rg(),function FN(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var u="",h=o.split("&"),m=0;m<h.length;m++){var v=h[m].split("=");if(1<v.length){var T=v[0];v=v[1];var A=T.split("_");u=2<=A.length&&"type"==A[1]?u+(T+"=")+v+"&":u+(T+"=redacted&")}}else u=null;else u=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.W,n.s)}function bT(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function PS(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=LN(n,t),i==py){4==e&&(n.o=4,ii(14),r=!1),Sf(n.j,n.m,null,"[Incomplete Response]");break}if(i==fy){n.o=4,ii(15),Sf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Sf(n.j,n.m,i,null),mw(n,i)}bT(n)&&i!=py&&i!=fy&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ii(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Iw(e),e.M=!0,ii(11))):(Sf(n.j,n.m,t,"[Invalid Chunked Response]"),Yd(n),Dc(n))}function LN(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?py:(t=Number(e.substring(t,r)),isNaN(t)?fy:(r+=1)+t>e.length?py:(e=e.slice(r,r+t),n.C=r+t,e))}function my(n){n.Y=Date.now()+n.P,NS(n,n.P)}function NS(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=kg(yi(n.lb,n),e)}function Ug(n){n.B&&(Ft.clearTimeout(n.B),n.B=null)}function Dc(n){0==n.l.H||n.J||WT(n.l,n)}function Yd(n){Ug(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,St(n.V),Ng(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function mw(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||yw(t.i,n)))if(!n.K&&yw(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch(v){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=kg(yi(t.ib,t),6e3));else{if(t.g){if(!(t.g.G+3e3<n.G))break e;Kg(t),Cy(t)}th(t),ii(18)}if(1>=LT(t.i)&&t.oa){try{t.oa()}catch(v){}t.oa=void 0}}else mu(t,11)}else if((n.K||t.g==n)&&Kg(t),!Dg(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.V=v[0],v=v[1],2==t.H)if("c"==v[0]){t.K=v[1],t.pa=v[2];const T=v[3];null!=T&&(t.ra=T,t.l.info("VER="+t.ra));const A=v[4];null!=A&&(t.Ga=A,t.l.info("SVER="+t.Ga));const O=v[5];null!=O&&"number"==typeof O&&0<O&&(t.L=r=1.5*O,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const F=n.g;if(F){const j=F.g?F.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(j){var o=r.i;o.g||-1==j.indexOf("spdy")&&-1==j.indexOf("quic")&&-1==j.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(vw(o,o.h),o.h=null))}if(r.F){const Q=F.g?F.g.getResponseHeader("X-HTTP-Session-Id"):null;Q&&(r.Da=Q,In(r.I,r.F,Q))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var u=n;if((r=t).wa=qS(r,r.J?r.pa:null,r.Y),u.K){VT(r.i,u);var h=u,m=r.L;m&&h.setTimeout(m),h.B&&(Ug(h),my(h)),r.g=u}else Zg(r);0<t.j.length&&by(t)}else"stop"!=v[0]&&"close"!=v[0]||mu(t,7);else 3==t.H&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?mu(t,7):Ey(t):"noop"!=v[0]&&t.h&&t.h.Aa(v),t.A=0)}Rg()}catch(v){}}function IT(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Y_(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Bg(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(Y_(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function TT(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Y_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}(Xe=Vg.prototype).setTimeout=function(n){this.P=n},Xe.nb=function(n){n=n.target;const e=this.M;e&&3==ul(n)?e.l():this.Pa(n)},Xe.Pa=function(n){try{if(n==this.g)e:{const T=ul(this.g);var e=this.g.Ia();if(this.g.da(),!(3>T)&&(3!=T||J_||this.g&&(this.h.h||this.g.ja()||zg(this.g)))){this.J||4!=T||7==e||Rg(),Ug(this);var t=this.g.da();this.ca=t;t:if(bT(this)){var r=zg(this.g);n="";var i=r.length,o=4==ul(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Yd(this),Dc(this);var u="";break t}this.h.i=new Ft.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==t,function mT(n,e,t,r,i,o,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+u})}(this.j,this.u,this.A,this.m,this.W,T,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Dg(h)){var v=h;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,ii(12),Yd(this),Dc(this);break e}Sf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mw(this,t)}this.S?(PS(this,T,u),J_&&this.i&&3==T&&(Pg(this.U,this.V,"tick",this.mb),this.V.start())):(Sf(this.j,this.m,u,null),mw(this,u)),4==T&&Yd(this),this.i&&!this.J&&(4==T?WT(this.l,this):(this.i=!1,my(this)))}else(function HS(n){const e={};n=(n.g&&2<=ul(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Dg(n[r]))continue;var t=SS(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const o=e[i]||[];e[i]=o,o.push(t)}!function IS(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<u.indexOf("Unknown SID")?(this.o=3,ii(12)):(this.o=0,ii(13)),Yd(this),Dc(this)}}}catch(T){}},Xe.mb=function(){if(this.g){var n=ul(this.g),e=this.g.ja();this.C<e.length&&(Ug(this),PS(this,n,e),this.i&&4!=n&&my(this))}},Xe.cancel=function(){this.J=!0,Yd(this)},Xe.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function MS(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Rg(),ii(17)),Yd(this),this.o=2,Dc(this)):NS(this,this.Y-n)};var DT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qd(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Qd){this.h=n.h,jg(this,n.j),this.s=n.s,this.g=n.g,_y(this,n.m),this.l=n.l;var e=n.i,t=new Mf;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),AT(this,t),this.o=n.o}else n&&(e=String(n).match(DT))?(this.h=!1,jg(this,e[1]||"",!0),this.s=xf(e[2]||""),this.g=xf(e[3]||"",!0),_y(this,e[4]),this.l=xf(e[5]||"",!0),AT(this,e[6]||"",!0),this.o=xf(e[7]||"")):(this.h=!1,this.i=new Mf(null,this.h))}function pu(n){return new Qd(n)}function jg(n,e,t){n.j=t?xf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function _y(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function AT(n,e,t){e instanceof Mf?(n.i=e,function FS(n,e){e&&!n.j&&(gu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(PT(this,r),OT(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Hg(e,_w)),n.i=new Mf(e,n.h))}function In(n,e,t){n.i.set(e,t)}function yy(n){return In(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function xf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Hg(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,ST),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ST(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Qd.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Hg(e,xT,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Hg(e,xT,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Hg(t,"/"==t.charAt(0)?RS:MT,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Hg(t,kS)),n.join("")};var xT=/[#\/\?@]/g,MT=/[#\?:]/g,RS=/[#\?]/g,_w=/[#\?@]/g,kS=/#/g;function Mf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function gu(n){n.g||(n.g=new Map,n.h=0,n.i&&function OS(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function PT(n,e){gu(n),e=Ac(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function NT(n,e){return gu(n),e=Ac(n,e),n.g.has(e)}function OT(n,e,t){PT(n,e),0<t.length&&(n.i=null,n.g.set(Ac(n,e),ao(t)),n.h+=t.length)}function Ac(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function kT(n){this.l=n||LS,n=Ft.PerformanceNavigationTiming?0<(n=Ft.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ft.g&&Ft.g.Ka&&Ft.g.Ka()&&Ft.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Xe=Mf.prototype).add=function(n,e){gu(this),this.i=null,n=Ac(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Xe.forEach=function(n,e){gu(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Xe.ta=function(){gu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let o=0;o<i.length;o++)t.push(e[r])}return t},Xe.Z=function(n){gu(this);let e=[];if("string"==typeof n)NT(this,n)&&(e=e.concat(this.g.get(Ac(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Xe.set=function(n,e){return gu(this),this.i=null,NT(this,n=Ac(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Xe.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Xe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const o=encodeURIComponent(String(r)),u=this.Z(r);for(r=0;r<u.length;r++){var i=o;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var LS=10;function FT(n){return!!n.h||!!n.g&&n.g.size>=n.j}function LT(n){return n.h?1:n.g?n.g.size:0}function yw(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function vw(n,e){n.g?n.g.add(e):n.h=e}function VT(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function UT(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return ao(n.i)}function jT(){this.g=new class{stringify(n){return Ft.JSON.stringify(n,void 0)}parse(n){return Ft.JSON.parse(n,void 0)}}}function VS(n,e,t){const r=t||"";try{IT(n,function(i,o){let u=i;Ig(i)&&(u=ly(i)),e.push(r+o+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function $g(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function Gg(n){this.l=n.fc||null,this.j=n.ob||!1}function vy(n,e){ri.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=ww,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}kT.prototype.cancel=function(){if(this.i=UT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},vi(Gg,dy),Gg.prototype.g=function(){return new vy(this.l,this.j)},Gg.prototype.i=function(n){return function(){return n}}({}),vi(vy,ri);var ww=0;function wy(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Jd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Pf(n)}function Pf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Xe=vy.prototype).open=function(n,e){if(this.readyState!=ww)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Pf(this)},Xe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Ft).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Xe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Jd(this)),this.readyState=ww},Xe.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Pf(this)),this.g&&(this.readyState=3,Pf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==Ft.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;wy(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Xe.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Jd(this):Pf(this),3==this.readyState&&wy(this)}},Xe.Za=function(n){this.g&&(this.response=this.responseText=n,Jd(this))},Xe.Ya=function(n){this.g&&(this.response=n,Jd(this))},Xe.ka=function(){this.g&&Jd(this)},Xe.setRequestHeader=function(n,e){this.v.append(n,e)},Xe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Xe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(vy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Ew=Ft.JSON.parse;function Mr(n){ri.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=HT,this.L=this.M=!1}vi(Mr,ri);var HT="",Cw=/^https?$/i,BS=["POST","PUT"];function GT(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,bw(n),qg(n)}function bw(n){n.F||(n.F=!0,wi(n,"complete"),wi(n,"error"))}function qT(n){if(n.h&&void 0!==K_&&(!n.C[1]||4!=ul(n)||2!=n.da()))if(n.v&&4==ul(n))cw(n.La,0,n);else if(wi(n,"readystatechange"),4==ul(n)){n.h=!1;try{const u=n.da();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===u){var i=String(n.I).match(DT)[1]||null;!i&&Ft.self&&Ft.self.location&&(i=Ft.self.location.protocol.slice(0,-1)),r=!Cw.test(i?i.toLowerCase():"")}t=r}if(t)wi(n,"complete"),wi(n,"success");else{n.m=6;try{var o=2<ul(n)?n.g.statusText:""}catch(h){o=""}n.j=o+" ["+n.da()+"]",bw(n)}}finally{qg(n)}}}function qg(n,e){if(n.g){jS(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||wi(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function jS(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Ft.clearTimeout(n.A),n.A=null)}function ul(n){return n.g?n.g.readyState:0}function zg(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case HT:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Xd(n){let e="";return tw(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function eh(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Xd(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):In(n,e,t))}function Wg(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function $S(n){this.Ga=0,this.j=[],this.l=new rr,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Wg("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Wg("baseRetryDelayMs",5e3,n),this.hb=Wg("retryDelaySeedMs",1e4,n),this.eb=Wg("forwardChannelMaxRetries",2,n),this.xa=Wg("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new kT(n&&n.concurrentRequestLimit),this.Ja=new jT,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Ey(n){if(zT(n),3==n.H){var e=n.W++,t=pu(n.I);if(In(t,"SID",n.K),In(t,"RID",e),In(t,"TYPE","terminate"),Nf(n,t),(e=new Vg(n,n.l,e)).L=2,e.v=yy(pu(t)),t=!1,Ft.navigator&&Ft.navigator.sendBeacon)try{t=Ft.navigator.sendBeacon(e.v.toString(),"")}catch(r){}!t&&Ft.Image&&((new Image).src=e.v,t=!0),t||(e.g=YT(e.l,null),e.g.ha(e.v)),e.G=Date.now(),my(e)}KT(n)}function Cy(n){n.g&&(Iw(n),n.g.cancel(),n.g=null)}function zT(n){Cy(n),n.u&&(Ft.clearTimeout(n.u),n.u=null),Kg(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ft.clearTimeout(n.m),n.m=null)}function by(n){if(!FT(n.i)&&!n.m){n.m=!0;var e=n.Na;uy||lw(),Wd||(uy(),Wd=!0),hT.add(e,n),n.C=0}}function Tw(n,e){var t;t=e?e.m:n.W++;const r=pu(n.I);In(r,"SID",n.K),In(r,"RID",t),In(r,"AID",n.V),Nf(n,r),n.o&&n.s&&eh(r,n.o,n.s),t=new Vg(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=Ty(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),vw(n.i,t),gy(t,r,e)}function Nf(n,e){n.na&&tw(n.na,function(t,r){In(e,r,t)}),n.h&&IT({},function(t,r){In(e,r,t)})}function Ty(n,e,t){t=Math.min(n.j.length,t);var r=n.h?yi(n.h.Va,n.h,n):null;e:{var i=n.j;let o=-1;for(;;){const u=["count="+t];-1==o?0<t?(o=i[0].g,u.push("ofs="+o)):o=0:u.push("ofs="+o);let h=!0;for(let m=0;m<t;m++){let v=i[m].g;const T=i[m].map;if(v-=o,0>v)o=Math.max(0,i[m].g-100),h=!1;else try{VS(T,u,"req"+v+"_")}catch(A){r&&r(T)}}if(h){r=u.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function Zg(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;uy||lw(),Wd||(uy(),Wd=!0),hT.add(e,n),n.A=0}}function th(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=kg(yi(n.Ma,n),ZT(n,n.A)),n.A++,0))}function Iw(n){null!=n.B&&(Ft.clearTimeout(n.B),n.B=null)}function Dw(n){n.g=new Vg(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=pu(n.wa);In(e,"RID","rpc"),In(e,"SID",n.K),In(e,"AID",n.V),In(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&In(e,"TO",n.qa),In(e,"TYPE","xmlhttp"),Nf(n,e),n.o&&n.s&&eh(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=yy(pu(e)),t.s=null,t.S=!0,CT(t,n)}function Kg(n){null!=n.v&&(Ft.clearTimeout(n.v),n.v=null)}function WT(n,e){var t=null;if(n.g==e){Kg(n),Iw(n),n.g=null;var r=2}else{if(!yw(n.i,e))return;t=e.F,VT(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;wi(r=Og(),new wT(r,t)),by(n)}else Zg(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function GS(n,e){return!(LT(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=kg(yi(n.Na,n,e),ZT(n,n.C)),n.C++,0)))}(n,e)||2==r&&th(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:mu(n,5);break;case 4:mu(n,10);break;case 3:mu(n,6);break;default:mu(n,2)}}function ZT(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function mu(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=yi(n.pb,n);t||(t=new Qd("//www.google.com/images/cleardot.gif"),Ft.location&&"http"==Ft.location.protocol||jg(t,"https"),yy(t)),function US(n,e){const t=new rr;if(Ft.Image){const r=new Image;r.onload=oo($g,t,r,"TestLoadImage: loaded",!0,e),r.onerror=oo($g,t,r,"TestLoadImage: error",!1,e),r.onabort=oo($g,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=oo($g,t,r,"TestLoadImage: timeout",!1,e),Ft.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ii(2);n.H=0,n.h&&n.h.za(e),KT(n),zT(n)}function KT(n){if(n.H=0,n.ma=[],n.h){const e=UT(n.i);(0!=e.length||0!=n.j.length)&&(J0(n.ma,e),J0(n.ma,n.j),n.i.i.length=0,ao(n.j),n.j.length=0),n.h.ya()}}function qS(n,e,t){var r=t instanceof Qd?pu(t):new Qd(t);if(""!=r.g)e&&(r.g=e+"."+r.g),_y(r,r.m);else{var i=Ft.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Qd(null);r&&jg(o,r),e&&(o.g=e),i&&_y(o,i),t&&(o.l=t),r=o}return e=n.Da,(t=n.F)&&e&&In(r,t,e),In(r,"VER",n.ra),Nf(n,r),r}function YT(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Mr(t&&n.Ha&&!n.va?new Gg({ob:!0}):n.va)).Oa(n.J),e}function QT(){}function _u(){if(zd&&!(10<=Number(Qb)))throw Error("Environmental error: no available transport.")}function Us(n,e){ri.call(this),this.g=new $S(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Dg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Dg(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new rh(this)}function nh(n){Zd.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function zS(){Kd.call(this),this.status=1}function rh(n){this.g=n}function cl(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Iy(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var o=n.g[3],u=(e=n.g[0])+(o^(t=n.g[1])&((i=n.g[2])^o))+r[0]+3614090360&4294967295;u=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=t+(u<<7&4294967295|u>>>25))+((u=o+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^o&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|u>>>10))+((u=e+(o^t&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|u>>>25))+((u=o+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^o&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|u>>>10))+((u=e+(o^t&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|u>>>25))+((u=o+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^o&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|u>>>10))+((u=e+(o^t&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|u>>>25))+((u=o+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^o&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|u>>>10))+((u=e+(i^o&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|u>>>27))+((u=o+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|u>>>18))+((u=t+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^o&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|u>>>27))+((u=o+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|u>>>18))+((u=t+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^o&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|u>>>27))+((u=o+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|u>>>18))+((u=t+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^o&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|u>>>27))+((u=o+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|u>>>18))+((u=t+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|u>>>12))+((u=e+(t^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|u>>>28))+((u=o+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|u>>>21))+((u=i+(o^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|u>>>28))+((u=o+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|u>>>21))+((u=i+(o^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^o)+r[13]+681279174&4294967295)<<4&4294967295|u>>>28))+((u=o+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|u>>>21))+((u=i+(o^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|u>>>28))+((u=o+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|u>>>21))+((u=i+(o^e^t)+r[15]+530742520&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|u>>>9))+((u=e+(i^(t|~o))+r[0]+4096336452&4294967295)<<6&4294967295|u>>>26))+((u=o+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(o|~t))+r[14]+2878612391&4294967295)<<15&4294967295|u>>>17))+((u=t+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~o))+r[12]+1700485571&4294967295)<<6&4294967295|u>>>26))+((u=o+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(o|~t))+r[10]+4293915773&4294967295)<<15&4294967295|u>>>17))+((u=t+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~o))+r[8]+1873313359&4294967295)<<6&4294967295|u>>>26))+((u=o+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(o|~t))+r[6]+2734768916&4294967295)<<15&4294967295|u>>>17))+((u=t+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|u>>>11))+((o=(e=t+((u=e+(i^(t|~o))+r[4]+4149444226&4294967295)<<6&4294967295|u>>>26))+((u=o+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|u>>>22))^((i=o+((u=i+(e^(o|~t))+r[2]+718787259&4294967295)<<15&4294967295|u>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(u<<21&4294967295|u>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+o&4294967295}function Bn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var o=0|n[i];r&&o==e||(t[i]=o,r=!1)}this.g=t}(Xe=Mr.prototype).Oa=function(n){this.M=n},Xe.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():pw.g(),this.C=function hw(n){return n.h||(n.h=n.i())}(this.u?this.u:pw),this.g.onreadystatechange=yi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(o){return void GT(this,o)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())t.set(o,r.get(o))}r=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),i=Ft.FormData&&n instanceof Ft.FormData,!(0<=Lo(BS,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,u]of t)this.g.setRequestHeader(o,u);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{jS(this),0<this.B&&((this.L=function $T(n){return zd&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=yi(this.ua,this)):this.A=cw(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){GT(this,o)}},Xe.ua=function(){void 0!==K_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wi(this,"timeout"),this.abort(8))},Xe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,wi(this,"complete"),wi(this,"abort"),qg(this))},Xe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qg(this,!0)),Mr.$.N.call(this)},Xe.La=function(){this.s||(this.G||this.v||this.l?qT(this):this.kb())},Xe.kb=function(){qT(this)},Xe.isActive=function(){return!!this.g},Xe.da=function(){try{return 2<ul(this)?this.g.status:-1}catch(n){return-1}},Xe.ja=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Xe.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Ew(e)}},Xe.Ia=function(){return this.m},Xe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xe=$S.prototype).ra=8,Xe.H=1,Xe.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Vg(this,this.l,n);let o=this.s;if(this.U&&(o?(o=tT(o),rT(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ty(this,i,e),In(t=pu(this.I),"RID",n),In(t,"CVER",22),this.F&&In(t,"X-HTTP-Session-Id",this.F),Nf(this,t),o&&(this.O?e="headers="+encodeURIComponent(String(Xd(o)))+"&"+e:this.o&&eh(t,this.o,o)),vw(this.i,i),this.bb&&In(t,"TYPE","init"),this.P?(In(t,"$req",e),In(t,"SID","null"),i.aa=!0,gy(i,t,null)):gy(i,t,e),this.H=2}}else 3==this.H&&(n?Tw(this,n):0==this.j.length||FT(this.i)||Tw(this))},Xe.Ma=function(){if(this.u=null,Dw(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=kg(yi(this.jb,this),n)}},Xe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ii(10),Cy(this),Dw(this))},Xe.ib=function(){null!=this.v&&(this.v=null,Cy(this),th(this),ii(19))},Xe.pb=function(n){n?(this.l.info("Successfully pinged google.com"),ii(2)):(this.l.info("Failed to ping google.com"),ii(1))},Xe.isActive=function(){return!!this.h&&this.h.isActive(this)},(Xe=QT.prototype).Ba=function(){},Xe.Aa=function(){},Xe.za=function(){},Xe.ya=function(){},Xe.isActive=function(){return!0},Xe.Va=function(){},_u.prototype.g=function(n,e){return new Us(n,e)},vi(Us,ri),Us.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;ii(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=qS(n,null,n.Y),by(n)},Us.prototype.close=function(){Ey(this.g)},Us.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=ly(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&by(e)},Us.prototype.N=function(){this.g.h=null,delete this.j,Ey(this.g),delete this.g,Us.$.N.call(this)},vi(nh,Zd),vi(zS,Kd),vi(rh,QT),rh.prototype.Ba=function(){wi(this.g,"a")},rh.prototype.Aa=function(n){wi(this.g,new nh(n))},rh.prototype.za=function(n){wi(this.g,new zS)},rh.prototype.ya=function(){wi(this.g,"b")},vi(cl,function WS(){this.blockSize=-1}),cl.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},cl.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=t;)Iy(this,n,o),o+=this.blockSize;if("string"==typeof n){for(;o<e;)if(r[i++]=n.charCodeAt(o++),i==this.blockSize){Iy(this,r),i=0;break}}else for(;o<e;)if(r[i++]=n[o++],i==this.blockSize){Iy(this,r),i=0;break}}this.h=i,this.i+=e},cl.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var JT={};function Yg(n){return-128<=n&&128>n?function Sg(n,e){var t=JT;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Bn([0|e],0>e?-1:0)}):new Bn([0|n],0>n?-1:0)}function dl(n){if(isNaN(n)||!isFinite(n))return Of;if(0>n)return Bi(dl(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=Aw;return new Bn(e,0)}var Aw=4294967296,Of=Yg(0),Dy=Yg(1),eI=Yg(16777216);function yu(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Vo(n){return-1==n.h}function Bi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Bn(t,~n.h).add(Dy)}function Ay(n,e){return n.add(Bi(e))}function Sc(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Rf(n,e){this.g=n,this.h=e}function Qg(n,e){if(yu(e))throw Error("division by zero");if(yu(n))return new Rf(Of,Of);if(Vo(n))return e=Qg(Bi(n),e),new Rf(Bi(e.g),Bi(e.h));if(Vo(e))return e=Qg(n,Bi(e)),new Rf(Bi(e.g),e.h);if(30<n.g.length){if(Vo(n)||Vo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Dy,r=e;0>=r.X(n);)t=Sw(t),r=Sw(r);var i=ih(t,1),o=ih(r,1);for(r=ih(r,2),t=ih(t,2);!yu(r);){var u=o.add(r);0>=u.X(n)&&(i=i.add(t),o=u),r=ih(r,1),t=ih(t,1)}return e=Ay(n,i.R(e)),new Rf(i,e)}for(i=Of;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),u=(o=dl(t)).R(e);Vo(u)||0<u.X(n);)u=(o=dl(t-=r)).R(e);yu(o)&&(o=Dy),i=i.add(o),n=Ay(n,u)}return new Rf(i,n)}function Sw(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Bn(t,n.h)}function ih(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],o=0;o<r;o++)i[o]=0<e?n.D(o+t)>>>e|n.D(o+t+1)<<32-e:n.D(o+t);return new Bn(i,n.h)}(Xe=Bn.prototype).ea=function(){if(Vo(this))return-Bi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:Aw+r)*e,e*=Aw}return n},Xe.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(yu(this))return"0";if(Vo(this))return"-"+Bi(this).toString(n);for(var e=dl(Math.pow(n,6)),t=this,r="";;){var i=Qg(t,e).g,o=((0<(t=Ay(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(yu(t=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},Xe.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Xe.X=function(n){return Vo(n=Ay(this,n))?-1:yu(n)?0:1},Xe.abs=function(){return Vo(this)?Bi(this):this},Xe.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&n.D(i)),u=(o>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=u>>>16,t[i]=(u&=65535)<<16|(o&=65535)}return new Bn(t,-2147483648&t[t.length-1]?-1:0)},Xe.R=function(n){if(yu(this)||yu(n))return Of;if(Vo(this))return Vo(n)?Bi(this).R(Bi(n)):Bi(Bi(this).R(n));if(Vo(n))return Bi(this.R(Bi(n)));if(0>this.X(eI)&&0>n.X(eI))return dl(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var o=this.D(r)>>>16,u=65535&this.D(r),h=n.D(i)>>>16,m=65535&n.D(i);t[2*r+2*i]+=u*m,Sc(t,2*r+2*i),t[2*r+2*i+1]+=o*m,Sc(t,2*r+2*i+1),t[2*r+2*i+1]+=u*h,Sc(t,2*r+2*i+1),t[2*r+2*i+2]+=o*h,Sc(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Bn(t,0)},Xe.gb=function(n){return Qg(this,n).h},Xe.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Bn(t,this.h&n.h)},Xe.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Bn(t,this.h|n.h)},Xe.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Bn(t,this.h^n.h)},_u.prototype.createWebChannel=_u.prototype.g,Us.prototype.send=Us.prototype.u,Us.prototype.open=Us.prototype.m,Us.prototype.close=Us.prototype.close,cy.NO_ERROR=0,cy.TIMEOUT=8,cy.HTTP_ERROR=6,Fg.COMPLETE="complete",fw.EventType=Lg,Lg.OPEN="a",Lg.CLOSE="b",Lg.ERROR="c",Lg.MESSAGE="d",ri.prototype.listen=ri.prototype.O,Mr.prototype.listenOnce=Mr.prototype.P,Mr.prototype.getLastError=Mr.prototype.Sa,Mr.prototype.getLastErrorCode=Mr.prototype.Ia,Mr.prototype.getStatus=Mr.prototype.da,Mr.prototype.getResponseJson=Mr.prototype.Wa,Mr.prototype.getResponseText=Mr.prototype.ja,Mr.prototype.send=Mr.prototype.ha,Mr.prototype.setWithCredentials=Mr.prototype.Oa,cl.prototype.digest=cl.prototype.l,cl.prototype.reset=cl.prototype.reset,cl.prototype.update=cl.prototype.j,Bn.prototype.add=Bn.prototype.add,Bn.prototype.multiply=Bn.prototype.R,Bn.prototype.modulo=Bn.prototype.gb,Bn.prototype.compare=Bn.prototype.X,Bn.prototype.toNumber=Bn.prototype.ea,Bn.prototype.toString=Bn.prototype.toString,Bn.prototype.getBits=Bn.prototype.D,Bn.fromNumber=dl,Bn.fromString=function XT(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Bi(XT(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=dl(Math.pow(e,8)),r=Of,i=0;i<n.length;i+=8){var o=Math.min(8,n.length-i),u=parseInt(n.substring(i,i+o),e);8>o?(o=dl(Math.pow(e,o)),r=r.R(o).add(dl(u))):r=(r=r.R(t)).add(dl(u))}return r};var tI=fa.createWebChannelTransport=function(){return new _u},nI=fa.getStatEventTarget=function(){return Og()},xw=fa.ErrorCode=cy,rI=fa.EventType=Fg,iI=fa.Event=Ic,sI=fa.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ZS=fa.FetchXmlHttpFactory=Gg,Sy=fa.WebChannel=fw,Jg=fa.XhrIo=Mr,KS=fa.Md5=cl,xc=fa.Integer=Bn;const pa="@firebase/firestore";class Ei{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ei.UNAUTHENTICATED=new Ei(null),Ei.GOOGLE_CREDENTIALS=new Ei("google-credentials-uid"),Ei.FIRST_PARTY=new Ei("first-party-uid"),Ei.MOCK_USER=new Ei("mock-user");let Mc="9.23.0";const Uo=new da.Yd("@firebase/firestore");function Mw(){return Uo.logLevel}function Le(n,...e){if(Uo.logLevel<=da.in.DEBUG){const t=e.map(Pw);Uo.debug(`Firestore (${Mc}): ${n}`,...t)}}function hr(n,...e){if(Uo.logLevel<=da.in.ERROR){const t=e.map(Pw);Uo.error(`Firestore (${Mc}): ${n}`,...t)}}function _s(n,...e){if(Uo.logLevel<=da.in.WARN){const t=e.map(Pw);Uo.warn(`Firestore (${Mc}): ${n}`,...t)}}function Pw(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function at(n="Unexpected state"){const e=`FIRESTORE (${Mc}) INTERNAL ASSERTION FAILED: `+n;throw hr(e),new Error(e)}function gt(n,e){n||at()}function Qe(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class si{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class QS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Nw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ei.UNAUTHENTICATED))}shutdown(){}}class Ow{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class aI{constructor(e){this.t=e,this.currentUser=Ei.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let u=new si;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new si,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const v=u;e.enqueueRetryable((0,Ce.Z)(function*(){yield v.promise,yield o(r.currentUser)}))},m=v=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new si)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(gt("string"==typeof r.accessToken),new QS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return gt(null===e||"string"==typeof e),new Ei(e)}}class Rw{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Ei.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class kw{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Rw(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ei.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JS{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=o=>{null!=o.error&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.T;return this.T=o.token,Le("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.I.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.I.getImmediate({optional:!0});o?i(o):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(gt("string"==typeof t.token),this.T=t.token,new lI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function XS(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Fw{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=XS(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}}function Vt(n,e){return n<e?-1:n>e?1:0}function sh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function uI(n){return n+"\0"}class ir{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Oe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Oe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Oe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ir.fromMillis(Date.now())}static fromDate(e){return ir.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ir(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Vt(this.nanoseconds,e.nanoseconds):Vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class _t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _t(e)}static min(){return new _t(new ir(0,0))}static max(){return new _t(new ir(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Xg{constructor(e,t,r){void 0===t?t=0:t>e.length&&at(),void 0===r?r=e.length-t:r>e.length-t&&at(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Xg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xg?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),u=t.get(i);if(o<u)return-1;if(o>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class fn extends Xg{construct(e,t,r){return new fn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Oe(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new fn(t)}static emptyPath(){return new fn([])}}const cI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pr extends Xg{construct(e,t,r){return new Pr(e,t,r)}static isValidIdentifier(e){return cI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Pr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new Oe(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Oe(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Oe(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===h?(u=!u,i++):"."!==h||u?(r+=h,i++):(o(),i++)}if(o(),u)throw new Oe(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pr(t)}static emptyPath(){return new Pr([])}}class Ye{constructor(e){this.path=e}static fromPath(e){return new Ye(fn.fromString(e))}static fromName(e){return new Ye(fn.fromString(e).popFirst(5))}static empty(){return new Ye(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===fn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return fn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ye(new fn(e.slice()))}}class xy{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function ji(n){return n.fields.find(e=>2===e.kind)}function Bo(n){return n.fields.filter(e=>2!==e.kind)}xy.UNKNOWN_ID=-1;class My{constructor(e,t){this.fieldPath=e,this.kind=t}}class vu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new vu(0,lo.min())}}function dI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=_t.fromTimestamp(1e9===r?new ir(t+1,0):new ir(t,r));return new lo(i,Ye.empty(),e)}function Py(n){return new lo(n.readTime,n.key,-1)}class lo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new lo(_t.min(),Ye.empty(),-1)}static max(){return new lo(_t.max(),Ye.empty(),-1)}}function Ny(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ye.comparator(n.documentKey,e.documentKey),0!==t?t:Vt(n.largestBatchId,e.largestBatchId))}const hI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function hl(n){return Oy.apply(this,arguments)}function Oy(){return Oy=(0,Ce.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==hI)throw n;Le("LocalStore","Unexpectedly lost primary lease")}),Oy.apply(this,arguments)}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&at(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,r)=>{t(e)})}static reject(e){return new ie((t,r)=>{r(e)})}static waitFor(e){return new ie((t,r)=>{let i=0,o=0,u=!1;e.forEach(h=>{++i,h.next(()=>{++o,u&&o===i&&t()},m=>r(m))}),u=!0,o===i&&t()})}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next(i=>i?ie.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new ie((r,i)=>{const o=e.length,u=new Array(o);let h=0;for(let m=0;m<o;m++){const v=m;t(e[v]).next(T=>{u[v]=T,++h,h===o&&r(u)},T=>i(T))}})}static doWhile(e,t){return new ie((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class oh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new si,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new kf(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=Vw(r.target.error);this.v.reject(new kf(e,i))}}static open(e,t,r,i){try{return new oh(t,e.transaction(i,r))}catch(o){throw new kf(t,o)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new pI(t)}}class uo{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===uo.S((0,k.z$)())&&hr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Le("SimpleDb","Removing database:",e),fl(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,k.hl)())return!1;if(uo.C())return!0;const e=(0,k.z$)(),t=uo.S(e),r=0<t&&t<10,i=uo.N(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,Ce.Z)(function*(){return t.db||(Le("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=u=>{r(u.target.result)},o.onblocked=()=>{i(new kf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const h=u.target.error;i("VersionError"===h.name?new Oe(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Oe(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new kf(e,h))},o.onupgradeneeded=u=>{Le("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.V.O(u.target.result,o.transaction,u.oldVersion,t.version).next(()=>{Le("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,Ce.Z)(function*(){const u="readonly"===t;let h=0;for(;;){++h;try{o.db=yield o.$(e);const m=oh.open(o.db,e,u?"readonly":"readwrite",r),v=i(m).next(T=>(m.P(),T)).catch(T=>(m.abort(T),ie.reject(T))).toPromise();return v.catch(()=>{}),yield m.R,v}catch(m){const v=m,T="FirebaseError"!==v.name&&h<3;if(Le("SimpleDb","Transaction failed with error:",v.message,"Retrying:",T),o.close(),!T)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class BN{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return fl(this.L.delete())}}class kf extends Oe{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Pc(n){return"IndexedDbTransactionError"===n.name}class pI{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Le("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Le("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),fl(r)}add(e){return Le("SimpleDb","ADD",this.store.name,e,e),fl(this.store.add(e))}get(e){return fl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Le("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Le("SimpleDb","DELETE",this.store.name,e),fl(this.store.delete(e))}count(){return Le("SimpleDb","COUNT",this.store.name),fl(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.W(i,(u,h)=>{o.push(h)}).next(()=>o)}{const i=this.store.getAll(r.range);return new ie((o,u)=>{i.onerror=h=>{u(h.target.error)},i.onsuccess=h=>{o(h.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ie((i,o)=>{r.onerror=u=>{o(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}J(e,t){Le("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(o,u,h)=>h.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new ie((r,i)=>{t.onerror=o=>{const u=Vw(o.target.error);i(u)},t.onsuccess=o=>{const u=o.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():r()}):r()}})}W(e,t){const r=[];return new ie((i,o)=>{e.onerror=u=>{o(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void i();const m=new BN(h),v=t(h.primaryKey,h.value,m);if(v instanceof ie){const T=v.catch(A=>(m.done(),ie.reject(A)));r.push(T)}m.isDone?i():null===m.K?h.continue():h.continue(m.K)}}).next(()=>ie.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function fl(n){return new ie((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Vw(r.target.error);t(i)}})}let Lw=!1;function Vw(n){const e=uo.S((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Lw||(Lw=!0,setTimeout(()=>{throw r},0)),r}}return n}class Uw{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Le("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ce.Z)(function*(){t.task=null;try{Le("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Pc(r)?Le("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield hl(r)}yield t.et(6e4)}))}}class Bw{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Ce.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,o=!0;return ie.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return Le("IndexBackiller",`Processing collection: ${u}`),this.it(e,u,i).next(h=>{i-=h,r.add(u)});o=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const u=o.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.rt(i,o)).next(h=>(Le("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>u.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,o)=>{const u=Py(o);Ny(u,r)>0&&(r=u)}),new lo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let jo=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function em(n){return null==n}function tm(n){return 0===n&&1/n==-1/0}function jw(n){return"number"==typeof n&&Number.isInteger(n)&&!tm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Hi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Hw(e)),e=tx(n.get(t),e);return Hw(e)}function tx(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function Hw(n){return n+"\x01\x01"}function ga(n){const e=n.length;if(gt(e>=2),2===e)return gt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),fn.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const u=n.indexOf("\x01",o);switch((u<0||u>t)&&at(),n.charAt(u+1)){case"\x01":const h=n.substring(o,u);let m;0===i.length?m=h:(i+=h,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(o,u),i+="\0";break;case"\x11":i+=n.substring(o,u+1);break;default:at()}o=u+2}return new fn(r)}const gI=["userId","batchId"];function Ry(n,e){return[n,Hi(e)]}function $w(n,e,t){return[n,Hi(e),t]}const nx={},mI=["prefixPath","collectionGroup","readTime","documentId"],_I=["prefixPath","collectionGroup","documentId"],yI=["collectionGroup","readTime","prefixPath","documentId"],vI=["canonicalId","targetId"],rx=["targetId","path"],ix=["path","targetId"],jN=["collectionId","parent"],wI=["indexId","uid"],HN=["uid","sequenceNumber"],$N=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],GN=["indexId","uid","orderedDocumentKey"],qN=["userId","collectionPath","documentId"],zN=["userId","collectionPath","largestBatchId"],WN=["userId","collectionGroup","largestBatchId"],sx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ZN=[...sx,"documentOverlays"],nm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ox=nm,EI=[...ox,"indexConfiguration","indexState","indexEntries"];class rm extends fI{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function oi(n,e){const t=Qe(n);return uo.M(t.ht,e)}function Gw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ah(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ky(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Zn{constructor(e,t){this.comparator=e,this.root=t||Ci.EMPTY}insert(e,t){return new Zn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ci.BLACK,null,null))}remove(e){return new Zn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ci.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new im(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new im(this.root,e,this.comparator,!1)}getReverseIterator(){return new im(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new im(this.root,e,this.comparator,!0)}}class im{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ci{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=null!=r?r:Ci.RED,this.left=null!=i?i:Ci.EMPTY,this.right=null!=o?o:Ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new Ci(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ci.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw at();const e=this.left.check();if(e!==this.right.check())throw at();return e+(this.isRed()?0:1)}}Ci.EMPTY=null,Ci.RED=!0,Ci.BLACK=!1,Ci.EMPTY=new class{constructor(){this.size=0}get key(){throw at()}get value(){throw at()}get color(){throw at()}get left(){throw at()}get right(){throw at()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ci(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fr{constructor(e){this.comparator=e,this.data=new Zn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qw(this.data.getIterator())}getIteratorFrom(e){return new qw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof fr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new fr(this.comparator);return t.data=e,t}}class qw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ff(n){return n.hasNext()?n.getNext():void 0}class Ji{constructor(e){this.fields=e,e.sort(Pr.comparator)}static empty(){return new Ji([])}unionWith(e){let t=new fr(Pr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ji(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class CI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw"undefined"!=typeof DOMException&&i instanceof DOMException?new CI("Invalid base64 string: "+i):i}}(e);return new bi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new bi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bi.EMPTY_BYTE_STRING=new bi("");const YN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nc(n){if(gt(!!n),"string"==typeof n){let e=0;const t=YN.exec(n);if(gt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nr(n.seconds),nanos:Nr(n.nanos)}}function Nr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function wu(n){return"string"==typeof n?bi.fromBase64String(n):bi.fromUint8Array(n)}function zw(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Fy(n){const e=n.mapValue.fields.__previous_value__;return zw(e)?Fy(e):e}function lh(n){const e=Nc(n.mapValue.fields.__local_write_time__.timestampValue);return new ir(e.seconds,e.nanos)}class ax{constructor(e,t,r,i,o,u,h,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=v}}class Ti{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ti("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ti&&e.projectId===this.projectId&&e.database===this.database}}const Oc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Lf={nullValue:"NULL_VALUE"};function Rc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?zw(n)?4:Yw(n)?9007199254740991:10:at()}function pl(n,e){if(n===e)return!0;const t=Rc(n);if(t!==Rc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lh(n).isEqual(lh(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Nc(r.timestampValue),u=Nc(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,wu(n.bytesValue).isEqual(wu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Nr(r.geoPointValue.latitude)===Nr(i.geoPointValue.latitude)&&Nr(r.geoPointValue.longitude)===Nr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Nr(r.integerValue)===Nr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Nr(r.doubleValue),u=Nr(i.doubleValue);return o===u?tm(o)===tm(u):isNaN(o)&&isNaN(u)}return!1}(n,e);case 9:return sh(n.arrayValue.values||[],e.arrayValue.values||[],pl);case 10:return function(r,i){const o=r.mapValue.fields||{},u=i.mapValue.fields||{};if(Gw(o)!==Gw(u))return!1;for(const h in o)if(o.hasOwnProperty(h)&&(void 0===u[h]||!pl(o[h],u[h])))return!1;return!0}(n,e);default:return at()}var i}function uh(n,e){return void 0!==(n.values||[]).find(t=>pl(t,e))}function Eu(n,e){if(n===e)return 0;const t=Rc(n),r=Rc(e);if(t!==r)return Vt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Vt(n.booleanValue,e.booleanValue);case 2:return function(i,o){const u=Nr(i.integerValue||i.doubleValue),h=Nr(o.integerValue||o.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return Ww(n.timestampValue,e.timestampValue);case 4:return Ww(lh(n),lh(e));case 5:return Vt(n.stringValue,e.stringValue);case 6:return function(i,o){const u=wu(i),h=wu(o);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),h=o.split("/");for(let m=0;m<u.length&&m<h.length;m++){const v=Vt(u[m],h[m]);if(0!==v)return v}return Vt(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const u=Vt(Nr(i.latitude),Nr(o.latitude));return 0!==u?u:Vt(Nr(i.longitude),Nr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){const u=i.values||[],h=o.values||[];for(let m=0;m<u.length&&m<h.length;++m){const v=Eu(u[m],h[m]);if(v)return v}return Vt(u.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Oc.mapValue&&o===Oc.mapValue)return 0;if(i===Oc.mapValue)return 1;if(o===Oc.mapValue)return-1;const u=i.fields||{},h=Object.keys(u),m=o.fields||{},v=Object.keys(m);h.sort(),v.sort();for(let T=0;T<h.length&&T<v.length;++T){const A=Vt(h[T],v[T]);if(0!==A)return A;const O=Eu(u[h[T]],m[v[T]]);if(0!==O)return O}return Vt(h.length,v.length)}(n.mapValue,e.mapValue);default:throw at()}}function Ww(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Vt(n,e);const t=Nc(n),r=Nc(e),i=Vt(t.seconds,r.seconds);return 0!==i?i:Vt(t.nanos,r.nanos)}function Vf(n){return Ly(n)}function Ly(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Nc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?wu(n.bytesValue).toBase64():"referenceValue"in n?Ye.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const u of r.values||[])o?o=!1:i+=",",i+=Ly(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",u=!0;for(const h of i)u?u=!1:o+=",",o+=`${h}:${Ly(r.fields[h])}`;return o+"}"}(n.mapValue):at();var e}function ch(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Zw(n){return!!n&&"integerValue"in n}function dh(n){return!!n&&"arrayValue"in n}function Ho(n){return!!n&&"nullValue"in n}function bI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Kw(n){return!!n&&"mapValue"in n}function om(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ah(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=om(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=om(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Yw(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function lx(n){return"nullValue"in n?Lf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ch(Ti.empty(),Ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:at()}function ux(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ch(Ti.empty(),Ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Oc:at()}function Qw(n,e){const t=Eu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function TI(n,e){const t=Eu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Xi{constructor(e){this.value=e}static empty(){return new Xi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Kw(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=om(t)}setAll(e){let t=Pr.emptyPath(),r={},i=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}u?r[h.lastSegment()]=om(u):i.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());Kw(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Kw(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ah(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Xi(om(this.value))}}function Jw(n){const e=[];return ah(n.fields,(t,r)=>{const i=new Pr([t]);if(Kw(r)){const o=Jw(r.mapValue).fields;if(0===o.length)e.push(i);else for(const u of o)e.push(i.child(u))}else e.push(i)}),new Ji(e)}class Qn{constructor(e,t,r,i,o,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Qn(e,0,_t.min(),_t.min(),_t.min(),Xi.empty(),0)}static newFoundDocument(e,t,r,i){return new Qn(e,1,t,_t.min(),r,i,0)}static newNoDocument(e,t){return new Qn(e,2,t,_t.min(),_t.min(),Xi.empty(),0)}static newUnknownDocument(e,t){return new Qn(e,3,t,_t.min(),_t.min(),Xi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_t.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class kc{constructor(e,t){this.position=e,this.inclusive=t}}function II(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],u=n.position[i];if(r=o.field.isKeyField()?Ye.comparator(Ye.fromName(u.referenceValue),t.key):Eu(u,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Xw(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!pl(n.position[t],e.position[t]))return!1;return!0}class Fc{constructor(e,t="asc"){this.field=e,this.dir=t}}function eE(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class tE{}class un extends tE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new dx(e,t,r):"array-contains"===t?new XN(e,r):"in"===t?new fx(e,r):"not-in"===t?new px(e,r):"array-contains-any"===t?new Vy(e,r):new un(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new QN(e,r):new JN(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Eu(t,this.value)):null!==t&&Rc(this.value)===Rc(t)&&this.matchesComparison(Eu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return at()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Dn extends tE{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Dn(e,t)}matches(e){return hh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function hh(n){return"and"===n.op}function nE(n){return"or"===n.op}function rE(n){return cx(n)&&hh(n)}function cx(n){for(const e of n.filters)if(e instanceof Dn)return!1;return!0}function DI(n){if(n instanceof un)return n.field.canonicalString()+n.op.toString()+Vf(n.value);if(rE(n))return n.filters.map(e=>DI(e)).join(",");{const e=n.filters.map(t=>DI(t)).join(",");return`${n.op}(${e})`}}function iE(n,e){return n instanceof un?(t=n,(r=e)instanceof un&&t.op===r.op&&t.field.isEqual(r.field)&&pl(t.value,r.value)):n instanceof Dn?function(t,r){return r instanceof Dn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,o,u)=>i&&iE(o,r.filters[u]),!0)}(n,e):void at();var t,r}function AI(n,e){const t=n.filters.concat(e);return Dn.create(t,n.op)}function SI(n){return n instanceof un?`${(e=n).field.canonicalString()} ${e.op} ${Vf(e.value)}`:n instanceof Dn?function(e){return e.op.toString()+" {"+e.getFilters().map(SI).join(" ,")+"}"}(n):"Filter";var e}class dx extends un{constructor(e,t,r){super(e,t,r),this.key=Ye.fromName(r.referenceValue)}matches(e){const t=Ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class QN extends un{constructor(e,t){super(e,"in",t),this.keys=hx(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class JN extends un{constructor(e,t){super(e,"not-in",t),this.keys=hx(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function hx(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ye.fromName(r.referenceValue))}class XN extends un{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dh(t)&&uh(t.arrayValue,this.value)}}class fx extends un{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&uh(this.value.arrayValue,t)}}class px extends un{constructor(e,t){super(e,"not-in",t)}matches(e){if(uh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!uh(this.value.arrayValue,t)}}class Vy extends un{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>uh(this.value.arrayValue,r))}}class gx{constructor(e,t=null,r=[],i=[],o=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=u,this.endAt=h,this.dt=null}}function sE(n,e=null,t=[],r=[],i=null,o=null,u=null){return new gx(n,e,t,r,i,o,u)}function Lc(n){const e=Qe(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>DI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),em(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Vf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Vf(r)).join(",")),e.dt=t}return e.dt}function ma(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!eE(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!iE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Xw(n.startAt,e.startAt)&&Xw(n.endAt,e.endAt)}function am(n){return Ye.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Uf(n,e){return n.filters.filter(t=>t instanceof un&&t.field.isEqual(e))}function Uy(n,e,t){let r=Lf,i=!0;for(const o of Uf(n,e)){let u=Lf,h=!0;switch(o.op){case"<":case"<=":u=lx(o.value);break;case"==":case"in":case">=":u=o.value;break;case">":u=o.value,h=!1;break;case"!=":case"not-in":u=Lf}Qw({value:r,inclusive:i},{value:u,inclusive:h})<0&&(r=u,i=h)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];Qw({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function xI(n,e,t){let r=Oc,i=!0;for(const o of Uf(n,e)){let u=Oc,h=!0;switch(o.op){case">=":case">":u=ux(o.value),h=!1;break;case"==":case"in":case"<=":u=o.value;break;case"<":u=o.value,h=!1;break;case"!=":case"not-in":u=Oc}TI({value:r,inclusive:i},{value:u,inclusive:h})>0&&(r=u,i=h)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];TI({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class _a{constructor(e,t=null,r=[],i=[],o=null,u="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=u,this.startAt=h,this.endAt=m,this.wt=null,this._t=null}}function By(n,e,t,r,i,o,u,h){return new _a(n,e,t,r,i,o,u,h)}function Cu(n){return new _a(n)}function mx(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function MI(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function oE(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function PI(n){return null!==n.collectionGroup}function Vc(n){const e=Qe(n);if(null===e.wt){e.wt=[];const t=oE(e),r=MI(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Fc(t)),e.wt.push(new Fc(Pr.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e.wt.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Fc(Pr.keyField(),o))}}}return e.wt}function ys(n){const e=Qe(n);if(!e._t)if("F"===e.limitType)e._t=sE(e.path,e.collectionGroup,Vc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of Vc(e))t.push(new Fc(o.field,"desc"===o.dir?"asc":"desc"));const r=e.endAt?new kc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new kc(e.startAt.position,e.startAt.inclusive):null;e._t=sE(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function aE(n,e){e.getFirstInequalityField(),oE(n);const t=n.filters.concat([e]);return new _a(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function jy(n,e,t){return new _a(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function lm(n,e){return ma(ys(n),ys(e))&&n.limitType===e.limitType}function lE(n){return`${Lc(ys(n))}|lt:${n.limitType}`}function Hy(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>SI(r)).join(", ")}]`),em(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Vf(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Vf(r)).join(",")),`Target(${t})`}(ys(n))}; limitType=${n.limitType})`}function Bf(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ye.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Vc(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,o,u){const h=II(i,o,u);return i.inclusive?h<=0:h<0}(t.startAt,Vc(t),r)||t.endAt&&!function(i,o,u){const h=II(i,o,u);return i.inclusive?h>=0:h>0}(t.endAt,Vc(t),r)));var t,r}function NI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function OI(n){return(e,t)=>{let r=!1;for(const i of Vc(n)){const o=RI(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function RI(n,e,t){const r=n.field.isKeyField()?Ye.comparator(e.key,t.key):function(i,o,u){const h=o.data.field(i),m=u.data.field(i);return null!==h&&null!==m?Eu(h,m):at()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return at()}}class ya{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ah(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return ky(this.inner)}size(){return this.innerSize}}const eO=new Zn(Ye.comparator);function vs(){return eO}const $y=new Zn(Ye.comparator);function um(...n){let e=$y;for(const t of n)e=e.insert(t.key,t);return e}function kI(n){let e=$y;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function bu(){return Gy()}function _x(){return Gy()}function Gy(){return new ya(n=>n.toString(),(n,e)=>n.isEqual(e))}const yx=new Zn(Ye.comparator),vx=new fr(Ye.comparator);function tn(...n){let e=vx;for(const t of n)e=e.add(t);return e}const tO=new fr(Vt);function FI(){return tO}function wx(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tm(e)?"-0":e}}function Ex(n){return{integerValue:""+n}}function LI(n,e){return jw(e)?Ex(e):wx(n,e)}class uE{constructor(){this._=void 0}}function nO(n,e,t){return n instanceof s?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&zw(i)&&(i=Fy(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof a?l(n,e):n instanceof d?f(n,e):function(r,i){const o=Cx(r,i),u=w(o)+w(r.gt);return Zw(o)&&Zw(r.gt)?Ex(u):wx(r.serializer,u)}(n,e)}function rO(n,e,t){return n instanceof a?l(n,e):n instanceof d?f(n,e):t}function Cx(n,e){return n instanceof _?Zw(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class s extends uE{}class a extends uE{constructor(e){super(),this.elements=e}}function l(n,e){const t=b(e);for(const r of n.elements)t.some(i=>pl(i,r))||t.push(r);return{arrayValue:{values:t}}}class d extends uE{constructor(e){super(),this.elements=e}}function f(n,e){let t=b(e);for(const r of n.elements)t=t.filter(i=>!pl(i,r));return{arrayValue:{values:t}}}class _ extends uE{constructor(e,t){super(),this.serializer=e,this.gt=t}}function w(n){return Nr(n.integerValue||n.doubleValue)}function b(n){return dh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class D{constructor(e,t){this.field=e,this.transform=t}}class P{constructor(e,t){this.version=e,this.transformResults=t}}class R{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new R}static exists(e){return new R(void 0,e)}static updateTime(e){return new R(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function G(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Y{}function be(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Bc(n.key,R.none()):new yt(n.key,n.data,R.none());{const t=n.data,r=Xi.empty();let i=new fr(Pr.comparator);for(let o of e.fields)if(!i.has(o)){let u=t.field(o);null===u&&o.length>1&&(o=o.popLast(),u=t.field(o)),null===u?r.delete(o):r.set(o,u),i=i.add(o)}return new qt(n.key,r,new Ji(i.toArray()),R.none())}}function Be(n,e,t){n instanceof yt?function(r,i,o){const u=r.value.clone(),h=Bs(r.fieldTransforms,i,o.transformResults);u.setAll(h),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):n instanceof qt?function(r,i,o){if(!G(r.precondition,i))return void i.convertToUnknownDocument(o.version);const u=Bs(r.fieldTransforms,i,o.transformResults),h=i.data;h.setAll(wn(r)),h.setAll(u),i.convertToFoundDocument(o.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function We(n,e,t,r){return n instanceof yt?function(i,o,u,h){if(!G(i.precondition,o))return u;const m=i.value.clone(),v=Uc(i.fieldTransforms,h,o);return m.setAll(v),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof qt?function(i,o,u,h){if(!G(i.precondition,o))return u;const m=Uc(i.fieldTransforms,h,o),v=o.data;return v.setAll(wn(i)),v.setAll(m),o.convertToFoundDocument(o.version,v).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(u=t,G(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u);var o,u}function dt(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=Cx(r.transform,i||null);null!=o&&(null===t&&(t=Xi.empty()),t.set(r.field,o))}return t||null}function Ne(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&sh(t,r,(i,o)=>function x(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof a&&r instanceof a||t instanceof d&&r instanceof d?sh(t.elements,r.elements,pl):t instanceof _&&r instanceof _?pl(t.gt,r.gt):t instanceof s&&r instanceof s);var t,r}(i,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class yt extends Y{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class qt extends Y{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function wn(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Bs(n,e,t){const r=new Map;gt(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],u=o.transform,h=e.data.field(o.field);r.set(o.field,rO(u,h,t[i]))}return r}function Uc(n,e,t){const r=new Map;for(const i of n){const o=i.transform,u=t.data.field(i.field);r.set(i.field,nO(o,u,e))}return r}class Bc extends Y{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cm extends Y{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class dm{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Be(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=We(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=We(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=_x();return this.mutations.forEach(i=>{const o=e.get(i.key),u=o.overlayedDocument;let h=this.applyToLocalView(u,o.mutatedFields);h=t.has(i.key)?null:h;const m=be(u,h);null!==m&&r.set(i.key,m),u.isValidDocument()||u.convertToNoDocument(_t.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),tn())}isEqual(e){return this.batchId===e.batchId&&sh(this.mutations,e.mutations,(t,r)=>Ne(t,r))&&sh(this.baseMutations,e.baseMutations,(t,r)=>Ne(t,r))}}class hm{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){gt(e.mutations.length===r.length);let i=yx;const o=e.mutations;for(let u=0;u<o.length;u++)i=i.insert(o[u].key,r[u].version);return new hm(e,t,r,i)}}class fm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class dE{constructor(e,t){this.count=e,this.unchangedNames=t}}var Or,cn;function iO(n){switch(n){default:return at();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function sO(n){if(void 0===n)return hr("GRPC error has no .code"),ue.UNKNOWN;switch(n){case Or.OK:return ue.OK;case Or.CANCELLED:return ue.CANCELLED;case Or.UNKNOWN:return ue.UNKNOWN;case Or.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Or.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Or.INTERNAL:return ue.INTERNAL;case Or.UNAVAILABLE:return ue.UNAVAILABLE;case Or.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Or.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Or.NOT_FOUND:return ue.NOT_FOUND;case Or.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Or.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Or.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Or.ABORTED:return ue.ABORTED;case Or.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Or.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Or.DATA_LOSS:return ue.DATA_LOSS;default:return at()}}(cn=Or||(Or={}))[cn.OK=0]="OK",cn[cn.CANCELLED=1]="CANCELLED",cn[cn.UNKNOWN=2]="UNKNOWN",cn[cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cn[cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cn[cn.NOT_FOUND=5]="NOT_FOUND",cn[cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",cn[cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",cn[cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",cn[cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cn[cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cn[cn.ABORTED=10]="ABORTED",cn[cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",cn[cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",cn[cn.INTERNAL=13]="INTERNAL",cn[cn.UNAVAILABLE=14]="UNAVAILABLE",cn[cn.DATA_LOSS=15]="DATA_LOSS";class bx{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return VI}static getOrCreateInstance(){return null===VI&&(VI=new bx),VI}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let VI=null;function oO(){return new TextEncoder}const dV=new xc([4294967295,4294967295],0);function aO(n){const e=oO().encode(n),t=new KS;return t.update(e),new Uint8Array(t.digest())}function lO(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new xc([t,r],0),new xc([i,o],0)]}class Tx{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new hE(`Invalid padding: ${t}`);if(r<0)throw new hE(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new hE(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new hE(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=xc.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(xc.fromNumber(r)));return 1===i.compare(dV)&&(i=new xc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=aO(e),[r,i]=lO(t);for(let o=0;o<this.hashCount;o++){const u=this.Et(r,i,o);if(!this.At(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new Tx(o,i,t);return r.forEach(h=>u.insert(h)),u}insert(e){if(0===this.It)return;const t=aO(e),[r,i]=lO(t);for(let o=0;o<this.hashCount;o++){const u=this.Et(r,i,o);this.Rt(u)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class hE extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class fE{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,pE.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new fE(_t.min(),i,new Zn(Vt),vs(),tn())}}class pE{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new pE(r,t,tn(),tn(),tn())}}class UI{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class uO{constructor(e,t){this.targetId=e,this.Vt=t}}class cO{constructor(e,t,r=bi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class dO{constructor(){this.St=0,this.Dt=fO(),this.Ct=bi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=tn(),t=tn(),r=tn();return this.Dt.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:at()}}),new pE(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=fO()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class hV{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=vs(),this.zt=hO(),this.Wt=new Zn(Vt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:at()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,o=this.se(r);if(o){const u=o.target;if(am(u))if(0===i){const h=new Ye(u.path);this.Yt(r,h,Qn.newNoDocument(h,_t.min()))}else gt(1===i);else{const h=this.ie(r);if(h!==i){const m=this.re(e,h);0!==m&&(this.ee(r),this.Wt=this.Wt.insert(r,2===m?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=bx.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(v,T,A){var O,F,j,Q,fe,qe;const Je={localCacheCount:T,existenceFilterCount:A.count},et=A.unchangedNames;return et&&(Je.bloomFilter={applied:0===v,hashCount:null!==(O=null==et?void 0:et.hashCount)&&void 0!==O?O:0,bitmapLength:null!==(Q=null===(j=null===(F=null==et?void 0:et.bits)||void 0===F?void 0:F.bitmap)||void 0===j?void 0:j.length)&&void 0!==Q?Q:0,padding:null!==(qe=null===(fe=null==et?void 0:et.bits)||void 0===fe?void 0:fe.padding)&&void 0!==qe?qe:0}),Je}(m,h,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:o="",padding:u=0},hashCount:h=0}=r;let m,v;try{m=wu(o).toUint8Array()}catch(T){if(T instanceof CI)return _s("Decoding the base64 bloom filter in existence filter failed ("+T.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw T}try{v=new Tx(m,u,h)}catch(T){return _s(T instanceof hE?"BloomFilter error: ":"Applying bloom filter failed: ",T),1}return 0===v.It?1:i!==t-this.oe(e.targetId,v)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(o=>{const u=this.Gt.ue(),h=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;t.vt(h)||(this.Yt(e,o,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((o,u)=>{const h=this.se(u);if(h){if(o.current&&am(h.target)){const m=new Ye(h.target.path);null!==this.jt.get(m)||this.ae(u,m)||this.Yt(u,m,Qn.newNoDocument(m,e))}o.Mt&&(t.set(u,o.Ot()),o.Ft())}});let r=tn();this.zt.forEach((o,u)=>{let h=!0;u.forEachWhile(m=>{const v=this.se(m);return!v||"TargetPurposeLimboResolution"===v.purpose||(h=!1,!1)}),h&&(r=r.add(o))}),this.jt.forEach((o,u)=>u.setReadTime(e));const i=new fE(e,t,this.Wt,this.jt,r);return this.jt=vs(),this.zt=hO(),this.Wt=new Zn(Vt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new dO,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new fr(Vt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Le("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new dO),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function hO(){return new Zn(Ye.comparator)}function fO(){return new Zn(Ye.comparator)}const fV={asc:"ASCENDING",desc:"DESCENDING"},pV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gV={and:"AND",or:"OR"};class mV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ix(n,e){return n.useProto3Json||em(e)?e:{value:e}}function qy(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pO(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function _V(n,e){return qy(n,e.toTimestamp())}function ai(n){return gt(!!n),_t.fromTimestamp(function(e){const t=Nc(e);return new ir(t.seconds,t.nanos)}(n))}function Dx(n,e){return(t=n,new fn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function gO(n){const e=fn.fromString(n);return gt(TO(e)),e}function gE(n,e){return Dx(n.databaseId,e.path)}function jc(n,e){const t=gO(e);if(t.get(1)!==n.databaseId.projectId)throw new Oe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Oe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ye(_O(t))}function Ax(n,e){return Dx(n.databaseId,e)}function mO(n){const e=gO(n);return 4===e.length?fn.emptyPath():_O(e)}function mE(n){return new fn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _O(n){return gt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function yO(n,e,t){return{name:gE(n,e),fields:t.value.mapValue.fields}}function vO(n,e,t){const r=jc(n,e.name),i=ai(e.updateTime),o=e.createTime?ai(e.createTime):_t.min(),u=new Xi({mapValue:{fields:e.fields}}),h=Qn.newFoundDocument(r,i,o,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function _E(n,e){let t;if(e instanceof yt)t={update:yO(n,e.key,e.value)};else if(e instanceof Bc)t={delete:gE(n,e.key)};else if(e instanceof qt)t={update:yO(n,e.key,e.data),updateMask:IV(e.fieldMask)};else{if(!(e instanceof cm))return at();t={verify:gE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof s)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof a)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof d)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof _)return{fieldPath:o.field.canonicalString(),increment:u.gt};throw at()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:_V(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:at()),t;var i}function Sx(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?R.updateTime(ai(i.updateTime)):void 0!==i.exists?R.exists(i.exists):R.none():R.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,u){let h=null;"setToServerValue"in u?(gt("REQUEST_TIME"===u.setToServerValue),h=new s):"appendMissingElements"in u?h=new a(u.appendMissingElements.values||[]):"removeAllFromArray"in u?h=new d(u.removeAllFromArray.values||[]):"increment"in u?h=new _(o,u.increment):at();const m=Pr.fromServerFormat(u.fieldPath);return new D(m,h)}(n,i)):[];var i;if(e.update){const i=jc(n,e.update.name),o=new Xi({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new Ji((e.updateMask.fieldPaths||[]).map(v=>Pr.fromServerFormat(v)));return new qt(i,o,u,t,r)}return new yt(i,o,t,r)}if(e.delete){const i=jc(n,e.delete);return new Bc(i,t)}if(e.verify){const i=jc(n,e.verify);return new cm(i,t)}return at()}function wO(n,e){return{documents:[Ax(n,e.path)]}}function xx(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Ax(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ax(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0!==m.length)return bO(Dn.create(m,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(m){if(0!==m.length)return m.map(v=>{return{field:jf((T=v).field),direction:CV(T.dir)};var T})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const u=Ix(n,e.limit);var h,m;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function EO(n){let e=mO(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){gt(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let o=[];t.where&&(o=function(T){const A=CO(T);return A instanceof Dn&&rE(A)?A.getFilters():[A]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(T=>{return new Fc(zy((A=T).field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let h=null;t.limit&&(h=function(T){let A;return A="object"==typeof T?T.value:T,em(A)?null:A}(t.limit));let m=null;var T;t.startAt&&(m=new kc((T=t.startAt).values||[],!!T.before));let v=null;return t.endAt&&(v=function(T){return new kc(T.values||[],!T.before)}(t.endAt)),By(e,i,u,o,h,"F",m,v)}function CO(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=zy(e.unaryFilter.field);return un.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=zy(e.unaryFilter.field);return un.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=zy(e.unaryFilter.field);return un.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zy(e.unaryFilter.field);return un.create(o,"!=",{nullValue:"NULL_VALUE"});default:return at()}}(n):void 0!==n.fieldFilter?un.create(zy((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return at()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Dn.create(e.compositeFilter.filters.map(t=>CO(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return at()}}(e.compositeFilter.op))}(n):at();var e}function CV(n){return fV[n]}function bV(n){return pV[n]}function TV(n){return gV[n]}function jf(n){return{fieldPath:n.canonicalString()}}function zy(n){return Pr.fromServerFormat(n.fieldPath)}function bO(n){return n instanceof un?function(e){if("=="===e.op){if(bI(e.value))return{unaryFilter:{field:jf(e.field),op:"IS_NAN"}};if(Ho(e.value))return{unaryFilter:{field:jf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(bI(e.value))return{unaryFilter:{field:jf(e.field),op:"IS_NOT_NAN"}};if(Ho(e.value))return{unaryFilter:{field:jf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jf(e.field),op:bV(e.op),value:e.value}}}(n):n instanceof Dn?function(e){const t=e.getFilters().map(r=>bO(r));return 1===t.length?t[0]:{compositeFilter:{op:TV(e.op),filters:t}}}(n):at()}function IV(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function TO(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class fh{constructor(e,t,r,i,o=_t.min(),u=_t.min(),h=bi.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new fh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class IO{constructor(e){this.fe=e}}function DO(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:BI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:gE(i=n.fe,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:qy(i,o.version.toTimestamp()),createTime:qy(i,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:pm(e.version)};else{if(!e.isUnknownDocument())return at();r.unknownDocument={path:t.path.toArray(),version:pm(e.version)}}var i,o;return r}function BI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function pm(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function gm(n){const e=new ir(n.seconds,n.nanoseconds);return _t.fromTimestamp(e)}function mm(n,e){const t=(e.baseMutations||[]).map(o=>Sx(n.fe,o));for(let o=0;o<e.mutations.length-1;++o){const u=e.mutations[o];o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(u.updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o)}const r=e.mutations.map(o=>Sx(n.fe,o)),i=ir.fromMillis(e.localWriteTimeMs);return new dm(e.batchId,i,t,r)}function yE(n){const e=gm(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?gm(n.lastLimboFreeSnapshotVersion):_t.min();let r;var i;return void 0!==n.query.documents?(gt(1===(i=n.query).documents.length),r=ys(Cu(mO(i.documents[0])))):r=ys(EO(n.query)),new fh(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,bi.fromBase64String(n.resumeToken))}function AO(n,e){const t=pm(e.snapshotVersion),r=pm(e.lastLimboFreeSnapshotVersion);let i;i=am(e.target)?wO(n.fe,e.target):xx(n.fe,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Lc(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Mx(n){const e=EO({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?jy(e,e.limit,"L"):e}function Px(n,e){return new fm(e.largestBatchId,Sx(n.fe,e.overlayMutation))}function SO(n,e){const t=e.path.lastSegment();return[n,Hi(e.path.popLast()),t]}function xO(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:pm(r.readTime),documentKey:Hi(r.documentKey.path),largestBatchId:r.largestBatchId}}class AV{getBundleMetadata(e,t){return MO(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:gm(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return MO(e).put({bundleId:(r=t).id,createTime:pm(ai(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return PO(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Mx(i.bundledQuery),readTime:gm(i.readTime)};var i})}saveNamedQuery(e,t){return PO(e).put({name:(r=t).name,readTime:pm(ai(r.readTime)),bundledQuery:r.bundledQuery});var r}}function MO(n){return oi(n,"bundles")}function PO(n){return oi(n,"namedQueries")}class jI{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new jI(e,t.uid||"")}getOverlay(e,t){return vE(e).get(SO(this.userId,t)).next(r=>r?Px(this.serializer,r):null)}getOverlays(e,t){const r=bu();return ie.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,u)=>{const h=new fm(t,u);i.push(this.we(e,h))}),ie.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(Hi(u.getCollectionPath())));const o=[];return i.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);o.push(vE(e).J("collectionPathOverlayIndex",h))}),ie.waitFor(o)}getOverlaysForCollection(e,t,r){const i=bu(),o=Hi(t),u=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return vE(e).j("collectionPathOverlayIndex",u).next(h=>{for(const m of h){const v=Px(this.serializer,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=bu();let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return vE(e).X({index:"collectionGroupOverlayIndex",range:h},(m,v,T)=>{const A=Px(this.serializer,v);o.size()<i||A.largestBatchId===u?(o.set(A.getKey(),A),u=A.largestBatchId):T.done()}).next(()=>o)}we(e,t){return vE(e).put(function(r,i,o){const[u,h,m]=SO(i,o.mutation.key);return{userId:i,collectionPath:h,documentId:m,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:_E(r.fe,o.mutation)}}(this.serializer,this.userId,t))}}function vE(n){return oi(n,"documentOverlays")}class _m{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Nr(e.integerValue));else if("doubleValue"in e){const r=Nr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),tm(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(wu(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?Yw(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):at()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),Ye.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function SV(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function NO(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const o=SV(255&t[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}_m.Ve=new _m;class xV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=NO(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=NO(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class MV{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class PV{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class wE{constructor(){this.je=new xV,this.ze=new MV(this.je),this.We=new PV(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class ym{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ym(this.indexId,this.documentKey,this.arrayValue,r)}}function Hf(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=OO(n.arrayValue,e.arrayValue),0!==t?t:(t=OO(n.directionalValue,e.directionalValue),0!==t?t:Ye.comparator(n.documentKey,e.documentKey)))}function OO(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class NV{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){gt(e.collectionGroup===this.collectionId);const t=ji(e);if(void 0!==t&&!this.en(t))return!1;const r=Bo(e);let i=new Set,o=0,u=0;for(;o<r.length&&this.en(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const h=r[o];if(!this.nn(this.Ze,h)||!this.sn(this.Ye[u++],h))return!1}++o}for(;o<r.length;++o){const h=r[o];if(u>=this.Ye.length||!this.sn(this.Ye[u++],h))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function RO(n){var e,t;if(gt(n instanceof un||n instanceof Dn),n instanceof un){if(n instanceof fx){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>un.create(n.field,"==",o)))||[];return Dn.create(i,"or")}return n}const r=n.filters.map(i=>RO(i));return Dn.create(r,n.op)}function OV(n){if(0===n.getFilters().length)return[];const e=Rx(RO(n));return gt(kO(e)),Nx(e)||Ox(e)?[e]:e.getFilters()}function Nx(n){return n instanceof un}function Ox(n){return n instanceof Dn&&rE(n)}function kO(n){return Nx(n)||Ox(n)||function(e){if(e instanceof Dn&&nE(e)){for(const t of e.getFilters())if(!Nx(t)&&!Ox(t))return!1;return!0}return!1}(n)}function Rx(n){if(gt(n instanceof un||n instanceof Dn),n instanceof un)return n;if(1===n.filters.length)return Rx(n.filters[0]);const e=n.filters.map(r=>Rx(r));let t=Dn.create(e,n.op);return t=HI(t),kO(t)?t:(gt(t instanceof Dn),gt(hh(t)),gt(t.filters.length>1),t.filters.reduce((r,i)=>kx(r,i)))}function kx(n,e){let t;return gt(n instanceof un||n instanceof Dn),gt(e instanceof un||e instanceof Dn),t=n instanceof un?e instanceof un?Dn.create([n,e],"and"):FO(n,e):e instanceof un?FO(e,n):function(r,i){if(gt(r.filters.length>0&&i.filters.length>0),hh(r)&&hh(i))return AI(r,i.getFilters());const o=nE(r)?r:i,u=nE(r)?i:r,h=o.filters.map(m=>kx(m,u));return Dn.create(h,"or")}(n,e),HI(t)}function FO(n,e){if(hh(e))return AI(e,n.getFilters());{const t=e.filters.map(r=>kx(n,r));return Dn.create(t,"or")}}function HI(n){if(gt(n instanceof un||n instanceof Dn),n instanceof un)return n;const e=n.getFilters();if(1===e.length)return HI(e[0]);if(cx(n))return n;const t=e.map(i=>HI(i)),r=[];return t.forEach(i=>{i instanceof un?r.push(i):i instanceof Dn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Dn.create(r,n.op)}class RV{constructor(){this.rn=new Fx}addToCollectionParentIndex(e,t){return this.rn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(lo.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(lo.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class Fx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new fr(fn.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new fr(fn.comparator)).toArray()}}const $I=new Uint8Array(0);class kV{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Fx,this.un=new ya(r=>Lc(r),(r,i)=>ma(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const o={collectionId:r,parent:Hi(i)};return LO(e).put(o)}return ie.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[uI(t),""],!1,!0);return LO(e).j(i).next(o=>{for(const u of o){if(u.collectionId!==t)break;r.push(ga(u.parent))}return r})}addFieldIndex(e,t){const r=GI(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var u;delete i.indexId;const o=r.add(i);if(t.indexState){const u=CE(e);return o.next(h=>{u.put(xO(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=GI(e),i=CE(e),o=EE(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=EE(e);let i=!0;const o=new Map;return ie.forEach(this.cn(t),u=>this.an(e,u).next(h=>{i&&(i=!!h),o.set(u,h)})).next(()=>{if(i){let u=tn();const h=[];return ie.forEach(o,(m,v)=>{var T;Le("IndexedDbIndexManager",`Using index ${T=m,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(et=>`${et.fieldPath}:${et.kind}`).join(",")}`} to execute ${Lc(t)}`);const A=function(et,pt){const Wt=ji(pt);if(void 0===Wt)return null;for(const Zt of Uf(et,Wt.fieldPath))switch(Zt.op){case"array-contains-any":return Zt.value.arrayValue.values||[];case"array-contains":return[Zt.value]}return null}(v,m),O=function(et,pt){const Wt=new Map;for(const Zt of Bo(pt))for(const Sn of Uf(et,Zt.fieldPath))switch(Sn.op){case"==":case"in":Wt.set(Zt.fieldPath.canonicalString(),Sn.value);break;case"not-in":case"!=":return Wt.set(Zt.fieldPath.canonicalString(),Sn.value),Array.from(Wt.values())}return null}(v,m),F=function(et,pt){const Wt=[];let Zt=!0;for(const Sn of Bo(pt)){const Cs=0===Sn.kind?Uy(et,Sn.fieldPath,et.startAt):xI(et,Sn.fieldPath,et.startAt);Wt.push(Cs.value),Zt&&(Zt=Cs.inclusive)}return new kc(Wt,Zt)}(v,m),j=function(et,pt){const Wt=[];let Zt=!0;for(const Sn of Bo(pt)){const Cs=0===Sn.kind?xI(et,Sn.fieldPath,et.endAt):Uy(et,Sn.fieldPath,et.endAt);Wt.push(Cs.value),Zt&&(Zt=Cs.inclusive)}return new kc(Wt,Zt)}(v,m),Q=this.hn(m,v,F),fe=this.hn(m,v,j),qe=this.ln(m,v,O),Je=this.fn(m.indexId,A,Q,F.inclusive,fe,j.inclusive,qe);return ie.forEach(Je,et=>r.H(et,t.limit).next(pt=>{pt.forEach(Wt=>{const Zt=Ye.fromSegments(Wt.documentKey);u.has(Zt)||(u=u.add(Zt),h.push(Zt))})}))}).next(()=>h)}return ie.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:OV(Dn.create(e.filters,"and")).map(r=>sE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,o,u,h){const m=(null!=t?t.length:1)*Math.max(r.length,o.length),v=m/(null!=t?t.length:1),T=[];for(let A=0;A<m;++A){const O=t?this.dn(t[A/v]):$I,F=this.wn(e,O,r[A%v],i),j=this._n(e,O,o[A%v],u),Q=h.map(fe=>this.wn(e,O,fe,!0));T.push(...this.createRange(F,j,Q))}return T}wn(e,t,r,i){const o=new ym(e,Ye.empty(),t,r);return i?o:o.Je()}_n(e,t,r,i){const o=new ym(e,Ye.empty(),t,r);return i?o.Je():o}an(e,t){const r=new NV(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let u=null;for(const h of o)r.tn(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u})}getIndexType(e,t){let r=2;const i=this.cn(t);return ie.forEach(i,o=>this.an(e,o).next(u=>{u?0!==r&&u.fields.length<function(h){let m=new fr(Pr.comparator),v=!1;for(const T of h.filters)for(const A of T.getFlattenedFilters())A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?v=!0:m=m.add(A.field));for(const T of h.orderBy)T.field.isKeyField()||(m=m.add(T.field));return m.size+(v?1:0)}(o)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new wE;for(const i of Bo(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const u=r.He(i.kind);_m.Ve._e(o,u)}return r.Qe()}dn(e){const t=new wE;return _m.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new wE;return _m.Ve._e(ch(this.databaseId,t),r.He(function(i){const o=Bo(i);return 0===o.length?0:o[o.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new wE);let o=0;for(const u of Bo(e)){const h=r[o++];for(const m of i)if(this.yn(t,u.fieldPath)&&dh(h))i=this.pn(i,u,h);else{const v=m.He(u.kind);_m.Ve._e(h,v)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],o=[];for(const u of r.arrayValue.values||[])for(const h of i){const m=new wE;m.seed(h.Qe()),_m.Ve._e(u,m.He(t.kind)),o.push(m)}return o}yn(e,t){return!!e.filters.find(r=>r instanceof un&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=GI(e),i=CE(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(o=>{const u=[];return ie.forEach(o,h=>i.get([h.indexId,this.uid]).next(m=>{u.push(function(v,T){const A=T?new vu(T.sequenceNumber,new lo(gm(T.readTime),new Ye(ga(T.documentKey)),T.largestBatchId)):vu.empty(),O=v.fields.map(([F,j])=>new My(Pr.fromServerFormat(F),j));return new xy(v.indexId,v.collectionGroup,O,A)}(h,m))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:Vt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=GI(e),o=CE(e);return this.Tn(e).next(u=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ie.forEach(h,m=>o.put(xO(m.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return ie.forEach(t,(i,o)=>{const u=r.get(i.collectionGroup);return(u?ie.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ie.forEach(h,m=>this.En(e,i,m).next(v=>{const T=this.An(o,m);return v.isEqual(T)?ie.resolve():this.vn(e,o,m,v,T)}))))})}Rn(e,t,r,i){return EE(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return EE(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=EE(e);let o=new fr(Hf);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(u,h)=>{o=o.add(new ym(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>o)}An(e,t){let r=new fr(Hf);const i=this.mn(t,e);if(null==i)return r;const o=ji(t);if(null!=o){const u=e.data.field(o.fieldPath);if(dh(u))for(const h of u.arrayValue.values||[])r=r.add(new ym(t.indexId,e.key,this.dn(h),i))}else r=r.add(new ym(t.indexId,e.key,$I,i));return r}vn(e,t,r,i,o){Le("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(h,m,v,T,A){const O=h.getIterator(),F=m.getIterator();let j=Ff(O),Q=Ff(F);for(;j||Q;){let fe=!1,qe=!1;if(j&&Q){const Je=v(j,Q);Je<0?qe=!0:Je>0&&(fe=!0)}else null!=j?qe=!0:fe=!0;fe?(T(Q),Q=Ff(F)):qe?(A(j),j=Ff(O)):(j=Ff(O),Q=Ff(F))}}(i,o,Hf,h=>{u.push(this.Rn(e,t,r,h))},h=>{u.push(this.Pn(e,t,r,h))}),ie.waitFor(u)}Tn(e){let t=1;return CE(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,h)=>Hf(u,h)).filter((u,h,m)=>!h||0!==Hf(u,m[h-1]));const i=[];i.push(e);for(const u of r){const h=Hf(u,e),m=Hf(u,t);if(0===h)i[0]=e.Je();else if(h>0&&m<0)i.push(u),i.push(u.Je());else if(m>0)break}i.push(t);const o=[];for(let u=0;u<i.length;u+=2){if(this.bn(i[u],i[u+1]))return[];o.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,$I,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,$I,[]]))}return o}bn(e,t){return Hf(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(VO)}getMinOffset(e,t){return ie.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||at())).next(VO)}}function LO(n){return oi(n,"collectionParents")}function EE(n){return oi(n,"indexEntries")}function GI(n){return oi(n,"indexConfiguration")}function CE(n){return oi(n,"indexState")}function VO(n){gt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Ny(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new lo(e.readTime,e.documentKey,t)}const UO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class js{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new js(e,js.DEFAULT_COLLECTION_PERCENTILE,js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function BO(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],u=IDBKeyRange.only(t.batchId);let h=0;const m=r.X({range:u},(T,A,O)=>(h++,O.delete()));o.push(m.next(()=>{gt(1===h)}));const v=[];for(const T of t.mutations){const A=$w(e,T.key.path,t.batchId);o.push(i.delete(A)),v.push(T.key)}return ie.waitFor(o).next(()=>v)}function qI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw at();e=n.noDocument}return JSON.stringify(e).length}js.DEFAULT_COLLECTION_PERCENTILE=10,js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,js.DEFAULT=new js(41943040,js.DEFAULT_COLLECTION_PERCENTILE,js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),js.DISABLED=new js(-1,0,0);class zI{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){gt(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new zI(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $f(e).X({index:"userMutationsIndex",range:r},(i,o,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=Wy(e),u=$f(e);return u.add({}).next(h=>{gt("number"==typeof h);const m=new dm(h,t,r,i),v=function(O,F,j){const Q=j.baseMutations.map(qe=>_E(O.fe,qe)),fe=j.mutations.map(qe=>_E(O.fe,qe));return{userId:F,batchId:j.batchId,localWriteTimeMs:j.localWriteTime.toMillis(),baseMutations:Q,mutations:fe}}(this.serializer,this.userId,m),T=[];let A=new fr((O,F)=>Vt(O.canonicalString(),F.canonicalString()));for(const O of i){const F=$w(this.userId,O.key.path,h);A=A.add(O.key.path.popLast()),T.push(u.put(v)),T.push(o.put(F,nx))}return A.forEach(O=>{T.push(this.indexManager.addToCollectionParentIndex(e,O))}),e.addOnCommittedListener(()=>{this.Vn[h]=m.keys()}),ie.waitFor(T).next(()=>m)})}lookupMutationBatch(e,t){return $f(e).get(t).next(r=>r?(gt(r.userId===this.userId),mm(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ie.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return $f(e).X({index:"userMutationsIndex",range:i},(u,h,m)=>{h.userId===this.userId&&(gt(h.batchId>=r),o=mm(this.serializer,h)),m.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return $f(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,o,u)=>{r=o.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $f(e).j("userMutationsIndex",t).next(r=>r.map(i=>mm(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ry(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Wy(e).X({range:i},(u,h,m)=>{const[v,T,A]=u,O=ga(T);if(v===this.userId&&t.path.isEqual(O))return $f(e).get(A).next(F=>{if(!F)throw at();gt(F.userId===this.userId),o.push(mm(this.serializer,F))});m.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new fr(Vt);const i=[];return t.forEach(o=>{const u=Ry(this.userId,o.path),h=IDBKeyRange.lowerBound(u),m=Wy(e).X({range:h},(v,T,A)=>{const[O,F,j]=v,Q=ga(F);O===this.userId&&o.path.isEqual(Q)?r=r.add(j):A.done()});i.push(m)}),ie.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=Ry(this.userId,r),u=IDBKeyRange.lowerBound(o);let h=new fr(Vt);return Wy(e).X({range:u},(m,v,T)=>{const[A,O,F]=m,j=ga(O);A===this.userId&&r.isPrefixOf(j)?j.length===i&&(h=h.add(F)):T.done()}).next(()=>this.Dn(e,h))}Dn(e,t){const r=[],i=[];return t.forEach(o=>{i.push($f(e).get(o).next(u=>{if(null===u)throw at();gt(u.userId===this.userId),r.push(mm(this.serializer,u))}))}),ie.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return BO(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ie.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ie.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Wy(e).X({range:r},(o,u,h)=>{if(o[0]===this.userId){const m=ga(o[1]);i.push(m)}else h.done()}).next(()=>{gt(0===i.length)})})}containsKey(e,t){return jO(e,this.userId,t)}xn(e){return HO(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function jO(n,e,t){const r=Ry(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let u=!1;return Wy(n).X({range:o,Y:!0},(h,m,v)=>{const[T,A,O]=h;T===e&&A===i&&(u=!0),v.done()}).next(()=>u)}function $f(n){return oi(n,"mutations")}function Wy(n){return oi(n,"documentMutations")}function HO(n){return oi(n,"mutationQueues")}class vm{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new vm(0)}static Mn(){return new vm(-1)}}class FV{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new vm(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>_t.fromTimestamp(new ir(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Zy(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(gt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return Zy(e).X((u,h)=>{const m=yE(h);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,o.push(this.removeTargetData(e,m)))}).next(()=>ie.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Zy(e).X((r,i)=>{const o=yE(i);t(o)})}$n(e){return $O(e).get("targetGlobalKey").next(t=>(gt(null!==t),t))}On(e,t){return $O(e).put("targetGlobalKey",t)}Fn(e,t){return Zy(e).put(AO(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Lc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Zy(e).X({range:i,index:"queryTargetsIndex"},(u,h,m)=>{const v=yE(h);ma(t,v.target)&&(o=v,m.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=Gf(e);return t.forEach(u=>{const h=Hi(u.path);i.push(o.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,u))}),ie.waitFor(i)}removeMatchingKeys(e,t,r){const i=Gf(e);return ie.forEach(t,o=>{const u=Hi(o.path);return ie.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=Gf(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Gf(e);let o=tn();return i.X({range:r,Y:!0},(u,h,m)=>{const v=ga(u[1]),T=new Ye(v);o=o.add(T)}).next(()=>o)}containsKey(e,t){const r=Hi(t.path),i=IDBKeyRange.bound([r],[uI(r)],!1,!0);let o=0;return Gf(e).X({index:"documentTargetsIndex",Y:!0,range:i},([u,h],m,v)=>{0!==u&&(o++,v.done())}).next(()=>o>0)}le(e,t){return Zy(e).get(t).next(r=>r?yE(r):null)}}function Zy(n){return oi(n,"targets")}function $O(n){return oi(n,"targetGlobal")}function Gf(n){return oi(n,"targetDocuments")}function GO([n,e],[t,r]){const i=Vt(n,t);return 0===i?Vt(e,r):i}class LV{constructor(e){this.Ln=e,this.buffer=new fr(GO),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();GO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qO{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Le("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ce.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Pc(r)?Le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield hl(r)}yield t.Qn(3e5)}))}}class VV{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ie.resolve(jo.ct);const r=new LV(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(UO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),UO):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,o,u,h,m,v;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),i=this.params.maximumSequenceNumbersToCollect):i=A,u=Date.now(),this.nthSequenceNumber(e,i))).next(A=>(r=A,h=Date.now(),this.removeTargets(e,r,t))).next(A=>(o=A,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(v=Date.now(),Mw()<=da.in.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-T}ms\n\tDetermined least recently used ${i} in `+(h-u)+`ms\n\tRemoved ${o} targets in `+(m-h)+`ms\n\tRemoved ${A} documents in `+(v-m)+`ms\nTotal Duration: ${v-T}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:A})))}}class UV{constructor(e,t){this.db=e,this.garbageCollector=function zO(n,e){return new VV(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return WI(e,r)}removeReference(e,t,r){return WI(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return WI(e,t)}Xn(e,t){return function(r,i){let o=!1;return HO(r).Z(u=>jO(r,u,i).next(h=>(h&&(o=!0),ie.resolve(!h)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Yn(e,(u,h)=>{if(h<=t){const m=this.Xn(e,u).next(v=>{if(!v)return o++,r.getEntry(e,u).next(()=>(r.removeEntry(u,_t.min()),Gf(e).delete([0,Hi(u.path)])))});i.push(m)}}).next(()=>ie.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return WI(e,t)}Yn(e,t){const r=Gf(e);let i,o=jo.ct;return r.X({index:"documentTargetsIndex"},([u,h],{path:m,sequenceNumber:v})=>{0===u?(o!==jo.ct&&t(new Ye(ga(i)),o),o=v,i=m):o=jo.ct}).next(()=>{o!==jo.ct&&t(new Ye(ga(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function WI(n,e){return Gf(n).put((r=n.currentSequenceNumber,{targetId:0,path:Hi(e.path),sequenceNumber:r}));var r}class WO{constructor(){this.changes=new ya(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Qn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class BV{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return wm(e).put(r)}removeEntry(e,t,r){return wm(e).delete(function(i,o){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],BI(o),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Qn.newInvalidDocument(t);return wm(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(bE(t))},(i,o)=>{r=this.ts(t,o)}).next(()=>r)}es(e,t){let r={size:0,document:Qn.newInvalidDocument(t)};return wm(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(bE(t))},(i,o)=>{r={document:this.ts(t,o),size:qI(o)}}).next(()=>r)}getEntries(e,t){let r=vs();return this.ns(e,t,(i,o)=>{const u=this.ts(i,o);r=r.insert(i,u)}).next(()=>r)}ss(e,t){let r=vs(),i=new Zn(Ye.comparator);return this.ns(e,t,(o,u)=>{const h=this.ts(o,u);r=r.insert(o,h),i=i.insert(o,qI(u))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return ie.resolve();let i=new fr(QO);t.forEach(m=>i=i.add(m));const o=IDBKeyRange.bound(bE(i.first()),bE(i.last())),u=i.getIterator();let h=u.getNext();return wm(e).X({index:"documentKeyIndex",range:o},(m,v,T)=>{const A=Ye.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;h&&QO(h,A)<0;)r(h,null),h=u.getNext();h&&h.isEqual(A)&&(r(h,v),h=u.hasNext()?u.getNext():null),h?T.G(bE(h)):T.done()}).next(()=>{for(;h;)r(h,null),h=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const o=t.path,u=[o.popLast().toArray(),o.lastSegment(),BI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wm(e).j(IDBKeyRange.bound(u,h,!0)).next(m=>{let v=vs();for(const T of m){const A=this.ts(Ye.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);A.isFoundDocument()&&(Bf(t,A)||i.has(A.key))&&(v=v.insert(A.key,A))}return v})}getAllFromCollectionGroup(e,t,r,i){let o=vs();const u=YO(t,r),h=YO(t,lo.max());return wm(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,h,!0)},(m,v,T)=>{const A=this.ts(Ye.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);o=o.insert(A.key,A),o.size===i&&T.done()}).next(()=>o)}newChangeBuffer(e){return new jV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return KO(e).get("remoteDocumentGlobalKey").next(t=>(gt(!!t),t))}Zn(e,t){return KO(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function DV(n,e){let t;if(e.document)t=vO(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ye.fromSegments(e.noDocument.path),i=gm(e.noDocument.readTime);t=Qn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return at();{const r=Ye.fromSegments(e.unknownDocument.path),i=gm(e.unknownDocument.version);t=Qn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new ir(r[0],r[1]);return _t.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(_t.min()))return r}return Qn.newInvalidDocument(e)}}function ZO(n){return new BV(n)}class jV extends WO{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new ya(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new fr((o,u)=>Vt(o.canonicalString(),u.canonicalString()));return this.changes.forEach((o,u)=>{const h=this.us.get(o);if(t.push(this.os.removeEntry(e,o,h.readTime)),u.isValidDocument()){const m=DO(this.os.serializer,u);i=i.add(o.path.popLast()),r+=qI(m)-h.size,t.push(this.os.addEntry(e,o,m))}else if(r-=h.size,this.trackRemovals){const m=DO(this.os.serializer,u.convertToNoDocument(_t.min()));t.push(this.os.addEntry(e,o,m))}}),i.forEach(o=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.os.updateMetadata(e,r)),ie.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((o,u)=>{this.us.set(o,{size:u,readTime:r.get(o).readTime})}),r))}}function KO(n){return oi(n,"remoteDocumentGlobal")}function wm(n){return oi(n,"remoteDocumentsV14")}function bE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function YO(n,e){const t=e.documentKey.path.toArray();return[n,BI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function QO(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Vt(t[o],r[o]),i)return i;return i=Vt(t.length,r.length),i||(i=Vt(t[t.length-2],r[r.length-2]),i||Vt(t[t.length-1],r[r.length-1]))}class HV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class JO{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&We(r.mutation,i,Ji.empty(),ir.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,tn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=tn()){const i=bu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let u=um();return o.forEach((h,m)=>{u=u.insert(h,m.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=bu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,tn()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,r,i){let o=vs();const u=Gy(),h=Gy();return t.forEach((m,v)=>{const T=r.get(v.key);i.has(v.key)&&(void 0===T||T.mutation instanceof qt)?o=o.insert(v.key,v):void 0!==T?(u.set(v.key,T.mutation.getFieldMask()),We(T.mutation,v,T.mutation.getFieldMask(),ir.now())):u.set(v.key,Ji.empty())}),this.recalculateAndSaveOverlays(e,o).next(m=>(m.forEach((v,T)=>u.set(v,T)),t.forEach((v,T)=>{var A;return h.set(v,new HV(T,null!==(A=u.get(v))&&void 0!==A?A:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Gy();let i=new Zn((u,h)=>u-h),o=tn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(m=>{const v=t.get(m);if(null===v)return;let T=r.get(m)||Ji.empty();T=h.applyToLocalView(v,T),r.set(m,T);const A=(i.get(h.batchId)||tn()).add(m);i=i.insert(h.batchId,A)})}).next(()=>{const u=[],h=i.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),v=m.key,T=m.value,A=_x();T.forEach(O=>{if(!o.has(O)){const F=be(t.get(O),r.get(O));null!==F&&A.set(O,F),o=o.add(O)}}),u.push(this.documentOverlayCache.saveOverlays(e,v,A))}return ie.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ye.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):PI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const u=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):ie.resolve(bu());let h=-1,m=o;return u.next(v=>ie.forEach(v,(T,A)=>(h<A.largestBatchId&&(h=A.largestBatchId),o.get(T)?ie.resolve():this.remoteDocumentCache.getEntry(e,T).next(O=>{m=m.insert(T,O)}))).next(()=>this.populateOverlays(e,v,o)).next(()=>this.computeViews(e,m,v,tn())).next(T=>({batchId:h,changes:kI(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ye(t)).next(r=>{let i=um();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let o=um();return this.indexManager.getCollectionParents(e,i).next(u=>ie.forEach(u,h=>{const m=(v=t,T=h.child(i),new _a(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,T;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(v=>{v.forEach((T,A)=>{o=o.insert(T,A)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(o=>{i.forEach((h,m)=>{const v=m.getKey();null===o.get(v)&&(o=o.insert(v,Qn.newInvalidDocument(v)))});let u=um();return o.forEach((h,m)=>{const v=i.get(h);void 0!==v&&We(v.mutation,m,Ji.empty(),ir.now()),Bf(t,m)&&(u=u.insert(h,m))}),u})}}class $V{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ie.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:ai(r.createTime)}),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:Mx(r.bundledQuery),readTime:ai(r.readTime)}),ie.resolve();var r}}class GV{constructor(){this.overlays=new Zn(Ye.comparator),this.ls=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=bu();return ie.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.we(e,t,o)}),ie.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.ls.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const i=bu(),o=t.length+1,u=new Ye(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const m=h.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===o&&m.largestBatchId>r&&i.set(m.getKey(),m)}return ie.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Zn((v,T)=>v-T);const u=this.overlays.getIterator();for(;u.hasNext();){const v=u.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let T=o.get(v.largestBatchId);null===T&&(T=bu(),o=o.insert(v.largestBatchId,T)),T.set(v.getKey(),v)}}const h=bu(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,T)=>h.set(v,T)),!(h.size()>=i)););return ie.resolve(h)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new fm(t,r));let o=this.ls.get(t);void 0===o&&(o=tn(),this.ls.set(t,o)),this.ls.set(t,o.add(r.key))}}class Lx{constructor(){this.fs=new fr(es.ds),this.ws=new fr(es._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new es(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new es(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Ye(new fn([])),r=new es(t,e),i=new es(t,e+1),o=[];return this.ws.forEachInRange([r,i],u=>{this.ys(u),o.push(u.key)}),o}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ye(new fn([])),r=new es(t,e),i=new es(t,e+1);let o=tn();return this.ws.forEachInRange([r,i],u=>{o=o.add(u.key)}),o}containsKey(e){const t=new es(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class es{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ye.comparator(e.key,t.key)||Vt(e.As,t.As)}static _s(e,t){return Vt(e.As,t.As)||Ye.comparator(e.key,t.key)}}class qV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new fr(es.ds)}checkEmpty(e){return ie.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.vs;this.vs++;const u=new dm(o,t,r,i);this.mutationQueue.push(u);for(const h of i)this.Rs=this.Rs.add(new es(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ie.resolve(u)}lookupMutationBatch(e,t){return ie.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),o=i<0?0:i;return ie.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new es(t,0),i=new es(t,Number.POSITIVE_INFINITY),o=[];return this.Rs.forEachInRange([r,i],u=>{const h=this.Ps(u.As);o.push(h)}),ie.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new fr(Vt);return t.forEach(i=>{const o=new es(i,0),u=new es(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([o,u],h=>{r=r.add(h.As)})}),ie.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Ye.isDocumentKey(o)||(o=o.child(""));const u=new es(new Ye(o),0);let h=new fr(Vt);return this.Rs.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(h=h.add(m.As)),!0)},u),ie.resolve(this.Vs(h))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){gt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ie.forEach(t.mutations,i=>{const o=new es(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new es(t,0),i=this.Rs.firstAfterOrEqual(r);return ie.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ie.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class zV{constructor(e){this.Ds=e,this.docs=new Zn(Ye.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,u=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():Qn.newInvalidDocument(t))}getEntries(e,t){let r=vs();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Qn.newInvalidDocument(i))}),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=vs();const u=t.path,h=new Ye(u.child("")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:v,value:{document:T}}=m.getNext();if(!u.isPrefixOf(v.path))break;v.path.length>u.length+1||Ny(Py(T),r)<=0||(i.has(T.key)||Bf(t,T))&&(o=o.insert(T.key,T.mutableCopy()))}return ie.resolve(o)}getAllFromCollectionGroup(e,t,r,i){at()}Cs(e,t){return ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new WV(this)}getSize(e){return ie.resolve(this.size)}}class WV extends WO{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ie.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class ZV{constructor(e){this.persistence=e,this.xs=new ya(t=>Lc(t),ma),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Lx,this.targetCount=0,this.Ms=vm.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ie.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new vm(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Fn(t),ie.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.xs.forEach((u,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.xs.delete(u),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ie.waitFor(o).next(()=>i)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(u=>{o.push(i.markPotentiallyOrphaned(e,u))}),ie.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this.ks.containsKey(t))}}class Vx{constructor(e,t){this.$s={},this.overlays={},this.Os=new jo(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new ZV(this),this.indexManager=new RV,this.remoteDocumentCache=new zV(r=>this.referenceDelegate.Ls(r)),this.serializer=new IO(t),this.qs=new $V(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new GV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new qV(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Le("MemoryPersistence","Starting transaction:",e);const i=new KV(this.Os.next());return this.referenceDelegate.Us(),r(i).next(o=>this.referenceDelegate.Ks(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gs(e,t){return ie.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class KV extends fI{constructor(e){super(),this.currentSequenceNumber=e}}class ZI{constructor(e){this.persistence=e,this.Qs=new Lx,this.js=null}static zs(e){return new ZI(e)}get Ws(){if(this.js)return this.js;throw at()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Ws.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Ws,r=>{const i=Ye.fromPath(r);return this.Hs(e,i).next(o=>{o||t.removeEntry(i,_t.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ie.or([()=>ie.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class YV{constructor(e){this.serializer=e}O(e,t,r,i){const o=new oh("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gI,{unique:!0}),h.createObjectStore("documentMutations"),XO(e),function(h){h.createObjectStore("remoteDocuments")}(e));let u=ie.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),XO(e)),u=u.next(()=>function(h){const m=h.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_t.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(o))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(h,m){return m.store("mutations").j().next(v=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gI,{unique:!0});const T=m.store("mutations"),A=v.map(O=>T.put(O));return ie.waitFor(A)})}(e,o))),u=u.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Ys(o))),r<6&&i>=6&&(u=u.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(o)))),r<7&&i>=7&&(u=u.next(()=>this.Zs(o))),r<8&&i>=8&&(u=u.next(()=>this.ti(e,o))),r<9&&i>=9&&(u=u.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.ei(o))),r<11&&i>=11&&(u=u.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(h){const m=h.createObjectStore("documentOverlays",{keyPath:qN});m.createIndex("collectionPathOverlayIndex",zN,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",WN,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(h){const m=h.createObjectStore("remoteDocumentsV14",{keyPath:mI});m.createIndex("documentKeyIndex",_I),m.createIndex("collectionGroupIndex",yI)}(e)).next(()=>this.ni(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.si(e,o))),r<15&&i>=15&&(u=u.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:wI}).createIndex("sequenceNumberIndex",HN,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:$N}).createIndex("documentKeyIndex",GN,{unique:!1})}(e))),u}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=qI(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ie.forEach(i,o=>{const u=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",u).next(h=>ie.forEach(h,m=>{gt(m.userId===o.userId);const v=mm(this.serializer,m);return BO(e,o.userId,v).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.X((u,h)=>{const m=new fn(u),v=[0,Hi(m)];o.push(t.get(v).next(T=>T?ie.resolve():t.put({targetId:0,path:Hi(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ie.waitFor(o))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:jN});const r=t.store("collectionParents"),i=new Fx,o=u=>{if(i.add(u)){const h=u.lastSegment(),m=u.popLast();return r.put({collectionId:h,parent:Hi(m)})}};return t.store("remoteDocuments").X({Y:!0},(u,h)=>{const m=new fn(u);return o(m.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([u,h,m],v)=>{const T=ga(h);return o(T.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const o=yE(i),u=AO(this.serializer,o);return t.put(u)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((o,u)=>{const h=t.store("remoteDocumentsV14"),m=(v=u,v.document?new Ye(fn.fromString(v.document.name).popFirst(5)):v.noDocument?Ye.fromSegments(v.noDocument.path):v.unknownDocument?Ye.fromSegments(v.unknownDocument.path):at()).path.toArray();var v;const T={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(h.put(T))}).next(()=>ie.waitFor(i))}si(e,t){const r=t.store("mutations"),i=ZO(this.serializer),o=new Vx(ZI.zs,this.serializer.fe);return r.j().next(u=>{const h=new Map;return u.forEach(m=>{var v;let T=null!==(v=h.get(m.userId))&&void 0!==v?v:tn();mm(this.serializer,m).keys().forEach(A=>T=T.add(A)),h.set(m.userId,T)}),ie.forEach(h,(m,v)=>{const T=new Ei(v),A=jI.de(this.serializer,T),O=o.getIndexManager(T),F=zI.de(T,this.serializer,O,o.referenceDelegate);return new JO(i,F,A,O).recalculateAndSaveOverlaysForDocumentKeys(new rm(t,jo.ct),m).next()})})}}function XO(n){n.createObjectStore("targetDocuments",{keyPath:rx}).createIndex("documentTargetsIndex",ix,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",vI,{unique:!0}),n.createObjectStore("targetGlobal")}const Ux="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Bx{constructor(e,t,r,i,o,u,h,m,v,T,A=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=o,this.window=u,this.document=h,this.ri=v,this.oi=T,this.ui=A,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=O=>Promise.resolve(),!Bx.D())throw new Oe(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new UV(this,i),this.di=t+"main",this.serializer=new IO(m),this.wi=new uo(this.di,this.ui,new YV(this.serializer)),this.Bs=new FV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ZO(this.serializer),this.qs=new AV,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===T&&hr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Oe(ue.FAILED_PRECONDITION,Ux);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new jo(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,Ce.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Ce.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Ce.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>YI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Pc(e))return Le("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return TE(e).get("owner").next(t=>ie.resolve(this.Ri(t)))}Pi(e){return YI(e).delete(this.clientId)}bi(){var e=this;return(0,Ce.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=oi(r,"clientMetadata");return i.j().next(o=>{const u=e.Si(o,18e5),h=o.filter(m=>-1===u.indexOf(m));return ie.forEach(h,m=>i.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ie.resolve(!0):TE(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Oe(ue.FAILED_PRECONDITION,Ux);return!1}}return!(!this.networkEnabled||!this.inForeground)||YI(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Le("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ce.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new rm(t,jo.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>YI(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return zI.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new kV(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return jI.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Le("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=15===(u=this.ui)?EI:14===u?ox:13===u?nm:12===u?ZN:11===u?sx:void at();var u;let h;return this.wi.runTransaction(e,i,o,m=>(h=new rm(m,this.Os?this.Os.next():jo.ct),"readwrite-primary"===t?this.Ti(h).next(v=>!!v||this.Ei(h)).next(v=>{if(!v)throw hr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Oe(ue.FAILED_PRECONDITION,hI);return r(h)}).next(v=>this.vi(h).next(()=>v)):this.Oi(h).next(()=>r(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}Oi(e){return TE(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Oe(ue.FAILED_PRECONDITION,Ux)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return TE(e).put("owner",t)}static D(){return uo.D()}Ai(e){const t=TE(e);return t.get("owner").next(r=>this.Ri(r)?(Le("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ie.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(hr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,k.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Le("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return hr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){hr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function TE(n){return oi(n,"owner")}function YI(n){return oi(n,"clientMetadata")}function jx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Hx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=tn(),i=tn();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Hx(e,t.fromCache,r,i)}}class eR{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(o=>o||this.Gi(e,t,i,r)).next(o=>o||this.Qi(e,t))}Ki(e,t){if(mx(t))return ie.resolve(null);let r=ys(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=jy(t,null,"F"),r=ys(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const u=tn(...o);return this.Ui.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,r).next(m=>{const v=this.ji(t,h);return this.zi(t,v,u,m.readTime)?this.Ki(e,jy(t,null,"F")):this.Wi(e,v,t,m)}))})))}Gi(e,t,r,i){return mx(t)||i.isEqual(_t.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(o=>{const u=this.ji(t,o);return this.zi(t,u,r,i)?this.Qi(e,t):(Mw()<=da.in.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Hy(t)),this.Wi(e,u,t,dI(i,-1)))})}ji(e,t){let r=new fr(OI(e));return t.forEach((i,o)=>{Bf(e,o)&&(r=r.add(o))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Qi(e,t){return Mw()<=da.in.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",Hy(t)),this.Ui.getDocumentsMatchingQuery(e,t,lo.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(u=>{o=o.insert(u.key,u)}),o))}}class QV{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Zn(Vt),this.Yi=new ya(o=>Lc(o),ma),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JO(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function tR(n,e,t,r){return new QV(n,e,t,r)}function nR(n,e){return $x.apply(this,arguments)}function $x(){return $x=(0,Ce.Z)(function*(n,e){const t=Qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const u=[],h=[];let m=tn();for(const v of i){u.push(v.batchId);for(const T of v.mutations)m=m.add(T.key)}for(const v of o){h.push(v.batchId);for(const T of v.mutations)m=m.add(T.key)}return t.localDocuments.getDocuments(r,m).next(v=>({er:v,removedBatchIds:u,addedBatchIds:h}))})})}),$x.apply(this,arguments)}function JV(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Zi.newChangeBuffer({trackRemovals:!0});return function(u,h,m,v){const T=m.batch,A=T.keys();let O=ie.resolve();return A.forEach(F=>{O=O.next(()=>v.getEntry(h,F)).next(j=>{const Q=m.docVersions.get(F);gt(null!==Q),j.version.compareTo(Q)<0&&(T.applyToRemoteDocument(j,m),j.isValidDocument()&&(j.setReadTime(m.commitVersion),v.addEntry(j)))})}),O.next(()=>u.mutationQueue.removeMutationBatch(h,T))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=tn();for(let m=0;m<u.mutationResults.length;++m)u.mutationResults[m].transformResults.length>0&&(h=h.add(u.batch.mutations[m].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function rR(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function XV(n,e){const t=Qe(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const h=[];e.targetChanges.forEach((T,A)=>{const O=i.get(A);if(!O)return;h.push(t.Bs.removeMatchingKeys(o,T.removedDocuments,A).next(()=>t.Bs.addMatchingKeys(o,T.addedDocuments,A)));let F=O.withSequenceNumber(o.currentSequenceNumber);var j,Q,fe;null!==e.targetMismatches.get(A)?F=F.withResumeToken(bi.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):T.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(T.resumeToken,r)),i=i.insert(A,F),Q=F,fe=T,(0===(j=O).resumeToken.approximateByteSize()||Q.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8||fe.addedDocuments.size+fe.modifiedDocuments.size+fe.removedDocuments.size>0)&&h.push(t.Bs.updateTargetData(o,F))});let m=vs(),v=tn();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,T))}),h.push(iR(o,u,e.documentUpdates).next(T=>{m=T.nr,v=T.sr})),!r.isEqual(_t.min())){const T=t.Bs.getLastRemoteSnapshotVersion(o).next(A=>t.Bs.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(T)}return ie.waitFor(h).next(()=>u.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,m,v)).next(()=>m)}).then(o=>(t.Ji=i,o))}function iR(n,e,t){let r=tn(),i=tn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=vs();return t.forEach((h,m)=>{const v=o.get(h);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(h)),m.isNoDocument()&&m.version.isEqual(_t.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):Le("LocalStore","Ignoring outdated watch update for ",h,". Current version:",v.version," Watch version:",m.version)}),{nr:u,sr:i}})}function eU(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ky(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(o=>o?(i=o,ie.resolve(i)):t.Bs.allocateTargetId(r).next(u=>(i=new fh(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Yy(n,e,t){return Gx.apply(this,arguments)}function Gx(){return Gx=(0,Ce.Z)(function*(n,e,t){const r=Qe(n),i=r.Ji.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Pc(u))throw u;Le("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),Gx.apply(this,arguments)}function QI(n,e,t){const r=Qe(n);let i=_t.min(),o=tn();return r.persistence.runTransaction("Execute query","readonly",u=>function(h,m,v){const T=Qe(h),A=T.Yi.get(v);return void 0!==A?ie.resolve(T.Ji.get(A)):T.Bs.getTargetData(m,v)}(r,u,ys(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(u,h.targetId).next(m=>{o=m})}).next(()=>r.Hi.getDocumentsMatchingQuery(u,e,t?i:_t.min(),t?o:tn())).next(h=>(aR(r,NI(e),h),{documents:h,ir:o})))}function sR(n,e){const t=Qe(n),r=Qe(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.le(o,e).next(u=>u?u.target:null))}function oR(n,e){const t=Qe(n),r=t.Xi.get(e)||_t.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,dI(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(aR(t,e,i),i))}function aR(n,e,t){let r=n.Xi.get(e)||_t.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Xi.set(e,r)}function qx(){return qx=(0,Ce.Z)(function*(n,e,t,r){const i=Qe(n);let o=tn(),u=vs();for(const v of t){const T=e.rr(v.metadata.name);v.document&&(o=o.add(T));const A=e.ur(v);A.setReadTime(e.cr(v.metadata.readTime)),u=u.insert(T,A)}const h=i.Zi.newChangeBuffer({trackRemovals:!0}),m=yield Ky(i,(v=r,ys(Cu(fn.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>iR(v,h,u).next(T=>(h.apply(v),T)).next(T=>i.Bs.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.Bs.addMatchingKeys(v,o,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,T.nr,T.sr)).next(()=>T.nr)))}),qx.apply(this,arguments)}function nU(n,e){return zx.apply(this,arguments)}function zx(){return zx=(0,Ce.Z)(function*(n,e,t=tn()){const r=yield Ky(n,ys(Mx(e.bundledQuery))),i=Qe(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const u=ai(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.qs.saveNamedQuery(o,e);const h=r.withResumeToken(bi.EMPTY_BYTE_STRING,u);return i.Ji=i.Ji.insert(h.targetId,h),i.Bs.updateTargetData(o,h).next(()=>i.Bs.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Bs.addMatchingKeys(o,t,r.targetId)).next(()=>i.qs.saveNamedQuery(o,e))})}),zx.apply(this,arguments)}function lR(n,e){return`firestore_clients_${n}_${e}`}function uR(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Wx(n,e){return`firestore_targets_${n}_${e}`}class JI{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let o,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(o=new Oe(i.error.code,i.error.message))),u?new JI(e,t,i.state,o):(hr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class IE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new Oe(r.error.code,r.error.message))),o?new IE(e,r.state,i):(hr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class XI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=FI();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=jw(r.activeTargetIds[u]),o=o.add(r.activeTargetIds[u]);return i?new XI(e,o):(hr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Zx{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Zx(t.clientId,t.onlineState):(hr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Kx{constructor(){this.activeTargetIds=FI()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Yx{constructor(e,t,r,i,o){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Zn(Vt),this.started=!1,this.yr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.pr=lR(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new Kx),this.Tr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const o=e.getItem(lR(e.persistenceKey,i));if(o){const u=XI.ar(i,o);u&&(e.gr=e.gr.insert(u.clientId,u))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Wx(this.persistenceKey,e));if(r){const i=IE.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Wx(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Le("SharedClientState","READ",e,t),t}setItem(e,t){Le("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Le("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Le("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void hr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Ce.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(o){let u=jo.ct;if(null!=o)try{const h=JSON.parse(o);gt("number"==typeof h),u=h}catch(h){hr("SharedClientState","Failed to read sequence number from WebStorage",h)}return u}(r.newValue);i!==jo.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.Qr(o)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new JI(this.currentUser,e,t,r),o=uR(this.persistenceKey,this.currentUser,e);this.setItem(o,i.hr())}Cr(e){const t=uR(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=Wx(this.persistenceKey,e),o=new IE(e,t,r);this.setItem(i,o.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return XI.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return JI.ar(new Ei(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return IE.ar(i,t)}br(e){return Zx.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Ce.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Le("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),o=this.Sr(r),u=[],h=[];return o.forEach(m=>{i.has(m)||u.push(m)}),i.forEach(m=>{o.has(m)||h.push(m)}),this.syncEngine.Wr(u,h).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=FI();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class cR{constructor(){this.Hr=new Kx,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Kx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class rU{Yr(e){}shutdown(){}}class dR{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let eD=null;function Qx(){return null===eD?eD=268435456+Math.round(2147483648*Math.random()):eD++,"0x"+eD.toString(16)}const iU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sU{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Hs="WebChannelConnection";class oU extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,o){const u=Qx(),h=this.To(e,t);Le("RestConnection",`Sending RPC '${e}' ${u}:`,h,r);const m={};return this.Eo(m,i,o),this.Ao(e,h,m,r).then(v=>(Le("RestConnection",`Received RPC '${e}' ${u}: `,v),v),v=>{throw _s("RestConnection",`RPC '${e}' ${u} failed with error: `,v,"url: ",h,"request:",r),v})}vo(e,t,r,i,o,u){return this.Io(e,t,r,i,o)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Mc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}To(e,t){return`${this.mo}/v1/${t}:${iU[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const o=Qx();return new Promise((u,h)=>{const m=new Jg;m.setWithCredentials(!0),m.listenOnce(rI.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case xw.NO_ERROR:const T=m.getResponseJson();Le(Hs,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(T)),u(T);break;case xw.TIMEOUT:Le(Hs,`RPC '${e}' ${o} timed out`),h(new Oe(ue.DEADLINE_EXCEEDED,"Request time out"));break;case xw.HTTP_ERROR:const A=m.getStatus();if(Le(Hs,`RPC '${e}' ${o} failed with status:`,A,"response text:",m.getResponseText()),A>0){let O=m.getResponseJson();Array.isArray(O)&&(O=O[0]);const F=null==O?void 0:O.error;if(F&&F.status&&F.message){const j=function(Q){const fe=Q.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(fe)>=0?fe:ue.UNKNOWN}(F.status);h(new Oe(j,F.message))}else h(new Oe(ue.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Oe(ue.UNAVAILABLE,"Connection failed."));break;default:at()}}finally{Le(Hs,`RPC '${e}' ${o} completed.`)}});const v=JSON.stringify(i);Le(Hs,`RPC '${e}' ${o} sending request:`,i),m.send(t,"POST",v,r,15)})}Ro(e,t,r){const i=Qx(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=tI(),h=nI(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;void 0!==v&&(m.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(m.xmlHttpFactory=new ZS({})),this.Eo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const T=o.join("");Le(Hs,`Creating RPC '${e}' stream ${i}: ${T}`,m);const A=u.createWebChannel(T,m);let O=!1,F=!1;const j=new sU({ro:fe=>{F?Le(Hs,`Not sending because RPC '${e}' stream ${i} is closed:`,fe):(O||(Le(Hs,`Opening RPC '${e}' stream ${i} transport.`),A.open(),O=!0),Le(Hs,`RPC '${e}' stream ${i} sending:`,fe),A.send(fe))},oo:()=>A.close()}),Q=(fe,qe,Je)=>{fe.listen(qe,et=>{try{Je(et)}catch(pt){setTimeout(()=>{throw pt},0)}})};return Q(A,Sy.EventType.OPEN,()=>{F||Le(Hs,`RPC '${e}' stream ${i} transport opened.`)}),Q(A,Sy.EventType.CLOSE,()=>{F||(F=!0,Le(Hs,`RPC '${e}' stream ${i} transport closed`),j.wo())}),Q(A,Sy.EventType.ERROR,fe=>{F||(F=!0,_s(Hs,`RPC '${e}' stream ${i} transport errored:`,fe),j.wo(new Oe(ue.UNAVAILABLE,"The operation could not be completed")))}),Q(A,Sy.EventType.MESSAGE,fe=>{var qe;if(!F){const Je=fe.data[0];gt(!!Je);const et=Je,pt=et.error||(null===(qe=et[0])||void 0===qe?void 0:qe.error);if(pt){Le(Hs,`RPC '${e}' stream ${i} received error:`,pt);const Wt=pt.status;let Zt=function(Cs){const Cl=Or[Cs];if(void 0!==Cl)return sO(Cl)}(Wt),Sn=pt.message;void 0===Zt&&(Zt=ue.INTERNAL,Sn="Unknown error status: "+Wt+" with message "+pt.message),F=!0,j.wo(new Oe(Zt,Sn)),A.close()}else Le(Hs,`RPC '${e}' stream ${i} received:`,Je),j._o(Je)}}),Q(h,iI.STAT_EVENT,fe=>{fe.stat===sI.PROXY?Le(Hs,`RPC '${e}' stream ${i} detected buffering proxy`):fe.stat===sI.NOPROXY&&Le(Hs,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{j.fo()},0),j}}function hR(){return"undefined"!=typeof window?window:null}function tD(){return"undefined"!=typeof document?document:null}function DE(n){return new mV(n,!0)}class Jx{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=o,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class fR{constructor(e,t,r,i,o,u,h,m){this.ii=e,this.$o=r,this.Oo=i,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Jx(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Ce.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Ce.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,Ce.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(hr(t.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Oe(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,Ce.Z)(function*(){e.state=0,e.start()}))}tu(e){return Le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aU extends fR{constructor(e,t,r,i,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=o}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function vV(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:at(),i=e.targetChange.targetIds||[],o=function(m,v){return m.useProto3Json?(gt(void 0===v||"string"==typeof v),bi.fromBase64String(v||"")):(gt(void 0===v||v instanceof Uint8Array),bi.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(m){const v=void 0===m.code?ue.UNKNOWN:sO(m.code);return new Oe(v,m.message||"")}(u);t=new cO(r,i,o,h||null)}else if("documentChange"in e){const r=e.documentChange,i=jc(n,r.document.name),o=ai(r.document.updateTime),u=r.document.createTime?ai(r.document.createTime):_t.min(),h=new Xi({mapValue:{fields:r.document.fields}}),m=Qn.newFoundDocument(i,o,u,h);t=new UI(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,i=jc(n,r.document),o=r.readTime?ai(r.readTime):_t.min(),u=Qn.newNoDocument(i,o);t=new UI([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=jc(n,r.document);t=new UI([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return at();{const r=e.filter,{count:i=0,unchangedNames:o}=r,u=new dE(i,o);t=new uO(r.targetId,u)}}var m;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return _t.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?_t.min():o.readTime?ai(o.readTime):_t.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=mE(this.serializer),t.addTarget=function(i,o){let u;const h=o.target;if(u=am(h)?{documents:wO(i,h)}:{query:xx(i,h)},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=pO(i,o.resumeToken);const m=Ix(i,o.expectedCount);null!==m&&(u.expectedCount=m)}else if(o.snapshotVersion.compareTo(_t.min())>0){u.readTime=qy(i,o.snapshotVersion.toTimestamp());const m=Ix(i,o.expectedCount);null!==m&&(u.expectedCount=m)}return u}(this.serializer,e);const r=function EV(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return at()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=mE(this.serializer),t.removeTarget=e,this.Wo(t)}}class lU extends fR{constructor(e,t,r,i,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.serializer=o,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(gt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function wV(n,e){return n&&n.length>0?(gt(void 0!==e),n.map(t=>function(r,i){let o=ai(r.updateTime?r.updateTime:i);return o.isEqual(_t.min())&&(o=ai(i)),new P(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ai(e.commitTime);return this.listener.cu(r,t)}return gt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=mE(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>_E(this.serializer,r))};this.Wo(t)}}class uU extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Oe(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Io(e,t,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Oe(ue.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.vo(e,t,r,o,u,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Oe(ue.UNKNOWN,o.toString())})}terminate(){this.lu=!0}}class dU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(hr(t),this.mu=!1):Le("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class hU{constructor(e,t,r,i,o){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=o,this.Pu.Yr(h=>{r.enqueueAndForget((0,Ce.Z)(function*(){var m;qf(u)&&(Le("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,Ce.Z)(function*(v){const T=Qe(v);T.vu.add(4),yield Qy(T),T.bu.set("Unknown"),T.vu.delete(4),yield AE(T)}),function(v){return m.apply(this,arguments)})(u))}))}),this.bu=new dU(r,i)}}function AE(n){return e1.apply(this,arguments)}function e1(){return e1=(0,Ce.Z)(function*(n){if(qf(n))for(const e of n.Ru)yield e(!0)}),e1.apply(this,arguments)}function Qy(n){return t1.apply(this,arguments)}function t1(){return t1=(0,Ce.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),t1.apply(this,arguments)}function nD(n,e){const t=Qe(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),i1(t)?r1(t):Xy(t).Ko()&&n1(t,e))}function SE(n,e){const t=Qe(n),r=Xy(t);t.Au.delete(e),r.Ko()&&pR(t,e),0===t.Au.size&&(r.Ko()?r.jo():qf(t)&&t.bu.set("Unknown"))}function n1(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_t.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Xy(n).su(e)}function pR(n,e){n.Vu.qt(e),Xy(n).iu(e)}function r1(n){n.Vu=new hV({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Xy(n).start(),n.bu.gu()}function i1(n){return qf(n)&&!Xy(n).Uo()&&n.Au.size>0}function qf(n){return 0===Qe(n).vu.size}function gR(n){n.Vu=void 0}function fU(n){return s1.apply(this,arguments)}function s1(){return s1=(0,Ce.Z)(function*(n){n.Au.forEach((e,t)=>{n1(n,e)})}),s1.apply(this,arguments)}function pU(n,e){return o1.apply(this,arguments)}function o1(){return o1=(0,Ce.Z)(function*(n,e){gR(n),i1(n)?(n.bu.Iu(e),r1(n)):n.bu.set("Unknown")}),o1.apply(this,arguments)}function gU(n,e,t){return a1.apply(this,arguments)}function a1(){return a1=(0,Ce.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof cO&&2===e.state&&e.cause)try{yield(r=(0,Ce.Z)(function*(i,o){const u=o.cause;for(const h of o.targetIds)i.Au.has(h)&&(yield i.remoteSyncer.rejectListen(h,u),i.Au.delete(h),i.Vu.removeTarget(h))}),function(i,o){return r.apply(this,arguments)})(n,e)}catch(r){Le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield rD(n,r)}else if(e instanceof UI?n.Vu.Ht(e):e instanceof uO?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(_t.min()))try{const r=yield rR(n.localStore);t.compareTo(r)>=0&&(yield function(i,o){const u=i.Vu.ce(o);return u.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const v=i.Au.get(m);v&&i.Au.set(m,v.withResumeToken(h.resumeToken,o))}}),u.targetMismatches.forEach((h,m)=>{const v=i.Au.get(h);if(!v)return;i.Au.set(h,v.withResumeToken(bi.EMPTY_BYTE_STRING,v.snapshotVersion)),pR(i,h);const T=new fh(v.target,h,m,v.sequenceNumber);n1(i,T)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Le("RemoteStore","Failed to raise snapshot:",r),yield rD(n,r)}var r}),a1.apply(this,arguments)}function rD(n,e,t){return l1.apply(this,arguments)}function l1(){return l1=(0,Ce.Z)(function*(n,e,t){if(!Pc(e))throw e;n.vu.add(1),yield Qy(n),n.bu.set("Offline"),t||(t=()=>rR(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ce.Z)(function*(){Le("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield AE(n)}))}),l1.apply(this,arguments)}function mR(n,e){return e().catch(t=>rD(n,t,e))}function Jy(n){return u1.apply(this,arguments)}function u1(){return u1=(0,Ce.Z)(function*(n){const e=Qe(n),t=zf(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;mU(e);)try{const i=yield eU(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,_U(e,i)}catch(i){yield rD(e,i)}_R(e)&&yR(e)}),u1.apply(this,arguments)}function mU(n){return qf(n)&&n.Eu.length<10}function _U(n,e){n.Eu.push(e);const t=zf(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function _R(n){return qf(n)&&!zf(n).Uo()&&n.Eu.length>0}function yR(n){zf(n).start()}function yU(n){return c1.apply(this,arguments)}function c1(){return c1=(0,Ce.Z)(function*(n){zf(n).hu()}),c1.apply(this,arguments)}function vU(n){return d1.apply(this,arguments)}function d1(){return d1=(0,Ce.Z)(function*(n){const e=zf(n);for(const t of n.Eu)e.uu(t.mutations)}),d1.apply(this,arguments)}function wU(n,e,t){return h1.apply(this,arguments)}function h1(){return h1=(0,Ce.Z)(function*(n,e,t){const r=n.Eu.shift(),i=hm.from(r,e,t);yield mR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Jy(n)}),h1.apply(this,arguments)}function EU(n,e){return f1.apply(this,arguments)}function f1(){return f1=(0,Ce.Z)(function*(n,e){var t;e&&zf(n).ou&&(yield(t=(0,Ce.Z)(function*(r,i){if(iO(o=i.code)&&o!==ue.ABORTED){const u=r.Eu.shift();zf(r).Qo(),yield mR(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield Jy(r)}var o}),function(r,i){return t.apply(this,arguments)})(n,e)),_R(n)&&yR(n)}),f1.apply(this,arguments)}function vR(n,e){return p1.apply(this,arguments)}function p1(){return p1=(0,Ce.Z)(function*(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials");const r=qf(t);t.vu.add(3),yield Qy(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield AE(t)}),p1.apply(this,arguments)}function g1(n,e){return m1.apply(this,arguments)}function m1(){return m1=(0,Ce.Z)(function*(n,e){const t=Qe(n);e?(t.vu.delete(2),yield AE(t)):e||(t.vu.add(2),yield Qy(t),t.bu.set("Unknown"))}),m1.apply(this,arguments)}function Xy(n){return n.Su||(n.Su=function(e,t,r){const i=Qe(e);return i.fu(),new aU(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:fU.bind(null,n),ao:pU.bind(null,n),nu:gU.bind(null,n)}),n.Ru.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.Su.Qo(),i1(n)?r1(n):n.bu.set("Unknown")):(yield n.Su.stop(),gR(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function zf(n){return n.Du||(n.Du=function(e,t,r){const i=Qe(e);return i.fu(),new lU(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:yU.bind(null,n),ao:EU.bind(null,n),au:vU.bind(null,n),cu:wU.bind(null,n)}),n.Ru.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.Du.Qo(),yield Jy(n)):(yield n.Du.stop(),n.Eu.length>0&&(Le("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class _1{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,o){const u=Date.now()+r,h=new _1(e,t,u,i,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Oe(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ev(n,e){if(hr("AsyncQueue",`${e}: ${n}`),Pc(n))return new Oe(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class tv{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ye.comparator(t.key,r.key):(t,r)=>Ye.comparator(t.key,r.key),this.keyedMap=um(),this.sortedSet=new Zn(this.comparator)}static emptySet(e){return new tv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof tv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new tv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class wR{constructor(){this.Cu=new Zn(Ye.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):at():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class nv{constructor(e,t,r,i,o,u,h,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,o){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new nv(e,t,tv.emptySet(t),u,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class CU{constructor(){this.Nu=void 0,this.listeners=[]}}class bU{constructor(){this.queries=new ya(e=>lE(e),lm),this.onlineState="Unknown",this.ku=new Set}}function y1(n,e){return v1.apply(this,arguments)}function v1(){return v1=(0,Ce.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new CU),i)try{o.Nu=yield t.onListen(r)}catch(u){const h=ev(u,`Initialization of query '${Hy(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,o),o.listeners.push(e),e.Mu(t.onlineState),o.Nu&&e.$u(o.Nu)&&C1(t)}),v1.apply(this,arguments)}function w1(n,e){return E1.apply(this,arguments)}function E1(){return E1=(0,Ce.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const u=o.listeners.indexOf(e);u>=0&&(o.listeners.splice(u,1),i=0===o.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),E1.apply(this,arguments)}function TU(n,e){const t=Qe(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const h of u.listeners)h.$u(i)&&(r=!0);u.Nu=i}}r&&C1(t)}function IU(n,e,t){const r=Qe(n),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(t);r.queries.delete(e)}function C1(n){n.ku.forEach(e=>{e.next()})}class b1{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new nv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=nv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class DU{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class ER{constructor(e){this.serializer=e}rr(e){return jc(this.serializer,e)}ur(e){return e.metadata.exists?vO(this.serializer,e.document,!1):Qn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return ai(e)}}class AU{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=CR(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=fn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new ER(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.rr(i.metadata.name);for(const u of i.metadata.queries){const h=(t.get(u)||tn()).add(o);t.set(u,h)}}return t}complete(){var e=this;return(0,Ce.Z)(function*(){const t=yield function tU(n,e,t,r){return qx.apply(this,arguments)}(e.localStore,new ER(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield nU(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function CR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class bR{constructor(e){this.key=e}}class TR{constructor(e){this.key=e}}class IR{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=tn(),this.mutatedKeys=tn(),this.tc=OI(e),this.ec=new tv(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new wR,i=t?t.ec:this.ec;let o=t?t.mutatedKeys:this.mutatedKeys,u=i,h=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,A)=>{const O=i.get(T),F=Bf(this.query,A)?A:null,j=!!O&&this.mutatedKeys.has(O.key),Q=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let fe=!1;O&&F?O.data.isEqual(F.data)?j!==Q&&(r.track({type:3,doc:F}),fe=!0):this.rc(O,F)||(r.track({type:2,doc:F}),fe=!0,(m&&this.tc(F,m)>0||v&&this.tc(F,v)<0)&&(h=!0)):!O&&F?(r.track({type:0,doc:F}),fe=!0):O&&!F&&(r.track({type:1,doc:O}),fe=!0,(m||v)&&(h=!0)),fe&&(F?(u=u.add(F),o=Q?o.add(T):o.delete(T)):(u=u.delete(T),o=o.delete(T)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const T="F"===this.query.limitType?u.last():u.first();u=u.delete(T.key),o=o.delete(T.key),r.track({type:1,doc:T})}return{ec:u,ic:r,zi:h,mutatedKeys:o}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const o=e.ic.xu();o.sort((v,T)=>function(A,O){const F=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at()}};return F(A)-F(O)}(v.type,T.type)||this.tc(v.doc,T.doc)),this.oc(r);const u=t?this.uc():[],h=0===this.Zu.size&&this.current?1:0,m=h!==this.Xu;return this.Xu=h,0!==o.length||m?{snapshot:new nv(this.query,e.ec,i,o,e.mutatedKeys,0===h,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:u}:{cc:u}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new wR,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=tn(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new TR(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new bR(r))}),t}hc(e){this.Yu=e.ir,this.Zu=tn();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return nv.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class SU{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class xU{constructor(e){this.key=e,this.fc=!1}}class MU{constructor(e,t,r,i,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.dc={},this.wc=new ya(h=>lE(h),lm),this._c=new Map,this.mc=new Set,this.gc=new Zn(Ye.comparator),this.yc=new Map,this.Ic=new Lx,this.Tc={},this.Ec=new Map,this.Ac=vm.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function PU(n,e){return T1.apply(this,arguments)}function T1(){return T1=(0,Ce.Z)(function*(n,e){const t=W1(n);let r,i;const o=t.wc.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.lc();else{const u=yield Ky(t.localStore,ys(e)),h=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield I1(t,e,r,"current"===h,u.resumeToken),t.isPrimaryClient&&nD(t.remoteStore,u)}return i}),T1.apply(this,arguments)}function I1(n,e,t,r,i){return D1.apply(this,arguments)}function D1(){return D1=(0,Ce.Z)(function*(n,e,t,r,i){n.Rc=(A,O,F)=>{return(j=(0,Ce.Z)(function*(Q,fe,qe,Je){let et=fe.view.sc(qe);et.zi&&(et=yield QI(Q.localStore,fe.query,!1).then(({documents:Zt})=>fe.view.sc(Zt,et)));const pt=Je&&Je.targetChanges.get(fe.targetId),Wt=fe.view.applyChanges(et,Q.isPrimaryClient,pt);return F1(Q,fe.targetId,Wt.cc),Wt.snapshot}),function(Q,fe,qe,Je){return j.apply(this,arguments)})(n,A,O,F);var j};const o=yield QI(n.localStore,e,!0),u=new IR(e,o.ir),h=u.sc(o.documents),m=pE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=u.applyChanges(h,n.isPrimaryClient,m);F1(n,t,v.cc);const T=new SU(e,t,u);return n.wc.set(e,T),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),v.snapshot}),D1.apply(this,arguments)}function NU(n,e){return A1.apply(this,arguments)}function A1(){return A1=(0,Ce.Z)(function*(n,e){const t=Qe(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(o=>!lm(o,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Yy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),SE(t.remoteStore,r.targetId),rv(t,r.targetId)}).catch(hl))):(rv(t,r.targetId),yield Yy(t.localStore,r.targetId,!0))}),A1.apply(this,arguments)}function S1(){return S1=(0,Ce.Z)(function*(n,e,t){const r=Z1(n);try{const i=yield function(o,u){const h=Qe(o),m=ir.now(),v=u.reduce((O,F)=>O.add(F.key),tn());let T,A;return h.persistence.runTransaction("Locally write mutations","readwrite",O=>{let F=vs(),j=tn();return h.Zi.getEntries(O,v).next(Q=>{F=Q,F.forEach((fe,qe)=>{qe.isValidDocument()||(j=j.add(fe))})}).next(()=>h.localDocuments.getOverlayedDocuments(O,F)).next(Q=>{T=Q;const fe=[];for(const qe of u){const Je=dt(qe,T.get(qe.key).overlayedDocument);null!=Je&&fe.push(new qt(qe.key,Je,Jw(Je.value.mapValue),R.exists(!0)))}return h.mutationQueue.addMutationBatch(O,m,fe,u)}).next(Q=>{A=Q;const fe=Q.applyToLocalDocumentSet(T,j);return h.documentOverlayCache.saveOverlays(O,Q.batchId,fe)})}).then(()=>({batchId:A.batchId,changes:kI(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,u,h){let m=o.Tc[o.currentUser.toKey()];m||(m=new Zn(Vt)),m=m.insert(u,h),o.Tc[o.currentUser.toKey()]=m}(r,i.batchId,t),yield ph(r,i.changes),yield Jy(r.remoteStore)}catch(i){const o=ev(i,"Failed to persist write");t.reject(o)}}),S1.apply(this,arguments)}function DR(n,e){return x1.apply(this,arguments)}function x1(){return x1=(0,Ce.Z)(function*(n,e){const t=Qe(n);try{const r=yield XV(t.localStore,e);e.targetChanges.forEach((i,o)=>{const u=t.yc.get(o);u&&(gt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.fc=!0:i.modifiedDocuments.size>0?gt(u.fc):i.removedDocuments.size>0&&(gt(u.fc),u.fc=!1))}),yield ph(t,r,e)}catch(r){yield hl(r)}}),x1.apply(this,arguments)}function AR(n,e,t){const r=Qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((o,u)=>{const h=u.view.Mu(e);h.snapshot&&i.push(h.snapshot)}),function(o,u){const h=Qe(o);h.onlineState=u;let m=!1;h.queries.forEach((v,T)=>{for(const A of T.listeners)A.Mu(u)&&(m=!0)}),m&&C1(h)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function RU(n,e,t){return M1.apply(this,arguments)}function M1(){return M1=(0,Ce.Z)(function*(n,e,t){const r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),o=i&&i.key;if(o){let u=new Zn(Ye.comparator);u=u.insert(o,Qn.newNoDocument(o,_t.min()));const h=tn().add(o),m=new fE(_t.min(),new Map,new Zn(Vt),u,h);yield DR(r,m),r.gc=r.gc.remove(o),r.yc.delete(e),L1(r)}else yield Yy(r.localStore,e,!1).then(()=>rv(r,e,t)).catch(hl)}),M1.apply(this,arguments)}function kU(n,e){return P1.apply(this,arguments)}function P1(){return P1=(0,Ce.Z)(function*(n,e){const t=Qe(n),r=e.batch.batchId;try{const i=yield JV(t.localStore,e);k1(t,r,null),R1(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ph(t,i)}catch(i){yield hl(i)}}),P1.apply(this,arguments)}function FU(n,e,t){return N1.apply(this,arguments)}function N1(){return N1=(0,Ce.Z)(function*(n,e,t){const r=Qe(n);try{const i=yield function(o,u){const h=Qe(o);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return h.mutationQueue.lookupMutationBatch(m,u).next(T=>(gt(null!==T),v=T.keys(),h.mutationQueue.removeMutationBatch(m,T))).next(()=>h.mutationQueue.performConsistencyCheck(m)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(m,v,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>h.localDocuments.getDocuments(m,v))})}(r.localStore,e);k1(r,e,t),R1(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ph(r,i)}catch(i){yield hl(i)}}),N1.apply(this,arguments)}function O1(){return O1=(0,Ce.Z)(function*(n,e){const t=Qe(n);qf(t.remoteStore)||Le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const u=Qe(o);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>u.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=ev(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),O1.apply(this,arguments)}function R1(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function k1(n,e,t){const r=Qe(n);let i=r.Tc[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function rv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||SR(n,r)})}function SR(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(SE(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),L1(n))}function F1(n,e,t){for(const r of t)r instanceof bR?(n.Ic.addReference(r.key,e),VU(n,r)):r instanceof TR?(Le("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||SR(n,r.key)):at()}function VU(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Le("SyncEngine","New document in limbo: "+t),n.mc.add(r),L1(n))}function L1(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Ye(fn.fromString(e)),r=n.Ac.next();n.yc.set(r,new xU(t)),n.gc=n.gc.insert(t,r),nD(n.remoteStore,new fh(ys(Cu(t.path)),r,"TargetPurposeLimboResolution",jo.ct))}}function ph(n,e,t){return V1.apply(this,arguments)}function V1(){return V1=(0,Ce.Z)(function*(n,e,t){const r=Qe(n),i=[],o=[],u=[];var h;r.wc.isEmpty()||(r.wc.forEach((h,m)=>{u.push(r.Rc(m,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,(null==v?void 0:v.fromCache)?"not-current":"current"),v){i.push(v);const T=Hx.Li(m.targetId,v);o.push(T)}}))}),yield Promise.all(u),r.dc.nu(i),yield(h=(0,Ce.Z)(function*(m,v){const T=Qe(m);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>ie.forEach(v,O=>ie.forEach(O.Fi,F=>T.persistence.referenceDelegate.addReference(A,O.targetId,F)).next(()=>ie.forEach(O.Bi,F=>T.persistence.referenceDelegate.removeReference(A,O.targetId,F)))))}catch(A){if(!Pc(A))throw A;Le("LocalStore","Failed to update sequence numbers: "+A)}for(const A of v){const O=A.targetId;if(!A.fromCache){const F=T.Ji.get(O),Q=F.withLastLimboFreeSnapshotVersion(F.snapshotVersion);T.Ji=T.Ji.insert(O,Q)}}}),function(m,v){return h.apply(this,arguments)})(r.localStore,o))}),V1.apply(this,arguments)}function UU(n,e){return U1.apply(this,arguments)}function U1(){return U1=(0,Ce.Z)(function*(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){Le("SyncEngine","User change. New user:",e.toKey());const r=yield nR(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(u=>{u.forEach(h=>{h.reject(new Oe(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ph(t,r.er)}var i}),U1.apply(this,arguments)}function BU(n,e){const t=Qe(n),r=t.yc.get(e);if(r&&r.fc)return tn().add(r.key);{let i=tn();const o=t._c.get(e);if(!o)return i;for(const u of o){const h=t.wc.get(u);i=i.unionWith(h.view.nc)}return i}}function jU(n,e){return B1.apply(this,arguments)}function B1(){return B1=(0,Ce.Z)(function*(n,e){const t=Qe(n),r=yield QI(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&F1(t,e.targetId,i.cc),i}),B1.apply(this,arguments)}function HU(n,e){return j1.apply(this,arguments)}function j1(){return j1=(0,Ce.Z)(function*(n,e){const t=Qe(n);return oR(t.localStore,e).then(r=>ph(t,r))}),j1.apply(this,arguments)}function $U(n,e,t,r){return H1.apply(this,arguments)}function H1(){return H1=(0,Ce.Z)(function*(n,e,t,r){const i=Qe(n),o=yield function(u,h){const m=Qe(u),v=Qe(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",T=>v.Sn(T,h).next(A=>A?m.localDocuments.getDocuments(T,A):ie.resolve(null)))}(i.localStore,e);var h;null!==o?("pending"===t?yield Jy(i.remoteStore):"acknowledged"===t||"rejected"===t?(k1(i,e,r||null),R1(i,e),h=e,Qe(Qe(i.localStore).mutationQueue).Cn(h)):at(),yield ph(i,o)):Le("SyncEngine","Cannot apply mutation batch with id: "+e)}),H1.apply(this,arguments)}function $1(){return $1=(0,Ce.Z)(function*(n,e){const t=Qe(n);if(W1(t),Z1(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield xR(t,r.toArray());t.vc=!0,yield g1(t.remoteStore,!0);for(const o of i)nD(t.remoteStore,o)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((o,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(rv(t,u),Yy(t.localStore,u,!0))),SE(t.remoteStore,u)}),yield i,yield xR(t,r),function(o){const u=Qe(o);u.yc.forEach((h,m)=>{SE(u.remoteStore,m)}),u.Ic.Ts(),u.yc=new Map,u.gc=new Zn(Ye.comparator)}(t),t.vc=!1,yield g1(t.remoteStore,!1)}}),$1.apply(this,arguments)}function xR(n,e,t){return G1.apply(this,arguments)}function G1(){return G1=(0,Ce.Z)(function*(n,e,t){const r=Qe(n),i=[],o=[];for(const u of e){let h;const m=r._c.get(u);if(m&&0!==m.length){h=yield Ky(r.localStore,ys(m[0]));for(const v of m){const T=r.wc.get(v),A=yield jU(r,T);A.snapshot&&o.push(A.snapshot)}}else{const v=yield sR(r.localStore,u);h=yield Ky(r.localStore,v),yield I1(r,MR(v),u,!1,h.resumeToken)}i.push(h)}return r.dc.nu(o),i}),G1.apply(this,arguments)}function MR(n){return By(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function qU(n){const e=Qe(n);return Qe(Qe(e.localStore).persistence).$i()}function zU(n,e,t,r){return q1.apply(this,arguments)}function q1(){return q1=(0,Ce.Z)(function*(n,e,t,r){const i=Qe(n);if(i.vc)return void Le("SyncEngine","Ignoring unexpected query state notification.");const o=i._c.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const u=yield oR(i.localStore,NI(o[0])),h=fE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,bi.EMPTY_BYTE_STRING);yield ph(i,u,h);break}case"rejected":yield Yy(i.localStore,e,!0),rv(i,e,r);break;default:at()}}),q1.apply(this,arguments)}function WU(n,e,t){return z1.apply(this,arguments)}function z1(){return z1=(0,Ce.Z)(function*(n,e,t){const r=W1(n);if(r.vc){for(const i of e){if(r._c.has(i)){Le("SyncEngine","Adding an already active target "+i);continue}const o=yield sR(r.localStore,i),u=yield Ky(r.localStore,o);yield I1(r,MR(o),u.targetId,!1,u.resumeToken),nD(r.remoteStore,u)}for(const i of t)r._c.has(i)&&(yield Yy(r.localStore,i,!1).then(()=>{SE(r.remoteStore,i),rv(r,i)}).catch(hl))}}),z1.apply(this,arguments)}function W1(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=DR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RU.bind(null,e),e.dc.nu=TU.bind(null,e.eventManager),e.dc.Pc=IU.bind(null,e.eventManager),e}function Z1(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FU.bind(null,e),e}class xE{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ce.Z)(function*(){t.serializer=DE(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return tR(this.persistence,new eR,e.initialUser,this.serializer)}createPersistence(e){return new Vx(ZI.zs,this.serializer)}createSharedClientState(e){return new cR}terminate(){var e=this;return(0,Ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class K1 extends xE{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield Z1(r.Vc.syncEngine),yield Jy(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return tR(this.persistence,new eR,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new qO(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Bw(t,this.persistence);return new Uw(e.asyncQueue,r)}createPersistence(e){const t=jx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?js.withCacheSize(this.cacheSizeBytes):js.DEFAULT;return new Bx(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,hR(),tD(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new cR}}class PR extends K1{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof Yx&&(r.sharedClientState.syncEngine={jr:$U.bind(null,i),zr:zU.bind(null,i),Wr:WU.bind(null,i),$i:qU.bind(null,i),Qr:HU.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var o=(0,Ce.Z)(function*(u){yield function GU(n,e){return $1.apply(this,arguments)}(r.Vc.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const t=hR();if(!Yx.D(t))throw new Oe(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=jx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Yx(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class iv{initialize(e,t){var r=this;return(0,Ce.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>AR(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=UU.bind(null,r.syncEngine),yield g1(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new bU}createDatastore(e){const t=DE(e.databaseInfo.databaseId),r=new oU(e.databaseInfo);return new uU(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,o=h=>AR(this.syncEngine,h,0),u=dR.D()?new dR:new rU,new hU(t,r,i,o,u);var t,r,i,o,u}createSyncEngine(e,t){return function(r,i,o,u,h,m,v){const T=new MU(r,i,o,u,h,m);return v&&(T.vc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ce.Z)(function*(t){const r=Qe(t);Le("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Qy(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function NR(n,e=10240){let t=0;return{read:()=>(0,Ce.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ce.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class iD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):hr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class YU{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new si,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Ce.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Ce.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const o=yield e.$c(i);return new DU(JSON.parse(o),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Ce.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,Ce.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class QU{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ce.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Oe(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ce.Z)(function*(o,u){const h=Qe(o),m=mE(h.serializer)+"/documents",v={documents:u.map(F=>gE(h.serializer,F))},T=yield h.vo("BatchGetDocuments",m,v,u.length),A=new Map;T.forEach(F=>{const j=function yV(n,e){return"found"in e?function(t,r){gt(!!r.found);const i=jc(t,r.found.name),o=ai(r.found.updateTime),u=r.found.createTime?ai(r.found.createTime):_t.min(),h=new Xi({mapValue:{fields:r.found.fields}});return Qn.newFoundDocument(i,o,u,h)}(n,e):"missing"in e?function(t,r){gt(!!r.missing),gt(!!r.readTime);const i=jc(t,r.missing),o=ai(r.readTime);return Qn.newNoDocument(i,o)}(n,e):at()}(h.serializer,F);A.set(j.key.toString(),j)});const O=[];return u.forEach(F=>{const j=A.get(F.toString());gt(!!j),O.push(j)}),O}),function(o,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Bc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=Ye.fromPath(i);e.mutations.push(new cm(o,e.precondition(o)))}),yield(r=(0,Ce.Z)(function*(i,o){const u=Qe(i),h=mE(u.serializer)+"/documents",m={writes:o.map(v=>_E(u.serializer,v))};yield u.Io("Commit",h,m)}),function(i,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw at();t=_t.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Oe(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(_t.min())?R.exists(!1):R.updateTime(t):R.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_t.min()))throw new Oe(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return R.updateTime(t)}return R.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class JU{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Bc=r.maxAttempts,this.qo=new Jx(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Ce.Z)(function*(){const t=new QU(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.Uc(o)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!em(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!iO(t)}return!1}}class XU{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ei.UNAUTHENTICATED,this.clientId=Fw.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,Ce.Z)(function*(h){Le("FirestoreClient","Received user=",h.uid),yield o.authCredentialListener(h),o.user=h});return function(h){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Le("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,Ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Oe(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=ev(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function sD(n,e){return Y1.apply(this,arguments)}function Y1(){return Y1=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ce.Z)(function*(o){r.isEqual(o)||(yield nR(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Y1.apply(this,arguments)}function Q1(n,e){return J1.apply(this,arguments)}function J1(){return J1=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield X1(n);Le("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>vR(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>vR(e.remoteStore,o)),n._onlineComponents=e}),J1.apply(this,arguments)}function OR(n){return"FirebaseError"===n.name?n.code===ue.FAILED_PRECONDITION||n.code===ue.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function X1(n){return eM.apply(this,arguments)}function eM(){return eM=(0,Ce.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Le("FirestoreClient","Using user provided OfflineComponentProvider");try{yield sD(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!OR(t))throw t;_s("Error using user provided cache. Falling back to memory cache: "+t),yield sD(n,new xE)}}else Le("FirestoreClient","Using default OfflineComponentProvider"),yield sD(n,new xE);return n._offlineComponents}),eM.apply(this,arguments)}function oD(n){return tM.apply(this,arguments)}function tM(){return tM=(0,Ce.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Le("FirestoreClient","Using user provided OnlineComponentProvider"),yield Q1(n,n._uninitializedComponentsProvider._online)):(Le("FirestoreClient","Using default OnlineComponentProvider"),yield Q1(n,new iv))),n._onlineComponents}),tM.apply(this,arguments)}function RR(n){return X1(n).then(e=>e.persistence)}function aD(n){return X1(n).then(e=>e.localStore)}function kR(n){return oD(n).then(e=>e.remoteStore)}function nM(n){return oD(n).then(e=>e.syncEngine)}function sv(n){return rM.apply(this,arguments)}function rM(){return rM=(0,Ce.Z)(function*(n){const e=yield oD(n),t=e.eventManager;return t.onListen=PU.bind(null,e.syncEngine),t.onUnlisten=NU.bind(null,e.syncEngine),t}),rM.apply(this,arguments)}function LR(n,e,t={}){const r=new si;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,o,u,h,m){const v=new iD({next:A=>{o.enqueueAndForget(()=>w1(i,T));const O=A.docs.has(u);!O&&A.fromCache?m.reject(new Oe(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&A.fromCache&&h&&"server"===h.source?m.reject(new Oe(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(A)},error:A=>m.reject(A)}),T=new b1(Cu(u.path),v,{includeMetadataChanges:!0,Ku:!0});return y1(i,T)}(yield sv(n),n.asyncQueue,e,t,r)})),r.promise}function VR(n,e,t={}){const r=new si;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,o,u,h,m){const v=new iD({next:A=>{o.enqueueAndForget(()=>w1(i,T)),A.fromCache&&"server"===h.source?m.reject(new Oe(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(A)},error:A=>m.reject(A)}),T=new b1(u,v,{includeMetadataChanges:!0,Ku:!0});return y1(i,T)}(yield sv(n),n.asyncQueue,e,t,r)})),r.promise}function UR(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const BR=new Map;function iM(n,e,t){if(!t)throw new Oe(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function jR(n,e,t,r){if(!0===e&&!0===r)throw new Oe(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function HR(n){if(!Ye.isDocumentKey(n))throw new Oe(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function $R(n){if(Ye.isDocumentKey(n))throw new Oe(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function lD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":at()}function _n(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Oe(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=lD(n);throw new Oe(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function GR(n,e){if(e<=0)throw new Oe(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class qR{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Oe(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Oe(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=UR(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Oe(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Oe(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Oe(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ME{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qR({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Oe(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Oe(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qR(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Nw;switch(t.type){case"firstParty":return new kw(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Oe(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=BR.get(e);t&&(Le("ComponentProvider","Removing Datastore"),BR.delete(e),t.terminate())}(this),Promise.resolve()}}class wr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wr(this.firestore,e,this._key)}}class ws{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ws(this.firestore,e,this._query)}}class Hc extends ws{constructor(e,t,r){super(e,t,Cu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wr(this.firestore,null,new Ye(e))}withConverter(e){return new Hc(this.firestore,e,this._path)}}function WR(n,e,...t){if(n=(0,k.m9)(n),iM("collection","path",e),n instanceof ME){const r=fn.fromString(e,...t);return $R(r),new Hc(n,null,r)}{if(!(n instanceof wr||n instanceof Hc))throw new Oe(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return $R(r),new Hc(n.firestore,null,r)}}function uD(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=Fw.A()),iM("doc","path",e),n instanceof ME){const r=fn.fromString(e,...t);return HR(r),new wr(n,null,new Ye(r))}{if(!(n instanceof wr||n instanceof Hc))throw new Oe(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return HR(r),new wr(n.firestore,n instanceof Hc?n.converter:null,new Ye(r))}}function ZR(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof wr||n instanceof Hc)&&(e instanceof wr||e instanceof Hc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function sM(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof ws&&e instanceof ws&&n.firestore===e.firestore&&lm(n._query,e._query)&&n.converter===e.converter}class uB{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Jx(this,"async_queue_retry"),this.Xc=()=>{const t=tD();t&&Le("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=tD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=tD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new si;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Ce.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Pc(t))throw t;Le("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,hr("INTERNAL UNHANDLED ERROR: ",function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),u}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=_1.createAndSchedule(this,e,t,r,o=>this.na(o));return this.zc.push(i),i}Zc(){this.Wc&&at()}verifyOperationInProgress(){}sa(){var e=this;return(0,Ce.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function oM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class cB{constructor(){this._progressObserver={},this._taskCompletionResolver=new si,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Er extends ME{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new uB,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||KR(this),this._firestoreClient.terminate()}}function li(n){return n._firestoreClient||KR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function KR(n){var e,t,r;const i=n._freezeSettings(),o=(h=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ax(n._databaseId,h,n._persistenceKey,(v=i).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,UR(v.experimentalLongPollingOptions),v.useFetchStreams));var h,v;n._firestoreClient=new XU(n._authCredentials,n._appCheckCredentials,n._queue,o),(null===(t=i.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function YR(n,e,t){const r=new si;return n.asyncQueue.enqueue((0,Ce.Z)(function*(){try{yield sD(n,t),yield Q1(n,e),r.resolve()}catch(i){const o=i;if(!OR(o))throw o;_s("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function QR(n){if(n._initialized||n._terminated)throw new Oe(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class $c{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $c(bi.fromBase64String(e))}catch(t){throw new Oe(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $c(bi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class gh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Oe(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Em{constructor(e){this._methodName=e}}class cD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Oe(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Oe(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Vt(this._lat,e._lat)||Vt(this._long,e._long)}}const EB=/^__.*__$/;class CB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new qt(e,this.data,this.fieldMask,t,this.fieldTransforms):new yt(e,this.data,t,this.fieldTransforms)}}class JR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new qt(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function XR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at()}}class dD{constructor(e,t,r,i,o,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.ua(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new dD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return pD(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(XR(this.ca)&&EB.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class bB{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||DE(e)}ya(e,t,r,i=!1){return new dD({ca:e,methodName:t,ga:r,path:Pr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cm(n){const e=n._freezeSettings(),t=DE(n._databaseId);return new bB(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hD(n,e,t,r,i,o={}){const u=n.ya(o.merge||o.mergeFields?2:0,e,t,i);cM("Data must be an object, but it was:",u,r);const h=nk(r,u);let m,v;if(o.merge)m=new Ji(u.fieldMask),v=u.fieldTransforms;else if(o.mergeFields){const T=[];for(const A of o.mergeFields){const O=OE(e,A,t);if(!u.contains(O))throw new Oe(ue.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);ik(T,O)||T.push(O)}m=new Ji(T),v=u.fieldTransforms.filter(A=>m.covers(A.field))}else m=null,v=u.fieldTransforms;return new CB(new Xi(h),m,v)}class NE extends Em{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof NE}}function ek(n,e,t){return new dD({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class aM extends Em{_toFieldTransform(e){return new D(e.path,new s)}isEqual(e){return e instanceof aM}}class TB extends Em{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=ek(this,e,!0),r=this.pa.map(o=>bm(o,t)),i=new a(r);return new D(e.path,i)}isEqual(e){return this===e}}class IB extends Em{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=ek(this,e,!0),r=this.pa.map(o=>bm(o,t)),i=new d(r);return new D(e.path,i)}isEqual(e){return this===e}}class DB extends Em{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new _(e.serializer,LI(e.serializer,this.Ia));return new D(e.path,t)}isEqual(e){return this===e}}function lM(n,e,t,r){const i=n.ya(1,e,t);cM("Data must be an object, but it was:",i,r);const o=[],u=Xi.empty();ah(r,(m,v)=>{const T=fD(e,m,t);v=(0,k.m9)(v);const A=i.da(T);if(v instanceof NE)o.push(T);else{const O=bm(v,A);null!=O&&(o.push(T),u.set(T,O))}});const h=new Ji(o);return new JR(u,h,i.fieldTransforms)}function uM(n,e,t,r,i,o){const u=n.ya(1,e,t),h=[OE(e,r,t)],m=[i];if(o.length%2!=0)throw new Oe(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let O=0;O<o.length;O+=2)h.push(OE(e,o[O])),m.push(o[O+1]);const v=[],T=Xi.empty();for(let O=h.length-1;O>=0;--O)if(!ik(v,h[O])){const F=h[O];let j=m[O];j=(0,k.m9)(j);const Q=u.da(F);if(j instanceof NE)v.push(F);else{const fe=bm(j,Q);null!=fe&&(v.push(F),T.set(F,fe))}}const A=new Ji(v);return new JR(T,A,u.fieldTransforms)}function tk(n,e,t,r=!1){return bm(t,n.ya(r?4:3,e))}function bm(n,e){if(rk(n=(0,k.m9)(n)))return cM("Unsupported field value:",e,n),nk(n,e);if(n instanceof Em)return function(t,r){if(!XR(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let o=0;for(const u of t){let h=bm(u,r.wa(o));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),o++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return LI(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=ir.fromDate(t);return{timestampValue:qy(r.serializer,i)}}if(t instanceof ir){const i=new ir(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:qy(r.serializer,i)}}if(t instanceof cD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof $c)return{bytesValue:pO(r.serializer,t._byteString)};if(t instanceof wr){const i=r.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw r._a(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Dx(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${lD(t)}`)}(n,e)}function nk(n,e){const t={};return ky(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ah(n,(r,i)=>{const o=bm(i,e.ha(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function rk(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ir||n instanceof cD||n instanceof $c||n instanceof wr||n instanceof Em)}function cM(n,e,t){if(!rk(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=lD(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function OE(n,e,t){if((e=(0,k.m9)(e))instanceof gh)return e._internalPath;if("string"==typeof e)return fD(n,e);throw pD("Field path arguments must be of type string or ",n,!1,void 0,t)}const AB=new RegExp("[~\\*/\\[\\]]");function fD(n,e,t){if(e.search(AB)>=0)throw pD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new gh(...e.split("."))._internalPath}catch(r){throw pD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function pD(n,e,t,r,i){const o=r&&!r.isEmpty(),u=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(o||u)&&(m+=" (found",o&&(m+=` in field ${r}`),u&&(m+=` in document ${i}`),m+=")"),new Oe(ue.INVALID_ARGUMENT,h+n+m)}function ik(n,e){return n.some(t=>t.isEqual(e))}class RE{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new wr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new SB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(gD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class SB extends RE{data(){return super.data()}}function gD(n,e){return"string"==typeof e?fD(n,e):e instanceof gh?e._internalPath:e._delegate._internalPath}function sk(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Oe(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dM{}class kE extends dM{}function Wf(n,e,...t){let r=[];e instanceof dM&&r.push(e),r=r.concat(t),function(i){const o=i.filter(h=>h instanceof ov).length,u=i.filter(h=>h instanceof FE).length;if(o>1||o>0&&u>0)throw new Oe(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class FE extends kE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new FE(e,t,r)}_apply(e){const t=this._parse(e);return uk(e._query,t),new ws(e.firestore,e.converter,aE(e._query,t))}_parse(e){const t=Cm(e.firestore);return function(i,o,u,h,m,v,T){let A;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Oe(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){lk(T,v);const O=[];for(const F of T)O.push(ak(h,i,F));A={arrayValue:{values:O}}}else A=ak(h,i,T)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||lk(T,v),A=tk(u,"where",T,"in"===v||"not-in"===v);return un.create(m,v,A)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class ov extends dM{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ov(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Dn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let o=r;const u=i.getFlattenedFilters();for(const h of u)uk(o,h),o=aE(o,h)}(e._query,t),new ws(e.firestore,e.converter,aE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class hM extends kE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new hM(e,t)}_apply(e){const t=function(r,i,o){if(null!==r.startAt)throw new Oe(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Oe(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new Fc(i,o);return function(h,m){if(null===MI(h)){const v=oE(h);null!==v&&ck(0,v,m.field)}}(r,u),u}(e._query,this._field,this._direction);return new ws(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new _a(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class mD extends kE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new mD(e,t,r)}_apply(e){return new ws(e.firestore,e.converter,jy(e._query,this._limit,this._limitType))}}class _D extends kE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new _D(e,t,r)}_apply(e){const t=ok(e,this.type,this._docOrFields,this._inclusive);return new ws(e.firestore,e.converter,(i=t,new _a((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class yD extends kE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new yD(e,t,r)}_apply(e){const t=ok(e,this.type,this._docOrFields,this._inclusive);return new ws(e.firestore,e.converter,(i=t,new _a((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function ok(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof RE)return function(i,o,u,h,m){if(!h)throw new Oe(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const v=[];for(const T of Vc(i))if(T.field.isKeyField())v.push(ch(o,h.key));else{const A=h.data.field(T.field);if(zw(A))throw new Oe(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const O=T.field.canonicalString();throw new Oe(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${O}' (used as the orderBy) does not exist.`)}v.push(A)}return new kc(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Cm(n.firestore);return function(o,u,h,m,v,T){const A=o.explicitOrderBy;if(v.length>A.length)throw new Oe(ue.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const O=[];for(let F=0;F<v.length;F++){const j=v[F];if(A[F].field.isKeyField()){if("string"!=typeof j)throw new Oe(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof j}`);if(!PI(o)&&-1!==j.indexOf("/"))throw new Oe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${j}' contains a slash.`);const Q=o.path.child(fn.fromString(j));if(!Ye.isDocumentKey(Q))throw new Oe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${Q}' is not because it contains an odd number of segments.`);const fe=new Ye(Q);O.push(ch(u,fe))}else{const Q=tk(h,m,j);O.push(Q)}}return new kc(O,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function ak(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Oe(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PI(e)&&-1!==t.indexOf("/"))throw new Oe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(fn.fromString(t));if(!Ye.isDocumentKey(r))throw new Oe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ch(n,new Ye(r))}if(t instanceof wr)return ch(n,t._key);throw new Oe(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lD(t)}.`)}function lk(n,e){if(!Array.isArray(n)||0===n.length)throw new Oe(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uk(n,e){if(e.isInequality()){const r=oE(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Oe(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const o=MI(n);null!==o&&ck(0,i,o)}const t=function(r,i){for(const o of r)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Oe(ue.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function ck(n,e,t){if(!t.isEqual(e))throw new Oe(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class fM{convertValue(e,t="none"){switch(Rc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw at()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ah(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new cD(Nr(e.latitude),Nr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Fy(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(lh(e));default:return null}}convertTimestamp(e){const t=Nc(e);return new ir(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=fn.fromString(e);gt(TO(r));const i=new Ti(r.get(1),r.get(3)),o=new Ye(r.popFirst(5));return i.isEqual(t)||hr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function vD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class LB extends fM{constructor(e){super(),this.firestore=e}convertBytes(e){return new $c(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wr(this.firestore,null,t)}}class Tm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mh extends RE{constructor(e,t,r,i,o,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new LE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(gD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class LE extends mh{data(e={}){return super.data(e)}}class Zf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Tm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new LE(this._firestore,this._userDataWriter,r.key,r,new Tm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Oe(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new LE(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Tm(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const h=new LE(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Tm(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==u.type&&(m=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),1!==u.type&&(o=o.add(u.doc),v=o.indexOf(u.doc.key)),{type:UB(u.type),doc:h,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function UB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at()}}function hk(n,e){return n instanceof mh&&e instanceof mh?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Zf&&e instanceof Zf&&n._firestore===e._firestore&&sM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Kf extends fM{constructor(e){super(),this.firestore=e}convertBytes(e){return new $c(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wr(this.firestore,null,t)}}function fk(n,e,t){n=_n(n,wr);const r=_n(n.firestore,Er),i=vD(n.converter,e,t);return av(r,[hD(Cm(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,R.none())])}function pk(n,e,t,...r){n=_n(n,wr);const i=_n(n.firestore,Er),o=Cm(i);let u;return u="string"==typeof(e=(0,k.m9)(e))||e instanceof gh?uM(o,"updateDoc",n._key,e,t,r):lM(o,"updateDoc",n._key,e),av(i,[u.toMutation(n._key,R.exists(!0))])}function gk(n,...e){var t,r,i;n=(0,k.m9)(n);let o={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||oM(e[u])||(o=e[u],u++);const h={includeMetadataChanges:o.includeMetadataChanges};if(oM(e[u])){const A=e[u];e[u]=null===(t=A.next)||void 0===t?void 0:t.bind(A),e[u+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[u+2]=null===(i=A.complete)||void 0===i?void 0:i.bind(A)}let m,v,T;if(n instanceof wr)v=_n(n.firestore,Er),T=Cu(n._key.path),m={next:A=>{e[u]&&e[u](pM(v,n,A))},error:e[u+1],complete:e[u+2]};else{const A=_n(n,ws);v=_n(A.firestore,Er),T=A._query;const O=new Kf(v);m={next:F=>{e[u]&&e[u](new Zf(v,O,A,F))},error:e[u+1],complete:e[u+2]},sk(n._query)}return function(A,O,F,j){const Q=new iD(j),fe=new b1(O,Q,F);return A.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return y1(yield sv(A),fe)})),()=>{Q.Dc(),A.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return w1(yield sv(A),fe)}))}}(li(v),T,h,m)}function av(n,e){return function(t,r){const i=new si;return t.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function OU(n,e,t){return S1.apply(this,arguments)}(yield nM(t),r,i)})),i.promise}(li(n),e)}function pM(n,e,t){const r=t.docs.get(e._key),i=new Kf(n);return new mh(n,i,e._key,r,new Tm(t.hasPendingWrites,t.fromCache),e.converter)}const rj={maxAttempts:5};class mk{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Cm(e)}set(e,t,r){this._verifyNotCommitted();const i=Yf(e,this._firestore),o=vD(i.converter,t,r),u=hD(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,R.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=Yf(e,this._firestore);let u;return u="string"==typeof(t=(0,k.m9)(t))||t instanceof gh?uM(this._dataReader,"WriteBatch.update",o._key,t,r,i):lM(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(u.toMutation(o._key,R.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Yf(e,this._firestore);return this._mutations=this._mutations.concat(new Bc(t._key,R.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Oe(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Yf(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Oe(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class ij extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Cm(e)}get(e){const t=Yf(e,this._firestore),r=new LB(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return at();const o=i[0];if(o.isFoundDocument())return new RE(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new RE(this._firestore,r,t._key,null,t.converter);throw at()})}set(e,t,r){const i=Yf(e,this._firestore),o=vD(i.converter,t,r),u=hD(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const o=Yf(e,this._firestore);let u;return u="string"==typeof(t=(0,k.m9)(t))||t instanceof gh?uM(this._dataReader,"Transaction.update",o._key,t,r,i):lM(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,u),this}delete(e){const t=Yf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Yf(e,this._firestore),r=new Kf(this._firestore);return super.get(e).then(i=>new mh(this._firestore,r,t._key,i._document,new Tm(!1,!1),t.converter))}}function gM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Oe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function yk(){if("undefined"==typeof Uint8Array)throw new Oe("unimplemented","Uint8Arrays are not available in this environment.")}function vk(){if(!function KN(){return"undefined"!=typeof atob}())throw new Oe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Mc=so.SDK_VERSION,(0,so._registerComponent)(new cu.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const o=t.getProvider("app").getImmediate(),u=new Er(new aI(t.getProvider("auth-internal")),new JS(t.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Oe(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ti(h.options.projectId,m)}(o,r),o);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,so.registerVersion)(pa,"3.13.0",n),(0,so.registerVersion)(pa,"3.13.0","esm2017")}();class VE{constructor(e){this._delegate=e}static fromBase64String(e){return vk(),new VE($c.fromBase64String(e))}static fromUint8Array(e){return yk(),new VE($c.fromUint8Array(e))}toBase64(){return vk(),this._delegate.toBase64()}toUint8Array(){return yk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function mM(n){return function fj(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class pj{enableIndexedDbPersistence(e,t){return function hB(n,e){QR(n=_n(n,Er));const t=li(n);if(t._uninitializedComponentsProvider)throw new Oe(ue.FAILED_PRECONDITION,"SDK cache is already specified.");_s("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new iv;return YR(t,i,new K1(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function fB(n){QR(n=_n(n,Er));const e=li(n);if(e._uninitializedComponentsProvider)throw new Oe(ue.FAILED_PRECONDITION,"SDK cache is already specified.");_s("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new iv;return YR(e,r,new PR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function pB(n){if(n._initialized&&!n._terminated)throw new Oe(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new si;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{yield(t=(0,Ce.Z)(function*(r){if(!uo.D())return Promise.resolve();const i=r+"main";yield uo.delete(i)}),function(r){return t.apply(this,arguments)})(jx(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class wk{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ti||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&_s("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function zR(n,e,t,r={}){var i;const o=(n=_n(n,ME))._getSettings(),u=`${e}:${t}`;if("firestore.googleapis.com"!==o.host&&o.host!==u&&_s("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:u,ssl:!1})),r.mockUserToken){let h,m;if("string"==typeof r.mockUserToken)h=r.mockUserToken,m=Ei.MOCK_USER;else{h=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Oe(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Ei(v)}n._authCredentials=new Ow(new QS(h,m))}}(this._delegate,e,t,r)}enableNetwork(){return function mB(n){return function eB(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield RR(n),t=yield kR(n);return e.setNetworkEnabled(!0),function(r){const i=Qe(r);return i.vu.delete(0),AE(i)}(t)}))}(li(n=_n(n,Er)))}(this._delegate)}disableNetwork(){return function _B(n){return function tB(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield RR(n),t=yield kR(n);return e.setNetworkEnabled(!1),(r=(0,Ce.Z)(function*(i){const o=Qe(i);o.vu.add(0),yield Qy(o),o.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(li(n=_n(n,Er)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,jR("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function gB(n){return function(e){const t=new si;return e.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function LU(n,e){return O1.apply(this,arguments)}(yield nM(e),t)})),t.promise}(li(n=_n(n,Er)))}(this._delegate)}onSnapshotsInSync(e){return function ZB(n,e){return function iB(n,e){const t=new iD(e);return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield sv(n),i=t,Qe(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield sv(n),i=t,void Qe(r).ku.delete(i);var r,i}))}}(li(n=_n(n,Er)),oM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Oe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new lv(this,WR(this._delegate,e))}catch(t){throw co(t,"collection()","Firestore.collection()")}}doc(e){try{return new gl(this,uD(this._delegate,e))}catch(t){throw co(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ho(this,function lB(n,e){if(n=_n(n,ME),iM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Oe(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ws(n,null,(t=e,new _a(fn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw co(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function sj(n,e,t){n=_n(n,Er);const r=Object.assign(Object.assign({},rj),t);return function(i){if(i.maxAttempts<1)throw new Oe(ue.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,u){const h=new si;return i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){const m=yield function FR(n){return oD(n).then(e=>e.datastore)}(i);new JU(i.asyncQueue,m,u,o,h).run()})),h.promise}(li(n),i=>e(new ij(n,i)),r)}(this._delegate,t=>e(new Ek(this,t)))}batch(){return li(this._delegate),new Ck(new mk(this._delegate,e=>av(this._delegate,e)))}loadBundle(e){return function yB(n,e){const t=li(n=_n(n,Er)),r=new cB;return function sB(n,e,t,r){const i=function(o,u){let h;return h="string"==typeof o?oO().encode(o):o,m=function(m,v){if(m instanceof Uint8Array)return NR(m,v);if(m instanceof ArrayBuffer)return NR(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new YU(m,u);var m}(t,DE(e));n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){!function ZU(n,e,t){const r=Qe(n);var i;(i=(0,Ce.Z)(function*(o,u,h){try{const m=yield u.getMetadata();if(yield function(O,F){const j=Qe(O),Q=ai(F.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",fe=>j.qs.getBundleMetadata(fe,F.id)).then(fe=>!!fe&&fe.createTime.compareTo(Q)>=0)}(o.localStore,m))return yield u.close(),h._completeWith({taskState:"Success",documentsLoaded:(O=m).totalDocuments,bytesLoaded:O.totalBytes,totalDocuments:O.totalDocuments,totalBytes:O.totalBytes}),Promise.resolve(new Set);h._updateProgress(CR(m));const v=new AU(m,o.localStore,u.serializer);let T=yield u.bc();for(;T;){const O=yield v.zu(T);O&&h._updateProgress(O),T=yield u.bc()}const A=yield v.complete();return yield ph(o,A.Ju,void 0),yield function(O,F){const j=Qe(O);return j.persistence.runTransaction("Save bundle","readwrite",Q=>j.qs.saveBundleMetadata(Q,F))}(o.localStore,m),h._completeWith(A.progress),Promise.resolve(A.Hu)}catch(m){return _s("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m),Promise.resolve(new Set)}var O}),function(o,u,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield nM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function vB(n,e){return function oB(n,e){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){return function(t,r){const i=Qe(t);return i.persistence.runTransaction("Get named query","readonly",o=>i.qs.getNamedQuery(o,r))}(yield aD(n),e)}))}(li(n=_n(n,Er)),e).then(t=>t?new ws(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ho(this,t):null)}}class wD extends fM{constructor(e){super(),this.firestore=e}convertBytes(e){return new VE(new $c(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return gl.forKey(t,this.firestore,null)}}class Ek{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new wD(e)}get(e){const t=Dm(e);return this._delegate.get(t).then(r=>new UE(this._firestore,new mh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Dm(e);return r?(gM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Dm(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Dm(e);return this._delegate.delete(t),this}}class Ck{constructor(e){this._delegate=e}set(e,t,r){const i=Dm(e);return r?(gM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Dm(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Dm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Im{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new LE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new BE(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Im.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new Im(e,new wD(e),t),i.set(t,o)),o}}Im.INSTANCES=new WeakMap;class gl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Oe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new gl(t,new wr(t._delegate,r,new Ye(e)))}static forKey(e,t,r){return new gl(t,new wr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new lv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new lv(this.firestore,WR(this._delegate,e))}catch(t){throw co(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof wr&&ZR(this._delegate,e)}set(e,t){t=gM("DocumentReference.set",t);try{return t?fk(this._delegate,e,t):fk(this._delegate,e)}catch(r){throw co(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?pk(this._delegate,e):pk(this._delegate,e,t,...r)}catch(i){throw co(i,"updateDoc()","DocumentReference.update()")}}delete(){return function zB(n){return av(_n(n.firestore,Er),[new Bc(n._key,R.none())])}(this._delegate)}onSnapshot(...e){const t=bk(e),r=Tk(e,i=>new UE(this.firestore,new mh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return gk(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function jB(n){n=_n(n,wr);const e=_n(n.firestore,Er),t=li(e),r=new Kf(e);return function nB(n,e){const t=new si;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(i,o,u){try{const h=yield function(m,v){const T=Qe(m);return T.persistence.runTransaction("read document","readonly",A=>T.localDocuments.getDocument(A,v))}(i,o);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new Oe(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=ev(h,`Failed to get document '${o} from cache`);u.reject(m)}}),function(i,o,u){return r.apply(this,arguments)})(yield aD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new mh(e,r,n._key,i,new Tm(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function HB(n){n=_n(n,wr);const e=_n(n.firestore,Er);return LR(li(e),n._key,{source:"server"}).then(t=>pM(e,n,t))}(this._delegate):function BB(n){n=_n(n,wr);const e=_n(n.firestore,Er);return LR(li(e),n._key).then(t=>pM(e,n,t))}(this._delegate),t.then(r=>new UE(this.firestore,new mh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new gl(this.firestore,this._delegate.withConverter(e?Im.getInstance(this.firestore,e):null))}}function co(n,e,t){return n.message=n.message.replace(e,t),n}function bk(n){for(const e of n)if("object"==typeof e&&!mM(e))return e;return{}}function Tk(n,e){var t,r;let i;return i=mM(n[0])?n[0]:mM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class UE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new gl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return hk(this._delegate,e._delegate)}}class BE extends UE{data(e){const t=this._delegate.data(e);return function oI(n,e){n||at()}(void 0!==t),t}}class ho{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wD(e)}where(e,t,r){try{return new ho(this.firestore,Wf(this._delegate,function xB(n,e,t){const r=e,i=gD("where",n);return FE._create(i,r,t)}(e,t,r)))}catch(i){throw co(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ho(this.firestore,Wf(this._delegate,function MB(n,e="asc"){const t=e,r=gD("orderBy",n);return hM._create(r,t)}(e,t)))}catch(r){throw co(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ho(this.firestore,Wf(this._delegate,function PB(n){return GR("limit",n),mD._create("limit",n,"F")}(e)))}catch(t){throw co(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ho(this.firestore,Wf(this._delegate,function NB(n){return GR("limitToLast",n),mD._create("limitToLast",n,"L")}(e)))}catch(t){throw co(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ho(this.firestore,Wf(this._delegate,function OB(...n){return _D._create("startAt",n,!0)}(...e)))}catch(t){throw co(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ho(this.firestore,Wf(this._delegate,function RB(...n){return _D._create("startAfter",n,!1)}(...e)))}catch(t){throw co(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ho(this.firestore,Wf(this._delegate,function kB(...n){return yD._create("endBefore",n,!1)}(...e)))}catch(t){throw co(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ho(this.firestore,Wf(this._delegate,function FB(...n){return yD._create("endAt",n,!0)}(...e)))}catch(t){throw co(t,"endAt()","Query.endAt()")}}isEqual(e){return sM(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function GB(n){n=_n(n,ws);const e=_n(n.firestore,Er),t=li(e),r=new Kf(e);return function rB(n,e){const t=new si;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(i,o,u){try{const h=yield QI(i,o,!0),m=new IR(o,h.ir),v=m.sc(h.documents),T=m.applyChanges(v,!1);u.resolve(T.snapshot)}catch(h){const m=ev(h,`Failed to execute query '${o} against cache`);u.reject(m)}}),function(i,o,u){return r.apply(this,arguments)})(yield aD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Zf(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function qB(n){n=_n(n,ws);const e=_n(n.firestore,Er),t=li(e),r=new Kf(e);return VR(t,n._query,{source:"server"}).then(i=>new Zf(e,r,n,i))}(this._delegate):function $B(n){n=_n(n,ws);const e=_n(n.firestore,Er),t=li(e),r=new Kf(e);return sk(n._query),VR(t,n._query).then(i=>new Zf(e,r,n,i))}(this._delegate),t.then(r=>new _M(this.firestore,new Zf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=bk(e),r=Tk(e,i=>new _M(this.firestore,new Zf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return gk(this._delegate,t,r)}withConverter(e){return new ho(this.firestore,this._delegate.withConverter(e?Im.getInstance(this.firestore,e):null))}}class mj{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new BE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class _M{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ho(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new BE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new mj(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new BE(this._firestore,r))})}isEqual(e){return hk(this._delegate,e._delegate)}}class lv extends ho{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new gl(this.firestore,e):null}doc(e){try{return new gl(this.firestore,void 0===e?uD(this._delegate):uD(this._delegate,e))}catch(t){throw co(t,"doc()","CollectionReference.doc()")}}add(e){return function WB(n,e){const t=_n(n.firestore,Er),r=uD(n),i=vD(n.converter,e);return av(t,[hD(Cm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,R.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new gl(this.firestore,t))}isEqual(e){return ZR(this._delegate,e._delegate)}withConverter(e){return new lv(this.firestore,this._delegate.withConverter(e?Im.getInstance(this.firestore,e):null))}}function Dm(n){return _n(n,wr)}class yM{constructor(...e){this._delegate=new gh(...e)}static documentId(){return new yM(Pr.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof gh&&this._delegate._internalPath.isEqual(e._internalPath)}}class Am{constructor(e){this._delegate=e}static serverTimestamp(){const e=function aj(){return new aM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Am(e)}static delete(){const e=function oj(){return new NE("deleteField")}();return e._methodName="FieldValue.delete",new Am(e)}static arrayUnion(...e){const t=function lj(...n){return new TB("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Am(t)}static arrayRemove(...e){const t=function uj(...n){return new IB("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Am(t)}static increment(e){const t=function cj(n){return new DB("increment",n)}(e);return t._methodName="FieldValue.increment",new Am(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const _j={Firestore:wk,GeoPoint:cD,Timestamp:ir,Blob:VE,Transaction:Ek,WriteBatch:Ck,DocumentReference:gl,DocumentSnapshot:UE,Query:ho,QueryDocumentSnapshot:BE,QuerySnapshot:_M,CollectionReference:lv,FieldPath:yM,FieldValue:Am,setLogLevel:function gj(n){!function YS(n){Uo.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Ik(n,e){return function wj(n,e=Tg.z){return new qr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function vM(n,e){return Ik(n,e).pipe((0,bt.U)(t=>({payload:t,type:"query"})))}function ED(n,e){return vM(n,e).pipe(zn(void 0),K0(),(0,bt.U)(([t,r])=>{const i=r.payload.docChanges(),o=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,h)=>{const m=i.find(T=>T.doc.ref.isEqual(u.ref)),v=null==t?void 0:t.payload.docs.find(T=>T.ref.isEqual(u.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(u.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(u.metadata)||o.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:u}})}),o}))}function Dk(n,e,t){return ED(n,t).pipe(fi((r,i)=>function Cj(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function bj(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return wM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return wM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return wM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),Kr(),(0,bt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function wM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Ak(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function vj(n){(function yj(n,e){n.INTERNAL.registerComponent(new cu.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},_j)))})(n,(e,t)=>new wk(e,t,new pj)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(qb.Z);class Sk{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ED(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,bt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(zn(void 0),K0(),ur(([r,i])=>i.length>0||!r),(0,bt.U)(([r,i])=>i),Yn.iC)}auditTrail(e){return this.stateChanges(e).pipe(fi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Ak(e);return Dk(this.query,t,this.afs.schedulers.outsideAngular).pipe(Yn.iC)}valueChanges(e={}){return vM(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Yn.iC)}get(e){return(0,er.D)(this.query.get(e)).pipe(Yn.iC)}add(e){return this.ref.add(e)}doc(e){return new xk(this.ref.doc(e),this.afs)}}class xk{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=Nk(r,t);return new Sk(i,o,this.afs)}snapshotChanges(){return function Ej(n,e){return Ik(n,e).pipe(zn(void 0),K0(),(0,bt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Yn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,bt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,er.D)(this.ref.get(e)).pipe(Yn.iC)}}class Tj{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ED(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ur(t=>t.length>0),Yn.iC):ED(this.query,this.afs.schedulers.outsideAngular).pipe(Yn.iC)}auditTrail(e){return this.stateChanges(e).pipe(fi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Ak(e);return Dk(this.query,t,this.afs.schedulers.outsideAngular).pipe(Yn.iC)}valueChanges(e={}){return vM(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Yn.iC)}get(e){return(0,er.D)(this.query.get(e)).pipe(Yn.iC)}}const Mk=new c.OlP("angularfire2.enableFirestorePersistence"),Pk=new c.OlP("angularfire2.firestore.persistenceSettings"),Ij=new c.OlP("angularfire2.firestore.settings"),Dj=new c.OlP("angularfire2.firestore.use-emulator");function Nk(n,e=(t=>t)){return{query:e(n),ref:n}}let EM=(()=>{class n{constructor(t,r,i,o,u,h,m,v,T,A,O,F,j,Q,fe,qe,Je){this.schedulers=m;const et=(0,Ls.on)(t,h,r),pt=T;A&&$b(et,h,O,j,Q,fe,F,qe),[this.firestore,this.persistenceEnabled$]=(0,Ls.cc)(`${et.name}.firestore`,"AngularFirestore",et.name,()=>{const Wt=h.runOutsideAngular(()=>et.firestore());if(o&&Wt.settings(o),pt&&Wt.useEmulator(...pt),i&&!Ou(u)){const Zt=()=>{try{return(0,er.D)(Wt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Sn){return"undefined"!=typeof console&&console.warn(Sn),It(!1)}};return[Wt,h.runOutsideAngular(Zt)]}return[Wt,It(!1)]},[o,pt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:u}=Nk(i,r),h=this.schedulers.ngZone.run(()=>o);return new Sk(h,u,this)}collectionGroup(t,r){const i=r||(u=>u),o=this.firestore.collectionGroup(t);return new Tj(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new xk(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ls.Dh),c.LFG(Ls.xv,8),c.LFG(Mk,8),c.LFG(Ij,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Yn.HU),c.LFG(Pk,8),c.LFG(Dj,8),c.LFG(qd,8),c.LFG($_,8),c.LFG(G_,8),c.LFG(q_,8),c.LFG(z_,8),c.LFG(W_,8),c.LFG(Z_,8),c.LFG(bg,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Aj=(()=>{class n{constructor(){Z0.Z.registerVersion("angularfire",Yn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Mk,useValue:!0},{provide:Pk,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[EM]}),n})(),CD=(()=>{class n{constructor(t,r,i){this.auth=t,this.router=r,this.firebase=i,this.postcollection=this.firebase.collection("detail"),this.posts=this.postcollection.snapshotChanges().pipe((0,bt.U)(o=>o.map(u=>{const h=u.payload.doc.data();return h.id=u.payload.doc.id,h})))}getProduct(){return this.posts}deletePost(t){this.documentref=this.firebase.doc("detail/"+t.id),this.documentref.delete()}createProduct(t){this.postcollection.add(t)}UpdatePost(t,r){this.firebase.doc("detail/"+t).update(r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(qd),c.LFG(Ur),c.LFG(EM))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Ok{}const _h="*";function xj(n,e){return{type:7,name:n,definitions:e,options:{}}}function Rk(n,e=null){return{type:4,styles:e,timings:n}}function kk(n,e=null){return{type:2,steps:n,options:e}}function jE(n){return{type:6,styles:n,offset:null}}function CM(n,e,t){return{type:0,name:n,styles:e,options:t}}function Fk(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function Lk(n){Promise.resolve(null).then(n)}class HE{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Lk(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Vk{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const o=this.players.length;0==o?Lk(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==o&&this._onFinish()}),u.onDestroy(()=>{++r==o&&this._onDestroy()}),u.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((u,h)=>Math.max(u,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const Uk=["toast-component",""];function Mj(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",5),c.NdJ("click",function(){return c.CHM(t),c.oxw().remove()}),c.TgZ(1,"span",6),c._uU(2,"\xd7"),c.qZA()()}}function Pj(n,e){if(1&n&&(c.ynx(0),c._uU(1),c.BQk()),2&n){const t=c.oxw(2);c.xp6(1),c.hij("[",t.duplicatesCount+1,"]")}}function Nj(n,e){if(1&n&&(c.TgZ(0,"div"),c._uU(1),c.YNc(2,Pj,2,1,"ng-container",4),c.qZA()),2&n){const t=c.oxw();c.Tol(t.options.titleClass),c.uIk("aria-label",t.title),c.xp6(1),c.hij(" ",t.title," "),c.xp6(1),c.Q6J("ngIf",t.duplicatesCount)}}function Oj(n,e){if(1&n&&c._UZ(0,"div",7),2&n){const t=c.oxw();c.Tol(t.options.messageClass),c.Q6J("innerHTML",t.message,c.oJD)}}function Rj(n,e){if(1&n&&(c.TgZ(0,"div",8),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.Tol(t.options.messageClass),c.uIk("aria-label",t.message),c.xp6(1),c.hij(" ",t.message," ")}}function kj(n,e){if(1&n&&(c.TgZ(0,"div"),c._UZ(1,"div",9),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Udp("width",t.width+"%")}}function Fj(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",5),c.NdJ("click",function(){return c.CHM(t),c.oxw().remove()}),c.TgZ(1,"span",6),c._uU(2,"\xd7"),c.qZA()()}}function Lj(n,e){if(1&n&&(c.ynx(0),c._uU(1),c.BQk()),2&n){const t=c.oxw(2);c.xp6(1),c.hij("[",t.duplicatesCount+1,"]")}}function Vj(n,e){if(1&n&&(c.TgZ(0,"div"),c._uU(1),c.YNc(2,Lj,2,1,"ng-container",4),c.qZA()),2&n){const t=c.oxw();c.Tol(t.options.titleClass),c.uIk("aria-label",t.title),c.xp6(1),c.hij(" ",t.title," "),c.xp6(1),c.Q6J("ngIf",t.duplicatesCount)}}function Uj(n,e){if(1&n&&c._UZ(0,"div",7),2&n){const t=c.oxw();c.Tol(t.options.messageClass),c.Q6J("innerHTML",t.message,c.oJD)}}function Bj(n,e){if(1&n&&(c.TgZ(0,"div",8),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.Tol(t.options.messageClass),c.uIk("aria-label",t.message),c.xp6(1),c.hij(" ",t.message," ")}}function jj(n,e){if(1&n&&(c.TgZ(0,"div"),c._UZ(1,"div",9),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Udp("width",t.width+"%")}}class Hj{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class bD{constructor(e,t,r,i,o,u){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=o,this.toastRef=u,this._onTap=new mr.x,this._onAction=new mr.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const Bk={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null},jk=new c.OlP("ToastConfig");class Gj{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new mr.x,this._activate=new mr.x,this._manualClose=new mr.x,this._resetTimeout=new mr.x,this._countDuplicate=new mr.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class qj{constructor(e,t){this._toastPackage=e,this._parentInjector=t}get(e,t,r){return e===bD?this._toastPackage:this._parentInjector.get(e,t,r)}}class zj extends class $j{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class Wj{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let Zj=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(he))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Kj=(()=>{class n{constructor(t,r,i,o){this._overlayContainer=t,this._componentFactoryResolver=r,this._appRef=i,this._document=o,this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new zj(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new Wj(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Zj),c.LFG(c._Vd),c.LFG(c.z2F),c.LFG(he))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),TM=(()=>{class n{constructor(t,r,i,o,u){this.overlay=r,this._injector=i,this.sanitizer=o,this.ngZone=u,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},t.default.iconClasses),t.config.iconClasses))}show(t,r,i={},o=""){return this._preBuildNotification(o,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,o){const{includeTitleDuplicates:u}=this.toastrConfig;for(const h of this.toasts){const m=u&&h.title===t;if((!u||m)&&h.message===r)return h.toastRef.onDuplicate(i,o),h}return null}applyConfig(t={}){return Object.assign(Object.assign({},this.toastrConfig),t)}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,o){return o.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,o)):this._buildNotification(t,r,i,o)}_buildNotification(t,r,i,o){if(!o.toastComponent)throw new Error("toastComponent required");const u=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&o.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==u)return u;this.previousToastMessage=r;let h=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(h=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const m=this.overlay.create(o.positionClass,this.overlayContainer);this.index=this.index+1;let v=r;r&&o.enableHtml&&(v=this.sanitizer.sanitize(c.q3G.HTML,r));const T=new Gj(m),A=new bD(this.index,o,v,i,t,T),O=new qj(A,this._injector),F=new Hj(o.toastComponent,O),j=m.attach(F,this.toastrConfig.newestOnTop);T.componentInstance=j.instance;const Q={toastId:this.index,title:i||"",message:r||"",toastRef:T,onShown:T.afterActivate(),onHidden:T.afterClosed(),onTap:A.onTap(),onAction:A.onAction(),portal:j};return h||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{Q.toastRef.activate()})),this.toasts.push(Q),Q}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(jk),c.LFG(Kj),c.LFG(c.zs3),c.LFG(Ba),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Yj=(()=>{class n{constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(TM),c.Y36(bD),c.Y36(c.R0b))},n.\u0275cmp=c.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(c.d8E("@flyInOut",r.state),c.Tol(r.toastClasses),c.Udp("display",r.displayStyle))},attrs:Uk,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(c.YNc(0,Mj,3,0,"button",0),c.YNc(1,Nj,3,5,"div",1),c.YNc(2,Oj,1,3,"div",2),c.YNc(3,Rj,2,4,"div",3),c.YNc(4,kj,2,2,"div",4)),2&t&&(c.Q6J("ngIf",r.options.closeButton),c.xp6(1),c.Q6J("ngIf",r.title),c.xp6(1),c.Q6J("ngIf",r.message&&r.options.enableHtml),c.xp6(1),c.Q6J("ngIf",r.message&&!r.options.enableHtml),c.xp6(1),c.Q6J("ngIf",r.options.progressBar))},directives:[$r],encapsulation:2,data:{animation:[xj("flyInOut",[CM("inactive",jE({opacity:0})),CM("active",jE({opacity:1})),CM("removed",jE({opacity:0})),Fk("inactive => active",Rk("{{ easeTime }}ms {{ easing }}")),Fk("active => removed",Rk("{{ easeTime }}ms {{ easing }}"))])]}}),n})();const Qj=Object.assign(Object.assign({},Bk),{toastComponent:Yj});let Jj=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:jk,useValue:{default:Qj,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[ed]]}),n})(),Xj=(()=>{class n{constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.appRef=i,this.width=-1,this.toastClasses="",this.state="inactive",this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(TM),c.Y36(bD),c.Y36(c.z2F))},n.\u0275cmp=c.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(c.Tol(r.toastClasses),c.Udp("display",r.displayStyle))},attrs:Uk,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(c.YNc(0,Fj,3,0,"button",0),c.YNc(1,Vj,3,5,"div",1),c.YNc(2,Uj,1,3,"div",2),c.YNc(3,Bj,2,4,"div",3),c.YNc(4,jj,2,2,"div",4)),2&t&&(c.Q6J("ngIf",r.options.closeButton),c.xp6(1),c.Q6J("ngIf",r.title),c.xp6(1),c.Q6J("ngIf",r.message&&r.options.enableHtml),c.xp6(1),c.Q6J("ngIf",r.message&&!r.options.enableHtml),c.xp6(1),c.Q6J("ngIf",r.options.progressBar))},directives:[$r],encapsulation:2}),n})();function e3(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",34),c.NdJ("click",function(){return c.CHM(t),c.oxw().Update()}),c._uU(1,"UPDATE"),c.qZA()}}function t3(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"tr")(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td")(4,"h5"),c._uU(5),c.qZA()(),c.TgZ(6,"td"),c._uU(7),c.qZA(),c.TgZ(8,"td"),c._uU(9),c.qZA(),c.TgZ(10,"td")(11,"div",35),c.NdJ("click",function(){const o=c.CHM(t).$implicit;return c.oxw().deleteItem(o)}),c._UZ(12,"i",36),c.qZA(),c.TgZ(13,"button",37),c.NdJ("click",function(){const o=c.CHM(t).$implicit;return c.oxw().populate(o)}),c._UZ(14,"i",38),c.qZA()()()}if(2&n){const t=e.$implicit,r=e.index;c.xp6(2),c.Oqu(r+1),c.xp6(3),c.Oqu(t.title),c.xp6(2),c.Oqu(t.des),c.xp6(2),c.Oqu(t.price)}}Object.assign(Object.assign({},Bk),{toastComponent:Xj});let n3=(()=>{class n{constructor(t,r,i){this.fb=t,this.auth=r,this.toastr=i,this.productitem=[],this.state=!1,this.id=""}ngOnInit(){this.profileForm=this.fb.group({title:["",au.required],des:["",au.required],price:["",au.required],img:["",au.required]}),this.getproduct()}get title(){return this.profileForm.get("title")}get des(){return this.profileForm.get("des")}get price(){return this.profileForm.get("price")}get img(){return this.profileForm.get("img")}getproduct(){this.auth.getProduct().subscribe(t=>{this.productitem=t})}Submit(){this.auth.createProduct({title:this.profileForm.value.title,des:this.profileForm.value.des,price:this.profileForm.value.price,img:this.profileForm.value.img}),this.profileForm.reset(),this.toastr.success("Product Added Successfully")}deleteItem(t){this.auth.deletePost(t),this.toastr.info("Product deleted Successfully")}populate(t){var r,i,o;this.state=!0,null===(r=this.profileForm.get("title"))||void 0===r||r.setValue(t.title),null===(i=this.profileForm.get("des"))||void 0===i||i.setValue(t.des),null===(o=this.profileForm.get("price"))||void 0===o||o.setValue(t.price),this.id=t.id}Update(){const t={title:this.profileForm.value.title,des:this.profileForm.value.des,price:this.profileForm.value.price};console.log(this.profileForm.value.title),this.auth.UpdatePost(this.id,t),this.profileForm.reset(),this.state=!1}close(){this.profileForm.reset()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Fo),c.Y36(CD),c.Y36(TM))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-admin"]],decls:58,vars:3,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container-fluid"],["src","assets\\img\\icon.png","alt","Loading","routerLink","/layout",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["type","button","data-bs-toggle","modal","data-bs-target","#staticBackdrop",1,"btn","btn-dark"],["id","navbarSupportedContent",1,"collapse","navbar-collapse","d-flex","flex-row-reverse"],[1,"d-flex","flex-row-reverse"],["type","search","placeholder","Search","aria-label","Search",1,"form-control","me-5"],[1,"fa-solid","fa-magnifying-glass","mt-2","search"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["type","text","id","exampleInputEmail1","aria-describedby","emailHelp","name","title","formControlName","title",1,"form-control"],["for","exampleFormControlTextarea1",1,"form-label"],["id","exampleFormControlTextarea1","rows","3","name","des","formControlName","des",1,"form-control"],[1,"form-label"],["type","text","aria-describedby","emailHelp","name","img","formControlName","img",1,"form-control"],["type","number","id","exampleInputEmail1","aria-describedby","emailHelp","name","price","formControlName","price",1,"form-control"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],[1,"container","pt-5"],[1,"jumbotron"],[1,"table","border","rounded",2,"width","100%"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"btn","btn-primary","bg-danger",3,"click"],[1,"fa-solid","fa-trash-can"],["data-bs-toggle","modal","data-bs-target","#staticBackdrop",1,"btn",3,"click"],[1,"fa-solid","fa-pen-to-square"]],template:function(t,r){1&t&&(c.TgZ(0,"nav",0)(1,"div",1),c._UZ(2,"img",2),c.TgZ(3,"button",3),c._UZ(4,"span",4),c.qZA(),c.TgZ(5,"button",5),c._uU(6," AddProduct "),c.qZA(),c.TgZ(7,"div",6)(8,"form",7),c._UZ(9,"input",8),c.TgZ(10,"span"),c._UZ(11,"i",9),c.qZA()()()()(),c.TgZ(12,"div",10)(13,"div",11)(14,"div",12)(15,"div",13)(16,"h5",14),c._uU(17,"Product"),c.qZA(),c._UZ(18,"button",15),c.qZA(),c.TgZ(19,"form",16),c.NdJ("ngSubmit",function(){return r.Submit()}),c.TgZ(20,"div",17)(21,"div",18)(22,"label",19),c._uU(23,"Title of Product"),c.qZA(),c._UZ(24,"input",20),c.qZA(),c.TgZ(25,"div",18)(26,"label",21),c._uU(27,"Description"),c.qZA(),c._UZ(28,"textarea",22),c.qZA(),c.TgZ(29,"div",18)(30,"label",23),c._uU(31,"Image of Product"),c.qZA(),c._UZ(32,"input",24),c.qZA(),c.TgZ(33,"div",18)(34,"label",19),c._uU(35,"Price of Product"),c.qZA(),c._UZ(36,"input",25),c.qZA()(),c.TgZ(37,"div",26)(38,"button",27),c.NdJ("click",function(){return r.close()}),c._uU(39,"Close"),c.qZA(),c.TgZ(40,"button",28),c._uU(41,"Add"),c.qZA(),c.YNc(42,e3,2,0,"button",29),c.qZA()()()()(),c.TgZ(43,"div",30)(44,"div",31)(45,"table",32)(46,"tr")(47,"th"),c._uU(48,"Sn"),c.qZA(),c.TgZ(49,"th"),c._uU(50,"Title"),c.qZA(),c.TgZ(51,"th"),c._uU(52,"Description"),c.qZA(),c.TgZ(53,"th"),c._uU(54,"Price"),c.qZA(),c.TgZ(55,"th"),c._uU(56,"Action"),c.qZA()(),c.YNc(57,t3,15,4,"tr",33),c.qZA()()()),2&t&&(c.xp6(19),c.Q6J("formGroup",r.profileForm),c.xp6(23),c.Q6J("ngIf",r.state),c.xp6(15),c.Q6J("ngForOf",r.productitem))},directives:[iu,df,of,cf,cg,Vd,rg,dg,x_,$r,Ir],styles:[".form-control[_ngcontent-%COMP%]{border-radius:50px;width:400px;margin-left:10px}.search[_ngcontent-%COMP%]{position:absolute;z-index:10;margin-left:23rem;color:#0ff}.navbar-brand[_ngcontent-%COMP%]{height:3rem;width:5rem;margin-left:6rem}table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{text-align:center;border-style:inset;border:1px solid black;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:15px}"]}),n})(),Sm=(()=>{class n{constructor(t,r,i){this.auth=t,this.router=r,this.firebase=i,this.user=new ei(null),this.postcollection=this.firebase.collection("data"),this.posts=this.postcollection.snapshotChanges().pipe((0,bt.U)(o=>o.map(u=>{const h=u.payload.doc.data();return h.id=u.payload.doc.id,h})))}getProduct(){return this.posts}createProduct(t){this.postcollection.add(t)}login(t,r){this.auth.signInWithEmailAndPassword(t,r).then(()=>{localStorage.setItem("token","true"),this.router.navigate(["/home"])},i=>{alert("Something went wrong")})}deletePost(t){this.documentref=this.firebase.doc("data/"+t.id),this.documentref.delete()}register(t,r,i){this.auth.createUserWithEmailAndPassword(t,r).then(o=>{var u;null===(u=o.user)||void 0===u||u.updateProfile({displayName:i}),alert("Register Success"),this.router.navigate(["/home"])},o=>{alert("Something went wrong")})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(qd),c.LFG(Ur),c.LFG(EM))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function r3(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div")(1,"div",15)(2,"h5",16)(3,"strong"),c._uU(4),c.qZA()(),c.TgZ(5,"div",17)(6,"button",18),c.NdJ("click",function(){return c.CHM(t),c.oxw().logout()}),c._uU(7,"Logout"),c.qZA()()()()}if(2&n){const t=c.oxw();c.xp6(4),c.Oqu(t.user.displayName)}}function i3(n,e){1&n&&(c.TgZ(0,"div",19)(1,"button",20)(2,"a",21),c._uU(3,"Login"),c.qZA()()())}let uv=(()=>{class n{constructor(t,r,i){this.auth=t,this.firebase=r,this.router=i,this.total=0,this.datalist=[],this.auth.authState.subscribe(o=>{this.user=o})}ngOnInit(){this.firebase.getProduct().subscribe(t=>{this.total=t.length}),this.getproduct()}getproduct(){this.firebase.getProduct().subscribe(t=>{this.datalist=t})}logout(){this.auth.signOut(),this.router.navigate(["layout"])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(qd),c.Y36(Sm),c.Y36(Ur))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-header"]],decls:18,vars:3,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container-fluid"],["src","assets\\img\\icon.png","alt","Loading","routerLink","/layout",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"d-flex","flex-row-reverse"],["type","search","placeholder","Search","aria-label","Search",1,"form-control","me-5"],[1,"fa-solid","fa-magnifying-glass","mt-2","search"],["type","button","routerLink","/cart",1,"btn","btn-dark","me-3","rounded"],[1,"fa-solid","fa-cart-plus","fa-2x","text-light"],[1,"badge","bg-danger",2,"font-size","10px"],[4,"ngIf"],["class","sin me-2",4,"ngIf"],[1,"dropdown","me-5"],[1,"text-light"],[1,"dropdown-content"],[1,"btn","btn-danger",3,"click"],[1,"sin","me-2"],[1,"btn","btn-dark"],["routerLink","/login"]],template:function(t,r){1&t&&(c.TgZ(0,"nav",0)(1,"div",1),c._UZ(2,"img",2),c.TgZ(3,"button",3),c._UZ(4,"span",4),c.qZA(),c.TgZ(5,"div",5),c._UZ(6,"ul",6),c.TgZ(7,"form",7),c._UZ(8,"input",8),c.TgZ(9,"span"),c._UZ(10,"i",9),c.qZA()(),c.TgZ(11,"div")(12,"button",10),c._UZ(13,"i",11),c.TgZ(14,"div",12),c._uU(15),c.qZA()()(),c.YNc(16,r3,8,1,"div",13),c.YNc(17,i3,4,0,"div",14),c.qZA()()()),2&t&&(c.xp6(15),c.Oqu(r.total),c.xp6(1),c.Q6J("ngIf",r.user),c.xp6(1),c.Q6J("ngIf",!r.user))},directives:[iu,df,of,cf,$r,pc],styles:[".form-control[_ngcontent-%COMP%]{border-radius:50px;width:400px;margin-left:10px}.sin[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff}.search[_ngcontent-%COMP%]{position:absolute;z-index:10;margin-left:23rem;color:#0ff}.dropbtn[_ngcontent-%COMP%]{color:#fff;padding:16px;font-size:16px;border:none;height:3rem;align-items:center;margin-right:1rem}.dropbtn[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{text-align:center;margin-top:-4px}.dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.dropdown-content[_ngcontent-%COMP%]{display:none;position:absolute;min-width:160px;box-shadow:0 8px 16px #0003;z-index:1}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.navbar-brand[_ngcontent-%COMP%]{height:3rem;width:5rem;margin-left:6rem}.con[_ngcontent-%COMP%]{height:50vh;width:30vh;background-color:#0ff}.navbar[_ngcontent-%COMP%]{position:fixed;z-index:999;width:100%}"]}),n})(),s3=(()=>{class n{constructor(t){this.route=t,this.email="",this.password=""}ngOnInit(){}login(){"abc@gmail.com"==this.email&&"123456"==this.password&&this.route.navigate(["/admin"])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ur))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-adminlogin"]],decls:38,vars:2,consts:[[2,"background-color","#666666"],[1,"limiter"],[1,"container-login100"],[1,"wrap-login100"],[1,"login100-form","validate-form"],[1,"login100-form-title","p-b-43"],["data-validate","Valid email is required: ex@abc.xyz",1,"wrap-input100","validate-input"],["type","text","name","email","name","email",1,"input100",3,"ngModel","ngModelChange"],[1,"focus-input100"],[1,"label-input100"],["data-validate","Password is required",1,"wrap-input100","validate-input"],["type","password","name","password",1,"input100",3,"ngModel","ngModelChange"],[1,"flex-sb-m","w-full","p-t-3","p-b-32"],[1,"contact100-form-checkbox"],["id","ckb1","type","checkbox","name","remember-me",1,"input-checkbox100"],["for","ckb1",1,"label-checkbox100"],["href","#",1,"txt1"],[1,"container-login100-form-btn"],[1,"login100-form-btn",3,"click"],[1,"text-center","p-t-46","p-b-20"],[1,"txt2"],[1,"login100-form-social","flex-c-m"],["href","#",1,"login100-form-social-item","flex-c-m","bg1","m-r-5"],["aria-hidden","true",1,"fa","fa-facebook-f"],["href","#",1,"login100-form-social-item","flex-c-m","bg2","m-r-5"],["aria-hidden","true",1,"fa","fa-twitter"],[1,"login100-more"]],template:function(t,r){1&t&&(c._UZ(0,"app-header"),c.TgZ(1,"body",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"form",4)(6,"span",5),c._uU(7," Login to continue "),c.qZA(),c.TgZ(8,"div",6)(9,"input",7),c.NdJ("ngModelChange",function(o){return r.email=o}),c.qZA(),c._UZ(10,"span",8),c.TgZ(11,"span",9),c._uU(12,"Email"),c.qZA()(),c.TgZ(13,"div",10)(14,"input",11),c.NdJ("ngModelChange",function(o){return r.password=o}),c.qZA(),c._UZ(15,"span",8),c.TgZ(16,"span",9),c._uU(17,"Password"),c.qZA()(),c.TgZ(18,"div",12)(19,"div",13),c._UZ(20,"input",14),c.TgZ(21,"label",15),c._uU(22," Remember me "),c.qZA()(),c.TgZ(23,"div")(24,"a",16),c._uU(25," Forgot Password? "),c.qZA()()(),c.TgZ(26,"div",17)(27,"button",18),c.NdJ("click",function(){return r.login()}),c._uU(28," Login "),c.qZA()(),c.TgZ(29,"div",19)(30,"span",20),c._uU(31," or sign up using "),c.qZA()(),c.TgZ(32,"div",21)(33,"a",22),c._UZ(34,"i",23),c.qZA(),c.TgZ(35,"a",24),c._UZ(36,"i",25),c.qZA()()(),c._UZ(37,"div",26),c.qZA()()()()),2&t&&(c.xp6(9),c.Q6J("ngModel",r.email),c.xp6(5),c.Q6J("ngModel",r.password))},directives:[uv,df,of,cf,Vd,rg,S_],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%;font-family:Poppins-Regular,sans-serif}a[_ngcontent-%COMP%]{font-family:Poppins-Regular;font-size:14px;line-height:1.7;color:#666;margin:0;transition:all .4s;-webkit-transition:all .4s;-o-transition:all .4s;-moz-transition:all .4s}a[_ngcontent-%COMP%]:focus{outline:none!important}a[_ngcontent-%COMP%]:hover{text-decoration:none;color:#6675df}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin:0}p[_ngcontent-%COMP%]{font-family:Poppins-Regular;font-size:14px;line-height:1.7;color:#666;margin:0}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{margin:0;list-style-type:none}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{outline:none;border:none}textarea[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus{border-color:transparent!important}input[_ngcontent-%COMP%]:focus::-webkit-input-placeholder{color:transparent}input[_ngcontent-%COMP%]:focus:-moz-placeholder{color:transparent}input[_ngcontent-%COMP%]:focus::-moz-placeholder{color:transparent}input[_ngcontent-%COMP%]:focus:-ms-input-placeholder{color:transparent}textarea[_ngcontent-%COMP%]:focus::-webkit-input-placeholder{color:transparent}textarea[_ngcontent-%COMP%]:focus:-moz-placeholder{color:transparent}textarea[_ngcontent-%COMP%]:focus::-moz-placeholder{color:transparent}textarea[_ngcontent-%COMP%]:focus:-ms-input-placeholder{color:transparent}input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#999}input[_ngcontent-%COMP%]:-moz-placeholder{color:#999}input[_ngcontent-%COMP%]::-moz-placeholder{color:#999}input[_ngcontent-%COMP%]:-ms-input-placeholder{color:#999}textarea[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#999}textarea[_ngcontent-%COMP%]:-moz-placeholder{color:#999}textarea[_ngcontent-%COMP%]::-moz-placeholder{color:#999}textarea[_ngcontent-%COMP%]:-ms-input-placeholder{color:#999}label[_ngcontent-%COMP%]{display:block;margin:0}button[_ngcontent-%COMP%]{outline:none!important;border:none;background:transparent}button[_ngcontent-%COMP%]:hover{cursor:pointer}iframe[_ngcontent-%COMP%]{border:none!important}.txt1[_ngcontent-%COMP%]{font-family:Montserrat-Regular;font-size:13px;line-height:1.4;color:#555}.txt2[_ngcontent-%COMP%]{font-family:Montserrat-Regular;font-size:13px;line-height:1.4;color:#999}.size1[_ngcontent-%COMP%]{width:355px;max-width:100%}.size2[_ngcontent-%COMP%]{width:calc(100% - 43px)}.bg1[_ngcontent-%COMP%]{background:#3b5998}.bg2[_ngcontent-%COMP%]{background:#1da1f2}.bg3[_ngcontent-%COMP%]{background:#cd201f}.limiter[_ngcontent-%COMP%]{width:100%;margin:0 auto}.container-login100[_ngcontent-%COMP%]{width:100%;min-height:100vh;display:flex;flex-wrap:wrap;justify-content:center;align-items:center;background:#f2f2f2}.wrap-login100[_ngcontent-%COMP%]{width:100%;background:#fff;overflow:hidden;display:flex;flex-wrap:wrap;align-items:stretch;flex-direction:row-reverse}.login100-more[_ngcontent-%COMP%]{width:calc(100% - 560px);background-repeat:no-repeat;background-size:cover;background-position:center;position:relative;z-index:1}.login100-more[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;z-index:-1;width:100%;height:100%;top:0;left:0;background:rgba(0,0,0,.1)}.login100-form[_ngcontent-%COMP%]{width:560px;min-height:100vh;display:block;background-color:#f7f7f7;padding:173px 55px 55px}.login100-form-title[_ngcontent-%COMP%]{width:100%;display:block;font-family:Poppins-Regular;font-size:30px;color:#333;line-height:1.2;text-align:center}.wrap-input100[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:flex-end;width:100%;height:80px;position:relative;border:1px solid #e6e6e6;border-radius:10px;margin-bottom:10px}.label-input100[_ngcontent-%COMP%]{font-family:Montserrat-Regular;font-size:18px;color:#999;line-height:1.2;display:block;position:absolute;pointer-events:none;width:100%;padding-left:24px;left:0;top:30px;transition:all .4s}.input100[_ngcontent-%COMP%]{display:block;width:100%;background:transparent;font-family:Montserrat-Regular;font-size:18px;color:#555;line-height:1.2;padding:0 26px}input.input100[_ngcontent-%COMP%]{height:100%;transition:all .4s}.focus-input100[_ngcontent-%COMP%]{position:absolute;display:block;width:calc(100% + 2px);height:calc(100% + 2px);top:-1px;left:-1px;pointer-events:none;border:1px solid #6675df;border-radius:10px;visibility:hidden;opacity:0;transition:all .4s;transform:scaleX(1.1) scaleY(1.3)}.input100[_ngcontent-%COMP%]:focus + .focus-input100[_ngcontent-%COMP%]{visibility:visible;opacity:1;transform:scale(1)}.eff-focus-selection[_ngcontent-%COMP%]{visibility:visible;opacity:1;transform:scale(1)}.input100[_ngcontent-%COMP%]:focus{height:48px}.input100[_ngcontent-%COMP%]:focus + .focus-input100[_ngcontent-%COMP%] + .label-input100[_ngcontent-%COMP%]{top:14px;font-size:13px}.has-val[_ngcontent-%COMP%]{height:48px!important}.has-val[_ngcontent-%COMP%] + .focus-input100[_ngcontent-%COMP%] + .label-input100[_ngcontent-%COMP%]{top:14px;font-size:13px}.input-checkbox100[_ngcontent-%COMP%]{display:none}.label-checkbox100[_ngcontent-%COMP%]{font-family:Poppins-Regular;font-size:13px;color:#999;line-height:1.4;display:block;position:relative;padding-left:26px;cursor:pointer}.label-checkbox100[_ngcontent-%COMP%]:before{content:"\\f00c";font-family:FontAwesome;font-size:13px;color:transparent;display:flex;justify-content:center;align-items:center;position:absolute;width:18px;height:18px;border-radius:2px;background:#fff;border:1px solid #6675df;left:0;top:50%;transform:translateY(-50%)}.input-checkbox100[_ngcontent-%COMP%]:checked + .label-checkbox100[_ngcontent-%COMP%]:before{color:#6675df}.container-login100-form-btn[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;justify-content:center}.login100-form-btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:0 20px;width:100%;height:50px;border-radius:10px;background:#6675df;font-family:Montserrat-Bold;font-size:12px;color:#fff;line-height:1.2;text-transform:uppercase;letter-spacing:1px;transition:all .4s}.login100-form-btn[_ngcontent-%COMP%]:hover{background:#333333}@media (max-width: 992px){.login100-form[_ngcontent-%COMP%]{width:50%;padding-left:30px;padding-right:30px}.login100-more[_ngcontent-%COMP%]{width:50%}}@media (max-width: 768px){.login100-form[_ngcontent-%COMP%]{width:100%}.login100-more[_ngcontent-%COMP%]{display:none}}@media (max-width: 576px){.login100-form[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px;padding-top:70px}}.validate-input[_ngcontent-%COMP%]{position:relative}.alert-validate[_ngcontent-%COMP%]:before{content:attr(data-validate);position:absolute;z-index:100;max-width:70%;background-color:#fff;border:1px solid #c80000;border-radius:2px;padding:4px 25px 4px 10px;top:50%;transform:translateY(-50%);right:12px;pointer-events:none;font-family:Poppins-Regular;color:#c80000;font-size:13px;line-height:1.4;text-align:left;visibility:hidden;opacity:0;transition:opacity .4s}.alert-validate[_ngcontent-%COMP%]:after{content:"\\f12a";font-family:FontAwesome;display:block;position:absolute;z-index:110;color:#c80000;font-size:16px;top:50%;transform:translateY(-50%);right:18px}.alert-validate[_ngcontent-%COMP%]:hover:before{visibility:visible;opacity:1}@media (max-width: 992px){.alert-validate[_ngcontent-%COMP%]:before{visibility:visible;opacity:1}}.login100-form-social-item[_ngcontent-%COMP%]{width:36px;height:36px;font-size:18px;color:#fff;border-radius:50%}.login100-form-social-item[_ngcontent-%COMP%]:hover{background:#333333;color:#fff}.login100-more[_ngcontent-%COMP%]{background-image:url(bg-01.84507914c9cc2abb.jpg);background-size:100% 100%}']}),n})();function o3(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"tr")(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td")(4,"h5"),c._uU(5),c.qZA()(),c.TgZ(6,"td"),c._UZ(7,"img",7),c.qZA(),c.TgZ(8,"td"),c._uU(9),c.qZA(),c.TgZ(10,"td")(11,"button",8),c.NdJ("click",function(){const o=c.CHM(t).$implicit;return c.oxw(2).dec(o)}),c._UZ(12,"i",9),c.qZA(),c.TgZ(13,"span"),c._uU(14),c.qZA(),c.TgZ(15,"button",8),c.NdJ("click",function(){const o=c.CHM(t).$implicit;return c.oxw(2).inc(o)}),c._UZ(16,"i",10),c.qZA()(),c.TgZ(17,"td"),c._uU(18),c.qZA(),c.TgZ(19,"td",11),c._uU(20),c.ALo(21,"number"),c.qZA(),c.TgZ(22,"td")(23,"div",12),c.NdJ("click",function(){const o=c.CHM(t).$implicit;return c.oxw(2).deleteItem(o)}),c._UZ(24,"i",13),c.qZA()()()}if(2&n){const t=e.$implicit,r=e.index,i=c.oxw(2);c.xp6(2),c.Oqu(r+1),c.xp6(3),c.Oqu(t.title),c.xp6(2),c.s9C("src",t.img,c.LSH),c.xp6(2),c.Oqu(t.des),c.xp6(5),c.Oqu(t.quantity),c.xp6(4),c.Oqu(t.price),c.xp6(2),c.Oqu(c.lcZ(21,7,i.totalSum(t)))}}function a3(n,e){if(1&n&&(c.ynx(0),c.TgZ(1,"div",1)(2,"div",2)(3,"table",3)(4,"tr")(5,"th"),c._uU(6,"Sn"),c.qZA(),c.TgZ(7,"th"),c._uU(8,"Title"),c.qZA(),c.TgZ(9,"th"),c._uU(10,"Image"),c.qZA(),c.TgZ(11,"th"),c._uU(12,"Description"),c.qZA(),c.TgZ(13,"th"),c._uU(14,"Quantity"),c.qZA(),c.TgZ(15,"th"),c._uU(16,"Price"),c.qZA(),c.TgZ(17,"th"),c._uU(18,"Total"),c.qZA(),c.TgZ(19,"th"),c._uU(20,"Action"),c.qZA()(),c.YNc(21,o3,25,9,"tr",4),c.TgZ(22,"tr"),c._UZ(23,"td",5),c.TgZ(24,"td")(25,"strong"),c._uU(26,"GrandTotal"),c.qZA()(),c.TgZ(27,"div",6)(28,"strong"),c._uU(29),c.ALo(30,"currency"),c.qZA()()()()()(),c.BQk()),2&n){const t=c.oxw();c.xp6(21),c.Q6J("ngForOf",t.list),c.xp6(8),c.Oqu(c.xi3(30,2,t.grandtotal(),"INR"))}}function l3(n,e){1&n&&(c.ynx(0),c.TgZ(1,"div",14)(2,"div",15)(3,"div",16),c._UZ(4,"img",17),c.TgZ(5,"h5"),c._uU(6,"Your Cart is Empty"),c.qZA(),c.TgZ(7,"h5"),c._uU(8,"Add Item to it Now"),c.qZA(),c.TgZ(9,"button",18),c._uU(10,"Shop Now"),c.qZA()()()(),c.BQk())}let u3=(()=>{class n{constructor(t,r){this.firebase=t,this.firebase2=r,this.list=[],this.total=0}ngOnInit(){this.getdata(),this.grandtotal()}getdata(){this.firebase.getProduct().subscribe(t=>{this.list=t,this.list.forEach(r=>{Object.assign(r,{quantity:1})})})}deleteItem(t){this.dec(t),this.firebase.deletePost(t)}inc(t){t.quantity+=1,console.log(t.total)}dec(t){1!=t.quantity&&(t.quantity-=1)}totalSum(t){return this.total=t.quantity*t.price,this.total}grandtotal(){let t=0;for(let r of this.list)t+=r.quantity*r.price;return t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Sm),c.Y36(CD))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-cart"]],decls:3,vars:2,consts:[[4,"ngIf"],[1,"container","pt-5"],[1,"jumbotron"],[1,"table","border","rounded",2,"width","100%"],[4,"ngFor","ngForOf"],["colspan","4"],["id","total",1,"mt-3"],["alt","",3,"src"],[1,"btn","rounded-circle","bg-danger",3,"click"],[1,"fa","fa-minus"],[1,"fa","fa-plus"],["id","tsum"],[1,"btn","btn-primary","bg-danger",3,"click"],[1,"fa-solid","fa-trash-can"],[1,"container","box2"],[1,"box","border"],[1,"center"],["src","https://rukminim2.flixcart.com/www/800/800/promos/16/05/2019/d438a32e-765a-4d8b-b4a6-520b560971e8.png?q=90","alt",""],["routerLink","",1,"btn","btn-primary","shop"]],template:function(t,r){1&t&&(c._UZ(0,"app-header"),c.YNc(1,a3,31,5,"ng-container",0),c.YNc(2,l3,11,0,"ng-container",0)),2&t&&(c.xp6(1),c.Q6J("ngIf",r.list.length>0),c.xp6(1),c.Q6J("ngIf",0==r.list.length))},directives:[uv,$r,Ir,iu],pipes:[Sh,Mi],styles:["img[_ngcontent-%COMP%]{text-decoration:none;height:162px;width:200px}table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{text-align:center;border-style:inset}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:15px}.box[_ngcontent-%COMP%]{padding-left:540px;margin-top:10%}.shop[_ngcontent-%COMP%]{margin-left:20%}.center[_ngcontent-%COMP%]{position:absolute;top:40%;left:50%;transform:translate(-50%,-50%);text-align:center}.box2[_ngcontent-%COMP%]{margin-top:-9%}.center[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:19%}"]}),n})();function c3(n,e){if(1&n&&(c.ynx(0),c.TgZ(1,"div",15)(2,"div",16),c._UZ(3,"img",17),c.TgZ(4,"div",18)(5,"h5",19),c._uU(6),c.qZA()()()(),c.BQk()),2&n){const t=e.$implicit;c.xp6(3),c.s9C("src",t.img,c.LSH),c.xp6(3),c.Oqu(t.text)}}let Hk=(()=>{class n{constructor(){this.data=[{img:"assets/img/IMG34.webp",text:"Special Offfer"},{img:"assets/img/IMG30.webp",text:"Watches For Men"},{img:"assets/img/IMG31.jpg",text:"Special Offfer"},{img:"assets/img/IMG32.webp",text:"Accessories"}]}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-homepage"]],decls:19,vars:1,consts:[[1,"container-fluid"],["id","carouselExampleControls","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],[1,"carousel-item","active"],["src","../../../assets/img/ing42.jpg","alt","...",1,"d-block","w-100"],[1,"carousel-item"],["src","../../../assets/img/img41.jpg","alt","...",1,"d-block","w-100"],["src","../../../assets/img/img40.jpg","alt","...",1,"d-block","w-100"],["type","button","data-bs-target","#carouselExampleControls","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExampleControls","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"row"],[4,"ngFor","ngForOf"],[1,"col-sm-3"],[1,"card","p-5"],["alt","Loading",1,"card-img-top","img",2,"width","18rem",3,"src"],[1,"card-img-overlay"],[1,"card-title","text","text-light"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),c._UZ(4,"img",4),c.qZA(),c.TgZ(5,"div",5),c._UZ(6,"img",6),c.qZA(),c.TgZ(7,"div",5),c._UZ(8,"img",7),c.qZA()(),c.TgZ(9,"button",8),c._UZ(10,"span",9),c.TgZ(11,"span",10),c._uU(12,"Previous"),c.qZA()(),c.TgZ(13,"button",11),c._UZ(14,"span",12),c.TgZ(15,"span",10),c._uU(16,"Next"),c.qZA()()()(),c.TgZ(17,"div",13),c.YNc(18,c3,7,2,"ng-container",14),c.qZA()),2&t&&(c.xp6(18),c.Q6J("ngForOf",r.data))},directives:[Ir],styles:[".text[_ngcontent-%COMP%]{margin-top:350px;text-align:center}.card[_ngcontent-%COMP%]{border:none}"]}),n})();function d3(n,e){1&n&&(c.TgZ(0,"span"),c._uU(1,"This field is invalid"),c.qZA())}function h3(n,e){1&n&&(c.TgZ(0,"span"),c._uU(1,"This field is invalid"),c.qZA())}let f3=(()=>{class n{constructor(t,r){this.fb=t,this.firbase=r}ngOnInit(){this.profileForm=this.fb.group({user:["",au.required],email:["",au.required,au.email],password:["",au.required]})}get email(){return this.profileForm.get("email")}get password(){return this.profileForm.get("password")}Submit(){this.firbase.login(this.profileForm.value.email,this.profileForm.value.password),this.profileForm.reset()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Fo),c.Y36(Sm))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-login"]],decls:45,vars:3,consts:[[1,"container"],[1,"formWraper"],[1,"formDiv"],[1,"text"],[1,"socialBtn"],[1,"facebook","icon"],[1,"fab","fa-facebook-f"],[1,"twitter","icon"],[1,"fab","fa-twitter"],[1,"instagram","icon"],[1,"fab","fa-instagram"],[1,"orDiv"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"formGroup"],[1,"far","fa-envelope"],["type","email","name","email","id","email","placeholder","Enter Email","formControlName","email"],[4,"ngIf"],[1,"fas","fa-lock"],["type","password","name","password","id","password","placeholder","Enter Password","formControlName","password"],[1,"checkBox"],["type","checkbox","name","checkbox","id","checkbox"],["type","submit",1,"btn"],[1,"welcomeDiv"],["routerLink","/register",1,"btn2"]],template:function(t,r){1&t&&(c._UZ(0,"app-header"),c.TgZ(1,"body")(2,"div",0)(3,"div",1)(4,"div",2)(5,"h2"),c._uU(6,"Create Account"),c.qZA(),c.TgZ(7,"p",3),c._uU(8," Sign Up with Social Media"),c.qZA(),c.TgZ(9,"div",4)(10,"div",5),c._UZ(11,"i",6),c.qZA(),c.TgZ(12,"div",7),c._UZ(13,"i",8),c.qZA(),c.TgZ(14,"div",9),c._UZ(15,"i",10),c.qZA()(),c._UZ(16,"hr"),c.TgZ(17,"div",11),c._uU(18,"Or"),c.qZA(),c.TgZ(19,"p",3),c._uU(20,"Sign IN with Email Address"),c.qZA(),c.TgZ(21,"form",12),c.NdJ("ngSubmit",function(){return r.Submit()}),c.TgZ(22,"div",13),c._UZ(23,"i",14),c.TgZ(24,"div"),c._UZ(25,"input",15),c.qZA(),c.YNc(26,d3,2,0,"span",16),c.qZA(),c.TgZ(27,"div",13),c._UZ(28,"i",17),c.TgZ(29,"div"),c._UZ(30,"input",18),c.qZA(),c.YNc(31,h3,2,0,"span",16),c.qZA(),c.TgZ(32,"div",19),c._UZ(33,"input",20),c.TgZ(34,"span",3),c._uU(35,"I Agree with Term & Conditions."),c.qZA()(),c.TgZ(36,"button",21),c._uU(37,"SIGN IN"),c.qZA()()(),c.TgZ(38,"div",22)(39,"h2"),c._uU(40,"Welcome Back!"),c.qZA(),c.TgZ(41,"p",3),c._uU(42,"An inch of time is an inch of gold, but you cant buy that inch of time with an inch of gold "),c.qZA(),c.TgZ(43,"button",23),c._uU(44,"SIGN UP"),c.qZA()()()()()),2&t&&(c.xp6(21),c.Q6J("formGroup",r.profileForm),c.xp6(5),c.Q6J("ngIf",r.email&&r.email.invalid&&r.email.touched),c.xp6(5),c.Q6J("ngIf",r.password&&r.password.invalid&&r.password.touched))},directives:[uv,df,of,cg,Vd,rg,dg,$r,iu],styles:["body[_ngcontent-%COMP%]{background-image:url(loginbg.38263e7539f9d676.jpg);background-size:cover;height:101vh}.container[_ngcontent-%COMP%]{display:flex;align-content:center;justify-content:center}.formWraper[_ngcontent-%COMP%]{display:flex;width:55%;height:570px;background-color:#1d1d1c4d;margin-top:80px;border-radius:10px;box-shadow:0 0 20px #f5f5f5}.formDiv[_ngcontent-%COMP%]{width:50%;padding:8%;background-color:#1d1d1c4d;text-align:center;border-radius:10px 0 0 10px}.formDiv[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#e0ece0;margin-top:-5px}.welcomeDiv[_ngcontent-%COMP%]{width:50%;padding:10px;background-size:cover;text-align:center;color:#fff}.welcomeDiv[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:150px}.socialBtn[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px}.icon[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:15px;background-color:#e6e6fa;margin:5px;line-height:30px;box-shadow:0 0 10px #000}.text[_ngcontent-%COMP%]{font-size:small;color:#fff}.orDiv[_ngcontent-%COMP%]{width:10%;margin:0 auto;background-color:#e6e6fa;position:relative;top:-16px;justify-content:center}.formGroup[_ngcontent-%COMP%]{width:100%;position:relative}.formGroup[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:10px;border-style:none;padding-left:30px!important}.formGroup[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:8px;top:5px;color:gray;font-size:smaller;margin:10px!important}input[_ngcontent-%COMP%]::placeholder{position:relative;left:10px}input[_ngcontent-%COMP%]:focus{border-color:red}.checkBox[_ngcontent-%COMP%]{width:100%;margin-top:2px}.btn[_ngcontent-%COMP%]{width:70%;padding:15px;background-color:#78b1df;margin-top:15px;color:#e6e6fa;border-radius:20px;border-style:none}.btn2[_ngcontent-%COMP%]{width:70%;padding:15px;background-color:transparent;margin-top:15px;color:#e6e6fa;border-radius:20px;border-style:none;border:2px solid rgb(247,243,243)}.btn[_ngcontent-%COMP%]:hover, .btn2[_ngcontent-%COMP%]:hover, .icon[_ngcontent-%COMP%]:hover{background-color:#075023;color:#f5f5f5}span[_ngcontent-%COMP%]{color:#f5f5f5}@media screen and (max-width: 1000px){.formWraper[_ngcontent-%COMP%]{width:70%}}@media screen and (max-width: 670px){.formDiv[_ngcontent-%COMP%]{width:90%;border-radius:10px}.welcomeDiv[_ngcontent-%COMP%]{display:none}}"]}),n})(),p3=(()=>{class n{constructor(t,r){this.active=t,this.firebase=r,this.title="",this.price="",this.img="",this.des=""}ngOnInit(){this.title=this.active.snapshot.params.title,this.price=this.active.snapshot.params.price,this.img=this.active.snapshot.params.img,this.des=this.active.snapshot.params.des,this.image("box","zimg")}addProduct(){this.firebase.createProduct({title:this.title,img:this.img,des:this.des,price:this.price})}image(t,r){var i=document.getElementById(t),o=document.getElementById(r);i.addEventListener("mousemove",function(u){let h=u.clientX-i.offsetLeft,m=u.clientY-i.offsetTop;h=h/i.offsetWidth*100,m=m/i.offsetHeight*100,o.style.transform="translate(-"+h+"%,-"+m+"%) scale(2)"}),i.addEventListener("mouseleave",function(){o.style.transform="translate(-50%,-50%) scale(1)"})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(no),c.Y36(Sm))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-product-detail"]],decls:37,vars:8,consts:[[1,"container-fluid","mt-5"],[1,"card"],[1,"container-fliud"],[1,"wrapper","row"],[1,"preview","col-md-6"],[1,"col-2"],[1,"col","box2","border","border-dark","h-25","w-100","ms-5","mt-5"],["alt","Loading..",3,"src"],[1,"col","box2","border","border-dark","h-25","w-100","ms-5"],[1,"col-4"],["id","box",1,"box"],["id","zimg","alt","Loading",3,"src"],[1,"details","col-md-6","mt-5"],[1,"product-title"],[1,"rating"],[1,"stars"],[1,"fa","fa-star","checked"],[1,"fa","fa-star"],[1,"review-no"],[1,"product-description"],[1,"price"],[1,"action"],["type","button",1,"add-to-cart","btn","btn-default",3,"click"]],template:function(t,r){1&t&&(c._UZ(0,"app-header"),c.TgZ(1,"body")(2,"div",0)(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6),c._UZ(9,"img",7),c.qZA(),c._UZ(10,"div",8)(11,"div",8),c.qZA(),c.TgZ(12,"div",9)(13,"div",10),c._UZ(14,"img",11),c.qZA()()(),c.TgZ(15,"div",12)(16,"h3",13),c._uU(17),c.qZA(),c.TgZ(18,"div",14)(19,"div",15),c._UZ(20,"span",16)(21,"span",16)(22,"span",16)(23,"span",17)(24,"span",17),c.qZA(),c.TgZ(25,"span",18),c._uU(26,"41 reviews"),c.qZA()(),c.TgZ(27,"p",19),c._uU(28),c.qZA(),c.TgZ(29,"h4",20),c._uU(30,"current price: "),c.TgZ(31,"span"),c._uU(32),c.ALo(33,"currency"),c.qZA()(),c.TgZ(34,"div",21)(35,"button",22),c.NdJ("click",function(){return r.addProduct()}),c._uU(36,"add to cart"),c.qZA()()()()()()()()),2&t&&(c.xp6(9),c.s9C("src",r.img,c.LSH),c.xp6(5),c.s9C("src",r.img,c.LSH),c.xp6(3),c.Oqu(r.title),c.xp6(11),c.Oqu(r.des),c.xp6(4),c.Oqu(c.xi3(33,5,r.price,"INR")))},directives:[uv],pipes:[Mi],styles:["body[_ngcontent-%COMP%]{font-family:open sans;overflow-x:hidden}#zimg[_ngcontent-%COMP%]{height:18rem;width:20rem;margin-left:12rem;margin-top:10rem;position:absolute;transform:translate(-50%,-50%);pointer-events:none}.box2[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:5px;max-height:20%;width:7%;position:absolute;margin-top:10px}.preview[_ngcontent-%COMP%]{display:flex}.product-title[_ngcontent-%COMP%], .price[_ngcontent-%COMP%], .sizes[_ngcontent-%COMP%], .colors[_ngcontent-%COMP%]{text-transform:UPPERCASE;font-weight:700}.checked[_ngcontent-%COMP%], .price[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ff9f1a}.add-to-cart[_ngcontent-%COMP%]{background:#ff9f1a;padding:1.2em 1.5em;border:none;text-transform:UPPERCASE;font-weight:700;color:#fff}#box[_ngcontent-%COMP%]{border:1px solid #f0f0f0;width:25rem;height:25rem;overflow:hidden;position:relative;margin-left:8rem}.box2[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.3)}"]}),n})(),$k=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-footer"]],decls:81,vars:0,consts:[[1,"footer"],[1,"container","py-5"],[1,"row","py-4"],[1,"col-lg-4","col-md-6","mb-4","mb-lg-0"],["src","../../../assets/img/icon.png","alt","","width","180",1,"mb-3"],[1,"font-italic","text-light"],[1,"list-inline","mt-4"],[1,"list-inline-item"],["href","#","target","_blank","title","twitter"],[1,"fab","fa-twitter"],["href","#","target","_blank","title","facebook"],[1,"fab","fa-facebook"],["href","#","target","_blank","title","instagram"],[1,"fab","fa-instagram"],["href","#","target","_blank","title","pinterest"],[1,"fab","fa-pinterest"],["href","#","target","_blank","title","vimeo"],[1,"fab","fa-vimeo"],[1,"col-lg-2","col-md-6","mb-4","mb-lg-0"],[1,"text-uppercase","font-weight-bold","mb-4"],[1,"list-unstyled","mb-0"],[1,"mb-2","text-light"],["href","#",1,"text-light"],[1,"mb-2"],["routerLink","/adminlogin",1,"text-light"],[1,"col-lg-4","col-md-6","mb-lg-0"],[1,"text-light","mb-4"],[1,"p-1","rounded","border"],[1,"input-group"],["type","email","placeholder","Enter your email address","aria-describedby","button-addon1",1,"form-control","border-0","shadow-0"],[1,"input-group-append"],["id","button-addon1","type","submit",1,"btn","btn-link"],[1,"fa","fa-paper-plane"],[1,"container","text-center","d-flex","justify-content-center"],[1,"fa-solid","fa-hands-praying","fa-2x","mt-2"],[1,"text-light"]],template:function(t,r){1&t&&(c.TgZ(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3),c._UZ(4,"img",4),c.TgZ(5,"p",5),c._uU(6,"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt."),c.qZA(),c.TgZ(7,"ul",6)(8,"li",7)(9,"a",8),c._UZ(10,"i",9),c.qZA()(),c.TgZ(11,"li",7)(12,"a",10),c._UZ(13,"i",11),c.qZA()(),c.TgZ(14,"li",7)(15,"a",12),c._UZ(16,"i",13),c.qZA()(),c.TgZ(17,"li",7)(18,"a",14),c._UZ(19,"i",15),c.qZA()(),c.TgZ(20,"li",7)(21,"a",16),c._UZ(22,"i",17),c.qZA()()()(),c.TgZ(23,"div",18)(24,"h6",19),c._uU(25,"Shop"),c.qZA(),c.TgZ(26,"ul",20)(27,"li",21)(28,"a",22),c._uU(29,"For Women"),c.qZA()(),c.TgZ(30,"li",21)(31,"a",22),c._uU(32,"For Men"),c.qZA()(),c.TgZ(33,"li",21)(34,"a",22),c._uU(35,"Stores"),c.qZA()(),c.TgZ(36,"li",21)(37,"a",22),c._uU(38,"Our Blog"),c.qZA()()()(),c.TgZ(39,"div",18)(40,"h6",19),c._uU(41,"Company"),c.qZA(),c.TgZ(42,"ul",20)(43,"li",23)(44,"a",22),c._uU(45,"Login"),c.qZA()(),c.TgZ(46,"li",23)(47,"a",22),c._uU(48,"Register"),c.qZA()(),c.TgZ(49,"li",23)(50,"a",22),c._uU(51,"Wishlist"),c.qZA()(),c.TgZ(52,"li",23)(53,"a",22),c._uU(54,"Our Products"),c.qZA()(),c.TgZ(55,"li",23)(56,"a",24),c._uU(57,"Our Products"),c.qZA()()()(),c.TgZ(58,"div",25)(59,"h6",19),c._uU(60,"Newsletter"),c.qZA(),c.TgZ(61,"p",26),c._uU(62,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. At itaque temporibus."),c.qZA(),c.TgZ(63,"div",27)(64,"div",28),c._UZ(65,"input",29),c.TgZ(66,"div",30)(67,"button",31),c._UZ(68,"i",32),c.qZA()()()()()()(),c._UZ(69,"hr"),c.TgZ(70,"div",0)(71,"div",33)(72,"div"),c._UZ(73,"i",34),c.qZA(),c._uU(74,"\xa0 "),c.TgZ(75,"div")(76,"h1",35),c._uU(77,"THANK YOU"),c.qZA()(),c._uU(78,"\xa0 "),c.TgZ(79,"div"),c._UZ(80,"i",34),c.qZA()()()())},directives:[pc],styles:[".footer[_ngcontent-%COMP%]{background-color:#1a1919;color:#f5f5f5;border-bottom:0px;min-height:100px}#button-addon1[_ngcontent-%COMP%], i[_ngcontent-%COMP%]{color:#ffc371}.form-control[_ngcontent-%COMP%]::placeholder{font-size:.95rem;color:#aaa;font-style:italic}.form-control.shadow-0[_ngcontent-%COMP%]:focus{box-shadow:none}"]}),n})();const g3=function(n,e,t,r){return["/detail",n,e,t,r]};function m3(n,e){if(1&n){const t=c.EpF();c.ynx(0),c.TgZ(1,"div",8),c._UZ(2,"img",9),c.TgZ(3,"div",10)(4,"a",11)(5,"h5",12),c._uU(6),c.qZA()(),c.TgZ(7,"p",13),c._uU(8),c.qZA(),c.TgZ(9,"p",13),c._uU(10),c.ALo(11,"currency"),c.qZA(),c.TgZ(12,"button",14),c.NdJ("click",function(){const o=c.CHM(t).$implicit;return c.oxw().addProduct(o)}),c._uU(13,"Add To Cart"),c.qZA()()(),c.BQk()}if(2&n){const t=e.$implicit;c.xp6(2),c.s9C("src",t.img,c.LSH),c.xp6(2),c.Q6J("routerLink",c.l5B(8,g3,t.title,t.price,t.img,t.des)),c.xp6(2),c.Oqu(t.title),c.xp6(2),c.Oqu(t.des),c.xp6(2),c.Oqu(c.xi3(11,5,t.price,"INR"))}}const _3=[{path:"",redirectTo:"layout",pathMatch:"full"},{path:"layout",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-layout"]],decls:4,vars:0,template:function(t,r){1&t&&c._UZ(0,"app-header")(1,"app-homepage")(2,"app-footer")(3,"router-outlet")},directives:[uv,Hk,$k,Ad],styles:[""]}),n})()},{path:"login",component:f3},{path:"register",component:(()=>{class n{constructor(t){this.firebase=t,this.user="",this.lname="",this.email="",this.password=""}ngOnInit(){}registered(){this.firebase.register(this.email,this.password,this.user),this.email="",this.password="",this.user="",this.lname=""}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Sm))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-register"]],decls:44,vars:4,consts:[[1,"container-fluid"],[1,"signup-form"],[1,"form-header"],[1,"text-light"],[1,"form-body"],[1,"horizontal-group"],[1,"form-group","left"],["for","firstname",1,"label-title"],["type","text","id","firstname","placeholder","enter your first name","required","required","name","user",1,"form-input",3,"ngModel","ngModelChange"],[1,"form-group","right"],["for","lastname",1,"label-title"],["type","text","id","lastname","placeholder","enter your last name","name","lname",1,"form-input",3,"ngModel","ngModelChange"],[1,"form-group"],["for","email",1,"label-title"],["type","email","id","email","placeholder","enter your email","required","required","name","email",1,"form-input",3,"ngModel","ngModelChange"],["for","password",1,"label-title"],["type","password","id","password","placeholder","enter your password","required","required","name","password",1,"form-input",3,"ngModel","ngModelChange"],["for","confirm-password",1,"label-title"],["type","password","id","confirm-password","placeholder","enter your password again","required","required",1,"form-input"],[1,"label-title",2,"color","#1BBA93"],[1,"input-group"],["for","male"],["type","radio","name","gender","value","male","id","male"],["for","female"],["type","radio","name","gender","value","female","id","female"],[1,"form-footer"],["type","submit",1,"btn",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"h1",3),c._uU(4,"Create Account"),c.qZA()(),c.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),c._uU(9,"First name *"),c.qZA(),c.TgZ(10,"input",8),c.NdJ("ngModelChange",function(o){return r.user=o}),c.qZA()(),c.TgZ(11,"div",9)(12,"label",10),c._uU(13,"Last name"),c.qZA(),c.TgZ(14,"input",11),c.NdJ("ngModelChange",function(o){return r.lname=o}),c.qZA()()(),c.TgZ(15,"div",12)(16,"label",13),c._uU(17,"Email*"),c.qZA(),c.TgZ(18,"input",14),c.NdJ("ngModelChange",function(o){return r.email=o}),c.qZA()(),c.TgZ(19,"div",5)(20,"div",6)(21,"label",15),c._uU(22,"Password *"),c.qZA(),c.TgZ(23,"input",16),c.NdJ("ngModelChange",function(o){return r.password=o}),c.qZA()(),c.TgZ(24,"div",9)(25,"label",17),c._uU(26,"Confirm Password *"),c.qZA(),c._UZ(27,"input",18),c.qZA()(),c.TgZ(28,"div",5)(29,"div",6)(30,"label",19),c._uU(31,"Gender:"),c.qZA(),c.TgZ(32,"div",20)(33,"label",21),c._UZ(34,"input",22),c._uU(35," Male"),c.qZA(),c.TgZ(36,"label",23),c._UZ(37,"input",24),c._uU(38," Female"),c.qZA()()(),c.TgZ(39,"div",25)(40,"span",3),c._uU(41,"* required"),c.qZA(),c.TgZ(42,"button",26),c.NdJ("click",function(){return r.registered()}),c._uU(43,"Register"),c.qZA()()()()()()),2&t&&(c.xp6(10),c.Q6J("ngModel",r.user),c.xp6(4),c.Q6J("ngModel",r.lname),c.xp6(4),c.Q6J("ngModel",r.email),c.xp6(5),c.Q6J("ngModel",r.password))},directives:[df,of,cf,Vd,fg,rg,S_],styles:[".container-fluid[_ngcontent-%COMP%]{background-image:url(pexels-pixabay-277319.83ef5b56e12d4f19.jpg);background-size:cover;display:flex;align-content:center;justify-content:center}.signup-form[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;width:650px;margin:10% 10% 10% 20%;background-color:#2020204d;border-radius:10px}.form-header[_ngcontent-%COMP%]{background-color:#2020204d;color:#f5f5f5;border-top-left-radius:10px;border-top-right-radius:10px}.form-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:30px;text-align:center;color:#666;padding:20px 0;border-bottom:1px solid #cccccc}.form-body[_ngcontent-%COMP%]{padding:10px 40px;color:#666}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-body[_ngcontent-%COMP%]   .label-title[_ngcontent-%COMP%]{color:#1bba93;font-size:17px;font-weight:700}.form-body[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{font-size:17px;box-sizing:border-box;width:100%;height:34px;padding-left:10px;padding-right:10px;color:#333;text-align:left;border:1px solid #d6d6d6;border-radius:4px;background-color:#2020204d;color:#f5f5f5;outline:none}.horizontal-group[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{float:left;width:49%;color:#1bba93}.horizontal-group[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{float:right;width:49%}input[type=file][_ngcontent-%COMP%]{outline:none;cursor:pointer;font-size:17px}#range-label[_ngcontent-%COMP%]{width:15%;padding:5px;background-color:#1bba93;color:#fff;border-radius:5px;font-size:17px;position:relative;top:-8px}[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#d9d9d9}.form-footer[_ngcontent-%COMP%]{clear:both}.signup-form[_ngcontent-%COMP%]   .form-footer[_ngcontent-%COMP%]{background-color:#2020204d;color:#f5f5f5;border-bottom-left-radius:10px;border-bottom-right-radius:10px;padding:10px 40px;text-align:right;border-top:1px solid #cccccc}.form-footer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{float:left;margin-top:10px;color:#999;font-style:italic;font-weight:thin}.btn[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;background-color:#1bba93;font-size:17px;border:none;border-radius:5px;color:#bcf5e7;cursor:pointer}.btn[_ngcontent-%COMP%]:hover{background-color:#169c7b;color:#fff}"]}),n})()},{path:"home",component:(()=>{class n{constructor(t,r,i){this.firebase=t,this.router=r,this.server=i,this.datalist=[],this.productlist=[]}ngOnInit(){this.getproductitem()}getproductitem(){this.server.getProduct().subscribe(t=>{this.productlist=t,console.log(this.productlist)})}addProduct(t){this.firebase.createProduct({img:t.img,title:t.title,des:t.des,price:t.price})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Sm),c.Y36(Ur),c.Y36(CD))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-product"]],decls:19,vars:1,consts:[["id","carouselExampleDark","data-bs-ride","carousel",1,"carousel","carousel-dark","slide"],[1,"carousel-inner"],["data-bs-interval","10000",1,"carousel-item","active"],["src","../../../assets/img/rolex-cosmograph-daytona_FeXwQ1DF.mp4","type","video/mp4","control","","autoplay","","playsinline","","loop","","preload","auto",1,"sc-fzoJus","bPIkEp"],[1,"carousel-caption","d-none","d-md-block"],[1,"product"],[1,"container"],[4,"ngFor","ngForOf"],[1,"card",2,"width","18rem"],["alt","...",1,"card-img-top",3,"src"],[1,"card-body"],[3,"routerLink"],[1,"card-title"],[1,"card-text"],[1,"btn","btn-info","w-100","mb-2",3,"click"]],template:function(t,r){1&t&&(c._UZ(0,"app-header"),c.TgZ(1,"body")(2,"div",0)(3,"div",1)(4,"div",2),c._UZ(5,"video",3),c.TgZ(6,"div",4)(7,"h5"),c._uU(8,"DATEJUST"),c.qZA(),c.TgZ(9,"p"),c._uU(10,"THE CLASSIC WATCH OF REFERENCE"),c.qZA()()()()(),c.TgZ(11,"div")(12,"h1",5)(13,"strong"),c._uU(14,"Watches"),c.qZA()(),c._UZ(15,"hr"),c.qZA(),c.TgZ(16,"div",6),c.YNc(17,m3,14,13,"ng-container",7),c.qZA()(),c._UZ(18,"app-footer")),2&t&&(c.xp6(17),c.Q6J("ngForOf",r.productlist))},directives:[uv,Ir,pc,$k],pipes:[Mi],styles:[".carousel-item[_ngcontent-%COMP%]{height:80vh;min-height:300px;background:no-repeat scroll center scroll;background-size:cover}.carousel-caption[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#f5f5f5;font-size:100px;font-weight:300;box-sizing:border-box}video[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}.carousel-caption[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:40px;top:2rem;color:#f5f5f5;margin-bottom:13rem}.carousel-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{justify-content:center;align-items:center}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);justify-content:center;align-items:center;grid-gap:30px}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:12rem;width:10rem;margin-left:4rem}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.card-body[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]:hover{border-bottom:2px solid rgb(8,7,7);cursor:pointer}.product[_ngcontent-%COMP%]{position:relative;font-weight:700;margin-top:30px;animation:example 100s linear infinite;font-style:italic;text-transform:uppercase}a[_ngcontent-%COMP%]{text-decoration:none;color:#000}@keyframes example{0%{left:0}50%{left:calc(100% - 100px)}to{left:0}}.card[_ngcontent-%COMP%]:hover{border:5px solid whitesmoke}button[_ngcontent-%COMP%]:hover{box-shadow:5px 5px #5f7083}.card[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}"]}),n})()},{path:"cart",component:u3},{path:"detail/:title/:price/:img/:des",component:p3},{path:"homepage",component:Hk},{path:"adminlogin",component:s3},{path:"admin",component:n3}];let y3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Fn.forRoot(_3)],Fn]}),n})(),v3=(()=>{class n{constructor(){this.title="E-Commerce"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},directives:[Ad],styles:[""]}),n})();var IM=L(5032);const Gk="@firebase/database";let DM="";function zk(n){DM=n}class C3{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class b3{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Wk=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new C3(e)}}catch(e){}return new b3},xm=Wk("localStorage"),AM=Wk("sessionStorage"),cv=new da.Yd("@firebase/database"),Zk=function(){let n=1;return function(){return n++}}(),Kk=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},$E=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=$E.apply(null,r):e+="object"==typeof r?(0,k.Wl)(r):r,e+=" "}return e};let Mm=null,Yk=!0;const Qk=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(cv.logLevel=da.in.VERBOSE,Mm=cv.log.bind(cv),e&&AM.set("logging_enabled",!0)):"function"==typeof n?Mm=n:(Mm=null,AM.remove("logging_enabled"))},ts=function(...n){if(!0===Yk&&(Yk=!1,null===Mm&&!0===AM.get("logging_enabled")&&Qk(!0)),Mm){const e=$E.apply(null,n);Mm(e)}},GE=function(n){return function(...e){ts(n,...e)}},SM=function(...n){const e="FIREBASE INTERNAL ERROR: "+$E(...n);cv.error(e)},Gc=function(...n){const e=`FIREBASE FATAL ERROR: ${$E(...n)}`;throw cv.error(e),new Error(e)},$s=function(...n){const e="FIREBASE WARNING: "+$E(...n);cv.warn(e)},TD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Qf="[MIN_NAME]",yh="[MAX_NAME]",Pm=function(n,e){if(n===e)return 0;if(n===Qf||e===yh)return-1;if(e===Qf||n===yh)return 1;{const t=eF(n),r=eF(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},D3=function(n,e){return n===e?0:n<e?-1:1},qE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Wl)(e))},xM=function(n){if("object"!=typeof n||null===n)return(0,k.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Wl)(e[r]),t+=":",t+=xM(n[e[r]]);return t+="}",t},Jk=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function ns(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Xk=function(n){(0,k.hu)(!TD(n),"Invalid JSON number");const r=1023;let i,o,u,h,m;0===n?(o=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=h+r,u=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(o=0,u=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(u%2?1:0),u=Math.floor(u/2);for(m=11;m;m-=1)v.push(o%2?1:0),o=Math.floor(o/2);v.push(i?1:0),v.reverse();const T=v.join("");let A="";for(m=0;m<64;m+=8){let O=parseInt(T.substr(m,8),2).toString(16);1===O.length&&(O="0"+O),A+=O}return A.toLowerCase()},M3=new RegExp("^-?(0*)\\d{1,10}$"),eF=function(n){if(M3.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},dv=function(n){try{n()}catch(e){setTimeout(()=>{throw $s("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},zE=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class R3{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){$s(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class k3{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(ts("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',$s(e)}}let WE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const sF=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,lF="websocket",uF="long_polling";class PM{constructor(e,t,r,i,o=!1,u="",h=!1,m=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=xm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&xm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function cF(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===lF)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==uF)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function F3(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return ns(t,(o,u)=>{i.push(o+"="+u)}),r+i.join("&")}class L3{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const NM={},OM={};function RM(n){const e=n.toString();return NM[e]||(NM[e]=new L3),NM[e]}class U3{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&dv(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Jf{constructor(e,t,r,i,o,u,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=GE(e),this.stats_=RM(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),cF(t,uF,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new U3(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new kM((...o)=>{const[u,h,m,v,T]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=h,this.password=m;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[u,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&sF.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Jf.forceAllow_=!0}static forceDisallow(){Jf.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!Jf.forceAllow_&&(Jf.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=Jk(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class kM{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Zk(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=kM.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){ts("frame writing exception"),h.stack&&ts(h.stack),ts(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ts("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{ts("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let DD=null;"undefined"!=typeof MozWebSocket?DD=MozWebSocket:"undefined"!=typeof WebSocket&&(DD=WebSocket);let hv=(()=>{class n{constructor(t,r,i,o,u,h,m){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=GE(this.connId),this.stats_=RM(r),this.connURL=n.connectionURL_(r,h,m,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,u){const h={v:"5"};return!(0,k.Yr)()&&"undefined"!=typeof location&&location.hostname&&sF.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),o&&(h.ac=o),u&&(h.p=u),cF(t,lF,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,xm.set("previous_websocket_failure",!0);try{let i;if((0,k.Yr)()){i={headers:{"User-Agent":`Firebase/5/${DM}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,h=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new DD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==DD&&!n.forceDisallow_}static previouslyFailed(){return xm.isInMemoryStorage||!0===xm.get("previous_websocket_failure")}markConnectionHealthy(){xm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=Jk(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),_F=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Jf,hv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=hv&&hv.isAvailable();let i=r&&!hv.previouslyFailed();if(t.webSocketOnly&&(r||$s("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[hv];else{const o=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&o.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class TF{constructor(e,t,r,i,o,u,h,m,v,T){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=GE("c:"+this.id+":"),this.transportManager_=new _F(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=zE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=qE("t",e),r=qE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=qE("t",e),r=qE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=qE("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?SM("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):SM("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&$s("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),zE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):zE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(xm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class IF{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class DF{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class AD extends DF{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new AD}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class jn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function An(){return new jn("")}function an(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Xf(n){return n.pieces_.length-n.pieceNum_}function sr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new jn(n.pieces_,e)}function LM(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ZE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function xF(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new jn(e,0)}function Rr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof jn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new jn(t,0)}function ln(n){return n.pieceNum_>=n.pieces_.length}function fo(n,e){const t=an(n),r=an(e);if(null===t)return e;if(t===r)return fo(sr(n),sr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function aH(n,e){const t=ZE(n,0),r=ZE(e,0);for(let i=0;i<t.length&&i<r.length;i++){const o=Pm(t[i],r[i]);if(0!==o)return o}return t.length===r.length?0:t.length<r.length?-1:1}function VM(n,e){if(Xf(n)!==Xf(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ml(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Xf(n)>Xf(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class lH{constructor(e,t){this.errorPrefix_=t,this.parts_=ZE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);MF(this)}}function MF(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Nm(n))}function Nm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class UM extends DF{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new UM}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const KE=1e3;let xD,Om=(()=>{class n extends IF{constructor(t,r,i,o,u,h,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=GE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=KE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");UM.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&AD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,u={r:o,a:t,b:r};this.log_((0,k.Wl)(u)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new k.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:h=>{const m=h.d;"ok"===h.s?r.resolve(m):r.reject(m)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,o){this.initConnection_();const u=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const m={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(h).set(u,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,m=>{const v=m.d,T=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",m),"ok"!==T&&this.removeListen_(i,o),t.onComplete&&t.onComplete(T,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();$s(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const u=o.s,h=o.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const u={p:t};o&&(u.q=i,u.t=o),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,h=>{o&&setTimeout(()=>{o(h.s,h.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,u){this.initConnection_();const h={p:r,d:i};void 0!==u&&(h.h=u),this.outstandingPuts_.push({action:t,request:h,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):SM("Unrecognized action received from server: "+(0,k.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=KE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=KE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=KE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ce.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,v=null;const T=function(){v?v.close():(m=!0,o())};t.realtime_={close:T,sendRequest:function(F){(0,k.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(F)}};const O=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[F,j]=yield Promise.all([t.authTokenProvider_.getToken(O),t.appCheckTokenProvider_.getToken(O)]);m?ts("getToken() completed but was canceled"):(ts("getToken() completed. Creating connection."),t.authToken_=F&&F.accessToken,t.appCheckToken_=j&&j.token,v=new TF(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,Q=>{$s(Q+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(F){t.log_("Failed to get token: "+F),m||(t.repoInfo_.nodeAdmin&&$s(F),T())}}})()}interrupt(t){ts("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ts("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=KE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>xM(u)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new jn(t).toString();let o;if(this.listens.has(i)){const u=this.listens.get(i);o=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){ts("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){ts("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+DM.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=AD.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class dn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new dn(e,t)}}class SD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new dn(Qf,e),i=new dn(Qf,t);return 0!==this.compare(r,i)}minPost(){return dn.MIN}}class OF extends SD{static get __EMPTY_NODE(){return xD}static set __EMPTY_NODE(e){xD=e}compare(e,t){return Pm(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return dn.MIN}maxPost(){return new dn(yh,xD)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new dn(e,xD)}toString(){return".key"}}const qc=new OF;class MD{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let jM,Tu=(()=>{class n{constructor(t,r,i,o,u){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=o?o:$o.EMPTY_NODE,this.right=null!=u?u:$o.EMPTY_NODE}copy(t,r,i,o,u){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=o?o:this.left,null!=u?u:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const u=i(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===u?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return $o.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return $o.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class $o{constructor(e,t=$o.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new $o(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Tu.BLACK,null,null))}remove(e){return new $o(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Tu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new MD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new MD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new MD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new MD(this.root_,null,this.comparator_,!0,e)}}function mH(n,e){return Pm(n.name,e.name)}function BM(n,e){return Pm(n,e)}$o.EMPTY_NODE=new class gH{copy(e,t,r,i,o){return this}insert(e,t,r){return new Tu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const RF=function(n){return"number"==typeof n?"number:"+Xk(n):"string:"+n},kF=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===jM||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===jM||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let FF,LF,VF,fv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),kF(this.priorityNode_)}static set __childrenNodeConstructor(t){FF=t}static get __childrenNodeConstructor(){return FF}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ln(t)?this:".priority"===an(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=an(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===Xf(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(sr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+RF(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Xk(this.value_):this.value_,this.lazyHash_=Kk(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(o>=0,"Unknown leaf type: "+r),(0,k.hu)(u>=0,"Unknown leaf type: "+i),o===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const pr=new class wH extends SD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?Pm(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return dn.MIN}maxPost(){return new dn(yh,new fv("[PRIORITY-POST]",VF))}makePost(e,t){const r=LF(e);return new dn(t,new fv("[PRIORITY-POST]",r))}toString(){return".priority"}},EH=Math.log(2);class CH{constructor(e){this.count=parseInt(Math.log(e+1)/EH,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const PD=function(n,e,t,r){n.sort(e);const i=function(m,v){const T=v-m;let A,O;if(0===T)return null;if(1===T)return A=n[m],O=t?t(A):A,new Tu(O,A.node,Tu.BLACK,null,null);{const F=parseInt(T/2,10)+m,j=i(m,F),Q=i(F+1,v);return A=n[F],O=t?t(A):A,new Tu(O,A.node,Tu.BLACK,j,Q)}},h=function(m){let v=null,T=null,A=n.length;const O=function(j,Q){const fe=A-j,qe=A;A-=j;const Je=i(fe+1,qe),et=n[fe],pt=t?t(et):et;F(new Tu(pt,et.node,Q,null,Je))},F=function(j){v?(v.left=j,v=j):(T=j,v=j)};for(let j=0;j<m.count;++j){const Q=m.nextBitIsOne(),fe=Math.pow(2,m.count-(j+1));Q?O(fe,Tu.BLACK):(O(fe,Tu.BLACK),O(fe,Tu.RED))}return T}(new CH(n.length));return new $o(r||e,h)};let HM;const pv={};class vh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(pv&&pr,"ChildrenNode.ts has not been loaded"),HM=HM||new vh({".priority":pv},{".priority":pr}),HM}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof $o?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==qc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(dn.Wrap);let h,u=o.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=o.getNext();h=i?PD(r,e.getCompare()):pv;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const T=Object.assign({},this.indexes_);return T[m]=h,new vh(T,v)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,o)=>{const u=(0,k.DV)(this.indexSet_,o);if((0,k.hu)(u,"Missing index implementation for "+o),i===pv){if(u.isDefinedOn(e.node)){const h=[],m=t.getIterator(dn.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&h.push(v),v=m.getNext();return h.push(e),PD(h,u.getCompare())}return pv}{const h=t.get(e.name);let m=i;return h&&(m=m.remove(new dn(e.name,h))),m.insert(e,e.node)}});return new vh(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===pv)return i;{const o=t.get(e.name);return o?i.remove(new dn(e.name,o)):i}});return new vh(r,this.indexSet_)}}let YE,nn=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&kF(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return YE||(YE=new n(new $o(BM),null,vh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||YE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?YE:r}}getChild(t){const r=an(t);return null===r?this:this.getImmediateChild(r).getChild(sr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new dn(t,r);let o,u;r.isEmpty()?(o=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const h=o.isEmpty()?YE:this.priorityNode_;return new n(o,h,u)}}updateChild(t,r){const i=an(t);if(null===i)return r;{(0,k.hu)(".priority"!==an(t)||1===Xf(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(sr(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,u=!0;if(this.forEachChild(pr,(h,m)=>{r[h]=m.val(t),i++,u&&n.INTEGER_REGEXP_.test(h)?o=Math.max(o,Number(h)):u=!1}),!t&&u&&o<2*i){const h=[];for(const m in r)h[m]=r[m];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+RF(this.getPriority().val())+":"),this.forEachChild(pr,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":Kk(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const u=o.getPredecessorKey(new dn(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new dn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new dn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,dn.Wrap);let u=o.peek();for(;null!=u&&r.compare(u,t)<0;)o.getNext(),u=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,dn.Wrap);let u=o.peek();for(;null!=u&&r.compare(u,t)>0;)o.getNext(),u=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===QE?-1:0}withIndex(t){if(t===qc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===qc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(pr),o=r.getIterator(pr);let u=i.getNext(),h=o.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=i.getNext(),h=o.getNext()}return null===u&&null===h}return!1}return!1}}resolveIndex_(t){return t===qc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const QE=new class bH extends nn{constructor(){super(new $o(BM),nn.EMPTY_NODE,vh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return nn.EMPTY_NODE}isEmpty(){return!1}};function Br(n,e=null){if(null===n)return nn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new fv(n,Br(e));if(n instanceof Array){let t=nn.EMPTY_NODE;return ns(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const o=Br(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(Br(e))}{const t=[];let r=!1;if(ns(n,(u,h)=>{if("."!==u.substring(0,1)){const m=Br(h);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new dn(u,m)))}}),0===t.length)return nn.EMPTY_NODE;const o=PD(t,mH,u=>u.name,BM);if(r){const u=PD(t,pr.getCompare());return new nn(o,Br(e),new vh({".priority":u},{".priority":pr}))}return new nn(o,Br(e),vh.Default)}}Object.defineProperties(dn,{MIN:{value:new dn(Qf,nn.EMPTY_NODE)},MAX:{value:new dn(yh,QE)}}),OF.__EMPTY_NODE=nn.EMPTY_NODE,fv.__childrenNodeConstructor=nn,function _H(n){jM=n}(QE),function vH(n){VF=n}(QE),function yH(n){LF=n}(Br);class $M extends SD{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!ln(e)&&".priority"!==an(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?Pm(e.name,t.name):o}makePost(e,t){const r=Br(e),i=nn.EMPTY_NODE.updateChild(this.indexPath_,r);return new dn(t,i)}maxPost(){const e=nn.EMPTY_NODE.updateChild(this.indexPath_,QE);return new dn(yh,e)}toString(){return ZE(this.indexPath_,0).join("/")}}const GM=new class IH extends SD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Pm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return dn.MIN}maxPost(){return dn.MAX}makePost(e,t){const r=Br(e);return new dn(t,r)}toString(){return".value"}};function UF(n){return{type:"value",snapshotNode:n}}function gv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function JE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function XE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class qM{constructor(e){this.index_=e}updateChild(e,t,r,i,o,u){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(JE(t,h)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(gv(t,r)):u.trackChildChange(XE(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(pr,(i,o)=>{t.hasChild(i)||r.trackChildChange(JE(i,o))}),t.isLeafNode()||t.forEachChild(pr,(i,o)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(o)||r.trackChildChange(XE(i,o,u))}else r.trackChildChange(gv(i,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?nn.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class eC{constructor(e){this.indexedFilter_=new qM(e.getIndex()),this.index_=e.getIndex(),this.startPost_=eC.getStartPost_(e),this.endPost_=eC.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,o,u){return this.matches(new dn(t,r))||(r=nn.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=nn.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(nn.EMPTY_NODE);const o=this;return t.forEachChild(pr,(u,h)=>{o.matches(new dn(u,h))||(i=i.updateImmediateChild(u,nn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class AH{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new eC(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,o,u){return this.rangedFilter_.matches(new dn(t,r))||(r=nn.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,u):this.fullLimitUpdateChild_(e,t,r,o,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=nn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;i=nn.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;o.hasNext()&&u<this.limit_;){const h=o.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;i=i.updateImmediateChild(h.name,h.node),u++}}}else{let o;i=t.withIndex(this.index_),i=i.updatePriority(nn.EMPTY_NODE),o=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let u=0;for(;o.hasNext();){const h=o.getNext();u<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?u++:i=i.updateImmediateChild(h.name,nn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,o){let u;if(this.reverse_){const A=this.index_.getCompare();u=(O,F)=>A(F,O)}else u=this.index_.getCompare();const h=e;(0,k.hu)(h.numChildren()===this.limit_,"");const m=new dn(t,r),v=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),T=this.rangedFilter_.matches(m);if(h.hasChild(t)){const A=h.getImmediateChild(t);let O=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=O&&(O.name===t||h.hasChild(O.name));)O=i.getChildAfterChild(this.index_,O,this.reverse_);const F=null==O?1:u(O,m);if(T&&!r.isEmpty()&&F>=0)return null!=o&&o.trackChildChange(XE(t,r,A)),h.updateImmediateChild(t,r);{null!=o&&o.trackChildChange(JE(t,A));const Q=h.updateImmediateChild(t,nn.EMPTY_NODE);return null!=O&&this.rangedFilter_.matches(O)?(null!=o&&o.trackChildChange(gv(O.name,O.node)),Q.updateImmediateChild(O.name,O.node)):Q}}return r.isEmpty()?e:T&&u(v,m)>=0?(null!=o&&(o.trackChildChange(JE(v.name,v.node)),o.trackChildChange(gv(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(v.name,nn.EMPTY_NODE)):e}}class ND{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=pr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Qf}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:yh}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===pr}copy(){const e=new ND;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function zM(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function WM(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function OD(n,e){const t=n.copy();return t.index_=e,t}function BF(n){const e={};if(n.isDefault())return e;let t;if(n.index_===pr?t="$priority":n.index_===GM?t="$value":n.index_===qc?t="$key":((0,k.hu)(n.index_ instanceof $M,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,k.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,k.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,k.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,k.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function jF(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==pr&&(e.i=n.index_.toString()),e}class RD extends IF{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=GE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const u=RD.getListenId_(e,r),h={};this.listens_[u]=h;const m=BF(e._queryParams);this.restRequest_(o+".json",m,(v,T)=>{let A=T;if(404===v&&(A=null,v=null),null===v&&this.onDataUpdate_(o,A,!1,r),(0,k.DV)(this.listens_,u)===h){let O;O=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(O,null)}})}unlisten(e,t){const r=RD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=BF(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(o,u)=>{let h=u;404===o&&(h=null,o=null),null===o?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,k.cI)(h.responseText)}catch(v){$s("Failed to parse JSON response for "+u+": "+h.responseText)}r(null,m)}else 401!==h.status&&404!==h.status&&$s("Got unsuccessful REST response for "+u+" Status: "+h.status),r(h.status);r=null}},h.open("GET",u,!0),h.send()})}}class OH{constructor(){this.rootNode_=nn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function kD(){return{value:null,children:new Map}}function mv(n,e,t){if(ln(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=an(e);n.children.has(r)||n.children.set(r,kD()),mv(n.children.get(r),e=sr(e),t)}}function ZM(n,e){if(ln(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(pr,(r,i)=>{mv(n,new jn(r),i)}),ZM(n,e)}}if(n.children.size>0){const t=an(e);return e=sr(e),n.children.has(t)&&ZM(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function KM(n,e,t){null!==n.value?t(e,n.value):function RH(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{KM(i,new jn(e.toString()+"/"+r),t)})}class kH{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ns(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class VH{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new kH(e);const r=1e4+2e4*Math.random();zE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ns(e,(i,o)=>{o>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),zE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var _l=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(_l||(_l={})),_l))();function JM(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class FD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=_l.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(ln(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new jn(e));return new FD(An(),t,this.revert)}}return(0,k.hu)(an(this.path)===e,"operationForChild called for unrelated child."),new FD(sr(this.path),this.affectedTree,this.revert)}}class tC{constructor(e,t){this.source=e,this.path=t,this.type=_l.LISTEN_COMPLETE}operationForChild(e){return ln(this.path)?new tC(this.source,An()):new tC(this.source,sr(this.path))}}class Rm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=_l.OVERWRITE}operationForChild(e){return ln(this.path)?new Rm(this.source,An(),this.snap.getImmediateChild(e)):new Rm(this.source,sr(this.path),this.snap)}}class _v{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=_l.MERGE}operationForChild(e){if(ln(this.path)){const t=this.children.subtree(new jn(e));return t.isEmpty()?null:t.value?new Rm(this.source,An(),t.value):new _v(this.source,An(),t)}return(0,k.hu)(an(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new _v(this.source,sr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ep{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ln(e))return this.isFullyInitialized()&&!this.filtered_;const t=an(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class UH{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function nC(n,e,t,r,i,o){const u=r.filter(h=>h.type===t);u.sort((h,m)=>function HH(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new dn(e.childName,e.snapshotNode),i=new dn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,m)),u.forEach(h=>{const m=function jH(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,o);i.forEach(v=>{v.respondsTo(h.type)&&e.push(v.createEvent(m,n.query_))})})}function LD(n,e){return{eventCache:n,serverCache:e}}function rC(n,e,t,r){return LD(new ep(e,t,r),n.serverCache)}function $F(n,e,t,r){return LD(n.eventCache,new ep(e,t,r))}function VD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function km(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let XM;class gr{constructor(e,t=(()=>(XM||(XM=new $o(D3)),XM))()){this.value=e,this.children=t}static fromObject(e){let t=new gr(null);return ns(e,(r,i)=>{t=t.set(new jn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:An(),value:this.value};if(ln(e))return null;{const r=an(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(sr(e),t);return null!=o?{path:Rr(new jn(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ln(e))return this;{const t=an(e),r=this.children.get(t);return null!==r?r.subtree(sr(e)):new gr(null)}}set(e,t){if(ln(e))return new gr(t,this.children);{const r=an(e),o=(this.children.get(r)||new gr(null)).set(sr(e),t),u=this.children.insert(r,o);return new gr(this.value,u)}}remove(e){if(ln(e))return this.children.isEmpty()?new gr(null):new gr(null,this.children);{const t=an(e),r=this.children.get(t);if(r){const i=r.remove(sr(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new gr(null):new gr(this.value,o)}return this}}get(e){if(ln(e))return this.value;{const t=an(e),r=this.children.get(t);return r?r.get(sr(e)):null}}setTree(e,t){if(ln(e))return t;{const r=an(e),o=(this.children.get(r)||new gr(null)).setTree(sr(e),t);let u;return u=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new gr(this.value,u)}}fold(e){return this.fold_(An(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Rr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,An(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(ln(e))return null;{const o=an(e),u=this.children.get(o);return u?u.findOnPath_(sr(e),Rr(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,An(),t)}foreachOnPath_(e,t,r){if(ln(e))return this;{this.value&&r(t,this.value);const i=an(e),o=this.children.get(i);return o?o.foreachOnPath_(sr(e),Rr(t,i),r):new gr(null)}}foreach(e){this.foreach_(An(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Rr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Iu{constructor(e){this.writeTree_=e}static empty(){return new Iu(new gr(null))}}function iC(n,e,t){if(ln(e))return new Iu(new gr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const u=fo(i,e);return o=o.updateChild(u,t),new Iu(n.writeTree_.set(i,o))}{const i=new gr(t),o=n.writeTree_.setTree(e,i);return new Iu(o)}}}function eP(n,e,t){let r=n;return ns(t,(i,o)=>{r=iC(r,Rr(e,i),o)}),r}function GF(n,e){if(ln(e))return Iu.empty();{const t=n.writeTree_.setTree(e,new gr(null));return new Iu(t)}}function tP(n,e){return null!=Fm(n,e)}function Fm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(fo(t.path,e)):null}function qF(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(pr,(r,i)=>{e.push(new dn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new dn(r,i.value))}),e}function tp(n,e){if(ln(e))return n;{const t=Fm(n,e);return new Iu(null!=t?new gr(t):n.writeTree_.subtree(e))}}function nP(n){return n.writeTree_.isEmpty()}function yv(n,e){return zF(An(),n.writeTree_,e)}function zF(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,k.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=zF(Rr(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Rr(n,".priority"),r)),t}}function UD(n,e){return QF(e,n)}function ZH(n,e){if(n.snap)return ml(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ml(Rr(n.path,t),e))return!0;return!1}function YH(n){return n.visible}function WF(n,e,t){let r=Iu.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const u=o.path;let h;if(o.snap)ml(t,u)?(h=fo(t,u),r=iC(r,h,o.snap)):ml(u,t)&&(h=fo(u,t),r=iC(r,An(),o.snap.getChild(h)));else{if(!o.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(ml(t,u))h=fo(t,u),r=eP(r,h,o.children);else if(ml(u,t))if(h=fo(u,t),ln(h))r=eP(r,An(),o.children);else{const m=(0,k.DV)(o.children,an(h));if(m){const v=m.getChild(sr(h));r=iC(r,An(),v)}}}}}return r}function ZF(n,e,t,r,i){if(r||i){const o=tp(n.visibleWrites,e);return!i&&nP(o)?t:i||null!=t||tP(o,An())?yv(WF(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(ml(v.path,e)||ml(e,v.path))},e),t||nn.EMPTY_NODE):null}{const o=Fm(n.visibleWrites,e);if(null!=o)return o;{const u=tp(n.visibleWrites,e);return nP(u)?t:null!=t||tP(u,An())?yv(u,t||nn.EMPTY_NODE):null}}}function BD(n,e,t,r){return ZF(n.writeTree,n.treePath,e,t,r)}function rP(n,e){return function QH(n,e,t){let r=nn.EMPTY_NODE;const i=Fm(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(pr,(o,u)=>{r=r.updateImmediateChild(o,u)}),r;if(t){const o=tp(n.visibleWrites,e);return t.forEachChild(pr,(u,h)=>{const m=yv(tp(o,new jn(u)),h);r=r.updateImmediateChild(u,m)}),qF(o).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return qF(tp(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function KF(n,e,t,r){return function JH(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=Rr(e,t);if(tP(n.visibleWrites,o))return null;{const u=tp(n.visibleWrites,o);return nP(u)?i.getChild(t):yv(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function jD(n,e){return function e$(n,e){return Fm(n.visibleWrites,e)}(n.writeTree,Rr(n.treePath,e))}function iP(n,e,t){return function XH(n,e,t,r){const i=Rr(e,t),o=Fm(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?yv(tp(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function YF(n,e){return QF(Rr(n.treePath,e),n.writeTree)}function QF(n,e){return{treePath:n,writeTree:e}}class i${constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,XE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,JE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,gv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,XE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const JF=new class s${getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class sP{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new ep(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return iP(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:km(this.viewCache_),o=function r$(n,e,t,r,i,o){return function t$(n,e,t,r,i,o,u){let h;const m=tp(n.visibleWrites,e),v=Fm(m,An());if(null!=v)h=v;else{if(null==t)return[];h=yv(m,t)}if(h=h.withIndex(u),h.isEmpty()||h.isLeafNode())return[];{const T=[],A=u.getCompare(),O=o?h.getReverseIteratorFrom(r,u):h.getIteratorFrom(r,u);let F=O.getNext();for(;F&&T.length<i;)0!==A(F,r)&&T.push(F),F=O.getNext();return T}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function XF(n,e,t,r,i,o){const u=e.eventCache;if(null!=jD(r,t))return e;{let h,m;if(ln(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=km(e),A=rP(r,v instanceof nn?v:nn.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),A,o)}else{const v=BD(r,km(e));h=n.filter.updateFullNode(e.eventCache.getNode(),v,o)}else{const v=an(t);if(".priority"===v){(0,k.hu)(1===Xf(t),"Can't have a priority with additional path components");const T=u.getNode();m=e.serverCache.getNode();const A=KF(r,t,T,m);h=null!=A?n.filter.updatePriority(T,A):u.getNode()}else{const T=sr(t);let A;if(u.isCompleteForChild(v)){m=e.serverCache.getNode();const O=KF(r,t,u.getNode(),m);A=null!=O?u.getNode().getImmediateChild(v).updateChild(T,O):u.getNode().getImmediateChild(v)}else A=iP(r,v,e.serverCache);h=null!=A?n.filter.updateChild(u.getNode(),v,A,T,i,o):u.getNode()}}return rC(e,h,u.isFullyInitialized()||ln(t),n.filter.filtersNodes())}}function HD(n,e,t,r,i,o,u,h){const m=e.serverCache;let v;const T=u?n.filter:n.filter.getIndexedFilter();if(ln(t))v=T.updateFullNode(m.getNode(),r,null);else if(T.filtersNodes()&&!m.isFiltered()){const F=m.getNode().updateChild(t,r);v=T.updateFullNode(m.getNode(),F,null)}else{const F=an(t);if(!m.isCompleteForPath(t)&&Xf(t)>1)return e;const j=sr(t),fe=m.getNode().getImmediateChild(F).updateChild(j,r);v=".priority"===F?T.updatePriority(m.getNode(),fe):T.updateChild(m.getNode(),F,fe,j,JF,null)}const A=$F(e,v,m.isFullyInitialized()||ln(t),T.filtersNodes());return XF(n,A,t,i,new sP(i,A,o),h)}function oP(n,e,t,r,i,o,u){const h=e.eventCache;let m,v;const T=new sP(i,e,o);if(ln(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,u),m=rC(e,v,!0,n.filter.filtersNodes());else{const A=an(t);if(".priority"===A)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=rC(e,v,h.isFullyInitialized(),h.isFiltered());else{const O=sr(t),F=h.getNode().getImmediateChild(A);let j;if(ln(O))j=r;else{const Q=T.getCompleteChild(A);j=null!=Q?".priority"===LM(O)&&Q.getChild(xF(O)).isEmpty()?Q:Q.updateChild(O,r):nn.EMPTY_NODE}m=F.equals(j)?e:rC(e,n.filter.updateChild(h.getNode(),A,j,O,T,u),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function eL(n,e){return n.eventCache.isCompleteForChild(e)}function tL(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function aP(n,e,t,r,i,o,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=ln(t)?r:new gr(null).setTree(t,r);const T=e.serverCache.getNode();return v.children.inorderTraversal((A,O)=>{if(T.hasChild(A)){const j=tL(0,e.serverCache.getNode().getImmediateChild(A),O);m=HD(n,m,new jn(A),j,i,o,u,h)}}),v.children.inorderTraversal((A,O)=>{const F=!e.serverCache.isCompleteForChild(A)&&null===O.value;if(!T.hasChild(A)&&!F){const Q=tL(0,e.serverCache.getNode().getImmediateChild(A),O);m=HD(n,m,new jn(A),Q,i,o,u,h)}}),m}class p${constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new qM(r.getIndex()),o=function SH(n){return n.loadsAllData()?new qM(n.getIndex()):n.hasLimit()?new AH(n):new eC(n)}(r);this.processor_=function o$(n){return{filter:n}}(o);const u=t.serverCache,h=t.eventCache,m=i.updateFullNode(nn.EMPTY_NODE,u.getNode(),null),v=o.updateFullNode(nn.EMPTY_NODE,h.getNode(),null),T=new ep(m,u.isFullyInitialized(),i.filtersNodes()),A=new ep(v,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=LD(A,T),this.eventGenerator_=new UH(this.query_)}get query(){return this.query_}}function _$(n,e){const t=km(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ln(e)&&!t.getImmediateChild(an(e)).isEmpty())?t.getChild(e):null}function nL(n){return 0===n.eventRegistrations_.length}function rL(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(o=>{const u=o.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){const u=n.eventRegistrations_[o];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function iL(n,e,t,r){e.type===_l.MERGE&&null!==e.source.queryId&&((0,k.hu)(km(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(VD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function l$(n,e,t,r,i){const o=new i$;let u,h;if(t.type===_l.OVERWRITE){const v=t;v.source.fromUser?u=oP(n,e,v.path,v.snap,r,i,o):((0,k.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered()&&!ln(v.path),u=HD(n,e,v.path,v.snap,r,i,h,o))}else if(t.type===_l.MERGE){const v=t;v.source.fromUser?u=function c$(n,e,t,r,i,o,u){let h=e;return r.foreach((m,v)=>{const T=Rr(t,m);eL(e,an(T))&&(h=oP(n,h,T,v,i,o,u))}),r.foreach((m,v)=>{const T=Rr(t,m);eL(e,an(T))||(h=oP(n,h,T,v,i,o,u))}),h}(n,e,v.path,v.children,r,i,o):((0,k.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered(),u=aP(n,e,v.path,v.children,r,i,h,o))}else if(t.type===_l.ACK_USER_WRITE){const v=t;u=v.revert?function f$(n,e,t,r,i,o){let u;if(null!=jD(r,t))return e;{const h=new sP(r,e,i),m=e.eventCache.getNode();let v;if(ln(t)||".priority"===an(t)){let T;if(e.serverCache.isFullyInitialized())T=BD(r,km(e));else{const A=e.serverCache.getNode();(0,k.hu)(A instanceof nn,"serverChildren would be complete if leaf node"),T=rP(r,A)}T=T,v=n.filter.updateFullNode(m,T,o)}else{const T=an(t);let A=iP(r,T,e.serverCache);null==A&&e.serverCache.isCompleteForChild(T)&&(A=m.getImmediateChild(T)),v=null!=A?n.filter.updateChild(m,T,A,sr(t),h,o):e.eventCache.getNode().hasChild(T)?n.filter.updateChild(m,T,nn.EMPTY_NODE,sr(t),h,o):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=BD(r,km(e)),u.isLeafNode()&&(v=n.filter.updateFullNode(v,u,o)))}return u=e.serverCache.isFullyInitialized()||null!=jD(r,An()),rC(e,v,u,n.filter.filtersNodes())}}(n,e,v.path,r,i,o):function d$(n,e,t,r,i,o,u){if(null!=jD(i,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(ln(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return HD(n,e,t,m.getNode().getChild(t),i,o,h,u);if(ln(t)){let v=new gr(null);return m.getNode().forEachChild(qc,(T,A)=>{v=v.set(new jn(T),A)}),aP(n,e,t,v,i,o,h,u)}return e}{let v=new gr(null);return r.foreach((T,A)=>{const O=Rr(t,T);m.isCompleteForPath(O)&&(v=v.set(T,m.getNode().getChild(O)))}),aP(n,e,t,v,i,o,h,u)}}(n,e,v.path,v.affectedTree,r,i,o)}else{if(t.type!==_l.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);u=function h$(n,e,t,r,i){const o=e.serverCache;return XF(n,$F(e,o.getNode(),o.isFullyInitialized()||ln(t),o.isFiltered()),t,r,JF,i)}(n,e,t.path,r,o)}const m=o.getChanges();return function u$(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=VD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(UF(VD(e)))}}(e,u,m),{viewCache:u,changes:m}}(n.processor_,i,e,t,r);return function a$(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,k.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,sL(n,o.changes,o.viewCache.eventCache.getNode(),null)}function sL(n,e,t,r){return function BH(n,e,t,r){const i=[],o=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&o.push(function DH(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),nC(n,i,"child_removed",e,r,t),nC(n,i,"child_added",e,r,t),nC(n,i,"child_moved",o,r,t),nC(n,i,"child_changed",e,r,t),nC(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let $D,qD;class oL{constructor(){this.views=new Map}}function lP(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return(0,k.hu)(null!=o,"SyncTree gave us an op for an invalid query."),iL(o,e,t,r)}{let o=[];for(const u of n.views.values())o=o.concat(iL(u,e,t,r));return o}}function aL(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let h=BD(t,i?r:null),m=!1;h?m=!0:r instanceof nn?(h=rP(t,r),m=!1):(h=nn.EMPTY_NODE,m=!1);const v=LD(new ep(h,m,!1),new ep(r,i,!1));return new p$(e,v)}return u}function lL(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function np(n,e){let t=null;for(const r of n.views.values())t=t||_$(r,e);return t}function uL(n,e){return e._queryParams.loadsAllData()?GD(n):n.views.get(e._queryIdentifier)}function cL(n,e){return null!=uL(n,e)}function rp(n){return null!=GD(n)}function GD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let A$=1;class dL{constructor(e){this.listenProvider_=e,this.syncPointTree_=new gr(null),this.pendingWriteTree_=function n$(){return{visibleWrites:Iu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function uP(n,e,t,r,i){return function GH(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=iC(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?vv(n,new Rm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function ip(n,e,t=!1){const r=function zH(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function WH(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=t&&ZH(h,r.path)?i=!1:ml(r.path,h.path)&&(o=!0)),u--}return!!i&&(o?(function KH(n){n.visibleWrites=WF(n.allWrites,YH,An()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=GF(n.visibleWrites,r.path):ns(r.children,m=>{n.visibleWrites=GF(n.visibleWrites,Rr(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let o=new gr(null);return null!=r.snap?o=o.set(An(),!0):ns(r.children,u=>{o=o.set(new jn(u),!0)}),vv(n,new FD(r.path,o,t))}return[]}function sC(n,e,t){return vv(n,new Rm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function zD(n,e,t,r,i=!1){const o=e._path,u=n.syncPointTree_.get(o);let h=[];if(u&&("default"===e._queryIdentifier||cL(u,e))){const m=function T$(n,e,t,r){const i=e._queryIdentifier,o=[];let u=[];const h=rp(n);if("default"===i)for(const[m,v]of n.views.entries())u=u.concat(rL(v,t,r)),nL(v)&&(n.views.delete(m),v.query._queryParams.loadsAllData()||o.push(v.query));else{const m=n.views.get(i);m&&(u=u.concat(rL(m,t,r)),nL(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||o.push(m.query)))}return h&&!rp(n)&&o.push(new(function E$(){return(0,k.hu)($D,"Reference.ts has not been loaded"),$D}())(e._repo,e._path)),{removed:o,events:u}}(u,e,t,r);(function C$(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const v=m.removed;if(h=m.events,!i){const T=-1!==v.findIndex(O=>O._queryParams.loadsAllData()),A=n.syncPointTree_.findOnPath(o,(O,F)=>rp(F));if(T&&!A){const O=n.syncPointTree_.subtree(o);if(!O.isEmpty()){const F=function R$(n){return n.fold((e,t,r)=>{if(t&&rp(t))return[GD(t)];{let i=[];return t&&(i=lL(t)),ns(r,(o,u)=>{i=i.concat(u)}),i}})}(O);for(let j=0;j<F.length;++j){const Q=F[j],fe=Q.query,qe=gL(n,Q);n.listenProvider_.startListening(aC(fe),oC(n,fe),qe.hashFn,qe.onComplete)}}}!A&&v.length>0&&!r&&(T?n.listenProvider_.stopListening(aC(e),null):v.forEach(O=>{const F=n.queryToTagMap.get(ZD(O));n.listenProvider_.stopListening(aC(O),F)}))}!function k$(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=ZD(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}(n,v)}return h}function hL(n,e,t,r){const i=dP(n,r);if(null!=i){const o=hP(i),u=o.path,h=o.queryId,m=fo(u,e);return fP(n,u,new Rm(JM(h),m,t))}return[]}function cP(n,e,t,r=!1){const i=e._path;let o=null,u=!1;n.syncPointTree_.foreachOnPath(i,(O,F)=>{const j=fo(O,i);o=o||np(F,j),u=u||rp(F)});let m,h=n.syncPointTree_.get(i);h?(u=u||rp(h),o=o||np(h,An())):(h=new oL,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=o?m=!0:(m=!1,o=nn.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((F,j)=>{const Q=np(j,An());Q&&(o=o.updateImmediateChild(F,Q))}));const v=cL(h,e);if(!v&&!e._queryParams.loadsAllData()){const O=ZD(e);(0,k.hu)(!n.queryToTagMap.has(O),"View does not exist, but we have a tag");const F=function F$(){return A$++}();n.queryToTagMap.set(O,F),n.tagToQueryMap.set(F,O)}let A=function b$(n,e,t,r,i,o){const u=aL(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function y$(n,e){n.eventRegistrations_.push(e)}(u,t),function v$(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(pr,(o,u)=>{r.push(gv(o,u))}),t.isFullyInitialized()&&r.push(UF(t.getNode())),sL(n,r,t.getNode(),e)}(u,t)}(h,e,t,UD(n.pendingWriteTree_,i),o,m);if(!v&&!u&&!r){const O=uL(h,e);A=A.concat(function L$(n,e,t){const r=e._path,i=oC(n,e),o=gL(n,t),u=n.listenProvider_.startListening(aC(e),i,o.hashFn,o.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!rp(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((v,T,A)=>{if(!ln(v)&&T&&rp(T))return[GD(T).query];{let O=[];return T&&(O=O.concat(lL(T).map(F=>F.query))),ns(A,(F,j)=>{O=O.concat(j)}),O}});for(let v=0;v<m.length;++v){const T=m[v];n.listenProvider_.stopListening(aC(T),oC(n,T))}}return u}(n,e,O))}return A}function WD(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(u,h)=>{const v=np(h,fo(u,e));if(v)return v});return ZF(i,e,o,t,!0)}function vv(n,e){return fL(e,n.syncPointTree_,null,UD(n.pendingWriteTree_,An()))}function fL(n,e,t,r){if(ln(n.path))return pL(n,e,t,r);{const i=e.get(An());null==t&&null!=i&&(t=np(i,An()));let o=[];const u=an(n.path),h=n.operationForChild(u),m=e.children.get(u);if(m&&h){const v=t?t.getImmediateChild(u):null,T=YF(r,u);o=o.concat(fL(h,m,v,T))}return i&&(o=o.concat(lP(i,n,r,t))),o}}function pL(n,e,t,r){const i=e.get(An());null==t&&null!=i&&(t=np(i,An()));let o=[];return e.children.inorderTraversal((u,h)=>{const m=t?t.getImmediateChild(u):null,v=YF(r,u),T=n.operationForChild(u);T&&(o=o.concat(pL(T,h,m,v)))}),i&&(o=o.concat(lP(i,n,r,t))),o}function gL(n,e){const t=e.query,r=oC(n,t);return{hashFn:()=>(function g$(n){return n.viewCache_.serverCache.getNode()}(e)||nn.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function P$(n,e,t){const r=dP(n,t);if(r){const i=hP(r),o=i.path,u=i.queryId,h=fo(o,e);return fP(n,o,new tC(JM(u),h))}return[]}(n,t._path,r):function M$(n,e){return vv(n,new tC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function x3(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return zD(n,t,null,o)}}}}function oC(n,e){const t=ZD(e);return n.queryToTagMap.get(t)}function ZD(n){return n._path.toString()+"$"+n._queryIdentifier}function dP(n,e){return n.tagToQueryMap.get(e)}function hP(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new jn(n.substr(0,e))}}function fP(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),lP(r,t,UD(n.pendingWriteTree_,e),null)}function aC(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function D$(){return(0,k.hu)(qD,"Reference.ts has not been loaded"),qD}())(n._repo,n._path):n}class pP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new pP(t)}node(){return this.node_}}class gP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Rr(this.path_,e);return new gP(this.syncTree_,t)}node(){return WD(this.syncTree_,this.path_)}}const mL=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?U$(n[".sv"],e,t):"object"==typeof n[".sv"]?B$(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},U$=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},B$=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},_L=function(n,e,t,r){return _P(e,new gP(t,n),r)},mP=function(n,e,t){return _P(n,new pP(e),t)};function _P(n,e,t){const r=n.getPriority().val(),i=mL(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const u=n,h=mL(u.getValue(),e,t);return h!==u.getValue()||i!==u.getPriority().val()?new fv(h,Br(i)):n}{const u=n;return o=u,i!==u.getPriority().val()&&(o=o.updatePriority(new fv(i))),u.forEachChild(pr,(h,m)=>{const v=_P(m,e.getImmediateChild(h),t);v!==m&&(o=o.updateImmediateChild(h,v))}),o}}class yP{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function KD(n,e){let t=e instanceof jn?e:new jn(e),r=n,i=an(t);for(;null!==i;){const o=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new yP(i,r,o),t=sr(t),i=an(t)}return r}function Lm(n){return n.node.value}function vP(n,e){n.node.value=e,wP(n)}function yL(n){return n.node.childCount>0}function YD(n,e){ns(n.node.children,(t,r)=>{e(new yP(t,n,r))})}function vL(n,e,t,r){t&&!r&&e(n),YD(n,i=>{vL(i,e,!0,r)}),t&&r&&e(n)}function lC(n){return new jn(null===n.parent?n.name:lC(n.parent)+"/"+n.name)}function wP(n){null!==n.parent&&function $$(n,e,t){const r=function j$(n){return void 0===Lm(n)&&!yL(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,wP(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,wP(n))}(n.parent,n.name,n)}const G$=/[\[\].#$\/\u0000-\u001F\u007F]/,q$=/[\[\].#$\u0000-\u001F\u007F]/,EP=10485760,QD=function(n){return"string"==typeof n&&0!==n.length&&!G$.test(n)},wL=function(n){return"string"==typeof n&&0!==n.length&&!q$.test(n)},uC=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!TD(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},zc=function(n,e,t,r){r&&void 0===e||cC((0,k.gK)(n,"value"),e,t)},cC=function(n,e,t){const r=t instanceof jn?new lH(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Nm(r));if("function"==typeof e)throw new Error(n+"contains a function "+Nm(r)+" with contents = "+e.toString());if(TD(e))throw new Error(n+"contains "+e.toString()+" "+Nm(r));if("string"==typeof e&&e.length>EP/3&&(0,k.ug)(e)>EP)throw new Error(n+"contains a string greater than "+EP+" utf8 bytes "+Nm(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(ns(e,(u,h)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(o=!0,!QD(u)))throw new Error(n+" contains an invalid key ("+u+") "+Nm(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function uH(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),MF(n)})(r,u),cC(n,h,r),function cH(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+Nm(r)+" in addition to actual children.")}},EL=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];ns(e,(u,h)=>{const m=new jn(u);if(cC(i,h,Rr(t,m)),".priority"===LM(m)&&!uC(h))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const o=ZE(r);for(let u=0;u<o.length;u++)if((".priority"!==o[u]||u!==o.length-1)&&!QD(o[u]))throw new Error(n+"contains an invalid key ("+o[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(aH);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&ml(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},CP=function(n,e,t){if(!t||void 0!==e){if(TD(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!uC(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},dC=function(n,e,t,r){if(!(r&&void 0===t||QD(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},hC=function(n,e,t,r){if(!(r&&void 0===t||wL(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},yl=function(n,e){if(".info"===an(e))throw new Error(n+" failed = Can't modify data under /.info/")},CL=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!QD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),wL(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class K${constructor(){this.eventLists_=[],this.recursionDepth_=0}}function JD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!VM(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function bL(n,e,t){JD(n,t),TL(n,r=>VM(r,e))}function va(n,e,t){JD(n,t),TL(n,r=>ml(r,e)||ml(e,r))}function TL(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Y$(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Y$(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Mm&&ts("event: "+t.toString()),dv(r)}}}const IL="repo_interrupt";class J${constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new K$,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=kD(),this.transactionQueueTree_=new yP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function DL(n){const t=n.infoData_.getNode(new jn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function fC(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:DL(n)})}function AL(n,e,t,r,i){n.dataUpdateCount++;const o=new jn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const m=(0,k.UI)(t,v=>Br(v));u=function N$(n,e,t,r){const i=dP(n,r);if(i){const o=hP(i),u=o.path,h=o.queryId,m=fo(u,e),v=gr.fromObject(t);return fP(n,u,new _v(JM(h),m,v))}return[]}(n.serverSyncTree_,o,m,i)}else{const m=Br(t);u=hL(n.serverSyncTree_,o,m,i)}else if(r){const m=(0,k.UI)(t,v=>Br(v));u=function x$(n,e,t){const r=gr.fromObject(t);return vv(n,new _v({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,m)}else{const m=Br(t);u=sC(n.serverSyncTree_,o,m)}let h=o;u.length>0&&(h=Ev(n,o)),va(n.eventQueue_,h,u)}function SL(n,e){bP(n,"connected",e),!1===e&&function r4(n){wv(n,"onDisconnectEvents");const e=fC(n),t=kD();KM(n.onDisconnect_,An(),(i,o)=>{const u=_L(i,o,n.serverSyncTree_,e);mv(t,i,u)});let r=[];KM(t,An(),(i,o)=>{r=r.concat(sC(n.serverSyncTree_,i,o));const u=AP(n,i);Ev(n,u)}),n.onDisconnect_=kD(),va(n.eventQueue_,An(),r)}(n)}function bP(n,e,t){const r=new jn("/.info/"+e),i=Br(t);n.infoData_.updateSnapshot(r,i);const o=sC(n.infoSyncTree_,r,i);va(n.eventQueue_,r,o)}function XD(n){return n.nextWriteId_++}function TP(n,e,t,r,i){wv(n,"set",{path:e.toString(),value:t,priority:r});const o=fC(n),u=Br(t,r),h=WD(n.serverSyncTree_,e),m=mP(u,h,o),v=XD(n),T=uP(n.serverSyncTree_,e,m,v,!0);JD(n.eventQueue_,T),n.server_.put(e.toString(),u.val(!0),(O,F)=>{const j="ok"===O;j||$s("set at "+e+" failed: "+O);const Q=ip(n.serverSyncTree_,v,!j);va(n.eventQueue_,e,Q),sp(0,i,O,F)});const A=AP(n,e);Ev(n,A),va(n.eventQueue_,A,[])}function i4(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&ZM(n.onDisconnect_,e),sp(0,t,r,i)})}function xL(n,e,t,r){const i=Br(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(o,u)=>{"ok"===o&&mv(n.onDisconnect_,e,i),sp(0,r,o,u)})}function IP(n,e,t){let r;r=".info"===an(e._path)?zD(n.infoSyncTree_,e,t):zD(n.serverSyncTree_,e,t),bL(n.eventQueue_,e._path,r)}function ML(n){n.persistentConnection_&&n.persistentConnection_.interrupt(IL)}function wv(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ts(t,...e)}function sp(n,e,t,r){e&&dv(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let o=i;r&&(o+=": "+r);const u=new Error(o);u.code=i,e(u)}})}function DP(n,e,t){return WD(n.serverSyncTree_,e,t)||nn.EMPTY_NODE}function eA(n,e=n.transactionQueueTree_){if(e||tA(n,e),Lm(e)){const t=NL(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function c4(n,e,t){const r=t.map(v=>v.currentWriteId),i=DP(n,e,r);let o=i;const u=i.hash();for(let v=0;v<t.length;v++){const T=t[v];(0,k.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const A=fo(e,T.path);o=o.updateChild(A,T.currentOutputSnapshotRaw)}const h=o.val(!0),m=e;n.server_.put(m.toString(),h,v=>{wv(n,"transaction put response",{path:m.toString(),status:v});let T=[];if("ok"===v){const A=[];for(let O=0;O<t.length;O++)t[O].status=2,T=T.concat(ip(n.serverSyncTree_,t[O].currentWriteId)),t[O].onComplete&&A.push(()=>t[O].onComplete(null,!0,t[O].currentOutputSnapshotResolved)),t[O].unwatcher();tA(n,KD(n.transactionQueueTree_,e)),eA(n,n.transactionQueueTree_),va(n.eventQueue_,e,T);for(let O=0;O<A.length;O++)dv(A[O])}else{if("datastale"===v)for(let A=0;A<t.length;A++)t[A].status=3===t[A].status?4:0;else{$s("transaction at "+m.toString()+" failed: "+v);for(let A=0;A<t.length;A++)t[A].status=4,t[A].abortReason=v}Ev(n,e)}},u)}(n,lC(e),t)}else yL(e)&&YD(e,t=>{eA(n,t)})}function Ev(n,e){const t=PL(n,e),r=lC(t);return function d4(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],v=fo(t,m.path);let A,T=!1;if((0,k.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)T=!0,A=m.abortReason,i=i.concat(ip(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)T=!0,A="maxretry",i=i.concat(ip(n.serverSyncTree_,m.currentWriteId,!0));else{const O=DP(n,m.path,u);m.currentInputSnapshot=O;const F=e[h].update(O.val());if(void 0!==F){cC("transaction failed: Data returned ",F,m.path);let j=Br(F);"object"==typeof F&&null!=F&&(0,k.r3)(F,".priority")||(j=j.updatePriority(O.getPriority()));const fe=m.currentWriteId,qe=fC(n),Je=mP(j,O,qe);m.currentOutputSnapshotRaw=j,m.currentOutputSnapshotResolved=Je,m.currentWriteId=XD(n),u.splice(u.indexOf(fe),1),i=i.concat(uP(n.serverSyncTree_,m.path,Je,m.currentWriteId,m.applyLocally)),i=i.concat(ip(n.serverSyncTree_,fe,!0))}else T=!0,A="nodata",i=i.concat(ip(n.serverSyncTree_,m.currentWriteId,!0))}va(n.eventQueue_,t,i),i=[],T&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===A?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(A),!1,null)))}tA(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)dv(r[h]);eA(n,n.transactionQueueTree_)}(n,NL(n,t),r),r}function PL(n,e){let t,r=n.transactionQueueTree_;for(t=an(e);null!==t&&void 0===Lm(r);)r=KD(r,t),t=an(e=sr(e));return r}function NL(n,e){const t=[];return OL(n,e,t),t.sort((r,i)=>r.order-i.order),t}function OL(n,e,t){const r=Lm(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);YD(e,i=>{OL(n,i,t)})}function tA(n,e){const t=Lm(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,vP(e,t.length>0?t:void 0)}YD(e,r=>{tA(n,r)})}function AP(n,e){const t=lC(PL(n,e)),r=KD(n.transactionQueueTree_,e);return function H$(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{SP(n,i)}),SP(n,r),vL(r,i=>{SP(n,i)}),t}function SP(n,e){const t=Lm(e);if(t){const r=[];let i=[],o=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,k.hu)(o===u-1,"All SENT items should be at beginning of queue."),o=u,t[u].status=3,t[u].abortReason="set"):((0,k.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(ip(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===o?vP(e,void 0):t.length=o+1,va(n.eventQueue_,lC(e),i);for(let u=0;u<r.length;u++)dv(r[u])}}const xP=function(n,e){const t=p4(n),r=t.namespace;return"firebase.com"===t.domain&&Gc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Gc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&$s("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new PM(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new jn(t.pathString)}},p4=function(n){let e="",t="",r="",i="",o="",u=!0,h="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(h=n.substring(0,v-1),n=n.substring(v+2));let T=n.indexOf("/");-1===T&&(T=n.length);let A=n.indexOf("?");-1===A&&(A=n.length),e=n.substring(0,Math.min(T,A)),T<A&&(i=function h4(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(n.substring(T,A)));const O=function f4(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):$s(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,A)));v=e.indexOf(":"),v>=0?(u="https"===h||"wss"===h,m=parseInt(e.substring(v+1),10)):v=e.length;const F=e.slice(0,v);if("localhost"===F.toLowerCase())t="localhost";else if(F.split(".").length<=2)t=F;else{const j=e.indexOf(".");r=e.substring(0,j).toLowerCase(),t=e.substring(j+1),o=r}"ns"in O&&(o=O.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:u,scheme:h,pathString:i,namespace:o}},RL="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",g4=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const o=new Array(8);for(i=7;i>=0;i--)o[i]=RL.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let u=o.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=RL.charAt(e[i]);return(0,k.hu)(20===u.length,"nextPushId: Length should be 20."),u}}();class kL{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Wl)(this.snapshot.exportVal())}}class FL{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class MP{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class LL{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return i4(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){yl("OnDisconnect.remove",this._path);const e=new k.BH;return xL(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){yl("OnDisconnect.set",this._path),zc("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return xL(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){yl("OnDisconnect.setWithPriority",this._path),zc("OnDisconnect.setWithPriority",e,this._path,!1),CP("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function s4(n,e,t,r,i){const o=Br(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(u,h)=>{"ok"===u&&mv(n.onDisconnect_,e,o),sp(0,i,u,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){yl("OnDisconnect.update",this._path),EL("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function o4(n,e,t,r){if((0,k.xb)(t))return ts("onDisconnect().update() called with empty data.  Don't do anything."),void sp(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,o)=>{"ok"===i&&ns(t,(u,h)=>{const m=Br(h);mv(n.onDisconnect_,Rr(e,u),m)}),sp(0,r,i,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Go{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return ln(this._path)?null:LM(this._path)}get ref(){return new vl(this._repo,this._path)}get _queryIdentifier(){const e=jF(this._queryParams),t=xM(e);return"{}"===t?"default":t}get _queryObject(){return jF(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof Go))return!1;const t=this._repo===e._repo,r=VM(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function oH(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function nA(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function op(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===qc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Qf)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==yh)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===pr){if(null!=e&&!uC(e)||null!=t&&!uC(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof $M||n.getIndex()===GM,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function rA(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class vl extends Go{constructor(e,t){super(e,t,new ND,!1)}get parent(){const e=xF(this._path);return null===e?null:new vl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Vm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new jn(e),r=Um(this.ref,e);return new Vm(this._node.getChild(t),r,pr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Vm(i,Um(this.ref,r),pr)))}hasChild(e){const t=new jn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function VL(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?Um(n._root,e):n._root}function UL(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=xP(e,n._repo.repoInfo_.nodeAdmin);CL("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Gc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),VL(n,t.path.toString())}function Um(n,e){return null===an((n=(0,k.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),hC("child","path",t,!1)):hC("child","path",e,!1),new vl(n._repo,Rr(n._path,e));var t}function PP(n,e){n=(0,k.m9)(n),yl("set",n._path),zc("set",e,n._path,!1);const t=new k.BH;return TP(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function w4(n,e){EL("update",e,n._path,!1);const t=new k.BH;return function n4(n,e,t,r){wv(n,"update",{path:e.toString(),value:t});let i=!0;const o=fC(n),u={};if(ns(t,(h,m)=>{i=!1,u[h]=_L(Rr(e,h),Br(m),n.serverSyncTree_,o)}),i)ts("update() called with empty data.  Don't do anything."),sp(0,r,"ok",void 0);else{const h=XD(n),m=function S$(n,e,t,r){!function qH(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=eP(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=gr.fromObject(t);return vv(n,new _v({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,h);JD(n.eventQueue_,m),n.server_.merge(e.toString(),t,(v,T)=>{const A="ok"===v;A||$s("update at "+e+" failed: "+v);const O=ip(n.serverSyncTree_,h,!A),F=O.length>0?Ev(n,e):e;va(n.eventQueue_,F,O),sp(0,r,v,T)}),ns(t,v=>{const T=AP(n,Rr(e,v));Ev(n,T)}),va(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function E4(n){n=(0,k.m9)(n);const e=new MP(()=>{}),t=new pC(e);return function t4(n,e,t){const r=function O$(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,T)=>{const A=fo(v,t);r=r||np(T,A)});let i=n.syncPointTree_.get(t);i?r=r||np(i,An()):(i=new oL,n.syncPointTree_=n.syncPointTree_.set(t,i));const o=null!=r,u=o?new ep(r,!0,!1):null;return function m$(n){return VD(n.viewCache_)}(aL(i,e,UD(n.pendingWriteTree_,e._path),o?u.getNode():nn.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const o=Br(i).withIndex(e._queryParams.getIndex());let u;if(cP(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())u=sC(n.serverSyncTree_,e._path,o);else{const h=oC(n.serverSyncTree_,e);u=hL(n.serverSyncTree_,e._path,o,h)}return va(n.eventQueue_,e._path,u),zD(n.serverSyncTree_,e,t,null,!0),o},i=>(wv(n,"get for query "+(0,k.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Vm(r,new vl(n._repo,n._path),n._queryParams.getIndex()))}class pC{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new kL("value",this,new Vm(e.snapshotNode,new vl(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new FL(this,e,t):null}matches(e){return e instanceof pC&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class iA{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new FL(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=Um(new vl(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new kL(e.type,this,new Vm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof iA&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function gC(n,e,t,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const m=t,v=(T,A)=>{IP(n._repo,n,h),m(T,A)};v.userCallback=t.userCallback,v.context=t.context,t=v}const u=new MP(t,o||void 0),h="value"===e?new pC(u):new iA(e,u);return function a4(n,e,t){let r;r=".info"===an(e._path)?cP(n.infoSyncTree_,e,t):cP(n.serverSyncTree_,e,t),bL(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>IP(n._repo,n,h)}function NP(n,e,t,r){return gC(n,"value",e,t,r)}function BL(n,e,t,r){return gC(n,"child_added",e,t,r)}function jL(n,e,t,r){return gC(n,"child_changed",e,t,r)}function HL(n,e,t,r){return gC(n,"child_moved",e,t,r)}function $L(n,e,t,r){return gC(n,"child_removed",e,t,r)}function GL(n,e,t){let r=null;const i=t?new MP(t):null;"value"===e?r=new pC(i):e&&(r=new iA(e,i)),IP(n._repo,n,r)}class Du{}class qL extends Du{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){zc("endAt",this._value,e._path,!0);const t=WM(e._queryParams,this._value,this._key);if(rA(t),op(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Go(e._repo,e._path,t,e._orderByCalled)}}class b4 extends Du{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){zc("endBefore",this._value,e._path,!1);const t=function NH(n,e,t){let r;return r=WM(n,e,n.index_===qc||t?t:Qf),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(rA(t),op(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Go(e._repo,e._path,t,e._orderByCalled)}}class zL extends Du{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){zc("startAt",this._value,e._path,!0);const t=zM(e._queryParams,this._value,this._key);if(rA(t),op(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Go(e._repo,e._path,t,e._orderByCalled)}}class D4 extends Du{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){zc("startAfter",this._value,e._path,!1);const t=function PH(n,e,t){let r;return r=zM(n,e,n.index_===qc||t?t:yh),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(rA(t),op(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Go(e._repo,e._path,t,e._orderByCalled)}}class S4 extends Du{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Go(e._repo,e._path,function xH(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class M4 extends Du{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Go(e._repo,e._path,function MH(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class N4 extends Du{constructor(e){super(),this._path=e}_apply(e){nA(e,"orderByChild");const t=new jn(this._path);if(ln(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new $M(t),i=OD(e._queryParams,r);return op(i),new Go(e._repo,e._path,i,!0)}}class R4 extends Du{_apply(e){nA(e,"orderByKey");const t=OD(e._queryParams,qc);return op(t),new Go(e._repo,e._path,t,!0)}}class F4 extends Du{_apply(e){nA(e,"orderByPriority");const t=OD(e._queryParams,pr);return op(t),new Go(e._repo,e._path,t,!0)}}class V4 extends Du{_apply(e){nA(e,"orderByValue");const t=OD(e._queryParams,GM);return op(t),new Go(e._repo,e._path,t,!0)}}class B4 extends Du{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(zc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new qL(this._value,this._key)._apply(new zL(this._value,this._key)._apply(e))}}function Au(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function w$(n){(0,k.hu)(!$D,"__referenceConstructor has already been defined"),$D=n})(vl),function I$(n){(0,k.hu)(!qD,"__referenceConstructor has already been defined"),qD=n}(vl);const OP={};function ZL(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||Gc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ts("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,u=xP(o,i),h=u.repoInfo;"undefined"!=typeof process&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(m=!0,o=`http://${v}?ns=${h.namespace}`,u=xP(o,i),h=u.repoInfo):m=!u.repoInfo.secure;const T=i&&m?new WE(WE.OWNER):new k3(n.name,n.options,e);CL("Invalid Firebase Database URL",u),ln(u.path)||Gc("Database URL must point to the root of a Firebase Database (not including a child path).");const A=function q4(n,e,t,r){let i=OP[e.name];i||(i={},OP[e.name]=i);let o=i[n.toURLString()];return o&&Gc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new J$(n,false,t,r),i[n.toURLString()]=o,o}(h,n,T,new R3(n.name,t));return new W4(A,n)}class W4{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function X$(n,e,t){if(n.stats_=RM(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new RD(n.repoInfo_,(r,i,o,u)=>{AL(n,r,i,o,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>SL(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Om(n.repoInfo_,e,(r,i,o,u)=>{AL(n,r,i,o,u)},r=>{SL(n,r)},r=>{!function e4(n,e){ns(e,(t,r)=>{bP(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function V3(n,e){const t=n.toString();return OM[t]||(OM[t]=e()),OM[t]}(n.repoInfo_,()=>new VH(n.stats_,n.server_)),n.infoData_=new OH,n.infoSyncTree_=new dL({startListening:(r,i,o,u)=>{let h=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(h=sC(n.infoSyncTree_,r._path,m),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),bP(n,"connected",!1),n.serverSyncTree_=new dL({startListening:(r,i,o,u)=>(n.server_.listen(r,o,i,(h,m)=>{const v=u(h,m);va(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new vl(this._repo,An())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function G4(n,e){const t=OP[e];(!t||t[n.key]!==n)&&Gc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),ML(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Gc("Cannot call "+e+" on a deleted database.")}}function KL(){_F.IS_TRANSPORT_INITIALIZED&&$s("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Z4(){KL(),Jf.forceDisallow()}function K4(){KL(),hv.forceDisallow(),Jf.forceAllow()}function J4(n,e){Qk(n,e)}const e6={".sv":"timestamp"};class r6{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Om.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Om.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function X4(n){zk(so.SDK_VERSION),(0,so._registerComponent)(new cu.wA("database",(e,{instanceIdentifier:t})=>ZL(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,so.registerVersion)(Gk,"0.14.4",n),(0,so.registerVersion)(Gk,"0.14.4","esm2017")}();const a6=new da.Yd("@firebase/database-compat"),QL=function(n){a6.warn("FIREBASE WARNING: "+n)};class c6{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,QL("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class d6{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class ap{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),hC("DataSnapshot.child","path",e,!1),new ap(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),hC("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new ap(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new wa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Es{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var o;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const u=Es.getCancelAndContextArgs_("Query.on",r,i),h=(v,T)=>{t.call(u.context,new ap(this.database,v),T)};h.userCallback=t,h.context=u.context;const m=null===(o=u.cancel)||void 0===o?void 0:o.bind(u.context);switch(e){case"value":return NP(this._delegate,h,m),t;case"child_added":return BL(this._delegate,h,m),t;case"child_removed":return $L(this._delegate,h,m),t;case"child_changed":return jL(this._delegate,h,m),t;case"child_moved":return HL(this._delegate,h,m),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,GL(this._delegate,e,i)}else GL(this._delegate,e)}get(){return E4(this._delegate).then(e=>new ap(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const o=Es.getCancelAndContextArgs_("Query.once",r,i),u=new k.BH,h=(v,T)=>{const A=new ap(this.database,v);t&&t.call(o.context,A,T),u.resolve(A)};h.userCallback=t,h.context=o.context;const m=v=>{o.cancel&&o.cancel.call(o.context,v),u.reject(v)};switch(e){case"value":NP(this._delegate,h,m,{onlyOnce:!0});break;case"child_added":BL(this._delegate,h,m,{onlyOnce:!0});break;case"child_removed":$L(this._delegate,h,m,{onlyOnce:!0});break;case"child_changed":jL(this._delegate,h,m,{onlyOnce:!0});break;case"child_moved":HL(this._delegate,h,m,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new Es(this.database,Au(this._delegate,function x4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new S4(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new Es(this.database,Au(this._delegate,function P4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new M4(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new Es(this.database,Au(this._delegate,function O4(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return hC("orderByChild","path",n,!1),new N4(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new Es(this.database,Au(this._delegate,function k4(){return new R4}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new Es(this.database,Au(this._delegate,function L4(){return new F4}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new Es(this.database,Au(this._delegate,function U4(){return new V4}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new Es(this.database,Au(this._delegate,function I4(n=null,e){return dC("startAt","key",e,!0),new zL(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new Es(this.database,Au(this._delegate,function A4(n,e){return dC("startAfter","key",e,!0),new D4(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new Es(this.database,Au(this._delegate,function C4(n,e){return dC("endAt","key",e,!0),new qL(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new Es(this.database,Au(this._delegate,function T4(n,e){return dC("endBefore","key",e,!0),new b4(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new Es(this.database,Au(this._delegate,function j4(n,e){return dC("equalTo","key",e,!0),new B4(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Es))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new wa(this.database,new vl(this._delegate._repo,this._delegate._path))}}class wa extends Es{constructor(e,t){super(e,new Go(t._repo,t._path,new ND,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new wa(this.database,Um(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new wa(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new wa(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=PP(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,QL("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}yl("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=w4(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function v4(n,e,t){if(yl("setWithPriority",n._path),zc("setWithPriority",e,n._path,!1),CP("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return TP(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function _4(n){return yl("remove",n._path),PP(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function i6(n,e,t){var r;if(n=(0,k.m9)(n),yl("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,o=new k.BH,h=NP(n,()=>{});return function u4(n,e,t,r,i,o){wv(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:Zk(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=DP(n,e,void 0);u.currentInputSnapshot=h;const m=u.update(h.val());if(void 0===m)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{cC("transaction failed: Data returned ",m,u.path),u.status=0;const v=KD(n.transactionQueueTree_,e),T=Lm(v)||[];let A;T.push(u),vP(v,T),"object"==typeof m&&null!==m&&(0,k.r3)(m,".priority")?(A=(0,k.DV)(m,".priority"),(0,k.hu)(uC(A),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):A=(WD(n.serverSyncTree_,e)||nn.EMPTY_NODE).getPriority().val();const O=fC(n),F=Br(m,A),j=mP(F,h,O);u.currentOutputSnapshotRaw=F,u.currentOutputSnapshotResolved=j,u.currentWriteId=XD(n);const Q=uP(n.serverSyncTree_,e,j,u.currentWriteId,u.applyLocally);va(n.eventQueue_,e,Q),eA(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,v,T)=>{let A=null;m?o.reject(m):(A=new Vm(T,new vl(n._repo,n._path),pr),o.resolve(new r6(v,A)))},h,i),o.promise}(this._delegate,e,{applyLocally:r}).then(o=>new d6(o.committed,new ap(this.database,o.snapshot)));return t&&i.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function y4(n,e){n=(0,k.m9)(n),yl("setPriority",n._path),CP("setPriority",e,!1);const t=new k.BH;return TP(n._repo,Rr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function m4(n,e){n=(0,k.m9)(n),yl("push",n._path),zc("push",e,n._path,!0);const t=DL(n._repo),r=g4(t),i=Um(n,r),o=Um(n,r);let u;return u=null!=e?PP(o,e).then(()=>o):Promise.resolve(o),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new wa(this.database,u));t&&i.then(()=>t(null),u=>t(u));const o=new wa(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return yl("Reference.onDisconnect",this._delegate._path),new c6(new LL(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class mC{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Z4,forceLongPolling:K4}}useEmulator(e,t,r={}){!function YL(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Gc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Gc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new WE(WE.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);o=new WE(u)}!function $4(n,e,t,r){n.repoInfo_=new PM(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,o)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof wa){const t=UL(this._delegate,e.toString());return new wa(this,t)}{const t=VL(this._delegate,e);return new wa(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=UL(this._delegate,e);return new wa(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function Y4(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),ML(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function Q4(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function l4(n){n.persistentConnection_&&n.persistentConnection_.resume(IL)}(n._repo)}(this._delegate)}}mC.ServerValue={TIMESTAMP:function t6(){return e6}(),increment:n=>function n6(n){return{".sv":{increment:n}}}(n)};var f6=Object.freeze({__proto__:null,initStandalone:function h6({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:o=!1}){zk(t);const u=new cu.zt("auth-internal",new cu.H0("database-standalone"));return u.setComponent(new cu.wA("auth-internal",()=>r,"PRIVATE")),{instance:new mC(ZL(n,u,void 0,e,o),n),namespace:i}}});const p6=mC.ServerValue;function JL(n){return null==n}function XL(n){return"function"==typeof n.set}function e2(n,e){return XL(e)?e:n.ref(e)}function t2(n,e){if(function m6(n){return"string"==typeof n}(n))return e.stringCase();if(XL(n))return e.firebaseCase();if(function _6(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function _C(n,e,t="on",r=Tg.z){return new qr.y(i=>{let o=null;return o=n[t](e,(u,h)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=o&&n.off(e,o)}}:{unsubscribe(){}}}).pipe((0,bt.U)(i=>{const{snapshot:o,prevKey:u}=i;let h=null;return o.exists()&&(h=o.key),{type:e,payload:o,prevKey:u,key:h}}),(0,lb.B)())}function n2(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function w6(n,e){const{payload:t,prevKey:r,key:i}=e,o=n2(n,i),u=function v6(n,e){if(JL(e))return 0;{const t=n2(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(m=>{const v={payload:m,type:"value",prevKey:h,key:m.key};return h=m.key,n=[...n,v],!1})}return n;case"child_added":if(o>-1){const h=n[o-1];(h&&h.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(o>-1){const h=n.splice(o,1)[0];return(n=n.slice()).splice(u,0,h),n}return n;default:return n}}function r2(n){return(JL(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function i2(n,e,t){return function y6(n,e,t){return _C(n,"value","once",t).pipe(Kt(r=>{const i=[It(r)];return e.forEach(o=>i.push(_C(n,o,"on",t))),(0,mf.T)(...i).pipe(fi(w6,[]))}),Kr())}(n,e=r2(e),t)}function s2(n,e,t){const r=(e=r2(e)).map(i=>_C(n,i,"on",t));return(0,mf.T)(...r)}function o2(n,e){return function(r,i){return t2(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function T6(n){return function(t){return t?t2(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function a2(n,e){return function(){return _C(n,"value","on",e)}}!function g6(n){n.INTERNAL.registerComponent(new cu.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new mC(i,r)},"PUBLIC").setServiceProps({Reference:wa,Query:Es,Database:mC,DataSnapshot:ap,enableLogging:J4,INTERNAL:f6,ServerValue:p6}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(qb.Z);const A6=new c.OlP("angularfire2.realtimeDatabaseURL"),S6=new c.OlP("angularfire2.database.use-emulator");let x6=(()=>{class n{constructor(t,r,i,o,u,h,m,v,T,A,O,F,j,Q,fe){this.schedulers=h;const qe=m,Je=(0,Ls.on)(t,u,r);v&&$b(Je,u,T,O,F,j,A,Q),this.database=(0,Ls.cc)(`${Je.name}.database.${i}`,"AngularFireDatabase",Je.name,()=>{const et=u.runOutsideAngular(()=>Je.database(i||void 0));return qe&&et.useEmulator(...qe),et},[qe])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>e2(this.database,t));let o=i;return r&&(o=r(i)),function I6(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:o2(r,"update"),set:o2(r,"set"),push:i=>r.push(i),remove:T6(r),snapshotChanges:i=>i2(n,i,t).pipe(Yn.iC),stateChanges:i=>s2(n,i,t).pipe(Yn.iC),auditTrail:i=>function E6(n,e,t){return function b6(n,e,t){return function C6(n,e){return _C(n,"value","on",e).pipe((0,bt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function w3(...n){const e=(0,Jo.jO)(n);return(0,_r.e)((t,r)=>{const i=n.length,o=new Array(i);let u=n.map(()=>!1),h=!1;for(let m=0;m<i;m++)(0,Ks.Xf)(n[m]).subscribe((0,Tn.x)(r,v=>{o[m]=v,!h&&!u[m]&&(u[m]=!0,(h=u.every(Ps.y))&&(u=null))},IM.Z));t.subscribe((0,Tn.x)(r,m=>{if(h){const v=[m,...o];r.next(e?e(...v):v)}}))})}(e),(0,bt.U)(([i,o])=>{const u=i.lastKeyToLoad,h=o.map(m=>m.key);return{actions:o,lastKeyToLoad:u,loadedKeys:h}}),function E3(n){return(0,_r.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Tn.x)(t,o=>(r||(r=!n(o,i++)))&&t.next(o)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,bt.U)(i=>i.actions))}(n,s2(n,e).pipe(fi((i,o)=>[...i,o],[])),t)}(n,i,t).pipe(Yn.iC),valueChanges:(i,o)=>i2(n,i,t).pipe((0,bt.U)(h=>h.map(m=>o&&o.idField?Object.assign(Object.assign({},m.payload.val()),{[o.idField]:m.key}):m.payload.val())),Yn.iC)}}(o,this)}object(t){return function D6(n,e){return{query:n,snapshotChanges:()=>a2(n,e.schedulers.outsideAngular)().pipe(Yn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>a2(n,e.schedulers.outsideAngular)().pipe(Yn.iC,(0,bt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>e2(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ls.Dh),c.LFG(Ls.xv,8),c.LFG(A6,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Yn.HU),c.LFG(S6,8),c.LFG(qd,8),c.LFG($_,8),c.LFG(G_,8),c.LFG(q_,8),c.LFG(z_,8),c.LFG(W_,8),c.LFG(Z_,8),c.LFG(bg,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),M6=(()=>{class n{constructor(){Z0.Z.registerVersion("angularfire",Yn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[x6]}),n})();const RP_firebaseConfig={apiKey:"AIzaSyBv44KLjZ7ojrElPTrag2TRXo7_6FV4Uuc",authDomain:"e-commrece-b059c.firebaseapp.com",projectId:"e-commrece-b059c",storageBucket:"e-commrece-b059c.appspot.com",messagingSenderId:"683477402380",appId:"1:683477402380:web:50dd7ae7457c7897fcff29"};let P6=(()=>{class n{constructor(t,r){this.auth=t,this.router=r}canActivate(t,r){return this.auth.authState.pipe(ti(1),(0,bt.U)(i=>!!i||(alert("Please Login"),!1)))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(qd),c.LFG(Ur))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var N6=L(1144);const O6=["addListener","removeListener"],R6=["addEventListener","removeEventListener"],k6=["on","off"];function sA(n,e,t,r){if((0,cs.m)(t)&&(r=t,t=void 0),r)return sA(n,e,t).pipe($a(r));const[i,o]=function V6(n){return(0,cs.m)(n.addEventListener)&&(0,cs.m)(n.removeEventListener)}(n)?R6.map(u=>h=>n[u](e,h,t)):function F6(n){return(0,cs.m)(n.addListener)&&(0,cs.m)(n.removeListener)}(n)?O6.map(l2(n,e)):function L6(n){return(0,cs.m)(n.on)&&(0,cs.m)(n.off)}(n)?k6.map(l2(n,e)):[];if(!i&&(0,N6.z)(n))return(0,Wn.z)(u=>sA(u,e,t))((0,Ks.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new qr.y(u=>{const h=(...m)=>u.next(1<m.length?m:m[0]);return i(h),()=>o(h)})}function l2(n,e){return t=>r=>n[t](e,r)}const lp=new qr.y(IM.Z),B6={connector:()=>new mr.x};function u2(n,e=B6){const{connector:t}=e;return(0,_r.e)((r,i)=>{const o=t();(0,Ks.Xf)(n(function U6(n){return new qr.y(e=>n.subscribe(e))}(o))).subscribe(i),i.add(r.subscribe(o))})}function c2(n,e){return e?t=>So(e.pipe(ti(1),function $6(){return(0,_r.e)((n,e)=>{n.subscribe((0,Tn.x)(e,IM.Z))})}()),t.pipe(c2(n))):(0,Wn.z)((t,r)=>n(t,r).pipe(ti(1),function G6(n){return(0,bt.U)(()=>n)}(t)))}var q6=L(3532);const yC="Service workers are disabled or not supported by this browser";class oA{constructor(e){if(this.serviceWorker=e,e){const r=sA(e,"controllerchange").pipe((0,bt.U)(()=>e.controller)),o=So(gn(()=>It(e.controller)),r);this.worker=o.pipe(ur(T=>!!T)),this.registration=this.worker.pipe(Kt(()=>e.getRegistration()));const v=sA(e,"message").pipe((0,bt.U)(T=>T.data)).pipe(ur(T=>T&&T.type)).pipe(function H6(n){return n?e=>u2(n)(e):e=>function j6(n,e){const t=(0,cs.m)(n)?n:()=>n;return(0,cs.m)(e)?u2(e,{connector:t}):r=>new Ol(r,t)}(new mr.x)(e)}());v.connect(),this.events=v}else this.worker=this.events=this.registration=function K6(n){return gn(()=>ds(new Error(n)))}(yC)}postMessage(e,t){return this.worker.pipe(ti(1),(0,Oi.b)(r=>{r.postMessage(Object.assign({action:e},t))})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const i=this.waitForOperationCompleted(r),o=this.postMessage(e,t);return Promise.all([o,i]).then(([,u])=>u)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(ur(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(ti(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(ur(t=>t.nonce===e),ti(1),(0,bt.U)(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let Y6=(()=>{class n{constructor(t){if(this.sw=t,this.subscriptionChanges=new mr.x,!t.isEnabled)return this.messages=lp,this.notificationClicks=lp,void(this.subscription=lp);this.messages=this.sw.eventsOfType("PUSH").pipe((0,bt.U)(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,bt.U)(i=>i.data)),this.pushManager=this.sw.registration.pipe((0,bt.U)(i=>i.pushManager));const r=this.pushManager.pipe(Kt(i=>i.getSubscription()));this.subscription=(0,mf.T)(r,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(yC));const r={userVisibleOnly:!0};let i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let u=0;u<i.length;u++)o[u]=i.charCodeAt(u);return r.applicationServerKey=o,this.pushManager.pipe(Kt(u=>u.subscribe(r)),ti(1)).toPromise().then(u=>(this.subscriptionChanges.next(u),u))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(ti(1),Kt(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(yC))}decodeBase64(t){return atob(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(oA))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Q6=(()=>{class n{constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=lp,this.available=lp,this.activated=lp,void(this.unrecoverable=lp);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY"]),this.available=this.versionUpdates.pipe(ur(r=>"VERSION_READY"===r.type),(0,bt.U)(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(yC));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(yC));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(oA))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class kP{}const d2=new c.OlP("NGSW_REGISTER_SCRIPT");function J6(n,e,t,r){return()=>{if(!Nn(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let o;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)o=t.registrationStrategy();else{const[h,...m]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(h){case"registerImmediately":o=It(null);break;case"registerWithDelay":o=h2(+m[0]||0);break;case"registerWhenStable":o=m[0]?(0,mf.T)(f2(n),h2(+m[0])):f2(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(c.R0b).runOutsideAngular(()=>o.pipe(ti(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(h=>console.error("Service worker registration failed with:",h))))}}function h2(n){return It(null).pipe(function Z6(n,e=Tg.z){const t=function W6(n=0,e,t=Tg.P){let r=-1;return null!=e&&((0,q6.K)(e)?t=e:r=e),new qr.y(i=>{let o=function z6(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let u=0;return t.schedule(function(){i.closed||(i.next(u++),0<=r?this.schedule(void 0,r):i.complete())},o)})}(n,e);return c2(()=>t)}(n))}function f2(n){return n.get(c.z2F).isStable.pipe(ur(t=>t))}function X6(n,e){return new oA(Nn(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let eG=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[{provide:d2,useValue:t},{provide:kP,useValue:r},{provide:oA,useFactory:X6,deps:[kP,c.Lbi]},{provide:c.ip1,useFactory:J6,deps:[c.zs3,d2,kP,c.Lbi],multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Y6,Q6]}),n})();const yn=!1;function p2(n){return new c.vHH(3e3,yn)}function RG(){return"undefined"!=typeof window&&void 0!==window.document}function FP(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function up(n){switch(n.length){case 0:return new HE;case 1:return n[0];default:return new Vk(n)}}function g2(n,e,t,r,i={},o={}){const u=[],h=[];let m=-1,v=null;if(r.forEach(T=>{const A=T.offset,O=A==m,F=O&&v||{};Object.keys(T).forEach(j=>{let Q=j,fe=T[j];if("offset"!==j)switch(Q=e.normalizePropertyName(Q,u),fe){case"!":fe=i[j];break;case _h:fe=o[j];break;default:fe=e.normalizeStyleValue(j,Q,fe,u)}F[Q]=fe}),O||h.push(F),v=F,m=A}),u.length)throw function bG(n){return new c.vHH(3502,yn)}();return h}function LP(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&VP(t,"start",n)));break;case"done":n.onDone(()=>r(t&&VP(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&VP(t,"destroy",n)))}}function VP(n,e,t){const r=t.totalTime,o=UP(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),u=n._data;return null!=u&&(o._data=u),o}function UP(n,e,t,r,i="",o=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!u}}function Ea(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function m2(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let BP=(n,e)=>!1,_2=(n,e,t)=>[],y2=null;function jP(n){const e=n.parentNode||n.host;return e===y2?null:e}(FP()||"undefined"!=typeof Element)&&(RG()?(y2=(()=>document.documentElement)(),BP=(n,e)=>{for(;e;){if(e===n)return!0;e=jP(e)}return!1}):BP=(n,e)=>n.contains(e),_2=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Bm=null,v2=!1;function w2(n){Bm||(Bm=function FG(){return"undefined"!=typeof document?document.body:null}()||{},v2=!!Bm.style&&"WebkitAppearance"in Bm.style);let e=!0;return Bm.style&&!function kG(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Bm.style,!e&&v2&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Bm.style)),e}const E2=BP,C2=_2;let b2=(()=>{class n{validateStyleProperty(t){return w2(t)}matchesElement(t,r){return!1}containsElement(t,r){return E2(t,r)}getParentElement(t){return jP(t)}query(t,r,i){return C2(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,u,h=[],m){return new HE(i,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),HP=(()=>{class n{}return n.NOOP=new b2,n})();const $P="ng-enter",lA="ng-leave",uA="ng-trigger",cA=".ng-trigger",I2="ng-animating",GP=".ng-animating";function jm(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:qP(parseFloat(e[1]),e[2])}function qP(n,e){return"s"===e?1e3*n:n}function dA(n,e,t){return n.hasOwnProperty("duration")?n:function UG(n,e,t){let i,o=0,u="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(p2()),{duration:0,delay:0,easing:""};i=qP(parseFloat(h[1]),h[2]);const m=h[3];null!=m&&(o=qP(parseFloat(m),h[4]));const v=h[5];v&&(u=v)}else i=n;if(!t){let h=!1,m=e.length;i<0&&(e.push(function tG(){return new c.vHH(3100,yn)}()),h=!0),o<0&&(e.push(function nG(){return new c.vHH(3101,yn)}()),h=!0),h&&e.splice(m,0,p2())}return{duration:i,delay:o,easing:u}}(n,e,t)}function Cv(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function cp(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Cv(n,t);return t}function A2(n,e,t){return t?e+":"+t+";":""}function S2(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=A2(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=A2(0,HG(t),n.style[t]));n.setAttribute("style",e)}function Wc(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=WP(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),FP()&&S2(n))}function Hm(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=WP(t);n.style[r]=""}),FP()&&S2(n))}function vC(n){return Array.isArray(n)?1==n.length?n[0]:kk(n):n}const zP=new RegExp("{{\\s*(.+?)\\s*}}","g");function x2(n){let e=[];if("string"==typeof n){let t;for(;t=zP.exec(n);)e.push(t[1]);zP.lastIndex=0}return e}function hA(n,e,t){const r=n.toString(),i=r.replace(zP,(o,u)=>{let h=e[u];return e.hasOwnProperty(u)||(t.push(function iG(n){return new c.vHH(3003,yn)}()),h=""),h.toString()});return i==r?n:i}function fA(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const jG=/-+([a-z0-9])/g;function WP(n){return n.replace(jG,(...e)=>e[1].toUpperCase())}function HG(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ca(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function sG(n){return new c.vHH(3004,yn)}()}}function M2(n,e){return window.getComputedStyle(n)[e]}function ZG(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function KG(n,e,t){if(":"==n[0]){const m=function YG(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function vG(n){return new c.vHH(3016,yn)}()),"* => *"}}(n,t);if("function"==typeof m)return void e.push(m);n=m}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function yG(n){return new c.vHH(3015,yn)}()),e;const i=r[1],o=r[2],u=r[3];e.push(P2(i,u));"<"==o[0]&&!("*"==i&&"*"==u)&&e.push(P2(u,i))}(r,t,e)):t.push(n),t}const _A=new Set(["true","1"]),yA=new Set(["false","0"]);function P2(n,e){const t=_A.has(n)||yA.has(n),r=_A.has(e)||yA.has(e);return(i,o)=>{let u="*"==n||n==i,h="*"==e||e==o;return!u&&t&&"boolean"==typeof i&&(u=i?_A.has(n):yA.has(n)),!h&&r&&"boolean"==typeof o&&(h=o?_A.has(e):yA.has(e)),u&&h}}const QG=new RegExp("s*:selfs*,?","g");function ZP(n,e,t,r){return new JG(n).build(e,t,r)}class JG{constructor(e){this._driver=e}build(e,t,r){const i=new tq(t);this._resetContextStyleTimingState(i);const o=Ca(this,vC(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),o}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push(function aG(){return new c.vHH(3006,yn)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const m=h,v=m.name;v.toString().split(/\s*,\s*/).forEach(T=>{m.name=T,o.push(this.visitState(m,t))}),m.name=v}else if(1==h.type){const m=this.visitTransition(h,t);r+=m.queryCount,i+=m.depCount,u.push(m)}else t.errors.push(function lG(){return new c.vHH(3007,yn)}())}),{type:7,name:e.name,states:o,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const o=new Set,u=i||{};r.styles.forEach(h=>{if(vA(h)){const m=h;Object.keys(m).forEach(v=>{x2(m[v]).forEach(T=>{u.hasOwnProperty(T)||o.add(T)})})}}),o.size&&(fA(o.values()),t.errors.push(function uG(n,e){return new c.vHH(3008,yn)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Ca(this,vC(e.animation),t);return{type:1,matchers:ZG(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:$m(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Ca(this,r,t)),options:$m(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const o=e.steps.map(u=>{t.currentTime=r;const h=Ca(this,u,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:o,options:$m(e.options)}}visitAnimate(e,t){const r=function rq(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return KP(dA(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=KP(0,0,"");return o.dynamic=!0,o.strValue=r,o}return t=t||dA(r,e),KP(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:jE({});if(5==o.type)i=this.visitKeyframes(o,t);else{let u=e.styles,h=!1;if(!u){h=!0;const v={};r.easing&&(v.easing=r.easing),u=jE(v)}t.currentTime+=r.duration+r.delay;const m=this.visitStyle(u,t);m.isEmptyStep=h,i=m}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(u=>{"string"==typeof u?u==_h?r.push(u):t.errors.push(function cG(n){return new c.vHH(3002,yn)}()):r.push(u)}):r.push(e.styles);let i=!1,o=null;return r.forEach(u=>{if(vA(u)){const h=u,m=h.easing;if(m&&(o=m,delete h.easing),!i)for(let v in h)if(h[v].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&Object.keys(u).forEach(h=>{if(!this._driver.validateStyleProperty(h))return delete u[h],void t.unsupportedCSSPropertiesFound.add(h);const m=t.collectedStyles[t.currentQuerySelector],v=m[h];let T=!0;v&&(o!=i&&o>=v.startTime&&i<=v.endTime&&(t.errors.push(function dG(n,e,t,r,i){return new c.vHH(3010,yn)}()),T=!1),o=v.startTime),T&&(m[h]={startTime:o,endTime:i}),t.options&&function BG(n,e,t){const r=e.params||{},i=x2(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(function rG(n){return new c.vHH(3001,yn)}())})}(u[h],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function hG(){return new c.vHH(3011,yn)}()),r;let o=0;const u=[];let h=!1,m=!1,v=0;const T=e.steps.map(qe=>{const Je=this._makeStyleAst(qe,t);let et=null!=Je.offset?Je.offset:function nq(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(vA(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(vA(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Je.styles),pt=0;return null!=et&&(o++,pt=Je.offset=et),m=m||pt<0||pt>1,h=h||pt<v,v=pt,u.push(pt),Je});m&&t.errors.push(function fG(){return new c.vHH(3012,yn)}()),h&&t.errors.push(function pG(){return new c.vHH(3200,yn)}());const A=e.steps.length;let O=0;o>0&&o<A?t.errors.push(function gG(){return new c.vHH(3202,yn)}()):0==o&&(O=1/(A-1));const F=A-1,j=t.currentTime,Q=t.currentAnimateTimings,fe=Q.duration;return T.forEach((qe,Je)=>{const et=O>0?Je==F?1:O*Je:u[Je],pt=et*fe;t.currentTime=j+Q.delay+pt,Q.duration=pt,this._validateStyleAst(qe,t),qe.offset=et,r.styles.push(qe)}),r}visitReference(e,t){return{type:8,animation:Ca(this,vC(e.animation),t),options:$m(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:$m(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:$m(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[o,u]=function XG(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(QG,"")),n=n.replace(/@\*/g,cA).replace(/@\w+/g,t=>cA+"-"+t.substr(1)).replace(/:animating/g,GP),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,Ea(t.collectedStyles,t.currentQuerySelector,{});const h=Ca(this,vC(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:h,originalSelector:e.selector,options:$m(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function mG(){return new c.vHH(3013,yn)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:dA(e.timings,t.errors,!0);return{type:12,animation:Ca(this,vC(e.animation),t),timings:r,options:null}}}class tq{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function vA(n){return!Array.isArray(n)&&"object"==typeof n}function $m(n){return n?(n=Cv(n)).params&&(n.params=function eq(n){return n?Cv(n):null}(n.params)):n={},n}function KP(n,e,t){return{duration:n,delay:e,easing:t}}function YP(n,e,t,r,i,o,u=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:u,subTimeline:h}}class wA{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const oq=new RegExp(":enter","g"),lq=new RegExp(":leave","g");function QP(n,e,t,r,i,o={},u={},h,m,v=[]){return(new uq).buildKeyframes(n,e,t,r,i,o,u,h,m,v)}class uq{buildKeyframes(e,t,r,i,o,u,h,m,v,T=[]){v=v||new wA;const A=new JP(e,t,v,i,o,T,[]);A.options=m,A.currentTimeline.setStyles([u],null,A.errors,m),Ca(this,r,A);const O=A.timelines.filter(F=>F.containsAnimation());if(Object.keys(h).length){let F;for(let j=O.length-1;j>=0;j--){const Q=O[j];if(Q.element===t){F=Q;break}}F&&!F.allowOnlyTimelineStyles()&&F.setStyles([h],null,A.errors,m)}return O.length?O.map(F=>F.buildKeyframes()):[YP(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);o!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime;const u=null!=r.duration?jm(r.duration):null,h=null!=r.delay?jm(r.delay):null;return 0!==u&&e.forEach(m=>{const v=t.appendInstructionToTimeline(m,u,h);o=Math.max(o,v.duration+v.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),Ca(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=EA);const u=jm(o.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>Ca(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?jm(e.options.delay):0;e.steps.forEach(u=>{const h=t.createSubContext(e.options);o&&h.delayNextStep(o),Ca(this,u,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return dA(t.params?hA(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(m=>{h.forwardTime((m.offset||0)*o),h.setStyles(m.styles,m.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?jm(i.delay):0;o&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=EA);let u=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let m=null;h.forEach((v,T)=>{t.currentQueryIndex=T;const A=t.createSubContext(e.options,v);o&&A.delayNextStep(o),v===t.element&&(m=A.currentTimeline),Ca(this,e.animation,A),A.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,A.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),m&&(t.currentTimeline.mergeTimelineCollectedStyles(m),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,o=e.timings,u=Math.abs(o.duration),h=u*(t.currentQueryTotal-1);let m=u*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":m=h-m;break;case"full":m=r.currentStaggerTime}const T=t.currentTimeline;m&&T.delayNextStep(m);const A=T.currentTime;Ca(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-A+(i.startTime-r.currentTimeline.startTime)}}const EA={};class JP{constructor(e,t,r,i,o,u,h,m){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=u,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=EA,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new CA(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=jm(r.duration)),null!=r.delay&&(i.delay=jm(r.delay));const o=r.params;if(o){let u=i.params;u||(u=this.options.params={}),Object.keys(o).forEach(h=>{(!t||!u.hasOwnProperty(h))&&(u[h]=hA(o[h],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,o=new JP(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=EA,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},o=new cq(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,u){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace(oq,"."+this._enterClassName)).replace(lq,"."+this._leaveClassName);let v=this._driver.query(this.element,e,1!=r);0!==r&&(v=r<0?v.slice(v.length+r,v.length):v.slice(0,r)),h.push(...v)}return!o&&0==h.length&&u.push(function _G(n){return new c.vHH(3014,yn)}()),h}}class CA{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new CA(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||_h,this._currentKeyframe[t]=_h}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const o=i&&i.params||{},u=function dq(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(o=>{t[o]=_h})):cp(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(u).forEach(h=>{const m=hA(u[h],o,r);this._pendingStyles[h]=m,this._localTimelineStyles.hasOwnProperty(h)||(this._backFill[h]=this._globalTimelineStyles.hasOwnProperty(h)?this._globalTimelineStyles[h]:_h),this._updateStyle(h,m)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,m)=>{const v=cp(h,!0);Object.keys(v).forEach(T=>{const A=v[T];"!"==A?e.add(T):A==_h&&t.add(T)}),r||(v.offset=m/this.duration),i.push(v)});const o=e.size?fA(e.values()):[],u=t.size?fA(t.values()):[];if(r){const h=i[0],m=Cv(h);h.offset=0,m.offset=1,i=[h,m]}return YP(this.element,i,o,u,this.duration,this.startTime,this.easing,!1)}}class cq extends CA{constructor(e,t,r,i,o,u,h=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=h,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],u=r+t,h=t/u,m=cp(e[0],!1);m.offset=0,o.push(m);const v=cp(e[0],!1);v.offset=R2(h),o.push(v);const T=e.length-1;for(let A=1;A<=T;A++){let O=cp(e[A],!1);O.offset=R2((t+O.offset*r)/u),o.push(O)}r=u,t=0,i="",e=o}return YP(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function R2(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class XP{}class hq extends XP{normalizePropertyName(e,t){return WP(e)}normalizeStyleValue(e,t,r,i){let o="";const u=r.toString().trim();if(fq[t]&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(function oG(n,e){return new c.vHH(3005,yn)}())}return u+o}}const fq=(()=>function pq(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function k2(n,e,t,r,i,o,u,h,m,v,T,A,O){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:u,timelines:h,queriedElements:m,preStyleProps:v,postStyleProps:T,totalTime:A,errors:O}}const eN={};class F2{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function gq(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],o=this._stateStyles[e],u=i?i.buildStyles(t,r):{};return o?o.buildStyles(t,r):u}build(e,t,r,i,o,u,h,m,v,T){const A=[],O=this.ast.options&&this.ast.options.params||eN,j=this.buildStyles(r,h&&h.params||eN,A),Q=m&&m.params||eN,fe=this.buildStyles(i,Q,A),qe=new Set,Je=new Map,et=new Map,pt="void"===i,Wt={params:Object.assign(Object.assign({},O),Q)},Zt=T?[]:QP(e,t,this.ast.animation,o,u,j,fe,Wt,v,A);let Sn=0;if(Zt.forEach(Cl=>{Sn=Math.max(Cl.duration+Cl.delay,Sn)}),A.length)return k2(t,this._triggerName,r,i,pt,j,fe,[],[],Je,et,Sn,A);Zt.forEach(Cl=>{const wh=Cl.element,J2=Ea(Je,wh,{});Cl.preStyleProps.forEach(Gm=>J2[Gm]=!0);const EC=Ea(et,wh,{});Cl.postStyleProps.forEach(Gm=>EC[Gm]=!0),wh!==t&&qe.add(wh)});const Cs=fA(qe.values());return k2(t,this._triggerName,r,i,pt,j,fe,Zt,Cs,Je,et,Sn)}}class mq{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=Cv(this.defaultParams);return Object.keys(e).forEach(o=>{const u=e[o];null!=u&&(i[o]=u)}),this.styles.styles.forEach(o=>{if("string"!=typeof o){const u=o;Object.keys(u).forEach(h=>{let m=u[h];m.length>1&&(m=hA(m,i,t));const v=this.normalizer.normalizePropertyName(h,t);m=this.normalizer.normalizeStyleValue(h,v,m,t),r[v]=m})}}),r}}class yq{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new mq(i.style,i.options&&i.options.params||{},r)}),L2(this.states,"true","1"),L2(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new F2(e,i,this.states))}),this.fallbackTransition=function vq(n,e,t){return new F2(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function L2(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const wq=new wA;class Eq{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],o=ZP(this._driver,t,r,[]);if(r.length)throw function TG(n){return new c.vHH(3503,yn)}();this._animations[e]=o}_buildPlayer(e,t,r){const i=e.element,o=g2(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],o=this._animations[e];let u;const h=new Map;if(o?(u=QP(this._driver,t,o,$P,lA,{},{},r,wq,i),u.forEach(T=>{const A=Ea(h,T.element,{});T.postStyleProps.forEach(O=>A[O]=null)})):(i.push(function IG(){return new c.vHH(3300,yn)}()),u=[]),i.length)throw function DG(n){return new c.vHH(3504,yn)}();h.forEach((T,A)=>{Object.keys(T).forEach(O=>{T[O]=this._driver.computeStyle(A,O,_h)})});const v=up(u.map(T=>{const A=h.get(T.element);return this._buildPlayer(T,{},A)}));return this._playersById[e]=v,v.onDestroy(()=>this.destroy(e)),this.players.push(v),v}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function AG(n){return new c.vHH(3301,yn)}();return t}listen(e,t,r,i){const o=UP(t,"","","");return LP(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const V2="ng-animate-queued",tN="ng-animate-disabled",Dq=[],U2={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Aq={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},wl="__ng_removed";class nN{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Pq(n){return null!=n?n:null}(r?e.value:e),r){const o=Cv(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const wC="void",rN=new nN(wC);class Sq{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,El(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function SG(n,e){return new c.vHH(3302,yn)}();if(null==r||0==r.length)throw function xG(n){return new c.vHH(3303,yn)}();if(!function Nq(n){return"start"==n||"done"==n}(r))throw function MG(n,e){return new c.vHH(3400,yn)}();const o=Ea(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};o.push(u);const h=Ea(this._engine.statesByElement,e,{});return h.hasOwnProperty(t)||(El(e,uA),El(e,uA+"-"+t),h[t]=rN),()=>{this._engine.afterFlush(()=>{const m=o.indexOf(u);m>=0&&o.splice(m,1),this._triggers[t]||delete h[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function PG(n){return new c.vHH(3401,yn)}();return t}trigger(e,t,r,i=!0){const o=this._getTrigger(t),u=new iN(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(El(e,uA),El(e,uA+"-"+t),this._engine.statesByElement.set(e,h={}));let m=h[t];const v=new nN(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&m&&v.absorbOptions(m.options),h[t]=v,m||(m=rN),v.value!==wC&&m.value===v.value){if(!function kq(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(m.params,v.params)){const Q=[],fe=o.matchStyles(m.value,m.params,Q),qe=o.matchStyles(v.value,v.params,Q);Q.length?this._engine.reportError(Q):this._engine.afterFlush(()=>{Hm(e,fe),Wc(e,qe)})}return}const O=Ea(this._engine.playersByElement,e,[]);O.forEach(Q=>{Q.namespaceId==this.id&&Q.triggerName==t&&Q.queued&&Q.destroy()});let F=o.matchTransition(m.value,v.value,e,v.params),j=!1;if(!F){if(!i)return;F=o.fallbackTransition,j=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:F,fromState:m,toState:v,player:u,isFallbackTransition:j}),j||(El(e,V2),u.onStart(()=>{bv(e,V2)})),u.onDone(()=>{let Q=this.players.indexOf(u);Q>=0&&this.players.splice(Q,1);const fe=this._engine.playersByElement.get(e);if(fe){let qe=fe.indexOf(u);qe>=0&&fe.splice(qe,1)}}),this.players.push(u),O.push(u),u}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,cA,!0);r.forEach(i=>{if(i[wl])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const o=this._engine.statesByElement.get(e),u=new Map;if(o){const h=[];if(Object.keys(o).forEach(m=>{if(u.set(m,o[m].value),this._triggers[m]){const v=this.trigger(e,m,wC,i);v&&h.push(v)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),r&&up(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(o=>{const u=o.name;if(i.has(u))return;i.add(u);const m=this._triggers[u].fallbackTransition,v=r[u]||rN,T=new nN(wC),A=new iN(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:m,fromState:v,toState:T,player:A,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const o=e[wl];(!o||o===U2)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){El(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,u=this._elementListeners.get(o);u&&u.forEach(h=>{if(h.name==r.triggerName){const m=UP(o,r.triggerName,r.fromState.value,r.toState.value);m._data=e,LP(r.player,h.phase,m,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==o||0==u?o-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class xq{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Sq(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,o=r.length-1;if(o>=0){let u=!1;if(void 0!==this.driver.getParentElement){let h=this.driver.getParentElement(t);for(;h;){const m=i.get(h);if(m){const v=r.indexOf(m);r.splice(v+1,0,e),u=!0;break}h=this.driver.getParentElement(h)}}else for(let h=o;h>=0;h--)if(this.driver.containsElement(r[h].hostElement,t)){r.splice(h+1,0,e),u=!0;break}u||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let o=0;o<i.length;o++){const u=r[i[o]].namespaceId;if(u){const h=this._fetchNamespace(u);h&&t.add(h)}}}return t}trigger(e,t,r,i){if(bA(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!bA(t))return;const o=t[wl];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),El(e,tN)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),bv(e,tN))}removeNode(e,t,r,i){if(bA(t)){const o=e?this._fetchNamespace(e):null;if(o?o.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[wl]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return bA(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,cA,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,GP,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return up(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[wl];if(r&&r.setForRemoval){if(e[wl]=U2,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(tN))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)El(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?up(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function NG(n){return new c.vHH(3402,yn)}()}_flushAnimations(e,t){const r=new wA,i=[],o=new Map,u=[],h=new Map,m=new Map,v=new Map,T=new Set;this.disabledNodes.forEach(vt=>{T.add(vt);const Ot=this.driver.query(vt,".ng-animate-queued",!0);for(let Ht=0;Ht<Ot.length;Ht++)T.add(Ot[Ht])});const A=this.bodyNode,O=Array.from(this.statesByElement.keys()),F=H2(O,this.collectedEnterElements),j=new Map;let Q=0;F.forEach((vt,Ot)=>{const Ht=$P+Q++;j.set(Ot,Ht),vt.forEach(En=>El(En,Ht))});const fe=[],qe=new Set,Je=new Set;for(let vt=0;vt<this.collectedLeaveElements.length;vt++){const Ot=this.collectedLeaveElements[vt],Ht=Ot[wl];Ht&&Ht.setForRemoval&&(fe.push(Ot),qe.add(Ot),Ht.hasAnimation?this.driver.query(Ot,".ng-star-inserted",!0).forEach(En=>qe.add(En)):Je.add(Ot))}const et=new Map,pt=H2(O,Array.from(qe));pt.forEach((vt,Ot)=>{const Ht=lA+Q++;et.set(Ot,Ht),vt.forEach(En=>El(En,Ht))}),e.push(()=>{F.forEach((vt,Ot)=>{const Ht=j.get(Ot);vt.forEach(En=>bv(En,Ht))}),pt.forEach((vt,Ot)=>{const Ht=et.get(Ot);vt.forEach(En=>bv(En,Ht))}),fe.forEach(vt=>{this.processLeaveNode(vt)})});const Wt=[],Zt=[];for(let vt=this._namespaceList.length-1;vt>=0;vt--)this._namespaceList[vt].drainQueuedTransitions(t).forEach(Ht=>{const En=Ht.player,rs=Ht.element;if(Wt.push(En),this.collectedEnterElements.length){const po=rs[wl];if(po&&po.setForMove){if(po.previousTriggersValues&&po.previousTriggersValues.has(Ht.triggerName)){const qm=po.previousTriggersValues.get(Ht.triggerName),hp=this.statesByElement.get(Ht.element);hp&&hp[Ht.triggerName]&&(hp[Ht.triggerName].value=qm)}return void En.destroy()}}const Zc=!A||!this.driver.containsElement(A,rs),ba=et.get(rs),dp=j.get(rs),jr=this._buildInstruction(Ht,r,dp,ba,Zc);if(jr.errors&&jr.errors.length)return void Zt.push(jr);if(Zc)return En.onStart(()=>Hm(rs,jr.fromStyles)),En.onDestroy(()=>Wc(rs,jr.toStyles)),void i.push(En);if(Ht.isFallbackTransition)return En.onStart(()=>Hm(rs,jr.fromStyles)),En.onDestroy(()=>Wc(rs,jr.toStyles)),void i.push(En);const tV=[];jr.timelines.forEach(po=>{po.stretchStartingKeyframe=!0,this.disabledNodes.has(po.element)||tV.push(po)}),jr.timelines=tV,r.append(rs,jr.timelines),u.push({instruction:jr,player:En,element:rs}),jr.queriedElements.forEach(po=>Ea(h,po,[]).push(En)),jr.preStyleProps.forEach((po,qm)=>{const hp=Object.keys(po);if(hp.length){let zm=m.get(qm);zm||m.set(qm,zm=new Set),hp.forEach(oN=>zm.add(oN))}}),jr.postStyleProps.forEach((po,qm)=>{const hp=Object.keys(po);let zm=v.get(qm);zm||v.set(qm,zm=new Set),hp.forEach(oN=>zm.add(oN))})});if(Zt.length){const vt=[];Zt.forEach(Ot=>{vt.push(function OG(n,e){return new c.vHH(3505,yn)}())}),Wt.forEach(Ot=>Ot.destroy()),this.reportError(vt)}const Sn=new Map,Cs=new Map;u.forEach(vt=>{const Ot=vt.element;r.has(Ot)&&(Cs.set(Ot,Ot),this._beforeAnimationBuild(vt.player.namespaceId,vt.instruction,Sn))}),i.forEach(vt=>{const Ot=vt.element;this._getPreviousPlayers(Ot,!1,vt.namespaceId,vt.triggerName,null).forEach(En=>{Ea(Sn,Ot,[]).push(En),En.destroy()})});const Cl=fe.filter(vt=>G2(vt,m,v)),wh=new Map;j2(wh,this.driver,Je,v,_h).forEach(vt=>{G2(vt,m,v)&&Cl.push(vt)});const EC=new Map;F.forEach((vt,Ot)=>{j2(EC,this.driver,new Set(vt),m,"!")}),Cl.forEach(vt=>{const Ot=wh.get(vt),Ht=EC.get(vt);wh.set(vt,Object.assign(Object.assign({},Ot),Ht))});const Gm=[],X2=[],eV={};u.forEach(vt=>{const{element:Ot,player:Ht,instruction:En}=vt;if(r.has(Ot)){if(T.has(Ot))return Ht.onDestroy(()=>Wc(Ot,En.toStyles)),Ht.disabled=!0,Ht.overrideTotalTime(En.totalTime),void i.push(Ht);let rs=eV;if(Cs.size>1){let ba=Ot;const dp=[];for(;ba=ba.parentNode;){const jr=Cs.get(ba);if(jr){rs=jr;break}dp.push(ba)}dp.forEach(jr=>Cs.set(jr,rs))}const Zc=this._buildAnimation(Ht.namespaceId,En,Sn,o,EC,wh);if(Ht.setRealPlayer(Zc),rs===eV)Gm.push(Ht);else{const ba=this.playersByElement.get(rs);ba&&ba.length&&(Ht.parentPlayer=up(ba)),i.push(Ht)}}else Hm(Ot,En.fromStyles),Ht.onDestroy(()=>Wc(Ot,En.toStyles)),X2.push(Ht),T.has(Ot)&&i.push(Ht)}),X2.forEach(vt=>{const Ot=o.get(vt.element);if(Ot&&Ot.length){const Ht=up(Ot);vt.setRealPlayer(Ht)}}),i.forEach(vt=>{vt.parentPlayer?vt.syncPlayerEvents(vt.parentPlayer):vt.destroy()});for(let vt=0;vt<fe.length;vt++){const Ot=fe[vt],Ht=Ot[wl];if(bv(Ot,lA),Ht&&Ht.hasAnimation)continue;let En=[];if(h.size){let Zc=h.get(Ot);Zc&&Zc.length&&En.push(...Zc);let ba=this.driver.query(Ot,GP,!0);for(let dp=0;dp<ba.length;dp++){let jr=h.get(ba[dp]);jr&&jr.length&&En.push(...jr)}}const rs=En.filter(Zc=>!Zc.destroyed);rs.length?Oq(this,Ot,rs):this.processLeaveNode(Ot)}return fe.length=0,Gm.forEach(vt=>{this.players.push(vt),vt.onDone(()=>{vt.destroy();const Ot=this.players.indexOf(vt);this.players.splice(Ot,1)}),vt.play()}),Gm}elementContainsData(e,t){let r=!1;const i=t[wl];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let u=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(u=h)}else{const h=this.playersByElement.get(e);if(h){const m=!o||o==wC;h.forEach(v=>{v.queued||!m&&v.triggerName!=i||u.push(v)})}}return(r||i)&&(u=u.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),u}_beforeAnimationBuild(e,t,r){const o=t.element,u=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const m of t.timelines){const v=m.element,T=v!==o,A=Ea(r,v,[]);this._getPreviousPlayers(v,T,u,h,t.toState).forEach(F=>{const j=F.getRealPlayer();j.beforeDestroy&&j.beforeDestroy(),F.destroy(),A.push(F)})}Hm(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,u){const h=t.triggerName,m=t.element,v=[],T=new Set,A=new Set,O=t.timelines.map(j=>{const Q=j.element;T.add(Q);const fe=Q[wl];if(fe&&fe.removedBeforeQueried)return new HE(j.duration,j.delay);const qe=Q!==m,Je=function Rq(n){const e=[];return $2(n,e),e}((r.get(Q)||Dq).map(Sn=>Sn.getRealPlayer())).filter(Sn=>!!Sn.element&&Sn.element===Q),et=o.get(Q),pt=u.get(Q),Wt=g2(0,this._normalizer,0,j.keyframes,et,pt),Zt=this._buildPlayer(j,Wt,Je);if(j.subTimeline&&i&&A.add(Q),qe){const Sn=new iN(e,h,Q);Sn.setRealPlayer(Zt),v.push(Sn)}return Zt});v.forEach(j=>{Ea(this.playersByQueriedElement,j.element,[]).push(j),j.onDone(()=>function Mq(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,j.element,j))}),T.forEach(j=>El(j,I2));const F=up(O);return F.onDestroy(()=>{T.forEach(j=>bv(j,I2)),Wc(m,t.toStyles)}),A.forEach(j=>{Ea(i,j,[]).push(F)}),F}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new HE(e.duration,e.delay)}}class iN{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new HE,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>LP(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ea(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function bA(n){return n&&1===n.nodeType}function B2(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function j2(n,e,t,r,i){const o=[];t.forEach(m=>o.push(B2(m)));const u=[];r.forEach((m,v)=>{const T={};m.forEach(A=>{const O=T[A]=e.computeStyle(v,A,i);(!O||0==O.length)&&(v[wl]=Aq,u.push(v))}),n.set(v,T)});let h=0;return t.forEach(m=>B2(m,o[h++])),u}function H2(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const i=new Set(e),o=new Map;function u(h){if(!h)return 1;let m=o.get(h);if(m)return m;const v=h.parentNode;return m=t.has(v)?v:i.has(v)?1:u(v),o.set(h,m),m}return e.forEach(h=>{const m=u(h);1!==m&&t.get(m).push(h)}),t}function El(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function bv(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function Oq(n,e,t){up(t).onDone(()=>n.processLeaveNode(e))}function $2(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof Vk?$2(r.players,e):e.push(r)}}function G2(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}class TA{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new xq(e,t,r),this._timelineEngine=new Eq(e,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){const u=e+"-"+i;let h=this._triggerCache[u];if(!h){const m=[],T=ZP(this._driver,o,m,[]);if(m.length)throw function CG(n,e){return new c.vHH(3404,yn)}();h=function _q(n,e,t){return new yq(n,e,t)}(i,T,this._normalizer),this._triggerCache[u]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[o,u]=m2(r);this._timelineEngine.command(o,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if("@"==r.charAt(0)){const[u,h]=m2(r);return this._timelineEngine.listen(u,t,h,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Lq=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o={}),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Wc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Wc(this._element,this._initialStyles),this._endStyles&&(Wc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Hm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Hm(this._element,this._endStyles),this._endStyles=null),Wc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function sN(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];Vq(i)&&(e=e||{},e[i]=n[i])}return e}function Vq(n){return"display"===n||"position"===n}class q2{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:M2(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Uq{validateStyleProperty(e){return w2(e)}matchesElement(e,t){return!1}containsElement(e,t){return E2(e,t)}getParentElement(e){return jP(e)}query(e,t,r){return C2(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,o,u=[]){const m={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(m.easing=o);const v={},T=u.filter(O=>O instanceof q2);(function $G(n,e){return 0===n||0===e})(r,i)&&T.forEach(O=>{let F=O.currentSnapshot;Object.keys(F).forEach(j=>v[j]=F[j])}),t=function GG(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let o=e[0],u=[];if(r.forEach(h=>{o.hasOwnProperty(h)||u.push(h),o[h]=t[h]}),u.length)for(var i=1;i<e.length;i++){let h=e[i];u.forEach(function(m){h[m]=M2(n,m)})}}return e}(e,t=t.map(O=>cp(O,!1)),v);const A=function Fq(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=sN(e[0]),e.length>1&&(r=sN(e[e.length-1]))):e&&(t=sN(e)),t||r?new Lq(n,t,r):null}(e,t);return new q2(e,t,m,A)}}let Bq=(()=>{class n extends Ok{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:c.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?kk(t):t;return z2(this._renderer,null,r,"register",[i]),new jq(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo),c.LFG(he))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class jq extends class Sj{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Hq(this._id,e,t||{},this._renderer)}}class Hq{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return z2(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function z2(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const W2="@.disabled";let $q=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,u)=>{const h=null==u?void 0:u.parentNode(o);h&&u.removeChild(h,o)}}createRenderer(t,r){const o=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let T=this._rendererCache.get(o);return T||(T=new Z2("",o,this.engine),this._rendererCache.set(o,T)),T}const u=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const m=T=>{Array.isArray(T)?T.forEach(m):this.engine.registerTrigger(u,h,t,T.name,T)};return r.data.animation.forEach(m),new Gq(this,h,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[u,h]=o;u(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo),c.LFG(TA),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Z2{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==W2?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Gq extends Z2{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==W2?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function qq(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.substr(1),u="";return"@"!=o.charAt(0)&&([o,u]=function zq(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(o)),this.engine.listen(this.namespaceId,i,o,u,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let Wq=(()=>{class n extends TA{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(he),c.LFG(HP),c.LFG(XP))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const K2=new c.OlP("AnimationModuleType"),Y2=[{provide:Ok,useClass:Bq},{provide:XP,useFactory:function Zq(){return new hq}},{provide:TA,useClass:Wq},{provide:c.FYo,useFactory:function Kq(n,e,t){return new $q(n,e,t)},deps:[Rn,TA,c.R0b]}],Q2=[{provide:HP,useFactory:()=>new Uq},{provide:K2,useValue:"BrowserAnimations"},...Y2],Yq=[{provide:HP,useClass:b2},{provide:K2,useValue:"NoopAnimations"},...Y2];let Qq=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Yq:Q2}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:Q2,imports:[To]}),n})(),Jq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[v3]}),n.\u0275inj=c.cJS({providers:[Sm,CD,P6],imports:[[To,y3,Ls.hO.initializeApp(RP_firebaseConfig),Aj,M6,Qq,ib,Jj.forRoot(),JA,eG.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"})]]}),n})();(0,c.G48)(),xl().bootstrapModule(Jq).catch(n=>console.error(n))},8306:(rt,Te,L)=>{L.d(Te,{y:()=>z});var c=L(930),X=L(727),V=L(8822),ce=L(4671);var he=L(2416),_e=L(576),ye=L(2806);let z=(()=>{class xe{constructor(Ge){Ge&&(this._subscribe=Ge)}lift(Ge){const ge=new xe;return ge.source=this,ge.operator=Ge,ge}subscribe(Ge,ge,Re){const ot=function Ze(xe){return xe&&xe instanceof c.Lv||function ee(xe){return xe&&(0,_e.m)(xe.next)&&(0,_e.m)(xe.error)&&(0,_e.m)(xe.complete)}(xe)&&(0,X.Nn)(xe)}(Ge)?Ge:new c.Hp(Ge,ge,Re);return(0,ye.x)(()=>{const{operator:ut,source:Fe}=this;ot.add(ut?ut.call(ot,Fe):Fe?this._subscribe(ot):this._trySubscribe(ot))}),ot}_trySubscribe(Ge){try{return this._subscribe(Ge)}catch(ge){Ge.error(ge)}}forEach(Ge,ge){return new(ge=q(ge))((Re,ot)=>{const ut=new c.Hp({next:Fe=>{try{Ge(Fe)}catch(Ee){ot(Ee),ut.unsubscribe()}},error:ot,complete:Re});this.subscribe(ut)})}_subscribe(Ge){var ge;return null===(ge=this.source)||void 0===ge?void 0:ge.subscribe(Ge)}[V.L](){return this}pipe(...Ge){return function pe(xe){return 0===xe.length?ce.y:1===xe.length?xe[0]:function(Ge){return xe.reduce((ge,Re)=>Re(ge),Ge)}}(Ge)(this)}toPromise(Ge){return new(Ge=q(Ge))((ge,Re)=>{let ot;this.subscribe(ut=>ot=ut,ut=>Re(ut),()=>ge(ot))})}}return xe.create=Ve=>new xe(Ve),xe})();function q(xe){var Ve;return null!==(Ve=null!=xe?xe:he.v.Promise)&&void 0!==Ve?Ve:Promise}},7579:(rt,Te,L)=>{L.d(Te,{x:()=>he});var c=L(8306),X=L(727);const ce=(0,L(3888).d)(ye=>function(){ye(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=L(8737),pe=L(2806);let he=(()=>{class ye extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const ee=new _e(this,this);return ee.operator=q,ee}_throwIfClosed(){if(this.closed)throw new ce}next(q){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next(q)}})}error(q){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:ee}=this;for(;ee.length;)ee.shift().error(q)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:ee,isStopped:Ze,observers:xe}=this;return ee||Ze?X.Lc:(this.currentObservers=null,xe.push(q),new X.w0(()=>{this.currentObservers=null,(0,le.P)(xe,q)}))}_checkFinalizedStatuses(q){const{hasError:ee,thrownError:Ze,isStopped:xe}=this;ee?q.error(Ze):xe&&q.complete()}asObservable(){const q=new c.y;return q.source=this,q}}return ye.create=(z,q)=>new _e(z,q),ye})();class _e extends he{constructor(z,q){super(),this.destination=z,this.source=q}next(z){var q,ee;null===(ee=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===ee||ee.call(q,z)}error(z){var q,ee;null===(ee=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===ee||ee.call(q,z)}complete(){var z,q;null===(q=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===q||q.call(z)}_subscribe(z){var q,ee;return null!==(ee=null===(q=this.source)||void 0===q?void 0:q.subscribe(z))&&void 0!==ee?ee:X.Lc}}},930:(rt,Te,L)=>{L.d(Te,{Hp:()=>Ge,Lv:()=>ee});var c=L(576),X=L(727),V=L(2416),ce=L(7849),le=L(5032);const pe=ye("C",void 0,void 0);function ye(Fe,Ee,ve){return{kind:Fe,value:Ee,error:ve}}var z=L(3410),q=L(2806);class ee extends X.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,X.Nn)(Ee)&&Ee.add(this)):this.destination=ut}static create(Ee,ve,ze){return new Ge(Ee,ve,ze)}next(Ee){this.isStopped?ot(function _e(Fe){return ye("N",Fe,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?ot(function he(Fe){return ye("E",void 0,Fe)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?ot(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ze=Function.prototype.bind;function xe(Fe,Ee){return Ze.call(Fe,Ee)}class Ve{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:ve}=this;if(ve.next)try{ve.next(Ee)}catch(ze){ge(ze)}}error(Ee){const{partialObserver:ve}=this;if(ve.error)try{ve.error(Ee)}catch(ze){ge(ze)}else ge(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(ve){ge(ve)}}}class Ge extends ee{constructor(Ee,ve,ze){let je;if(super(),(0,c.m)(Ee)||!Ee)je={next:null!=Ee?Ee:void 0,error:null!=ve?ve:void 0,complete:null!=ze?ze:void 0};else{let Ct;this&&V.v.useDeprecatedNextContext?(Ct=Object.create(Ee),Ct.unsubscribe=()=>this.unsubscribe(),je={next:Ee.next&&xe(Ee.next,Ct),error:Ee.error&&xe(Ee.error,Ct),complete:Ee.complete&&xe(Ee.complete,Ct)}):je=Ee}this.destination=new Ve(je)}}function ge(Fe){V.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(Fe):(0,ce.h)(Fe)}function ot(Fe,Ee){const{onStoppedNotification:ve}=V.v;ve&&z.z.setTimeout(()=>ve(Fe,Ee))}const ut={closed:!0,next:le.Z,error:function Re(Fe){throw Fe},complete:le.Z}},727:(rt,Te,L)=>{L.d(Te,{Lc:()=>pe,w0:()=>le,Nn:()=>he});var c=L(576);const V=(0,L(3888).d)(ye=>function(q){ye(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((ee,Ze)=>`${Ze+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var ce=L(8737);class le{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const xe of q)xe.remove(this);else q.remove(this);const{initialTeardown:ee}=this;if((0,c.m)(ee))try{ee()}catch(xe){z=xe instanceof V?xe.errors:[xe]}const{_finalizers:Ze}=this;if(Ze){this._finalizers=null;for(const xe of Ze)try{_e(xe)}catch(Ve){z=null!=z?z:[],Ve instanceof V?z=[...z,...Ve.errors]:z.push(Ve)}}if(z)throw new V(z)}}add(z){var q;if(z&&z!==this)if(this.closed)_e(z);else{if(z instanceof le){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(z)}}_hasParent(z){const{_parentage:q}=this;return q===z||Array.isArray(q)&&q.includes(z)}_addParent(z){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(z),q):q?[q,z]:z}_removeParent(z){const{_parentage:q}=this;q===z?this._parentage=null:Array.isArray(q)&&(0,ce.P)(q,z)}remove(z){const{_finalizers:q}=this;q&&(0,ce.P)(q,z),z instanceof le&&z._removeParent(this)}}le.EMPTY=(()=>{const ye=new le;return ye.closed=!0,ye})();const pe=le.EMPTY;function he(ye){return ye instanceof le||ye&&"closed"in ye&&(0,c.m)(ye.remove)&&(0,c.m)(ye.add)&&(0,c.m)(ye.unsubscribe)}function _e(ye){(0,c.m)(ye)?ye():ye.unsubscribe()}},2416:(rt,Te,L)=>{L.d(Te,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(rt,Te,L)=>{L.d(Te,{E:()=>X});const X=new(L(8306).y)(le=>le.complete())},8996:(rt,Te,L)=>{L.d(Te,{D:()=>Ee});var c=L(8421),X=L(5363),V=L(9468),pe=L(8306),_e=L(2202),ye=L(576),z=L(9672);function ee(ve,ze){if(!ve)throw new Error("Iterable cannot be null");return new pe.y(je=>{(0,z.f)(je,ze,()=>{const Ct=ve[Symbol.asyncIterator]();(0,z.f)(je,ze,()=>{Ct.next().then(oe=>{oe.done?je.complete():je.next(oe.value)})},0,!0)})})}var Ze=L(3670),xe=L(8239),Ve=L(1144),Ge=L(6495),ge=L(2206),Re=L(4532),ot=L(3260);function Ee(ve,ze){return ze?function Fe(ve,ze){if(null!=ve){if((0,Ze.c)(ve))return function ce(ve,ze){return(0,c.Xf)(ve).pipe((0,V.R)(ze),(0,X.Q)(ze))}(ve,ze);if((0,Ve.z)(ve))return function he(ve,ze){return new pe.y(je=>{let Ct=0;return ze.schedule(function(){Ct===ve.length?je.complete():(je.next(ve[Ct++]),je.closed||this.schedule())})})}(ve,ze);if((0,xe.t)(ve))return function le(ve,ze){return(0,c.Xf)(ve).pipe((0,V.R)(ze),(0,X.Q)(ze))}(ve,ze);if((0,ge.D)(ve))return ee(ve,ze);if((0,Ge.T)(ve))return function q(ve,ze){return new pe.y(je=>{let Ct;return(0,z.f)(je,ze,()=>{Ct=ve[_e.h](),(0,z.f)(je,ze,()=>{let oe,xt;try{({value:oe,done:xt}=Ct.next())}catch(Rt){return void je.error(Rt)}xt?je.complete():je.next(oe)},0,!0)}),()=>(0,ye.m)(null==Ct?void 0:Ct.return)&&Ct.return()})}(ve,ze);if((0,ot.L)(ve))return function ut(ve,ze){return ee((0,ot.Q)(ve),ze)}(ve,ze)}throw(0,Re.z)(ve)}(ve,ze):(0,c.Xf)(ve)}},8421:(rt,Te,L)=>{L.d(Te,{Xf:()=>Ze});var c=L(7582),X=L(1144),V=L(8239),ce=L(8306),le=L(3670),pe=L(2206),he=L(4532),_e=L(6495),ye=L(3260),z=L(576),q=L(7849),ee=L(8822);function Ze(Fe){if(Fe instanceof ce.y)return Fe;if(null!=Fe){if((0,le.c)(Fe))return function xe(Fe){return new ce.y(Ee=>{const ve=Fe[ee.L]();if((0,z.m)(ve.subscribe))return ve.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Fe);if((0,X.z)(Fe))return function Ve(Fe){return new ce.y(Ee=>{for(let ve=0;ve<Fe.length&&!Ee.closed;ve++)Ee.next(Fe[ve]);Ee.complete()})}(Fe);if((0,V.t)(Fe))return function Ge(Fe){return new ce.y(Ee=>{Fe.then(ve=>{Ee.closed||(Ee.next(ve),Ee.complete())},ve=>Ee.error(ve)).then(null,q.h)})}(Fe);if((0,pe.D)(Fe))return Re(Fe);if((0,_e.T)(Fe))return function ge(Fe){return new ce.y(Ee=>{for(const ve of Fe)if(Ee.next(ve),Ee.closed)return;Ee.complete()})}(Fe);if((0,ye.L)(Fe))return function ot(Fe){return Re((0,ye.Q)(Fe))}(Fe)}throw(0,he.z)(Fe)}function Re(Fe){return new ce.y(Ee=>{(function ut(Fe,Ee){var ve,ze,je,Ct;return(0,c.mG)(this,void 0,void 0,function*(){try{for(ve=(0,c.KL)(Fe);!(ze=yield ve.next()).done;)if(Ee.next(ze.value),Ee.closed)return}catch(oe){je={error:oe}}finally{try{ze&&!ze.done&&(Ct=ve.return)&&(yield Ct.call(ve))}finally{if(je)throw je.error}}Ee.complete()})})(Fe,Ee).catch(ve=>Ee.error(ve))})}},6451:(rt,Te,L)=>{L.d(Te,{T:()=>pe});var c=L(8189),X=L(8421),V=L(515),ce=L(3269),le=L(8996);function pe(...he){const _e=(0,ce.yG)(he),ye=(0,ce._6)(he,1/0),z=he;return z.length?1===z.length?(0,X.Xf)(z[0]):(0,c.J)(ye)((0,le.D)(z,_e)):V.E}},5403:(rt,Te,L)=>{L.d(Te,{x:()=>X});var c=L(930);function X(ce,le,pe,he,_e){return new V(ce,le,pe,he,_e)}class V extends c.Lv{constructor(le,pe,he,_e,ye,z){super(le),this.onFinalize=ye,this.shouldUnsubscribe=z,this._next=pe?function(q){try{pe(q)}catch(ee){le.error(ee)}}:super._next,this._error=_e?function(q){try{_e(q)}catch(ee){le.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=he?function(){try{he()}catch(q){le.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},4004:(rt,Te,L)=>{L.d(Te,{U:()=>V});var c=L(4482),X=L(5403);function V(ce,le){return(0,c.e)((pe,he)=>{let _e=0;pe.subscribe((0,X.x)(he,ye=>{he.next(ce.call(le,ye,_e++))}))})}},8189:(rt,Te,L)=>{L.d(Te,{J:()=>V});var c=L(5577),X=L(4671);function V(ce=1/0){return(0,c.z)(X.y,ce)}},5577:(rt,Te,L)=>{L.d(Te,{z:()=>_e});var c=L(4004),X=L(8421),V=L(4482),ce=L(9672),le=L(5403),he=L(576);function _e(ye,z,q=1/0){return(0,he.m)(z)?_e((ee,Ze)=>(0,c.U)((xe,Ve)=>z(ee,xe,Ze,Ve))((0,X.Xf)(ye(ee,Ze))),q):("number"==typeof z&&(q=z),(0,V.e)((ee,Ze)=>function pe(ye,z,q,ee,Ze,xe,Ve,Ge){const ge=[];let Re=0,ot=0,ut=!1;const Fe=()=>{ut&&!ge.length&&!Re&&z.complete()},Ee=ze=>Re<ee?ve(ze):ge.push(ze),ve=ze=>{xe&&z.next(ze),Re++;let je=!1;(0,X.Xf)(q(ze,ot++)).subscribe((0,le.x)(z,Ct=>{null==Ze||Ze(Ct),xe?Ee(Ct):z.next(Ct)},()=>{je=!0},void 0,()=>{if(je)try{for(Re--;ge.length&&Re<ee;){const Ct=ge.shift();Ve?(0,ce.f)(z,Ve,()=>ve(Ct)):ve(Ct)}Fe()}catch(Ct){z.error(Ct)}}))};return ye.subscribe((0,le.x)(z,Ee,()=>{ut=!0,Fe()})),()=>{null==Ge||Ge()}}(ee,Ze,ye,q)))}},5363:(rt,Te,L)=>{L.d(Te,{Q:()=>ce});var c=L(9672),X=L(4482),V=L(5403);function ce(le,pe=0){return(0,X.e)((he,_e)=>{he.subscribe((0,V.x)(_e,ye=>(0,c.f)(_e,le,()=>_e.next(ye),pe),()=>(0,c.f)(_e,le,()=>_e.complete(),pe),ye=>(0,c.f)(_e,le,()=>_e.error(ye),pe)))})}},3099:(rt,Te,L)=>{L.d(Te,{B:()=>le});var c=L(8421),X=L(7579),V=L(930),ce=L(4482);function le(he={}){const{connector:_e=(()=>new X.x),resetOnError:ye=!0,resetOnComplete:z=!0,resetOnRefCountZero:q=!0}=he;return ee=>{let Ze,xe,Ve,Ge=0,ge=!1,Re=!1;const ot=()=>{null==xe||xe.unsubscribe(),xe=void 0},ut=()=>{ot(),Ze=Ve=void 0,ge=Re=!1},Fe=()=>{const Ee=Ze;ut(),null==Ee||Ee.unsubscribe()};return(0,ce.e)((Ee,ve)=>{Ge++,!Re&&!ge&&ot();const ze=Ve=null!=Ve?Ve:_e();ve.add(()=>{Ge--,0===Ge&&!Re&&!ge&&(xe=pe(Fe,q))}),ze.subscribe(ve),!Ze&&Ge>0&&(Ze=new V.Hp({next:je=>ze.next(je),error:je=>{Re=!0,ot(),xe=pe(ut,ye,je),ze.error(je)},complete:()=>{ge=!0,ot(),xe=pe(ut,z),ze.complete()}}),(0,c.Xf)(Ee).subscribe(Ze))})(ee)}}function pe(he,_e,...ye){if(!0===_e)return void he();if(!1===_e)return;const z=new V.Hp({next:()=>{z.unsubscribe(),he()}});return _e(...ye).subscribe(z)}},9468:(rt,Te,L)=>{L.d(Te,{R:()=>X});var c=L(4482);function X(V,ce=0){return(0,c.e)((le,pe)=>{pe.add(V.schedule(()=>le.subscribe(pe),ce))})}},8505:(rt,Te,L)=>{L.d(Te,{b:()=>le});var c=L(576),X=L(4482),V=L(5403),ce=L(4671);function le(pe,he,_e){const ye=(0,c.m)(pe)||he||_e?{next:pe,error:he,complete:_e}:pe;return ye?(0,X.e)((z,q)=>{var ee;null===(ee=ye.subscribe)||void 0===ee||ee.call(ye);let Ze=!0;z.subscribe((0,V.x)(q,xe=>{var Ve;null===(Ve=ye.next)||void 0===Ve||Ve.call(ye,xe),q.next(xe)},()=>{var xe;Ze=!1,null===(xe=ye.complete)||void 0===xe||xe.call(ye),q.complete()},xe=>{var Ve;Ze=!1,null===(Ve=ye.error)||void 0===Ve||Ve.call(ye,xe),q.error(xe)},()=>{var xe,Ve;Ze&&(null===(xe=ye.unsubscribe)||void 0===xe||xe.call(ye)),null===(Ve=ye.finalize)||void 0===Ve||Ve.call(ye)}))}):ce.y}},4408:(rt,Te,L)=>{L.d(Te,{o:()=>le});var c=L(727);class X extends c.w0{constructor(he,_e){super()}schedule(he,_e=0){return this}}const V={setInterval(pe,he,..._e){const{delegate:ye}=V;return(null==ye?void 0:ye.setInterval)?ye.setInterval(pe,he,..._e):setInterval(pe,he,..._e)},clearInterval(pe){const{delegate:he}=V;return((null==he?void 0:he.clearInterval)||clearInterval)(pe)},delegate:void 0};var ce=L(8737);class le extends X{constructor(he,_e){super(he,_e),this.scheduler=he,this.work=_e,this.pending=!1}schedule(he,_e=0){var ye;if(this.closed)return this;this.state=he;const z=this.id,q=this.scheduler;return null!=z&&(this.id=this.recycleAsyncId(q,z,_e)),this.pending=!0,this.delay=_e,this.id=null!==(ye=this.id)&&void 0!==ye?ye:this.requestAsyncId(q,this.id,_e),this}requestAsyncId(he,_e,ye=0){return V.setInterval(he.flush.bind(he,this),ye)}recycleAsyncId(he,_e,ye=0){if(null!=ye&&this.delay===ye&&!1===this.pending)return _e;null!=_e&&V.clearInterval(_e)}execute(he,_e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ye=this._execute(he,_e);if(ye)return ye;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,_e){let z,ye=!1;try{this.work(he)}catch(q){ye=!0,z=q||new Error("Scheduled action threw falsy error")}if(ye)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:he,scheduler:_e}=this,{actions:ye}=_e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(ye,this),null!=he&&(this.id=this.recycleAsyncId(_e,he,null)),this.delay=null,super.unsubscribe()}}}},7565:(rt,Te,L)=>{L.d(Te,{v:()=>V});var c=L(6063);class X{constructor(le,pe=X.now){this.schedulerActionCtor=le,this.now=pe}schedule(le,pe=0,he){return new this.schedulerActionCtor(this,le).schedule(he,pe)}}X.now=c.l.now;class V extends X{constructor(le,pe=X.now){super(le,pe),this.actions=[],this._active=!1}flush(le){const{actions:pe}=this;if(this._active)return void pe.push(le);let he;this._active=!0;do{if(he=le.execute(le.state,le.delay))break}while(le=pe.shift());if(this._active=!1,he){for(;le=pe.shift();)le.unsubscribe();throw he}}}},4986:(rt,Te,L)=>{L.d(Te,{z:()=>V,P:()=>ce});var c=L(4408);const V=new(L(7565).v)(c.o),ce=V},6063:(rt,Te,L)=>{L.d(Te,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(rt,Te,L)=>{L.d(Te,{z:()=>c});const c={setTimeout(X,V,...ce){const{delegate:le}=c;return(null==le?void 0:le.setTimeout)?le.setTimeout(X,V,...ce):setTimeout(X,V,...ce)},clearTimeout(X){const{delegate:V}=c;return((null==V?void 0:V.clearTimeout)||clearTimeout)(X)},delegate:void 0}},2202:(rt,Te,L)=>{L.d(Te,{h:()=>X});const X=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(rt,Te,L)=>{L.d(Te,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(rt,Te,L)=>{L.d(Te,{jO:()=>ce,yG:()=>le,_6:()=>pe});var c=L(576),X=L(3532);function V(he){return he[he.length-1]}function ce(he){return(0,c.m)(V(he))?he.pop():void 0}function le(he){return(0,X.K)(V(he))?he.pop():void 0}function pe(he,_e){return"number"==typeof V(he)?he.pop():_e}},8737:(rt,Te,L)=>{function c(X,V){if(X){const ce=X.indexOf(V);0<=ce&&X.splice(ce,1)}}L.d(Te,{P:()=>c})},3888:(rt,Te,L)=>{function c(X){const ce=X(le=>{Error.call(le),le.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}L.d(Te,{d:()=>c})},2806:(rt,Te,L)=>{L.d(Te,{x:()=>V,O:()=>ce});var c=L(2416);let X=null;function V(le){if(c.v.useDeprecatedSynchronousErrorHandling){const pe=!X;if(pe&&(X={errorThrown:!1,error:null}),le(),pe){const{errorThrown:he,error:_e}=X;if(X=null,he)throw _e}}else le()}function ce(le){c.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=le)}},9672:(rt,Te,L)=>{function c(X,V,ce,le=0,pe=!1){const he=V.schedule(function(){ce(),pe?X.add(this.schedule(null,le)):this.unsubscribe()},le);if(X.add(he),!pe)return he}L.d(Te,{f:()=>c})},4671:(rt,Te,L)=>{function c(X){return X}L.d(Te,{y:()=>c})},1144:(rt,Te,L)=>{L.d(Te,{z:()=>c});const c=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(rt,Te,L)=>{L.d(Te,{D:()=>X});var c=L(576);function X(V){return Symbol.asyncIterator&&(0,c.m)(null==V?void 0:V[Symbol.asyncIterator])}},576:(rt,Te,L)=>{function c(X){return"function"==typeof X}L.d(Te,{m:()=>c})},3670:(rt,Te,L)=>{L.d(Te,{c:()=>V});var c=L(8822),X=L(576);function V(ce){return(0,X.m)(ce[c.L])}},6495:(rt,Te,L)=>{L.d(Te,{T:()=>V});var c=L(2202),X=L(576);function V(ce){return(0,X.m)(null==ce?void 0:ce[c.h])}},8239:(rt,Te,L)=>{L.d(Te,{t:()=>X});var c=L(576);function X(V){return(0,c.m)(null==V?void 0:V.then)}},3260:(rt,Te,L)=>{L.d(Te,{Q:()=>V,L:()=>ce});var c=L(7582),X=L(576);function V(le){return(0,c.FC)(this,arguments,function*(){const he=le.getReader();try{for(;;){const{value:_e,done:ye}=yield(0,c.qq)(he.read());if(ye)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(_e)}}finally{he.releaseLock()}})}function ce(le){return(0,X.m)(null==le?void 0:le.getReader)}},3532:(rt,Te,L)=>{L.d(Te,{K:()=>X});var c=L(576);function X(V){return V&&(0,c.m)(V.schedule)}},4482:(rt,Te,L)=>{L.d(Te,{A:()=>X,e:()=>V});var c=L(576);function X(ce){return(0,c.m)(null==ce?void 0:ce.lift)}function V(ce){return le=>{if(X(le))return le.lift(function(pe){try{return ce(pe,this)}catch(he){this.error(he)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(rt,Te,L)=>{function c(){}L.d(Te,{Z:()=>c})},7849:(rt,Te,L)=>{L.d(Te,{h:()=>V});var c=L(2416),X=L(3410);function V(ce){X.z.setTimeout(()=>{const{onUnhandledError:le}=c.v;if(!le)throw ce;le(ce)})}},4532:(rt,Te,L)=>{function c(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Te,{z:()=>c})},5e3:(rt,Te,L)=>{L.d(Te,{deG:()=>gd,tb:()=>Ci,AFp:()=>oi,ip1:()=>EI,CZH:()=>rm,hGG:()=>vx,z2F:()=>Fc,sBO:()=>AI,Sil:()=>Nr,_Vd:()=>zg,EJc:()=>CI,SBq:()=>eh,qLn:()=>Yh,vpe:()=>pa,tBr:()=>to,XFs:()=>mt,OlP:()=>Un,zs3:()=>Fo,ZZ4:()=>ya,aQg:()=>$y,soG:()=>Ji,YKP:()=>Us,h0i:()=>_u,PXZ:()=>lx,R0b:()=>Ti,FiY:()=>na,Lbi:()=>im,g9A:()=>Zn,Qsj:()=>Cy,FYo:()=>Ey,JOm:()=>ko,q3G:()=>mn,tp0:()=>ra,Rgc:()=>Uo,dDg:()=>Ly,q4F:()=>Nf,GfV:()=>Tw,s_b:()=>_s,ifc:()=>Lt,eFA:()=>Qw,G48:()=>rE,Gpc:()=>q,X6Q:()=>nE,_c5:()=>yx,VLi:()=>Zw,c2e:()=>qw,zSh:()=>w0,wAp:()=>St,vHH:()=>Ve,EiD:()=>Xm,mCW:()=>it,qzn:()=>Ro,JVY:()=>Id,pB0:()=>I,eBb:()=>kp,L6k:()=>Gh,LAX:()=>C,cg1:()=>Wd,kL8:()=>lw,yhl:()=>aa,dqk:()=>$t,sIi:()=>_g,CqO:()=>vS,QGY:()=>Fb,F4k:()=>H_,RDi:()=>Pa,AaK:()=>_e,z3N:()=>Oo,qOj:()=>so,TTD:()=>Il,_Bn:()=>$T,xp6:()=>$v,uIk:()=>vg,Tol:()=>fu,ekj:()=>yi,Suo:()=>ir,Xpm:()=>Xn,lG2:()=>nt,Yz7:()=>we,cJS:()=>Bt,oAB:()=>Z,Yjl:()=>kt,Y36:()=>Cf,_UZ:()=>Rb,BQk:()=>Cg,ynx:()=>B_,qZA:()=>z0,TgZ:()=>bf,EpF:()=>bg,n5z:()=>Ol,LFG:()=>nr,$8M:()=>ti,$Z:()=>yS,NdJ:()=>W0,CRH:()=>_t,oxw:()=>Ub,ALo:()=>nI,lcZ:()=>rI,xi3:()=>iI,Q6J:()=>q0,s9C:()=>Bb,l5B:()=>Dy,iGM:()=>sh,CHM:()=>Ph,oJD:()=>e_,LSH:()=>dc,Udp:()=>Q0,d8E:()=>aw,YNc:()=>k_,_uU:()=>ty,Oqu:()=>xg,hij:()=>Tf});var c=L(7579),X=L(727),V=L(8306),ce=L(6451),le=L(3099);function pe(s){for(let a in s)if(s[a]===pe)return a;throw Error("Could not find renamed property on target object.")}function he(s,a){for(const l in a)a.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=a[l])}function _e(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(_e).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function ye(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const z=pe({__forward_ref__:pe});function q(s){return s.__forward_ref__=q,s.toString=function(){return _e(this())},s}function ee(s){return Ze(s)?s():s}function Ze(s){return"function"==typeof s&&s.hasOwnProperty(z)&&s.__forward_ref__===q}class Ve extends Error{constructor(a,l){super(function Ge(s,a){return`NG0${Math.abs(s)}${a?": "+a:""}`}(a,l)),this.code=a}}function ge(s){return"string"==typeof s?s:null==s?"":String(s)}function Re(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ge(s)}function Ee(s,a){const l=a?` in ${a}`:"";throw new Ve(-201,`No provider for ${Re(s)} found${l}`)}function re(s,a){null==s&&function te(s,a,l,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${l} ${d} ${a} <=Actual]`))}(a,s,null,"!=")}function we(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Bt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Jt(s){return ft(s,Ln)||ft(s,or)}function ft(s,a){return s.hasOwnProperty(a)?s[a]:null}function xn(s){return s&&(s.hasOwnProperty(Cr)||s.hasOwnProperty(Ii))?s[Cr]:null}const Ln=pe({\u0275prov:pe}),Cr=pe({\u0275inj:pe}),or=pe({ngInjectableDef:pe}),Ii=pe({ngInjectorDef:pe});var mt=(()=>((mt=mt||{})[mt.Default=0]="Default",mt[mt.Host=1]="Host",mt[mt.Self=2]="Self",mt[mt.SkipSelf=4]="SkipSelf",mt[mt.Optional=8]="Optional",mt))();let Ta;function ar(s){const a=Ta;return Ta=s,a}function Su(s,a,l){const d=Jt(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&mt.Optional?null:void 0!==a?a:void Ee(_e(s),"Injector")}function lr(s){return{toString:s}.toString()}var kr=(()=>((kr=kr||{})[kr.OnPush=0]="OnPush",kr[kr.Default=1]="Default",kr))(),Lt=(()=>{return(s=Lt||(Lt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Lt;var s})();const wt="undefined"!=typeof globalThis&&globalThis,Mt="undefined"!=typeof window&&window,mo="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,$t=wt||"undefined"!=typeof global&&global||Mt||mo,Ai={},At=[],qs=pe({\u0275cmp:pe}),Xt=pe({\u0275dir:pe}),is=pe({\u0275pipe:pe}),Yr=pe({\u0275mod:pe}),Mn=pe({\u0275fac:pe}),Gn=pe({__NG_ELEMENT_ID__:pe});let _o=0;function Xn(s){return lr(()=>{const l={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===kr.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||At,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Lt.Emulated,id:"c",styles:s.styles||At,_:null,setInput:null,schemas:s.schemas||null,tView:null},f=s.directives,_=s.features,w=s.pipes;return d.id+=_o++,d.inputs=se(s.inputs,l),d.outputs=se(s.outputs),_&&_.forEach(b=>b(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(Hr):null,d.pipeDefs=w?()=>("function"==typeof w?w():w).map(H):null,d})}function Hr(s){return Pt(s)||function Vn(s){return s[Xt]||null}(s)}function H(s){return function Cn(s){return s[is]||null}(s)}const B={};function Z(s){return lr(()=>{const a={type:s.type,bootstrap:s.bootstrap||At,declarations:s.declarations||At,imports:s.imports||At,exports:s.exports||At,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(B[s.id]=s.type),a})}function se(s,a){if(null==s)return Ai;const l={};for(const d in s)if(s.hasOwnProperty(d)){let f=s[d],_=f;Array.isArray(f)&&(_=f[1],f=f[0]),l[f]=d,a&&(a[f]=_)}return l}const nt=Xn;function kt(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Pt(s){return s[qs]||null}function hn(s,a){const l=s[Yr]||null;if(!l&&!0===a)throw new Error(`Type ${_e(s)} does not have '\u0275mod' property.`);return l}function Si(s){return Array.isArray(s)&&"object"==typeof s[1]}function zi(s){return Array.isArray(s)&&!0===s[1]}function Yc(s){return 0!=(8&s.flags)}function Eo(s){return 2==(2&s.flags)}function Aa(s){return 1==(1&s.flags)}function Jr(s){return null!==s.template}function Qc(s){return 0!=(512&s[2])}function qo(s,a){return s.hasOwnProperty(Mn)?s[Mn]:null}class Mi{constructor(a,l,d){this.previousValue=a,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function Il(){return Sa}function Sa(s){return s.type.prototype.ngOnChanges&&(s.setInput=xh),yp}function yp(){const s=Dl(this),a=null==s?void 0:s.current;if(a){const l=s.previous;if(l===Ai)s.previous=a;else for(let d in a)l[d]=a[d];s.current=null,this.ngOnChanges(a)}}function xh(s,a,l,d){const f=Dl(s)||function vp(s,a){return s[ed]=a}(s,{previous:Ai,current:null}),_=f.current||(f.current={}),w=f.previous,b=this.declaredInputs[l],D=w[b];_[b]=new Mi(D&&D.currentValue,a,w===Ai),s[d]=a}Il.ngInherit=!0;const ed="__ngSimpleChanges__";function Dl(s){return s[ed]||null}let ss;function Pa(s){ss=s}function Is(){return void 0!==ss?ss:"undefined"!=typeof document?document:void 0}function On(s){return!!s.listen}const rd={createRenderer:(s,a)=>Is()};function pn(s){for(;Array.isArray(s);)s=s[0];return s}function Oa(s,a){return pn(a[s])}function Dr(s,a){return pn(a[s.index])}function Gr(s,a){return s.data[a]}function os(s,a){return s[a]}function Pi(s,a){const l=a[s];return Si(l)?l:l[0]}function zo(s){return 4==(4&s[2])}function as(s){return 128==(128&s[2])}function Ds(s,a){return null==a?null:s[a]}function Ra(s){s[18]=0}function di(s,a){s[5]+=a;let l=s,d=s[3];for(;null!==d&&(1===a&&1===l[5]||-1===a&&0===l[5]);)d[5]+=a,l=d,d=d[3]}const Dt={lFrame:Ar(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ka(){return Dt.bindingsEnabled}function Pe(){return Dt.lFrame.lView}function Yt(){return Dt.lFrame.tView}function Ph(s){return Dt.lFrame.contextLView=s,s[8]}function Rn(){let s=Sl();for(;null!==s&&64===s.type;)s=s.parent;return s}function Sl(){return Dt.lFrame.currentTNode}function ls(s,a){const l=Dt.lFrame;l.currentTNode=s,l.isParent=a}function Lu(){return Dt.lFrame.isParent}function Co(){Dt.lFrame.isParent=!1}function bo(){return Dt.isInCheckNoChangesMode}function La(s){Dt.isInCheckNoChangesMode=s}function Kn(){const s=Dt.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}function Ua(){return Dt.lFrame.bindingIndex++}function us(s){const a=Dt.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,l}function Vu(s,a){const l=Dt.lFrame;l.bindingIndex=l.bindingRootIndex=s,Uu(a)}function Uu(s){Dt.lFrame.currentDirectiveIndex=s}function To(s){const a=Dt.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}function ad(){return Dt.lFrame.currentQueryIndex}function Ko(s){Dt.lFrame.currentQueryIndex=s}function Ym(s){const a=s[1];return 2===a.type?a.declTNode:1===a.type?s[6]:null}function ld(s,a,l){if(l&mt.SkipSelf){let f=a,_=s;for(;!(f=f.parent,null!==f||l&mt.Host||(f=Ym(_),null===f||(_=_[15],10&f.type))););if(null===f)return!1;a=f,s=_}const d=Dt.lFrame=Nh();return d.currentTNode=a,d.lView=s,!0}function Io(s){const a=Nh(),l=s[1];Dt.lFrame=a,a.currentTNode=l.firstChild,a.lView=s,a.tView=l,a.contextLView=s,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function Nh(){const s=Dt.lFrame,a=null===s?null:s.child;return null===a?Ar(s):a}function Ar(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function ud(){const s=Dt.lFrame;return Dt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const cd=ud;function Yo(){const s=ud();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Lr(){return Dt.lFrame.selectedIndex}function hi(s){Dt.lFrame.selectedIndex=s}function kn(){const s=Dt.lFrame;return Gr(s.tView,s.selectedIndex)}function Ml(s,a){for(let l=a.directiveStart,d=a.directiveEnd;l<d;l++){const _=s.data[l].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:b,ngAfterViewInit:D,ngAfterViewChecked:x,ngOnDestroy:P}=_;w&&(s.contentHooks||(s.contentHooks=[])).push(-l,w),b&&((s.contentHooks||(s.contentHooks=[])).push(l,b),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,b)),D&&(s.viewHooks||(s.viewHooks=[])).push(-l,D),x&&((s.viewHooks||(s.viewHooks=[])).push(l,x),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,x)),null!=P&&(s.destroyHooks||(s.destroyHooks=[])).push(l,P)}}function $u(s,a,l){Do(s,a,3,l)}function Qo(s,a,l,d){(3&s[2])===l&&Do(s,a,l,d)}function Gu(s,a){let l=s[2];(3&l)===a&&(l&=2047,l+=1,s[2]=l)}function Do(s,a,l,d){const _=null!=d?d:-1,w=a.length-1;let b=0;for(let D=void 0!==d?65535&s[18]:0;D<w;D++)if("number"==typeof a[D+1]){if(b=a[D],null!=d&&b>=d)break}else a[D]<0&&(s[18]+=65536),(b<_||-1==_)&&(Tp(s,l,a,D),s[18]=(4294901760&s[18])+D+2),D++}function Tp(s,a,l,d){const f=l[d]<0,_=l[d+1],b=s[f?-l[d]:l[d]];if(f){if(s[2]>>11<s[18]>>16&&(3&s[2])===a){s[2]+=2048;try{_.call(b)}finally{}}}else try{_.call(b)}finally{}}class qu{constructor(a,l,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function It(s,a,l){const d=On(s);let f=0;for(;f<l.length;){const _=l[f];if("number"==typeof _){if(0!==_)break;f++;const w=l[f++],b=l[f++],D=l[f++];d?s.setAttribute(a,b,D,w):a.setAttributeNS(w,b,D)}else{const w=_,b=l[++f];ei(w)?d&&s.setProperty(a,w,b):d?s.setAttribute(a,w,b):a.setAttribute(w,b),f++}}return f}function mr(s){return 3===s||4===s||6===s}function ei(s){return 64===s.charCodeAt(0)}function qr(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let l=-1;for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?l=f:0===l||ja(s,l,f,null,-1===l||2===l?a[++d]:null)}}return s}function ja(s,a,l,d,f){let _=0,w=s.length;if(-1===a)w=-1;else for(;_<s.length;){const b=s[_++];if("number"==typeof b){if(b===a){w=-1;break}if(b>a){w=_-1;break}}}for(;_<s.length;){const b=s[_];if("number"==typeof b)break;if(b===l){if(null===d)return void(null!==f&&(s[_+1]=f));if(d===s[_+1])return void(s[_+2]=f)}_++,null!==d&&_++,null!==f&&_++}-1!==w&&(s.splice(w,0,a),_=w+1),s.splice(_++,0,l),null!==d&&s.splice(_++,0,d),null!==f&&s.splice(_++,0,f)}function Ao(s){return-1!==s}function Ms(s){return 32767&s}function Zs(s,a){let l=function Fh(s){return s>>16}(s),d=a;for(;l>0;)d=d[15],l--;return d}let dd=!0;function Ps(s){const a=dd;return dd=s,a}let $a=0;function Tn(s,a){const l=fd(s,a);if(-1!==l)return l;const d=a[1];d.firstCreatePass&&(s.injectorIndex=a.length,zu(d.data,s),zu(a,null),zu(d.blueprint,null));const f=Pl(s,a),_=s.injectorIndex;if(Ao(f)){const w=Ms(f),b=Zs(f,a),D=b[1].data;for(let x=0;x<8;x++)a[_+x]=b[w+x]|D[w+x]}return a[_+8]=f,_}function zu(s,a){s.push(0,0,0,0,0,0,0,0,a)}function fd(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function Pl(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,d=null,f=a;for(;null!==f;){const _=f[1],w=_.type;if(d=2===w?_.declTNode:1===w?f[6]:null,null===d)return-1;if(l++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function Xo(s,a,l){!function hd(s,a,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(Gn)&&(d=l[Gn]),null==d&&(d=l[Gn]=$a++);const f=255&d;a.data[s+(f>>5)]|=1<<f}(s,a,l)}function ds(s,a,l){if(l&mt.Optional)return s;Ee(a,"NodeInjector")}function Sp(s,a,l,d){if(l&mt.Optional&&void 0===d&&(d=null),0==(l&(mt.Self|mt.Host))){const f=s[9],_=ar(void 0);try{return f?f.get(a,d,l&mt.Optional):Su(a,d,l&mt.Optional)}finally{ar(_)}}return ds(d,a,l)}function hs(s,a,l,d=mt.Default,f){if(null!==s){const _=function ea(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(Gn)?s[Gn]:void 0;return"number"==typeof a?a>=0?255&a:pd:a}(l);if("function"==typeof _){if(!ld(a,s,d))return d&mt.Host?ds(f,l,d):Sp(a,l,d,f);try{const w=_(d);if(null!=w||d&mt.Optional)return w;Ee(l)}finally{cd()}}else if("number"==typeof _){let w=null,b=fd(s,a),D=-1,x=d&mt.Host?a[16][6]:null;for((-1===b||d&mt.SkipSelf)&&(D=-1===b?Pl(s,a):a[b+8],-1!==D&&_r(d,!1)?(w=a[1],b=Ms(D),a=Zs(D,a)):b=-1);-1!==b;){const P=a[1];if(Nl(_,b,P.data)){const R=So(b,a,l,w,d,x);if(R!==Wu)return R}D=a[b+8],-1!==D&&_r(d,a[1].data[b+8]===x)&&Nl(_,b,a)?(w=P,b=Ms(D),a=Zs(D,a)):b=-1}}}return Sp(a,l,d,f)}const Wu={};function pd(){return new Ys(Rn(),Pe())}function So(s,a,l,d,f,_){const w=a[1],b=w.data[s+8],P=Ks(b,w,l,null==d?Eo(b)&&dd:d!=w&&0!=(3&b.type),f&mt.Host&&_===b);return null!==P?gn(a,w,P,b):Wu}function Ks(s,a,l,d,f){const _=s.providerIndexes,w=a.data,b=1048575&_,D=s.directiveStart,P=_>>20,G=f?b+P:s.directiveEnd;for(let Y=d?b:b+P;Y<G;Y++){const be=w[Y];if(Y<D&&l===be||Y>=D&&be.type===l)return Y}if(f){const Y=w[D];if(Y&&Jr(Y)&&Y.type===l)return D}return null}function gn(s,a,l,d){let f=s[l];const _=a.data;if(function Ip(s){return s instanceof qu}(f)){const w=f;w.resolving&&function ot(s,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new Ve(-200,`Circular dependency in DI detected for ${s}${l}`)}(Re(_[l]));const b=Ps(w.canSeeViewProviders);w.resolving=!0;const D=w.injectImpl?ar(w.injectImpl):null;ld(s,d,mt.Default);try{f=s[l]=w.factory(void 0,_,s,d),a.firstCreatePass&&l>=d.directiveStart&&function Rh(s,a,l){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:_}=a.type.prototype;if(d){const w=Sa(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,w),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,w)}f&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,f),_&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,_),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,_))}(l,_[l],a)}finally{null!==D&&ar(D),Ps(b),w.resolving=!1,cd()}}return f}function Nl(s,a,l){return!!(l[a+(s>>5)]&1<<s)}function _r(s,a){return!(s&mt.Self||s&mt.Host&&a)}class Ys{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,d){return hs(this._tNode,this._lView,a,d,l)}}function Ol(s){return lr(()=>{const a=s.prototype.constructor,l=a[Mn]||Kt(a),d=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==d;){const _=f[Mn]||Kt(f);if(_&&_!==l)return _;f=Object.getPrototypeOf(f)}return _=>new _})}function Kt(s){return Ze(s)?()=>{const a=Kt(ee(s));return a&&a()}:qo(s)}function ti(s){return function cs(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const l=s.attrs;if(l){const d=l.length;let f=0;for(;f<d;){const _=l[f];if(mr(_))break;if(0===_)f+=2;else if("number"==typeof _)for(f++;f<d&&"string"==typeof l[f];)f++;else{if(_===a)return l[f+1];f+=2}}}return null}(Rn(),s)}const Qs="__parameters__";function Wn(s,a,l){return lr(()=>{const d=function Ni(s){return function(...l){if(s){const d=s(...l);for(const f in d)this[f]=d[f]}}}(a);function f(..._){if(this instanceof f)return d.apply(this,_),this;const w=new f(..._);return b.annotation=w,b;function b(D,x,P){const R=D.hasOwnProperty(Qs)?D[Qs]:Object.defineProperty(D,Qs,{value:[]})[Qs];for(;R.length<=P;)R.push(null);return(R[P]=R[P]||[]).push(w),D}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}class Un{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=we({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const gd=new Un("AnalyzeForEntryComponents");function pi(s,a){void 0===a&&(a=s);for(let l=0;l<s.length;l++){let d=s[l];Array.isArray(d)?(a===s&&(a=s.slice(0,l)),pi(d,a)):a!==s&&a.push(d)}return a}function Ns(s,a){s.forEach(l=>Array.isArray(l)?Ns(l,a):a(l))}function Ll(s,a,l){a>=s.length?s.push(l):s.splice(a,0,l)}function Vl(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function Sr(s,a,l){let d=Po(s,a);return d>=0?s[1|d]=l:(d=~d,function Mp(s,a,l,d){let f=s.length;if(f==a)s.push(l,d);else if(1===f)s.push(d,s[0]),s[0]=l;else{for(f--,s.push(s[f-1],s[f]);f>a;)s[f]=s[f-2],f--;s[a]=l,s[a+1]=d}}(s,d,a,l)),d}function Mo(s,a){const l=Po(s,a);if(l>=0)return s[1|l]}function Po(s,a){return function Bh(s,a,l){let d=0,f=s.length>>l;for(;f!==d;){const _=d+(f-d>>1),w=s[_<<l];if(a===w)return _<<l;w>a?f=_:d=_+1}return~(f<<l)}(s,a,1)}const zr={},jl="__NG_DI_FLAG__",Ka="ngTempTokenPath",Hl=/\n/gm,Ki="__source",ec=pe({provide:String,useValue:pe});let Js;function No(s){const a=Js;return Js=s,a}function Qt(s,a=mt.Default){if(void 0===Js)throw new Ve(203,"");return null===Js?Su(s,void 0,a):Js.get(s,a&mt.Optional?null:void 0,a)}function nr(s,a=mt.Default){return(function Jn(){return Ta}()||Qt)(ee(s),a)}const Xs=nr;function $l(s){const a=[];for(let l=0;l<s.length;l++){const d=ee(s[l]);if(Array.isArray(d)){if(0===d.length)throw new Ve(900,"");let f,_=mt.Default;for(let w=0;w<d.length;w++){const b=d[w],D=Pp(b);"number"==typeof D?-1===D?f=b.token:_|=D:f=b}a.push(nr(f,_))}else a.push(nr(d))}return a}function eo(s,a){return s[jl]=a,s.prototype[jl]=a,s}function Pp(s){return s[jl]}const to=eo(Wn("Inject",s=>({token:s})),-1),na=eo(Wn("Optional"),8),ra=eo(Wn("SkipSelf"),4);let ps,Kl;function Os(s){var a;return(null===(a=function sa(){if(void 0===ps&&(ps=null,$t.trustedTypes))try{ps=$t.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return ps}())||void 0===a?void 0:a.createHTML(s))||s}function bd(s){var a;return(null===(a=function Yl(){if(void 0===Kl&&(Kl=null,$t.trustedTypes))try{Kl=$t.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return Kl}())||void 0===a?void 0:a.createHTML(s))||s}class ks{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Td extends ks{getTypeName(){return"HTML"}}class $h extends ks{getTypeName(){return"Style"}}class gs extends ks{getTypeName(){return"Script"}}class ac extends ks{getTypeName(){return"URL"}}class oa extends ks{getTypeName(){return"ResourceURL"}}function Oo(s){return s instanceof ks?s.changingThisBreaksApplicationSecurity:s}function Ro(s,a){const l=aa(s);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===a}function aa(s){return s instanceof ks&&s.getTypeName()||null}function Id(s){return new Td(s)}function Gh(s){return new $h(s)}function kp(s){return new gs(s)}function C(s){return new ac(s)}function I(s){return new oa(s)}class U{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const l=(new window.DOMParser).parseFromString(Os(a),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(a):(l.removeChild(l.firstChild),l)}catch(l){return null}}}class W{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const d=this.inertDocument.createElement("body");l.appendChild(d)}}getInertBodyElement(a){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=Os(a),l;const d=this.inertDocument.createElement("body");return d.innerHTML=Os(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(a){const l=a.attributes;for(let f=l.length-1;0<f;f--){const w=l.item(f).name;("xmlns:ns1"===w||0===w.indexOf("ns1:"))&&a.removeAttribute(w)}let d=a.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const de=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,$e=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function it(s){return(s=String(s)).match(de)||s.match($e)?s:"unsafe:"+s}function Et(s){const a={};for(const l of s.split(","))a[l]=!0;return a}function Wr(...s){const a={};for(const l of s)for(const d in l)l.hasOwnProperty(d)&&(a[d]=!0);return a}const dr=Et("area,br,col,hr,img,wbr"),la=Et("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Qa=Et("rp,rt"),lc=Wr(dr,Wr(la,Et("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Wr(Qa,Et("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Wr(Qa,la)),Dd=Et("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Fp=Et("srcset"),Ql=Wr(Dd,Fp,Et("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Et("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),qh=Et("script,style,template");class cc{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let l=a.firstChild,d=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?d=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,d&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let f=this.checkClobberedElement(l,l.nextSibling);if(f){l=f;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(a){const l=a.nodeName.toLowerCase();if(!lc.hasOwnProperty(l))return this.sanitizedSomething=!0,!qh.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const d=a.attributes;for(let f=0;f<d.length;f++){const _=d.item(f),w=_.name,b=w.toLowerCase();if(!Ql.hasOwnProperty(b)){this.sanitizedSomething=!0;continue}let D=_.value;Dd[b]&&(D=it(D)),Fp[b]&&(s=D,D=(s=String(s)).split(",").map(a=>it(a.trim())).join(", ")),this.buf.push(" ",w,'="',Lp(D),'"')}var s;return this.buf.push(">"),!0}endElement(a){const l=a.nodeName.toLowerCase();lc.hasOwnProperty(l)&&!dr.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(a){this.buf.push(Lp(a))}checkClobberedElement(a,l){if(l&&(a.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return l}}const Ad=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Dv=/([^\#-~ |!])/g;function Lp(s){return s.replace(/&/g,"&amp;").replace(Ad,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(Dv,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Sd;function Xm(s,a){let l=null;try{Sd=Sd||function M(s){const a=new W(s);return function K(){try{return!!(new window.DOMParser).parseFromString(Os(""),"text/html")}catch(s){return!1}}()?new U(a):a}(s);let d=a?String(a):"";l=Sd.getInertBodyElement(d);let f=5,_=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=_,_=l.innerHTML,l=Sd.getInertBodyElement(d)}while(d!==_);return Os((new cc).sanitizeChildren(Vp(l)||l))}finally{if(l){const d=Vp(l)||l;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function Vp(s){return"content"in s&&function zh(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var mn=(()=>((mn=mn||{})[mn.NONE=0]="NONE",mn[mn.HTML=1]="HTML",mn[mn.STYLE=2]="STYLE",mn[mn.SCRIPT=3]="SCRIPT",mn[mn.URL=4]="URL",mn[mn.RESOURCE_URL=5]="RESOURCE_URL",mn))();function e_(s){const a=Xa();return a?bd(a.sanitize(mn.HTML,s)||""):Ro(s,"HTML")?bd(Oo(s)):Xm(Is(),ge(s))}function dc(s){const a=Xa();return a?a.sanitize(mn.URL,s)||"":Ro(s,"URL")?Oo(s):it(ge(s))}function Xa(){const s=Pe();return s&&s[12]}const t_="__ngContext__";function mi(s,a){s[t_]=a}function Zh(s){const a=function Md(s){return s[t_]||null}(s);return a?Array.isArray(a)?a:a.lView:null}function nu(s){return s.ngOriginalError}function Rv(s,...a){s.error(...a)}class Yh{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a),d=function Ov(s){return s&&s.ngErrorLogger||Rv}(a);d(this._console,"ERROR",a),l&&d(this._console,"ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&nu(a);for(;l&&nu(l);)l=nu(l);return l||null}}const u_=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind($t))();function Li(s){return s instanceof Function?s():s}var ko=(()=>((ko=ko||{})[ko.Important=1]="Important",ko[ko.DashCase=2]="DashCase",ko))();function ef(s,a){return undefined(s,a)}function Od(s){const a=s[3];return zi(a)?a[3]:a}function hc(s){return tf(s[13])}function ni(s){return tf(s[4])}function tf(s){for(;null!==s&&!zi(s);)s=s[4];return s}function fc(s,a,l,d,f){if(null!=d){let _,w=!1;zi(d)?_=d:Si(d)&&(w=!0,d=d[0]);const b=pn(d);0===s&&null!==l?null==f?Ue(a,l,b):Se(a,l,b,f||null,!0):1===s&&null!==l?Se(a,l,b,f||null,!0):2===s?function sf(s,a,l){const d=Fn(s,a);d&&function st(s,a,l,d){On(s)?s.removeChild(a,l,d):a.removeChild(l)}(s,d,a,l)}(a,b,w):3===s&&a.destroyNode(b),null!=_&&function Ld(s,a,l,d,f){const _=l[7];_!==pn(l)&&fc(a,s,d,_,f);for(let b=10;b<l.length;b++){const D=l[b];_c(D[1],D,s,a,d,_)}}(a,s,_,l,f)}}function nf(s,a,l){if(On(s))return s.createElement(a,l);{const d=null!==l?function nd(s){const a=s.toLowerCase();return"svg"===a?"http://www.w3.org/2000/svg":"math"===a?"http://www.w3.org/1998/MathML/":null}(l):null;return null===d?s.createElement(a):s.createElementNS(d,a)}}function y(s,a){const l=s[9],d=l.indexOf(a),f=a[3];1024&a[2]&&(a[2]&=-1025,di(f,-1)),l.splice(d,1)}function p(s,a){if(s.length<=10)return;const l=10+a,d=s[l];if(d){const f=d[17];null!==f&&f!==s&&y(f,d),a>0&&(s[l-1][4]=d[4]);const _=Vl(s,10+a);!function Ur(s,a){_c(s,a,a[11],2,null,null),a[0]=null,a[6]=null}(d[1],d);const w=_[19];null!==w&&w.detachView(_[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function g(s,a){if(!(256&a[2])){const l=a[11];On(l)&&l.destroyNode&&_c(s,a,l,3,null,null),function iu(s){let a=s[13];if(!a)return E(s[1],s);for(;a;){let l=null;if(Si(a))l=a[13];else{const d=a[10];d&&(l=d)}if(!l){for(;a&&!a[4]&&a!==s;)Si(a)&&E(a[1],a),a=a[3];null===a&&(a=s),Si(a)&&E(a[1],a),l=a&&a[4]}a=l}}(a)}}function E(s,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function N(s,a){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let d=0;d<l.length;d+=2){const f=a[l[d]];if(!(f instanceof qu)){const _=l[d+1];if(Array.isArray(_))for(let w=0;w<_.length;w+=2){const b=f[_[w]],D=_[w+1];try{D.call(b)}finally{}}else try{_.call(f)}finally{}}}}(s,a),function S(s,a){const l=s.cleanup,d=a[7];let f=-1;if(null!==l)for(let _=0;_<l.length-1;_+=2)if("string"==typeof l[_]){const w=l[_+1],b="function"==typeof w?w(a):pn(a[w]),D=d[f=l[_+2]],x=l[_+3];"boolean"==typeof x?b.removeEventListener(l[_],D,x):x>=0?d[f=x]():d[f=-x].unsubscribe(),_+=2}else{const w=d[f=l[_+1]];l[_].call(w)}if(null!==d){for(let _=f+1;_<d.length;_++)d[_]();a[7]=null}}(s,a),1===a[1].type&&On(a[11])&&a[11].destroy();const l=a[17];if(null!==l&&zi(a[3])){l!==a[3]&&y(l,a);const d=a[19];null!==d&&d.detachView(s)}}}function $(s,a,l){return function J(s,a,l){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return l[0];if(2&d.flags){const f=s.data[d.directiveStart].encapsulation;if(f===Lt.None||f===Lt.Emulated)return null}return Dr(d,l)}(s,a.parent,l)}function Se(s,a,l,d,f){On(s)?s.insertBefore(a,l,d,f):a.insertBefore(l,d,f)}function Ue(s,a,l){On(s)?s.appendChild(a,l):a.appendChild(l)}function tt(s,a,l,d,f){null!==d?Se(s,a,l,d,f):Ue(s,a,l)}function Fn(s,a){return On(s)?s.parentNode(a):a.parentNode}let kd=function Zp(s,a,l){return 40&s.type?Dr(s,l):null};function mc(s,a,l,d){const f=$(s,d,a),_=a[11],b=function Rd(s,a,l){return kd(s,a,l)}(d.parent||a[6],d,a);if(null!=f)if(Array.isArray(l))for(let D=0;D<l.length;D++)tt(_,f,l[D],b,!1);else tt(_,f,l,b,!1)}function su(s,a){if(null!==a){const l=a.type;if(3&l)return Dr(a,s);if(4&l)return Fd(-1,s[a.index]);if(8&l){const d=a.child;if(null!==d)return su(s,d);{const f=s[a.index];return zi(f)?Fd(-1,f):pn(f)}}if(32&l)return ef(a,s)()||pn(s[a.index]);{const d=Yp(s,a);return null!==d?Array.isArray(d)?d[0]:su(Od(s[16]),d):su(s,a.next)}}return null}function Yp(s,a){return null!==a?s[16][6].projection[a.projection]:null}function Fd(s,a){const l=10+s+1;if(l<a.length){const d=a[l],f=d[1].firstChild;if(null!==f)return su(d,f)}return a[7]}function Qp(s,a,l,d,f,_,w){for(;null!=l;){const b=d[l.index],D=l.type;if(w&&0===a&&(b&&mi(pn(b),d),l.flags|=4),64!=(64&l.flags))if(8&D)Qp(s,a,l.child,d,f,_,!1),fc(a,s,f,b,_);else if(32&D){const x=ef(l,d);let P;for(;P=x();)fc(a,s,f,P,_);fc(a,s,f,b,_)}else 16&D?jv(s,a,d,l,f,_):fc(a,s,f,b,_);l=w?l.projectionNext:l.next}}function _c(s,a,l,d,f,_){Qp(l,d,s.firstChild,a,f,_,!1)}function jv(s,a,l,d,f,_){const w=l[16],D=w[6].projection[d.projection];if(Array.isArray(D))for(let x=0;x<D.length;x++)fc(a,s,f,D[x],_);else Qp(s,a,D,w[3],f,_,!0)}function bC(s,a,l){On(s)?s.setAttribute(a,"style",l):a.style.cssText=l}function __(s,a,l){On(s)?""===l?s.removeAttribute(a,"class"):s.setAttribute(a,"class",l):a.className=l}function TC(s,a,l){let d=s.length;for(;;){const f=s.indexOf(a,l);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const _=a.length;if(f+_===d||s.charCodeAt(f+_)<=32)return f}l=f+1}}const IC="ng-template";function Vd(s,a,l){let d=0;for(;d<s.length;){let f=s[d++];if(l&&"class"===f){if(f=s[d],-1!==TC(f.toLowerCase(),a,0))return!0}else if(1===f){for(;d<s.length&&"string"==typeof(f=s[d++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function ou(s){return 4===s.type&&s.value!==IC}function DC(s,a,l){return a===(4!==s.type||l?s.value:IC)}function Yi(s,a,l){let d=4;const f=s.attrs||[],_=function SC(s){for(let a=0;a<s.length;a++)if(mr(s[a]))return a;return s.length}(f);let w=!1;for(let b=0;b<a.length;b++){const D=a[b];if("number"!=typeof D){if(!w)if(4&d){if(d=2|1&d,""!==D&&!DC(s,D,l)||""===D&&1===a.length){if(_i(d))return!1;w=!0}}else{const x=8&d?D:a[++b];if(8&d&&null!==s.attrs){if(!Vd(s.attrs,x,l)){if(_i(d))return!1;w=!0}continue}const R=xA(8&d?"class":D,f,ou(s),l);if(-1===R){if(_i(d))return!1;w=!0;continue}if(""!==x){let G;G=R>_?"":f[R+1].toLowerCase();const Y=8&d?G:null;if(Y&&-1!==TC(Y,x,0)||2&d&&x!==G){if(_i(d))return!1;w=!0}}}}else{if(!w&&!_i(d)&&!_i(D))return!1;if(w&&_i(D))continue;w=!1,d=D|1&d}}return _i(d)||w}function _i(s){return 0==(1&s)}function xA(s,a,l,d){if(null===a)return-1;let f=0;if(d||!l){let _=!1;for(;f<a.length;){const w=a[f];if(w===s)return f;if(3===w||6===w)_=!0;else{if(1===w||2===w){let b=a[++f];for(;"string"==typeof b;)b=a[++f];continue}if(4===w)break;if(0===w){f+=4;continue}}f+=_?1:2}return-1}return function xC(s,a){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const d=s[l];if("number"==typeof d)return-1;if(d===a)return l;l++}return-1}(a,s)}function au(s,a,l=!1){for(let d=0;d<a.length;d++)if(Yi(s,a[d],l))return!0;return!1}function Hv(s,a){return s?":not("+a.trim()+")":a}function PC(s){let a=s[0],l=1,d=2,f="",_=!1;for(;l<s.length;){let w=s[l];if("string"==typeof w)if(2&d){const b=s[++l];f+="["+w+(b.length>0?'="'+b+'"':"")+"]"}else 8&d?f+="."+w:4&d&&(f+=" "+w);else""!==f&&!_i(w)&&(a+=Hv(_,f),f=""),d=w,_=_||!_i(d);l++}return""!==f&&(a+=Hv(_,f)),a}const Ut={};function $v(s){Gv(Yt(),Pe(),Lr()+s,bo())}function Gv(s,a,l,d){if(!d)if(3==(3&a[2])){const _=s.preOrderCheckHooks;null!==_&&$u(a,_,l)}else{const _=s.preOrderHooks;null!==_&&Qo(a,_,0,l)}hi(l)}function Jp(s,a){return s<<17|a<<2}function ua(s){return s>>17&32767}function Xp(s){return 2|s}function nl(s){return(131068&s)>>2}function eg(s,a){return-131069&s|a<<2}function y_(s){return 1|s}function Xv(s,a){const l=s.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const f=l[d],_=l[d+1];if(-1!==_){const w=s.data[_];Ko(f),w.contentQueries(2,a[_],_)}}}function ig(s,a,l,d,f,_,w,b,D,x){const P=a.blueprint.slice();return P[0]=f,P[2]=140|d,Ra(P),P[3]=P[15]=s,P[8]=l,P[10]=w||s&&s[10],P[11]=b||s&&s[11],P[12]=D||s&&s[12]||null,P[9]=x||s&&s[9]||null,P[6]=_,P[16]=2==a.type?s[16]:P,P}function Ud(s,a,l,d,f){let _=s.data[a];if(null===_)_=function sg(s,a,l,d,f){const _=Sl(),w=Lu(),D=s.data[a]=function jC(s,a,l,d,f,_){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?_:_&&_.parent,l,a,d,f);return null===s.firstChild&&(s.firstChild=D),null!==_&&(w?null==_.child&&null!==D.parent&&(_.child=D):null===_.next&&(_.next=D)),D}(s,a,l,d,f),function Ep(){return Dt.lFrame.inI18n}()&&(_.flags|=64);else if(64&_.type){_.type=l,_.value=d,_.attrs=f;const w=function Zo(){const s=Dt.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();_.injectorIndex=null===w?-1:w.injectorIndex}return ls(_,!0),_}function vc(s,a,l,d){if(0===l)return-1;const f=a.length;for(let _=0;_<l;_++)a.push(d),s.blueprint.push(d),s.data.push(null);return f}function T_(s,a,l){Io(a);try{const d=s.viewQuery;null!==d&&m0(1,d,l);const f=s.template;null!==f&&ag(s,a,f,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Xv(s,a),s.staticViewQueries&&m0(2,s.viewQuery,l);const _=s.components;null!==_&&function e0(s,a){for(let l=0;l<a.length;l++)cg(s,a[l])}(a,_)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{a[2]&=-5,Yo()}}function wc(s,a,l,d){const f=a[2];if(256==(256&f))return;Io(a);const _=bo();try{Ra(a),function Va(s){return Dt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&ag(s,a,l,2,d);const w=3==(3&f);if(!_)if(w){const x=s.preOrderCheckHooks;null!==x&&$u(a,x,null)}else{const x=s.preOrderHooks;null!==x&&Qo(a,x,0,null),Gu(a,0)}if(function GA(s){for(let a=hc(s);null!==a;a=ni(a)){if(!a[2])continue;const l=a[9];for(let d=0;d<l.length;d++){const f=l[d],_=f[3];0==(1024&f[2])&&di(_,1),f[2]|=1024}}}(a),function d0(s){for(let a=hc(s);null!==a;a=ni(a))for(let l=10;l<a.length;l++){const d=a[l],f=d[1];as(d)&&wc(f,d,f.template,d[8])}}(a),null!==s.contentQueries&&Xv(s,a),!_)if(w){const x=s.contentCheckHooks;null!==x&&$u(a,x)}else{const x=s.contentHooks;null!==x&&Qo(a,x,1),Gu(a,1)}!function LA(s,a){const l=s.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const f=l[d];if(f<0)hi(~f);else{const _=f,w=l[++d],b=l[++d];Vu(w,_),b(2,a[_])}}}finally{hi(-1)}}(s,a);const b=s.components;null!==b&&function gN(s,a){for(let l=0;l<a.length;l++)ZC(s,a[l])}(a,b);const D=s.viewQuery;if(null!==D&&m0(2,D,d),!_)if(w){const x=s.viewCheckHooks;null!==x&&$u(a,x)}else{const x=s.viewHooks;null!==x&&Qo(a,x,2),Gu(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),_||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,di(a[3],-1))}finally{Yo()}}function og(s,a,l,d){const f=a[10],_=!bo(),w=zo(a);try{_&&!w&&f.begin&&f.begin(),w&&T_(s,a,d),wc(s,a,l,d)}finally{_&&!w&&f.end&&f.end()}}function ag(s,a,l,d,f){const _=Lr(),w=2&d;try{hi(-1),w&&a.length>20&&Gv(s,a,20,bo()),l(d,f)}finally{hi(_)}}function Bd(s,a,l){if(Yc(a)){const f=a.directiveEnd;for(let _=a.directiveStart;_<f;_++){const w=s.data[_];w.contentQueries&&w.contentQueries(1,l[_],_)}}}function jd(s,a,l){!ka()||(function yN(s,a,l,d){const f=l.directiveStart,_=l.directiveEnd;s.firstCreatePass||Tn(l,a),mi(d,a);const w=l.initialInputs;for(let b=f;b<_;b++){const D=s.data[b],x=Jr(D);x&&HA(a,l,D);const P=gn(a,s,b,l);mi(P,a),null!==w&&$A(0,b-f,P,D,0,w),x&&(Pi(l.index,a)[8]=P)}}(s,a,l,Dr(l,a)),128==(128&l.flags)&&function BA(s,a,l){const d=l.directiveStart,f=l.directiveEnd,w=l.index,b=function xl(){return Dt.lFrame.currentDirectiveIndex}();try{hi(w);for(let D=d;D<f;D++){const x=s.data[D],P=a[D];Uu(D),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&l0(x,P)}}finally{hi(-1),Uu(b)}}(s,a,l))}function t0(s,a,l=Dr){const d=a.localNames;if(null!==d){let f=a.index+1;for(let _=0;_<d.length;_+=2){const w=d[_+1],b=-1===w?l(a,s):s[w];s[f++]=b}}}function I_(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=lg(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function lg(s,a,l,d,f,_,w,b,D,x){const P=20+d,R=P+f,G=function n0(s,a){const l=[];for(let d=0;d<a;d++)l.push(d<s?null:Ut);return l}(P,R),Y="function"==typeof x?x():x;return G[1]={type:s,blueprint:G,template:l,queries:null,viewQuery:b,declTNode:a,data:G.slice().fill(null,P),bindingStartIndex:P,expandoStartIndex:R,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:D,consts:Y,incompleteFirstPass:!1}}function ug(s,a,l,d){const f=QC(a);null===l?f.push(d):(f.push(l),s.firstCreatePass&&_0(s).push(d,f.length-1))}function o0(s,a,l){for(let d in s)if(s.hasOwnProperty(d)){const f=s[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(a,f):l[d]=[a,f]}return l}function ms(s,a,l,d,f,_,w,b){const D=Dr(a,l);let P,x=a.inputs;!b&&null!=x&&(P=x[d])?(N_(s,l,P,d,f),Eo(a)&&function a0(s,a){const l=Pi(a,s);16&l[2]||(l[2]|=64)}(l,a.index)):3&a.type&&(d=function $C(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),f=null!=w?w(f,a.value||"",d):f,On(_)?_.setProperty(D,d,f):ei(d)||(D.setProperty?D.setProperty(d,f):D[d]=f))}function qC(s,a,l,d){let f=!1;if(ka()){const _=function jA(s,a,l){const d=s.directiveRegistry;let f=null;if(d)for(let _=0;_<d.length;_++){const w=d[_];au(l,w.selectors,!1)&&(f||(f=[]),Xo(Tn(l,a),s,w.type),Jr(w)?(u0(s,l),f.unshift(w)):f.push(w))}return f}(s,a,l),w=null===d?null:{"":-1};if(null!==_){f=!0,zC(l,s.data.length,_.length);for(let P=0;P<_.length;P++){const R=_[P];R.providersResolver&&R.providersResolver(R)}let b=!1,D=!1,x=vc(s,a,_.length,null);for(let P=0;P<_.length;P++){const R=_[P];l.mergedAttrs=qr(l.mergedAttrs,R.hostAttrs),x_(s,l,a,x,R),df(x,R,w),null!==R.contentQueries&&(l.flags|=8),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(l.flags|=128);const G=R.type.prototype;!b&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),b=!0),!D&&(G.ngOnChanges||G.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),D=!0),x++}!function HC(s,a){const d=a.directiveEnd,f=s.data,_=a.attrs,w=[];let b=null,D=null;for(let x=a.directiveStart;x<d;x++){const P=f[x],R=P.inputs,G=null===_||ou(a)?null:WC(R,_);w.push(G),b=o0(R,x,b),D=o0(P.outputs,x,D)}null!==b&&(b.hasOwnProperty("class")&&(a.flags|=16),b.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=w,a.inputs=b,a.outputs=D}(s,l)}w&&function S_(s,a,l){if(a){const d=s.localNames=[];for(let f=0;f<a.length;f+=2){const _=l[a[f+1]];if(null==_)throw new Ve(-301,!1);d.push(a[f],_)}}}(l,d,w)}return l.mergedAttrs=qr(l.mergedAttrs,l.attrs),f}function UA(s,a,l,d,f,_){const w=_.hostBindings;if(w){let b=s.hostBindingOpCodes;null===b&&(b=s.hostBindingOpCodes=[]);const D=~a.index;(function _N(s){let a=s.length;for(;a>0;){const l=s[--a];if("number"==typeof l&&l<0)return l}return 0})(b)!=D&&b.push(D),b.push(d,f,w)}}function l0(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function u0(s,a){a.flags|=2,(s.components||(s.components=[])).push(a.index)}function df(s,a,l){if(l){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)l[a.exportAs[d]]=s;Jr(a)&&(l[""]=s)}}function zC(s,a,l){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+l,s.providerIndexes=a}function x_(s,a,l,d,f){s.data[d]=f;const _=f.factory||(f.factory=qo(f.type)),w=new qu(_,Jr(f),null);s.blueprint[d]=w,l[d]=w,UA(s,a,0,d,vc(s,l,f.hostVars,Ut),f)}function HA(s,a,l){const d=Dr(a,s),f=I_(l),_=s[10],w=hf(s,ig(s,f,null,l.onPush?64:16,d,a,_,_.createRenderer(d,l),null,null));s[a.index]=w}function lu(s,a,l,d,f,_){const w=Dr(s,a);!function M_(s,a,l,d,f,_,w){if(null==_)On(s)?s.removeAttribute(a,f,l):a.removeAttribute(f);else{const b=null==w?ge(_):w(_,d||"",f);On(s)?s.setAttribute(a,f,b,l):l?a.setAttributeNS(l,f,b):a.setAttribute(f,b)}}(a[11],w,_,s.value,l,d,f)}function $A(s,a,l,d,f,_){const w=_[a];if(null!==w){const b=d.setInput;for(let D=0;D<w.length;){const x=w[D++],P=w[D++],R=w[D++];null!==b?d.setInput(l,R,x,P):l[P]=R}}}function WC(s,a){let l=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;s.hasOwnProperty(f)&&(null===l&&(l=[]),l.push(f,s[f],a[d+1])),d+=2}else d+=2;else d+=4}return l}function c0(s,a,l,d){return new Array(s,!0,!1,a,null,0,d,l,null,null)}function ZC(s,a){const l=Pi(a,s);if(as(l)){const d=l[1];80&l[2]?wc(d,l,d.template,l[8]):l[5]>0&&h0(l)}}function h0(s){for(let d=hc(s);null!==d;d=ni(d))for(let f=10;f<d.length;f++){const _=d[f];if(1024&_[2]){const w=_[1];wc(w,_,w.template,_[8])}else _[5]>0&&h0(_)}const l=s[1].components;if(null!==l)for(let d=0;d<l.length;d++){const f=Pi(l[d],s);as(f)&&f[5]>0&&h0(f)}}function cg(s,a){const l=Pi(a,s),d=l[1];(function qA(s,a){for(let l=a.length;l<s.blueprint.length;l++)a.push(s.blueprint[l])})(d,l),T_(d,l,l[8])}function hf(s,a){return s[13]?s[14][4]=a:s[13]=a,s[14]=a,a}function f0(s){for(;s;){s[2]|=64;const a=Od(s);if(Qc(s)&&!a)return s;s=a}return null}function g0(s,a,l){const d=a[10];d.begin&&d.begin();try{wc(s,a,s.template,l)}catch(f){throw ZA(a,f),f}finally{d.end&&d.end()}}function dg(s){!function P_(s){for(let a=0;a<s.components.length;a++){const l=s.components[a],d=Zh(l),f=d[1];og(f,d,f.template,l)}}(s[8])}function m0(s,a,l){Ko(0),a(s,l)}const WA=(()=>Promise.resolve(null))();function QC(s){return s[7]||(s[7]=[])}function _0(s){return s.cleanup||(s.cleanup=[])}function ZA(s,a){const l=s[9],d=l?l.get(Yh,null):null;d&&d.handleError(a)}function N_(s,a,l,d,f){for(let _=0;_<l.length;){const w=l[_++],b=l[_++],D=a[w],x=s.data[w];null!==x.setInput?x.setInput(D,f,d,b):D[b]=f}}function uu(s,a,l){const d=Oa(a,s);!function ru(s,a,l){On(s)?s.setValue(a,l):a.textContent=l}(s[11],d,l)}function hg(s,a,l){let d=l?s.styles:null,f=l?s.classes:null,_=0;if(null!==a)for(let w=0;w<a.length;w++){const b=a[w];"number"==typeof b?_=b:1==_?f=ye(f,b):2==_&&(d=ye(d,b+": "+a[++w]+";"))}l?s.styles=d:s.stylesWithoutHost=d,l?s.classes=f:s.classesWithoutHost=f}const y0=new Un("INJECTOR",-1);class v0{get(a,l=zr){if(l===zr){const d=new Error(`NullInjectorError: No provider for ${_e(a)}!`);throw d.name="NullInjectorError",d}return l}}const w0=new Un("Set Injector scope."),pf={},YA={};let E0;function fg(){return void 0===E0&&(E0=new v0),E0}function C0(s,a=null,l=null,d){const f=eb(s,a,l,d);return f._resolveInjectorDefTypes(),f}function eb(s,a=null,l=null,d){return new tb(s,l,a||fg(),d)}class tb{constructor(a,l,d,f=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const _=[];l&&Ns(l,b=>this.processProvider(b,a,l)),Ns([a],b=>this.processInjectorType(b,[],_)),this.records.set(y0,gf(void 0,this));const w=this.records.get(w0);this.scope=null!=w?w.value:null,this.source=f||("object"==typeof a?null:_e(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,l=zr,d=mt.Default){this.assertNotDestroyed();const f=No(this),_=ar(void 0);try{if(!(d&mt.SkipSelf)){let b=this.records.get(a);if(void 0===b){const D=function XA(s){return"function"==typeof s||"object"==typeof s&&s instanceof Un}(a)&&Jt(a);b=D&&this.injectableDefInScope(D)?gf(b0(a),pf):null,this.records.set(a,b)}if(null!=b)return this.hydrate(a,b)}return(d&mt.Self?fg():this.parent).get(a,l=d&mt.Optional&&l===zr?null:l)}catch(w){if("NullInjectorError"===w.name){if((w[Ka]=w[Ka]||[]).unshift(_e(a)),f)throw w;return function wd(s,a,l,d){const f=s[Ka];throw a[Ki]&&f.unshift(a[Ki]),s.message=function Gl(s,a,l,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let f=_e(a);if(Array.isArray(a))f=a.map(_e).join(" -> ");else if("object"==typeof a){let _=[];for(let w in a)if(a.hasOwnProperty(w)){let b=a[w];_.push(w+":"+("string"==typeof b?JSON.stringify(b):_e(b)))}f=`{${_.join(", ")}}`}return`${l}${d?"("+d+")":""}[${f}]: ${s.replace(Hl,"\n  ")}`}("\n"+s.message,f,l,d),s.ngTokenPath=f,s[Ka]=null,s}(w,a,"R3InjectorError",this.source)}throw w}finally{ar(_),No(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((d,f)=>a.push(_e(f))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ve(205,!1)}processInjectorType(a,l,d){if(!(a=ee(a)))return!1;let f=xn(a);const _=null==f&&a.ngModule||void 0,w=void 0===_?a:_,b=-1!==d.indexOf(w);if(void 0!==_&&(f=xn(_)),null==f)return!1;if(null!=f.imports&&!b){let P;d.push(w);try{Ns(f.imports,R=>{this.processInjectorType(R,l,d)&&(void 0===P&&(P=[]),P.push(R))})}finally{}if(void 0!==P)for(let R=0;R<P.length;R++){const{ngModule:G,providers:Y}=P[R];Ns(Y,be=>this.processProvider(be,G,Y||At))}}this.injectorDefTypes.add(w);const D=qo(w)||(()=>new w);this.records.set(w,gf(D,pf));const x=f.providers;if(null!=x&&!b){const P=a;Ns(x,R=>this.processProvider(R,P,x))}return void 0!==_&&void 0!==a.providers}processProvider(a,l,d){let f=pg(a=ee(a))?a:ee(a&&a.provide);const _=function QA(s,a,l){return I0(s)?gf(void 0,s.useValue):gf(T0(s),pf)}(a);if(pg(a)||!0!==a.multi)this.records.get(f);else{let w=this.records.get(f);w||(w=gf(void 0,pf,!0),w.factory=()=>$l(w.multi),this.records.set(f,w)),f=a,w.multi.push(a)}this.records.set(f,_)}hydrate(a,l){return l.value===pf&&(l.value=YA,l.value=l.factory()),"object"==typeof l.value&&l.value&&function ib(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this.onDestroy.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=ee(a.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function b0(s){const a=Jt(s),l=null!==a?a.factory:qo(s);if(null!==l)return l;if(s instanceof Un)throw new Ve(204,!1);if(s instanceof Function)return function nb(s){const a=s.length;if(a>0)throw function ta(s,a){const l=[];for(let d=0;d<s;d++)l.push(a);return l}(a,"?"),new Ve(204,!1);const l=function on(s){const a=s&&(s[Ln]||s[or]);if(a){const l=function Hn(s){if(s.hasOwnProperty("name"))return s.name;const a=(""+s).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Ve(204,!1)}function T0(s,a,l){let d;if(pg(s)){const f=ee(s);return qo(f)||b0(f)}if(I0(s))d=()=>ee(s.useValue);else if(function EN(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...$l(s.deps||[]));else if(function wN(s){return!(!s||!s.useExisting)}(s))d=()=>nr(ee(s.useExisting));else{const f=ee(s&&(s.useClass||s.provide));if(!function JA(s){return!!s.deps}(s))return qo(f)||b0(f);d=()=>new f(...$l(s.deps))}return d}function gf(s,a,l=!1){return{factory:s,value:a,multi:l?[]:void 0}}function I0(s){return null!==s&&"object"==typeof s&&ec in s}function pg(s){return"function"==typeof s}let Fo=(()=>{class s{static create(l,d){var f;if(Array.isArray(l))return C0({name:""},d,l,"");{const _=null!==(f=l.name)&&void 0!==f?f:"";return C0({name:_},l.parent,l.providers,_)}}}return s.THROW_IF_NOT_FOUND=zr,s.NULL=new v0,s.\u0275prov=we({token:s,providedIn:"any",factory:()=>nr(y0)}),s.__NG_ELEMENT_ID__=-1,s})();function IN(s,a){Ml(Zh(s)[1],Rn())}function so(s){let a=function Ce(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const d=[s];for(;a;){let f;if(Jr(s))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Ve(903,"");f=a.\u0275dir}if(f){if(l){d.push(f);const w=s;w.inputs=k(s.inputs),w.declaredInputs=k(s.declaredInputs),w.outputs=k(s.outputs);const b=f.hostBindings;b&&hb(s,b);const D=f.viewQuery,x=f.contentQueries;if(D&&da(s,D),x&&S0(s,x),he(s.inputs,f.inputs),he(s.declaredInputs,f.declaredInputs),he(s.outputs,f.outputs),Jr(f)&&f.data.animation){const P=s.data;P.animation=(P.animation||[]).concat(f.data.animation)}}const _=f.features;if(_)for(let w=0;w<_.length;w++){const b=_[w];b&&b.ngInherit&&b(s),b===so&&(l=!1)}}a=Object.getPrototypeOf(a)}!function cu(s){let a=0,l=null;for(let d=s.length-1;d>=0;d--){const f=s[d];f.hostVars=a+=f.hostVars,f.hostAttrs=qr(f.hostAttrs,l=qr(l,f.hostAttrs))}}(d)}function k(s){return s===Ai?{}:s===At?[]:s}function da(s,a){const l=s.viewQuery;s.viewQuery=l?(d,f)=>{a(d,f),l(d,f)}:a}function S0(s,a){const l=s.contentQueries;s.contentQueries=l?(d,f,_)=>{a(d,f,_),l(d,f,_)}:a}function hb(s,a){const l=s.hostBindings;s.hostBindings=l?(d,f)=>{a(d,f),l(d,f)}:a}let Hd=null;function Ec(){if(!Hd){const s=$t.Symbol;if(s&&s.iterator)Hd=s.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const d=a[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(Hd=d)}}}return Hd}function _g(s){return!!x0(s)&&(Array.isArray(s)||!(s instanceof Map)&&Ec()in s)}function x0(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function sl(s,a,l){return s[a]=l}function Qi(s,a,l){return!Object.is(s[a],l)&&(s[a]=l,!0)}function vr(s,a,l,d){const f=Qi(s,a,l);return Qi(s,a+1,d)||f}function vg(s,a,l,d){const f=Pe();return Qi(f,Ua(),a)&&(Yt(),lu(kn(),f,s,a,l,d)),vg}function hu(s,a,l,d){return Qi(s,Ua(),l)?a+ge(l)+d:Ut}function k_(s,a,l,d,f,_,w,b){const D=Pe(),x=Yt(),P=s+20,R=x.firstCreatePass?function yb(s,a,l,d,f,_,w,b,D){const x=a.consts,P=Ud(a,s,4,w||null,Ds(x,b));qC(a,l,P,Ds(x,D)),Ml(a,P);const R=P.tViews=lg(2,P,d,f,_,a.directiveRegistry,a.pipeRegistry,null,a.schemas,x);return null!==a.queries&&(a.queries.template(a,P),R.queries=a.queries.embeddedTView(P)),P}(P,x,D,a,l,d,f,_,w):x.data[P];ls(R,!1);const G=D[11].createComment("");mc(x,D,G,R),mi(G,D),hf(D,D[P]=c0(G,D,G,R)),Aa(R)&&jd(x,D,R),null!=w&&t0(D,R,b)}function Cf(s,a=mt.Default){const l=Pe();return null===l?nr(s,a):hs(Rn(),l,ee(s),a)}function yS(){throw new Error("invalid")}function q0(s,a,l){const d=Pe();return Qi(d,Ua(),a)&&ms(Yt(),kn(),d,s,a,d[11],l,!1),q0}function Ob(s,a,l,d,f){const w=f?"class":"style";N_(s,l,a.inputs[w],w,d)}function bf(s,a,l,d){const f=Pe(),_=Yt(),w=20+s,b=f[11],D=f[w]=nf(b,a,function Hu(){return Dt.lFrame.currentNamespace}()),x=_.firstCreatePass?function SN(s,a,l,d,f,_,w){const b=a.consts,x=Ud(a,s,2,f,Ds(b,_));return qC(a,l,x,Ds(b,w)),null!==x.attrs&&hg(x,x.attrs,!1),null!==x.mergedAttrs&&hg(x,x.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,x),x}(w,_,f,0,a,l,d):_.data[w];ls(x,!0);const P=x.mergedAttrs;null!==P&&It(b,D,P);const R=x.classes;null!==R&&__(b,D,R);const G=x.styles;return null!==G&&bC(b,D,G),64!=(64&x.flags)&&mc(_,f,D,x),0===function Wo(){return Dt.lFrame.elementDepthCount}()&&mi(D,f),function Fu(){Dt.lFrame.elementDepthCount++}(),Aa(x)&&(jd(_,f,x),Bd(_,x,f)),null!==d&&t0(f,x),bf}function z0(){let s=Rn();Lu()?Co():(s=s.parent,ls(s,!1));const a=s;!function Mh(){Dt.lFrame.elementDepthCount--}();const l=Yt();return l.firstCreatePass&&(Ml(l,s),Yc(s)&&l.queries.elementEnd(s)),null!=a.classesWithoutHost&&function Dp(s){return 0!=(16&s.flags)}(a)&&Ob(l,a,Pe(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Ap(s){return 0!=(32&s.flags)}(a)&&Ob(l,a,Pe(),a.stylesWithoutHost,!1),z0}function Rb(s,a,l,d){return bf(s,a,l,d),z0(),Rb}function B_(s,a,l){const d=Pe(),f=Yt(),_=s+20,w=f.firstCreatePass?function kb(s,a,l,d,f){const _=a.consts,w=Ds(_,d),b=Ud(a,s,8,"ng-container",w);return null!==w&&hg(b,w,!0),qC(a,l,b,Ds(_,f)),null!==a.queries&&a.queries.elementStart(a,b),b}(_,f,d,a,l):f.data[_];ls(w,!0);const b=d[_]=d[11].createComment("");return mc(f,d,b,w),mi(b,d),Aa(w)&&(jd(f,d,w),Bd(f,w,d)),null!=l&&t0(d,w),B_}function Cg(){let s=Rn();const a=Yt();return Lu()?Co():(s=s.parent,ls(s,!1)),a.firstCreatePass&&(Ml(a,s),Yc(s)&&a.queries.elementEnd(s)),Cg}function bg(){return Pe()}function Fb(s){return!!s&&"function"==typeof s.then}function H_(s){return!!s&&"function"==typeof s.subscribe}const vS=H_;function W0(s,a,l,d){const f=Pe(),_=Yt(),w=Rn();return function Lb(s,a,l,d,f,_,w,b){const D=Aa(d),P=s.firstCreatePass&&_0(s),R=a[8],G=QC(a);let Y=!0;if(3&d.type||b){const We=Dr(d,a),dt=b?b(We):We,Ne=G.length,yt=b?qt=>b(pn(qt[d.index])):d.index;if(On(l)){let qt=null;if(!b&&D&&(qt=function ES(s,a,l,d){const f=s.cleanup;if(null!=f)for(let _=0;_<f.length-1;_+=2){const w=f[_];if(w===l&&f[_+1]===d){const b=a[7],D=f[_+2];return b.length>D?b[D]:null}"string"==typeof w&&(_+=2)}return null}(s,a,f,d.index)),null!==qt)(qt.__ngLastListenerFn__||qt).__ngNextListenerFn__=_,qt.__ngLastListenerFn__=_,Y=!1;else{_=Vb(d,a,R,_,!1);const wn=l.listen(dt,f,_);G.push(_,wn),P&&P.push(f,yt,Ne,Ne+1)}}else _=Vb(d,a,R,_,!0),dt.addEventListener(f,_,w),G.push(_),P&&P.push(f,yt,Ne,w)}else _=Vb(d,a,R,_,!1);const be=d.outputs;let Be;if(Y&&null!==be&&(Be=be[f])){const We=Be.length;if(We)for(let dt=0;dt<We;dt+=2){const Bs=a[Be[dt]][Be[dt+1]].subscribe(_),Uc=G.length;G.push(_,Bs),P&&P.push(f,d.index,Uc,-(Uc+1))}}}(_,f,f[11],w,s,a,!!l,d),W0}function CS(s,a,l,d){try{return!1!==l(d)}catch(f){return ZA(s,f),!1}}function Vb(s,a,l,d,f){return function _(w){if(w===Function)return d;const b=2&s.flags?Pi(s.index,a):a;0==(32&a[2])&&f0(b);let D=CS(a,0,d,w),x=_.__ngNextListenerFn__;for(;x;)D=CS(a,0,x,w)&&D,x=x.__ngNextListenerFn__;return f&&!1===D&&(w.preventDefault(),w.returnValue=!1),D}}function Ub(s=1){return function xs(s){return(Dt.lFrame.contextLView=function Bu(s,a){for(;s>0;)a=a[15],s--;return a}(s,Dt.lFrame.contextLView))[8]}(s)}function Bb(s,a,l){return jb(s,"",a,"",l),Bb}function jb(s,a,l,d,f){const _=Pe(),w=hu(_,a,l,d);return w!==Ut&&ms(Yt(),kn(),_,s,w,_[11],f,!1),jb}function Tg(s,a,l,d,f){const _=s[l+1],w=null===a;let b=d?ua(_):nl(_),D=!1;for(;0!==b&&(!1===D||w);){const P=s[b+1];K0(s[b],a)&&(D=!0,s[b+1]=d?y_(P):Xp(P)),b=d?ua(P):nl(P)}D&&(s[l+1]=d?Xp(_):y_(_))}function K0(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&Po(s,a)>=0}const Kr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Gb(s){return s.substring(Kr.key,Kr.keyEnd)}function zb(s,a){const l=Kr.textEnd;return l===a?-1:(a=Kr.keyEnd=function Y_(s,a,l){for(;a<l&&s.charCodeAt(a)>32;)a++;return a}(s,Kr.key=a,l),Ft(s,a,l))}function Ft(s,a,l){for(;a<l&&s.charCodeAt(a)<=32;)a++;return a}function Q0(s,a,l){return Lo(s,a,l,!1),Q0}function yi(s,a){return Lo(s,a,null,!0),yi}function fu(s){!function ao(s,a,l,d){const f=Yt(),_=us(2);f.firstUpdatePass&&Ui(f,null,_,d);const w=Pe();if(l!==Ut&&Qi(w,_,l)){const b=f.data[Lr()];if(ey(b,d)&&!J0(f,_)){let D=d?b.classesWithoutHost:b.stylesWithoutHost;null!==D&&(l=ye(D,l||"")),Ob(f,b,w,l,d)}else!function Kb(s,a,l,d,f,_,w,b){f===Ut&&(f=At);let D=0,x=0,P=0<f.length?f[0]:null,R=0<_.length?_[0]:null;for(;null!==P||null!==R;){const G=D<f.length?f[D+1]:void 0,Y=x<_.length?_[x+1]:void 0;let Be,be=null;P===R?(D+=2,x+=2,G!==Y&&(be=R,Be=Y)):null===R||null!==P&&P<R?(D+=2,be=P):(x+=2,be=R,Be=Y),null!==be&&J_(s,a,l,d,be,Be,w,b),P=D<f.length?f[D]:null,R=x<_.length?_[x]:null}}(f,b,w,w[11],w[_+1],w[_+1]=function TS(s,a,l){if(null==l||""===l)return At;const d=[],f=Oo(l);if(Array.isArray(f))for(let _=0;_<f.length;_++)s(d,f[_],!0);else if("object"==typeof f)for(const _ in f)f.hasOwnProperty(_)&&s(d,_,f[_]);else"string"==typeof f&&a(d,f);return d}(s,a,l),d,_)}}(Sr,al,s,!0)}function al(s,a){for(let l=function qb(s){return function K_(s){Kr.key=0,Kr.keyEnd=0,Kr.value=0,Kr.valueEnd=0,Kr.textEnd=s.length}(s),zb(s,Ft(s,0,Kr.textEnd))}(a);l>=0;l=zb(a,l))Sr(s,Gb(a),!0)}function Lo(s,a,l,d){const f=Pe(),_=Yt(),w=us(2);_.firstUpdatePass&&Ui(_,s,w,d),a!==Ut&&Qi(f,w,a)&&J_(_,_.data[Lr()],f,f[11],s,f[w+1]=function Yb(s,a){return null==s||("string"==typeof a?s+=a:"object"==typeof s&&(s=_e(Oo(s)))),s}(a,l),d,w)}function J0(s,a){return a>=s.expandoStartIndex}function Ui(s,a,l,d){const f=s.data;if(null===f[l+1]){const _=f[Lr()],w=J0(s,l);ey(_,d)&&null===a&&!w&&(a=!1),a=function bS(s,a,l,d){const f=To(s);let _=d?a.residualClasses:a.residualStyles;if(null===f)0===(d?a.classBindings:a.styleBindings)&&(l=Sg(l=Ag(null,s,a,l,d),a.attrs,d),_=null);else{const w=a.directiveStylingLast;if(-1===w||s[w]!==f)if(l=Ag(f,s,a,l,d),null===_){let D=function Dg(s,a,l){const d=l?a.classBindings:a.styleBindings;if(0!==nl(d))return s[ua(d)]}(s,a,d);void 0!==D&&Array.isArray(D)&&(D=Ag(null,s,a,D[1],d),D=Sg(D,a.attrs,d),function Q_(s,a,l,d){s[ua(l?a.classBindings:a.styleBindings)]=d}(s,a,d,D))}else _=function ll(s,a,l){let d;const f=a.directiveEnd;for(let _=1+a.directiveStylingLast;_<f;_++)d=Sg(d,s[_].hostAttrs,l);return Sg(d,a.attrs,l)}(s,a,d)}return void 0!==_&&(d?a.residualClasses=_:a.residualStyles=_),l}(f,_,a,d),function qd(s,a,l,d,f,_){let w=_?a.classBindings:a.styleBindings,b=ua(w),D=nl(w);s[d]=l;let P,x=!1;if(Array.isArray(l)){const R=l;P=R[1],(null===P||Po(R,P)>0)&&(x=!0)}else P=l;if(f)if(0!==D){const G=ua(s[b+1]);s[d+1]=Jp(G,b),0!==G&&(s[G+1]=eg(s[G+1],d)),s[b+1]=function RC(s,a){return 131071&s|a<<17}(s[b+1],d)}else s[d+1]=Jp(b,0),0!==b&&(s[b+1]=eg(s[b+1],d)),b=d;else s[d+1]=Jp(D,0),0===b?b=d:s[D+1]=eg(s[D+1],d),D=d;x&&(s[d+1]=Xp(s[d+1])),Tg(s,P,d,!0),Tg(s,P,d,!1),function ON(s,a,l,d,f){const _=f?s.residualClasses:s.residualStyles;null!=_&&"string"==typeof a&&Po(_,a)>=0&&(l[d+1]=y_(l[d+1]))}(a,P,s,d,_),w=Jp(b,D),_?a.classBindings=w:a.styleBindings=w}(f,_,a,l,w,d)}}function Ag(s,a,l,d,f){let _=null;const w=l.directiveEnd;let b=l.directiveStylingLast;for(-1===b?b=l.directiveStart:b++;b<w&&(_=a[b],d=Sg(d,_.hostAttrs,f),_!==s);)b++;return null!==s&&(l.directiveStylingLast=b),d}function Sg(s,a,l){const d=l?1:2;let f=-1;if(null!==a)for(let _=0;_<a.length;_++){const w=a[_];"number"==typeof w?f=w:f===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Sr(s,w,!!l||a[++_]))}return void 0===s?null:s}function J_(s,a,l,d,f,_,w,b){if(!(3&a.type))return;const D=s.data,x=D[b+1];X_(function Wv(s){return 1==(1&s)}(x)?X0(D,a,l,f,nl(x),w):void 0)||(X_(_)||function zv(s){return 2==(2&s)}(x)&&(_=X0(D,null,l,f,b,w)),function tl(s,a,l,d,f){const _=On(s);if(a)f?_?s.addClass(l,d):l.classList.add(d):_?s.removeClass(l,d):l.classList.remove(d);else{let w=-1===d.indexOf("-")?void 0:ko.DashCase;if(null==f)_?s.removeStyle(l,d,w):l.style.removeProperty(d);else{const b="string"==typeof f&&f.endsWith("!important");b&&(f=f.slice(0,-10),w|=ko.Important),_?s.setStyle(l,d,f,w):l.style.setProperty(d,f,b?"important":"")}}}(d,w,Oa(Lr(),l),f,_))}function X0(s,a,l,d,f,_){const w=null===a;let b;for(;f>0;){const D=s[f],x=Array.isArray(D),P=x?D[1]:D,R=null===P;let G=l[f+1];G===Ut&&(G=R?At:void 0);let Y=R?Mo(G,d):P===d?G:void 0;if(x&&!X_(Y)&&(Y=Mo(D,d)),X_(Y)&&(b=Y,w))return b;const be=s[f+1];f=w?ua(be):nl(be)}if(null!==a){let D=_?a.residualClasses:a.residualStyles;null!=D&&(b=Mo(D,d))}return b}function X_(s){return void 0!==s}function ey(s,a){return 0!=(s.flags&(a?16:32))}function ty(s,a=""){const l=Pe(),d=Yt(),f=s+20,_=d.firstCreatePass?Ud(d,f,1,a,null):d.data[f],w=l[f]=function ro(s,a){return On(s)?s.createText(a):s.createTextNode(a)}(l[11],a);mc(d,l,w,_),ls(_,!1)}function xg(s){return Tf("",s,""),xg}function Tf(s,a,l){const d=Pe(),f=hu(d,s,a,l);return f!==Ut&&uu(d,Lr(),f),Tf}function aw(s,a,l){const d=Pe();if(Qi(d,Ua(),a)){const _=Yt(),w=kn();ms(_,w,d,s,a,function JC(s,a,l){return(null===s||Jr(s))&&(l=function wp(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(l[a.index])),l[11]}(To(_.data),w,d),l,!0)}return aw}const bc=void 0;var SS=["en",[["a","p"],["AM","PM"],bc],[["AM","PM"],bc,bc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",bc,"{1} 'at' {0}",bc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function AS(s){const l=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let Af={};function Wd(s){const a=function cw(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=fT(a);if(l)return l;const d=a.split("-")[0];if(l=fT(d),l)return l;if("en"===d)return SS;throw new Error(`Missing locale data for the locale "${s}".`)}function lw(s){return Wd(s)[St.PluralCase]}function fT(s){return s in Af||(Af[s]=$t.ng&&$t.ng.common&&$t.ng.common.locales&&$t.ng.common.locales[s]),Af[s]}var St=(()=>((St=St||{})[St.LocaleId=0]="LocaleId",St[St.DayPeriodsFormat=1]="DayPeriodsFormat",St[St.DayPeriodsStandalone=2]="DayPeriodsStandalone",St[St.DaysFormat=3]="DaysFormat",St[St.DaysStandalone=4]="DaysStandalone",St[St.MonthsFormat=5]="MonthsFormat",St[St.MonthsStandalone=6]="MonthsStandalone",St[St.Eras=7]="Eras",St[St.FirstDayOfWeek=8]="FirstDayOfWeek",St[St.WeekendRange=9]="WeekendRange",St[St.DateFormat=10]="DateFormat",St[St.TimeFormat=11]="TimeFormat",St[St.DateTimeFormat=12]="DateTimeFormat",St[St.NumberSymbols=13]="NumberSymbols",St[St.NumberFormats=14]="NumberFormats",St[St.CurrencyCode=15]="CurrencyCode",St[St.CurrencySymbol=16]="CurrencySymbol",St[St.CurrencyName=17]="CurrencyName",St[St.Currencies=18]="Currencies",St[St.Directionality=19]="Directionality",St[St.PluralCase=20]="PluralCase",St[St.ExtraData=21]="ExtraData",St))();const Tc="en-US";let mT=Tc;function wy(s,a,l,d,f){if(s=ee(s),Array.isArray(s))for(let _=0;_<s.length;_++)wy(s[_],a,l,d,f);else{const _=Yt(),w=Pe();let b=pg(s)?s:ee(s.provide),D=T0(s);const x=Rn(),P=1048575&x.providerIndexes,R=x.directiveStart,G=x.providerIndexes>>20;if(pg(s)||!s.multi){const Y=new qu(D,f,Cf),be=Ew(b,a,f?P:P+G,R);-1===be?(Xo(Tn(x,w),_,b),Jd(_,s,a.length),a.push(b),x.directiveStart++,x.directiveEnd++,f&&(x.providerIndexes+=1048576),l.push(Y),w.push(Y)):(l[be]=Y,w[be]=Y)}else{const Y=Ew(b,a,P+G,R),be=Ew(b,a,P,P+G),Be=Y>=0&&l[Y],We=be>=0&&l[be];if(f&&!We||!f&&!Be){Xo(Tn(x,w),_,b);const dt=function BS(s,a,l,d,f){const _=new qu(s,l,Cf);return _.multi=[],_.index=a,_.componentProviders=0,Pf(_,f,d&&!l),_}(f?HT:Mr,l.length,f,d,D);!f&&We&&(l[be].providerFactory=dt),Jd(_,s,a.length,0),a.push(b),x.directiveStart++,x.directiveEnd++,f&&(x.providerIndexes+=1048576),l.push(dt),w.push(dt)}else Jd(_,s,Y>-1?Y:be,Pf(l[f?be:Y],D,!f&&d));!f&&d&&We&&l[be].componentProviders++}}}function Jd(s,a,l,d){const f=pg(a),_=function rb(s){return!!s.useClass}(a);if(f||_){const D=(_?ee(a.useClass):a).prototype.ngOnDestroy;if(D){const x=s.destroyHooks||(s.destroyHooks=[]);if(!f&&a.multi){const P=x.indexOf(l);-1===P?x.push(l,[d,D]):x[P+1].push(d,D)}else x.push(l,D)}}}function Pf(s,a,l){return l&&s.componentProviders++,s.multi.push(a)-1}function Ew(s,a,l,d){for(let f=l;f<d;f++)if(a[f]===s)return f;return-1}function Mr(s,a,l,d){return Cw(this.multi,[])}function HT(s,a,l,d){const f=this.multi;let _;if(this.providerFactory){const w=this.providerFactory.componentProviders,b=gn(l,l[1],this.providerFactory.index,d);_=b.slice(0,w),Cw(f,_);for(let D=w;D<b.length;D++)_.push(b[D])}else _=[],Cw(f,_);return _}function Cw(s,a){for(let l=0;l<s.length;l++)a.push((0,s[l])());return a}function $T(s,a=[]){return l=>{l.providersResolver=(d,f)=>function ww(s,a,l){const d=Yt();if(d.firstCreatePass){const f=Jr(s);wy(l,d.data,d.blueprint,f,!0),wy(a,d.data,d.blueprint,f,!1)}}(d,f?f(s):s,a)}}class bw{}class ul{resolveComponentFactory(a){throw function qT(s){const a=Error(`No component factory found for ${_e(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let zg=(()=>{class s{}return s.NULL=new ul,s})();function HS(){return Xd(Rn(),Pe())}function Xd(s,a){return new eh(Dr(s,a))}let eh=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=HS,s})();function Wg(s){return s instanceof eh?s.nativeElement:s}class Ey{}let Cy=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function by(){const s=Pe(),l=Pi(Rn().index,s);return function zT(s){return s[11]}(Si(l)?l:s)}(),s})(),GS=(()=>{class s{}return s.\u0275prov=we({token:s,providedIn:"root",factory:()=>null}),s})();class Tw{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Nf=new Tw("13.2.7"),Ty={};function Zg(s,a,l,d,f=!1){for(;null!==l;){const _=a[l.index];if(null!==_&&d.push(pn(_)),zi(_))for(let b=10;b<_.length;b++){const D=_[b],x=D[1].firstChild;null!==x&&Zg(D[1],D,x,d)}const w=l.type;if(8&w)Zg(s,a,l.child,d);else if(32&w){const b=ef(l,a);let D;for(;D=b();)d.push(D)}else if(16&w){const b=Yp(a,l);if(Array.isArray(b))d.push(...b);else{const D=Od(a[16]);Zg(D[1],D,b,d,!0)}}l=f?l.projectionNext:l.next}return d}class th{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return Zg(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(zi(a)){const l=a[8],d=l?l.indexOf(this):-1;d>-1&&(p(a,d),Vl(l,d))}this._attachedToViewContainer=!1}g(this._lView[1],this._lView)}onDestroy(a){ug(this._lView[1],this._lView,null,a)}markForCheck(){f0(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){g0(this._lView[1],this._lView,this.context)}checkNoChanges(){!function zA(s,a,l){La(!0);try{g0(s,a,l)}finally{La(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ve(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function m_(s,a){_c(s,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Ve(902,"");this._appRef=a}}class Iw extends th{constructor(a){super(a),this._view=a}detectChanges(){dg(this._view)}checkNoChanges(){!function KC(s){La(!0);try{dg(s)}finally{La(!1)}}(this._view)}get context(){return null}}class Dw extends zg{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=Pt(a);return new mu(l,this.ngModule)}}function Kg(s){const a=[];for(let l in s)s.hasOwnProperty(l)&&a.push({propName:s[l],templateName:l});return a}class mu extends bw{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function NC(s){return s.map(PC).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return Kg(this.componentDef.inputs)}get outputs(){return Kg(this.componentDef.outputs)}create(a,l,d,f){const _=(f=f||this.ngModule)?function ZT(s,a){return{get:(l,d,f)=>{const _=s.get(l,Ty,f);return _!==Ty||d===Ty?_:a.get(l,d,f)}}}(a,f.injector):a,w=_.get(Ey,rd),b=_.get(GS,null),D=w.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",P=d?function D_(s,a,l){if(On(s))return s.selectRootElement(a,l===Lt.ShadowDom);let d="string"==typeof a?s.querySelector(a):a;return d.textContent="",d}(D,d,this.componentDef.encapsulation):nf(w.createRenderer(null,this.componentDef),x,function WT(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(x)),R=this.componentDef.onPush?576:528,G=function iS(s,a){return{components:[],scheduler:s||u_,clean:WA,playerHandler:a||null,flags:0}}(),Y=lg(0,null,null,1,0,null,null,null,null,null),be=ig(null,Y,G,R,null,null,w,D,b,_);let Be,We;Io(be);try{const dt=function nS(s,a,l,d,f,_){const w=l[1];l[20]=s;const D=Ud(w,20,2,"#host",null),x=D.mergedAttrs=a.hostAttrs;null!==x&&(hg(D,x,!0),null!==s&&(It(f,s,x),null!==D.classes&&__(f,s,D.classes),null!==D.styles&&bC(f,s,D.styles)));const P=d.createRenderer(s,a),R=ig(l,I_(a),null,a.onPush?64:16,l[20],D,d,P,_||null,null);return w.firstCreatePass&&(Xo(Tn(D,l),w,a.type),u0(w,D),zC(D,l.length,1)),hf(l,R),l[20]=R}(P,this.componentDef,be,w,D);if(P)if(d)It(D,P,["ng-version",Nf.full]);else{const{attrs:Ne,classes:yt}=function OC(s){const a=[],l=[];let d=1,f=2;for(;d<s.length;){let _=s[d];if("string"==typeof _)2===f?""!==_&&a.push(_,s[++d]):8===f&&l.push(_);else{if(!_i(f))break;f=_}d++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);Ne&&It(D,P,Ne),yt&&yt.length>0&&__(D,P,yt.join(" "))}if(We=Gr(Y,20),void 0!==l){const Ne=We.projection=[];for(let yt=0;yt<this.ngContentSelectors.length;yt++){const qt=l[yt];Ne.push(null!=qt?Array.from(qt):null)}}Be=function rS(s,a,l,d,f){const _=l[1],w=function GC(s,a,l){const d=Rn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),x_(s,d,a,vc(s,a,1,null),l));const f=gn(a,s,d.directiveStart,d);mi(f,a);const _=Dr(d,a);return _&&mi(_,a),f}(_,l,a);if(d.components.push(w),s[8]=w,f&&f.forEach(D=>D(w,a)),a.contentQueries){const D=Rn();a.contentQueries(1,w,D.directiveStart)}const b=Rn();return!_.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(hi(b.index),UA(l[1],b,0,b.directiveStart,b.directiveEnd,a),l0(a,w)),w}(dt,this.componentDef,be,G,[IN]),T_(Y,be,null)}finally{Yo()}return new YT(this.componentType,Be,Xd(We,be),be,We)}}class YT extends class GT{}{constructor(a,l,d,f,_){super(),this.location=d,this._rootLView=f,this._tNode=_,this.instance=l,this.hostView=this.changeDetectorRef=new Iw(f),this.componentType=a}get injector(){return new Ys(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class _u{}class Us{}const nh=new Map;class JT extends _u{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Dw(this);const d=hn(a);this._bootstrapComponents=Li(d.bootstrap),this._r3Injector=eb(a,l,[{provide:_u,useValue:this},{provide:zg,useValue:this.componentFactoryResolver}],_e(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,l=Fo.THROW_IF_NOT_FOUND,d=mt.Default){return a===Fo||a===_u||a===y0?this:this._r3Injector.get(a,l,d)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Yg extends Us{constructor(a){super(),this.moduleType=a,null!==hn(a)&&function WS(s){const a=new Set;!function l(d){const f=hn(d,!0),_=f.id;null!==_&&(function rh(s,a,l){if(a&&a!==l)throw new Error(`Duplicate module registered for ${s} - ${_e(a)} vs ${_e(a.name)}`)}(_,nh.get(_),d),nh.set(_,d));const w=Li(f.imports);for(const b of w)a.has(b)||(a.add(b),l(b))}(s)}(a)}create(a){return new JT(this.moduleType,a)}}function Dy(s,a,l,d,f,_,w){return function ih(s,a,l,d,f,_,w,b,D){const x=a+l;return function Vs(s,a,l,d,f,_){const w=vr(s,a,l,d);return vr(s,a+2,f,_)||w}(s,x,f,_,w,b)?sl(s,x+4,D?d.call(D,f,_,w,b):d(f,_,w,b)):Sc(s,x+4)}(Pe(),Kn(),s,a,l,d,f,_,w)}function Sc(s,a){const l=s[a];return l===Ut?void 0:l}function nI(s,a){const l=Yt();let d;const f=s+20;l.firstCreatePass?(d=function xw(s,a){if(a)for(let l=a.length-1;l>=0;l--){const d=a[l];if(s===d.name)return d}}(a,l.pipeRegistry),l.data[f]=d,d.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(f,d.onDestroy)):d=l.data[f];const _=d.factory||(d.factory=qo(d.type)),w=ar(Cf);try{const b=Ps(!1),D=_();return Ps(b),function vb(s,a,l,d){l>=s.data.length&&(s.data[l]=null,s.blueprint[l]=null),a[l]=d}(l,Pe(),f,D),D}finally{ar(w)}}function rI(s,a,l){const d=s+20,f=Pe(),_=os(f,d);return Jg(f,d)?function Rf(s,a,l,d,f,_){const w=a+l;return Qi(s,w,f)?sl(s,w+1,_?d.call(_,f):d(f)):Sc(s,w+1)}(f,Kn(),a,_.transform,l,_):_.transform(l)}function iI(s,a,l,d){const f=s+20,_=Pe(),w=os(_,f);return Jg(_,f)?function Qg(s,a,l,d,f,_,w){const b=a+l;return vr(s,b,f,_)?sl(s,b+2,w?d.call(w,f,_):d(f,_)):Sc(s,b+2)}(_,Kn(),a,w.transform,l,d,w):w.transform(l,d)}function Jg(s,a){return s[1].data[a].pure}function xc(s){return a=>{setTimeout(s,void 0,a)}}const pa=class KS extends c.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,d){var f,_,w;let b=a,D=l||(()=>null),x=d;if(a&&"object"==typeof a){const R=a;b=null===(f=R.next)||void 0===f?void 0:f.bind(R),D=null===(_=R.error)||void 0===_?void 0:_.bind(R),x=null===(w=R.complete)||void 0===w?void 0:w.bind(R)}this.__isAsync&&(D=xc(D),b&&(b=xc(b)),x&&(x=xc(x)));const P=super.subscribe({next:b,error:D,complete:x});return a instanceof X.w0&&a.add(P),P}};function Ei(){return this._results[Ec()]()}class Mc{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Ec(),d=Mc.prototype;d[l]||(d[l]=Ei)}get changes(){return this._changes||(this._changes=new pa)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const d=this;d.dirty=!1;const f=pi(a);(this._changesDetected=!function Vh(s,a,l){if(s.length!==a.length)return!1;for(let d=0;d<s.length;d++){let f=s[d],_=a[d];if(l&&(f=l(f),_=l(_)),_!==f)return!1}return!0}(d._results,f,l))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Uo=(()=>{class s{}return s.__NG_ELEMENT_ID__=Le,s})();const Mw=Uo,YS=class extends Mw{constructor(a,l,d){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(a){const l=this._declarationTContainer.tViews,d=ig(this._declarationLView,l,a,16,null,l.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(d[19]=_.createEmbeddedView(l)),T_(l,d,a),new th(d)}};function Le(){return hr(Rn(),Pe())}function hr(s,a){return 4&s.type?new YS(a,s,Xd(s,a)):null}let _s=(()=>{class s{}return s.__NG_ELEMENT_ID__=Pw,s})();function Pw(){return ue(Rn(),Pe())}const at=_s,gt=class extends at{constructor(a,l,d){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=d}get element(){return Xd(this._hostTNode,this._hostLView)}get injector(){return new Ys(this._hostTNode,this._hostLView)}get parentInjector(){const a=Pl(this._hostTNode,this._hostLView);if(Ao(a)){const l=Zs(a,this._hostLView),d=Ms(a);return new Ys(l[1].data[d+8],l)}return new Ys(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=oI(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,d){const f=a.createEmbeddedView(l||{});return this.insert(f,d),f}createComponent(a,l,d,f,_){const w=a&&!function kl(s){return"function"==typeof s}(a);let b;if(w)b=l;else{const R=l||{};b=R.index,d=R.injector,f=R.projectableNodes,_=R.ngModuleRef}const D=w?a:new mu(Pt(a)),x=d||this.parentInjector;if(!_&&null==D.ngModule){const G=(w?x:this.parentInjector).get(_u,null);G&&(_=G)}const P=D.create(x,f,void 0,_);return this.insert(P.hostView,b),P}insert(a,l){const d=a._lView,f=d[1];if(function id(s){return zi(s[3])}(d)){const P=this.indexOf(a);if(-1!==P)this.detach(P);else{const R=d[3],G=new gt(R,R[6],R[3]);G.detach(G.indexOf(a))}}const _=this._adjustIndex(l),w=this._lContainer;!function pc(s,a,l,d){const f=10+d,_=l.length;d>0&&(l[f-1][4]=a),d<_-10?(a[4]=l[f],Ll(l,10+d,a)):(l.push(a),a[4]=null),a[3]=l;const w=a[17];null!==w&&l!==w&&function gc(s,a){const l=s[9];a[16]!==a[3][3][16]&&(s[2]=!0),null===l?s[9]=[a]:l.push(a)}(w,a);const b=a[19];null!==b&&b.insertView(s),a[2]|=128}(f,d,w,_);const b=Fd(_,w),D=d[11],x=Fn(D,w[7]);return null!==x&&function Wp(s,a,l,d,f,_){d[0]=f,d[6]=a,_c(s,d,l,1,f,_)}(f,w[6],D,d,x,b),a.attachToViewContainerRef(),Ll(Qe(w),_,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=oI(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),d=p(this._lContainer,l);d&&(Vl(Qe(this._lContainer),l),g(d[1],d))}detach(a){const l=this._adjustIndex(a,-1),d=p(this._lContainer,l);return d&&null!=Vl(Qe(this._lContainer),l)?new th(d):null}_adjustIndex(a,l=0){return null==a?this.length+l:a}};function oI(s){return s[8]}function Qe(s){return s[8]||(s[8]=[])}function ue(s,a){let l;const d=a[s.index];if(zi(d))l=d;else{let f;if(8&s.type)f=pn(d);else{const _=a[11];f=_.createComment("");const w=Dr(s,a);Se(_,Fn(_,w),f,function io(s,a){return On(s)?s.nextSibling(a):a.nextSibling}(_,w),!1)}a[s.index]=l=c0(d,a,f,s),hf(a,l)}return new gt(l,s,a)}class Nw{constructor(a){this.queryList=a,this.matches=null}clone(){return new Nw(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ow{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const d=null!==a.contentQueries?a.contentQueries[0]:l.length,f=[];for(let _=0;_<d;_++){const w=l.getByIndex(_);f.push(this.queries[w.indexInDeclarationView].clone())}return new Ow(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==Ye(a,l).matches&&this.queries[l].setDirty()}}class aI{constructor(a,l,d=null){this.predicate=a,this.flags=l,this.read=d}}class Rw{constructor(a=[]){this.queries=a}elementStart(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let d=0;d<this.length;d++){const f=null!==l?l.length:0,_=this.getByIndex(d).embeddedTView(a,f);_&&(_.indexInDeclarationView=d,null!==l?l.push(_):l=[_])}return null!==l?new Rw(l):null}template(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class kw{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new kw(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const _=d[f];this.matchTNodeWithReadOption(a,l,lI(l,_)),this.matchTNodeWithReadOption(a,l,Ks(l,a,_,!1,!1))}else d===Uo?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,Ks(l,a,d,!1,!1))}matchTNodeWithReadOption(a,l,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===eh||f===_s||f===Uo&&4&l.type)this.addMatch(l.index,-2);else{const _=Ks(l,a,f,!1,!1);null!==_&&this.addMatch(l.index,_)}else this.addMatch(l.index,d)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function lI(s,a){const l=s.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===a)return l[d+1];return null}function VN(s,a,l,d){return-1===l?function JS(s,a){return 11&s.type?Xd(s,a):4&s.type?hr(s,a):null}(a,s):-2===l?function XS(s,a,l){return l===eh?Xd(a,s):l===Uo?hr(a,s):l===_s?ue(a,s):void 0}(s,a,d):gn(s,s[1],l,a)}function Fw(s,a,l,d){const f=a[19].queries[d];if(null===f.matches){const _=s.data,w=l.matches,b=[];for(let D=0;D<w.length;D+=2){const x=w[D];b.push(x<0?null:VN(a,_[x],w[D+1],l.metadata.read))}f.matches=b}return f.matches}function Vt(s,a,l,d){const f=s.queries.getByIndex(l),_=f.matches;if(null!==_){const w=Fw(s,a,f,l);for(let b=0;b<_.length;b+=2){const D=_[b];if(D>0)d.push(w[b/2]);else{const x=_[b+1],P=a[-D];for(let R=10;R<P.length;R++){const G=P[R];G[17]===G[3]&&Vt(G[1],G,x,d)}if(null!==P[9]){const R=P[9];for(let G=0;G<R.length;G++){const Y=R[G];Vt(Y[1],Y,x,d)}}}}}return d}function sh(s){const a=Pe(),l=Yt(),d=ad();Ko(d+1);const f=Ye(l,d);if(s.dirty&&zo(a)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const _=f.crossesNgTemplate?Vt(l,a,d,[]):Fw(l,a,f,d);s.reset(_,Wg),s.notifyOnChanges()}return!0}return!1}function ir(s,a,l,d){const f=Yt();if(f.firstCreatePass){const _=Rn();(function cI(s,a,l){null===s.queries&&(s.queries=new Rw),s.queries.track(new kw(a,l))})(f,new aI(a,l,d),_.index),function Pr(s,a){const l=s.contentQueries||(s.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,a)}(f,s),2==(2&l)&&(f.staticContentQueries=!0)}!function fn(s,a,l){const d=new Mc(4==(4&l));ug(s,a,d,d.destroy),null===a[19]&&(a[19]=new Ow),a[19].queries.push(new Nw(d))}(f,Pe(),l)}function _t(){return function Xg(s,a){return s[19].queries[a].queryList}(Pe(),ad())}function Ye(s,a){return s.queries.getByIndex(a)}function nm(...s){}const EI=new Un("Application Initializer");let rm=(()=>{class s{constructor(l){this.appInits=l,this.resolve=nm,this.reject=nm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const _=this.appInits[f]();if(Fb(_))l.push(_);else if(vS(_)){const w=new Promise((b,D)=>{_.subscribe({complete:b,error:D})});l.push(w)}}Promise.all(l).then(()=>{d()}).catch(f=>{this.reject(f)}),0===l.length&&d(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(nr(EI,8))},s.\u0275prov=we({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const oi=new Un("AppId",{providedIn:"root",factory:function Gw(){return`${ky()}${ky()}${ky()}`}});function ky(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Zn=new Un("Platform Initializer"),im=new Un("Platform ID"),Ci=new Un("appBootstrapListener");let qw=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=we({token:s,factory:s.\u0275fac}),s})();const Ji=new Un("LocaleId",{providedIn:"root",factory:()=>Xs(Ji,mt.Optional|mt.SkipSelf)||function Ff(){return"undefined"!=typeof $localize&&$localize.locale||Tc}()}),CI=new Un("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Nc{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let Nr=(()=>{class s{compileModuleSync(l){return new Yg(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),_=Li(hn(l).declarations).reduce((w,b)=>{const D=Pt(b);return D&&w.push(new mu(D)),w},[]);return new Nc(d,_)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=we({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Fy=(()=>Promise.resolve(0))();function lh(s){"undefined"==typeof Zone?Fy.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ti{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pa(!1),this.onMicrotaskEmpty=new pa(!1),this.onStable=new pa(!1),this.onError=new pa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&l,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function ax(){let s=$t.requestAnimationFrame,a=$t.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&a){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function pl(s){const a=()=>{!function Rc(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call($t,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,uh(s),s.isCheckStableRunning=!0,Lf(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),uh(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,f,_,w,b)=>{try{return Eu(s),l.invokeTask(f,_,w,b)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||s.shouldCoalesceRunChangeDetection)&&a(),Ww(s)}},onInvoke:(l,d,f,_,w,b,D)=>{try{return Eu(s),l.invoke(f,_,w,b,D)}finally{s.shouldCoalesceRunChangeDetection&&a(),Ww(s)}},onHasTask:(l,d,f,_)=>{l.hasTask(f,_),d===f&&("microTask"==_.change?(s._hasPendingMicrotasks=_.microTask,uh(s),Lf(s)):"macroTask"==_.change&&(s.hasPendingMacrotasks=_.macroTask))},onHandleError:(l,d,f,_)=>(l.handleError(f,_),s.runOutsideAngular(()=>s.onError.emit(_)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ti.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ti.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,l,d){return this._inner.run(a,l,d)}runTask(a,l,d,f){const _=this._inner,w=_.scheduleEventTask("NgZoneEvent: "+f,a,Oc,nm,nm);try{return _.runTask(w,l,d)}finally{_.cancelTask(w)}}runGuarded(a,l,d){return this._inner.runGuarded(a,l,d)}runOutsideAngular(a){return this._outer.run(a)}}const Oc={};function Lf(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function uh(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Eu(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Ww(s){s._nesting--,Lf(s)}class Vf{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pa,this.onMicrotaskEmpty=new pa,this.onStable=new pa,this.onError=new pa}run(a,l,d){return a.apply(l,d)}runGuarded(a,l,d){return a.apply(l,d)}runOutsideAngular(a){return a()}runTask(a,l,d,f){return a.apply(l,d)}}let Ly=(()=>{class s{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ti.assertNotInAngularZone(),lh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())lh(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,f){let _=-1;d&&d>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==_),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:_,updateCb:f})}whenStable(l,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,d,f){return[]}}return s.\u0275fac=function(l){return new(l||s)(nr(Ti))},s.\u0275prov=we({token:s,factory:s.\u0275fac}),s})(),sm=(()=>{class s{constructor(){this._applications=new Map,dh.addToWindow(this)}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return dh.findTestabilityInTree(this,l,d)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=we({token:s,factory:s.\u0275fac}),s})();class ch{addToWindow(a){}findTestabilityInTree(a,l,d){return null}}function Zw(s){dh=s}let Ho,dh=new ch;const Yw=new Un("AllowMultipleToken");class lx{constructor(a,l){this.name=a,this.token=l}}function Qw(s,a,l=[]){const d=`Platform: ${a}`,f=new Un(d);return(_=[])=>{let w=Jw();if(!w||w.injector.get(Yw,!1))if(s)s(l.concat(_).concat({provide:f,useValue:!0}));else{const b=l.concat(_).concat({provide:f,useValue:!0},{provide:w0,useValue:"platform"});!function ux(s){if(Ho&&!Ho.destroyed&&!Ho.injector.get(Yw,!1))throw new Ve(400,"");Ho=s.get(Qn);const a=s.get(Zn,null);a&&a.forEach(l=>l())}(Fo.create({providers:b,name:d}))}return function TI(s){const a=Jw();if(!a)throw new Ve(401,"");return a}()}}function Jw(){return Ho&&!Ho.destroyed?Ho:null}let Qn=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const b=function kc(s,a){let l;return l="noop"===s?new Vf:("zone.js"===s?void 0:s)||new Ti({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),l}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),D=[{provide:Ti,useValue:b}];return b.run(()=>{const x=Fo.create({providers:D,parent:this.injector,name:l.moduleType.name}),P=l.create(x),R=P.injector.get(Yh,null);if(!R)throw new Ve(402,"");return b.runOutsideAngular(()=>{const G=b.onError.subscribe({next:Y=>{R.handleError(Y)}});P.onDestroy(()=>{eE(this._modules,P),G.unsubscribe()})}),function II(s,a,l){try{const d=l();return Fb(d)?d.catch(f=>{throw a.runOutsideAngular(()=>s.handleError(f)),f}):d}catch(d){throw a.runOutsideAngular(()=>s.handleError(d)),d}}(R,b,()=>{const G=P.injector.get(rm);return G.runInitializers(),G.donePromise.then(()=>(function Sf(s){re(s,"Expected localeId to be defined"),"string"==typeof s&&(mT=s.toLowerCase().replace(/_/g,"-"))}(P.injector.get(Ji,Tc)||Tc),this._moduleDoBootstrap(P),P))})})}bootstrapModule(l,d=[]){const f=Xw({},d);return function bI(s,a,l){const d=new Yg(l);return Promise.resolve(d)}(0,0,l).then(_=>this.bootstrapModuleFactory(_,f))}_moduleDoBootstrap(l){const d=l.injector.get(Fc);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new Ve(403,"");l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ve(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(nr(Fo))},s.\u0275prov=we({token:s,factory:s.\u0275fac}),s})();function Xw(s,a){return Array.isArray(a)?a.reduce(Xw,s):Object.assign(Object.assign({},s),a)}let Fc=(()=>{class s{constructor(l,d,f,_,w){this._zone=l,this._injector=d,this._exceptionHandler=f,this._componentFactoryResolver=_,this._initStatus=w,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const b=new V.y(x=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{x.next(this._stable),x.complete()})}),D=new V.y(x=>{let P;this._zone.runOutsideAngular(()=>{P=this._zone.onStable.subscribe(()=>{Ti.assertNotInAngularZone(),lh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,x.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{Ti.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{x.next(!1)}))});return()=>{P.unsubscribe(),R.unsubscribe()}});this.isStable=(0,ce.T)(b,D.pipe((0,le.B)()))}bootstrap(l,d){if(!this._initStatus.done)throw new Ve(405,"");let f;f=l instanceof bw?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(f.componentType);const _=function om(s){return s.isBoundToModule}(f)?void 0:this._injector.get(_u),b=f.create(Fo.NULL,[],d||f.selector,_),D=b.location.nativeElement,x=b.injector.get(Ly,null),P=x&&b.injector.get(sm);return x&&P&&P.registerApplication(D,x),b.onDestroy(()=>{this.detachView(b.hostView),eE(this.components,b),P&&P.unregisterApplication(D)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new Ve(101,"");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;eE(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(Ci,[]).concat(this._bootstrapListeners).forEach(f=>f(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(l){return new(l||s)(nr(Ti),nr(Fo),nr(Yh),nr(zg),nr(rm))},s.\u0275prov=we({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function eE(s,a){const l=s.indexOf(a);l>-1&&s.splice(l,1)}let Dn=!0,hh=!1;function nE(){return hh=!0,Dn}function rE(){if(hh)throw new Error("Cannot enable prod mode after platform setup.");Dn=!1}let AI=(()=>{class s{}return s.__NG_ELEMENT_ID__=SI,s})();function SI(s){return function dx(s,a,l){if(Eo(s)&&!l){const d=Pi(s.index,a);return new th(d,d)}return 47&s.type?new th(a[16],a):null}(Rn(),Pe(),16==(16&s))}class Vc{constructor(){}supports(a){return _g(a)}create(a){return new aE(a)}}const ys=(s,a)=>a;class aE{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||ys}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,d=this._removalsHead,f=0,_=null;for(;l||d;){const w=!d||l&&l.currentIndex<Hy(d,f,_)?l:d,b=Hy(w,f,_),D=w.currentIndex;if(w===d)f--,d=d._nextRemoved;else if(l=l._next,null==w.previousIndex)f++;else{_||(_=[]);const x=b-f,P=D-f;if(x!=P){for(let G=0;G<x;G++){const Y=G<_.length?_[G]:_[G]=0,be=Y+G;P<=be&&be<x&&(_[G]=Y+1)}_[w.previousIndex]=P-x}}b!==D&&a(w,b,D)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!_g(a))throw new Ve(900,"");return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,_,w,l=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let b=0;b<this.length;b++)_=a[b],w=this._trackByFn(b,_),null!==l&&Object.is(l.trackById,w)?(d&&(l=this._verifyReinsertion(l,_,w,b)),Object.is(l.item,_)||this._addIdentityChange(l,_)):(l=this._mismatch(l,_,w,b),d=!0),l=l._next}else f=0,function fb(s,a){if(Array.isArray(s))for(let l=0;l<s.length;l++)a(s[l]);else{const l=s[Ec()]();let d;for(;!(d=l.next()).done;)a(d.value)}}(a,b=>{w=this._trackByFn(f,b),null!==l&&Object.is(l.trackById,w)?(d&&(l=this._verifyReinsertion(l,b,w,f)),Object.is(l.item,b)||this._addIdentityChange(l,b)):(l=this._mismatch(l,b,w,f),d=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,d,f){let _;return null===a?_=this._itTail:(_=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,_,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,_,f)):a=this._addAfter(new jy(l,d),_,f),a}_verifyReinsertion(a,l,d,f){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==_?a=this._reinsertAfter(_,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,_=a._nextRemoved;return null===f?this._removalsHead=_:f._nextRemoved=_,null===_?this._removalsTail=f:_._prevRemoved=f,this._insertAfter(a,l,d),this._addToMoves(a,d),a}_moveAfter(a,l,d){return this._unlink(a),this._insertAfter(a,l,d),this._addToMoves(a,d),a}_addAfter(a,l,d){return this._insertAfter(a,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,d){const f=null===l?this._itHead:l._next;return a._next=f,a._prev=l,null===f?this._itTail=a:f._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new lE),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,d=a._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new lE),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class jy{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class lm{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const l=a._prevDup,d=a._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class lE{constructor(){this.map=new Map}put(a){const l=a.trackById;let d=this.map.get(l);d||(d=new lm,this.map.set(l,d)),d.add(a)}get(a,l){const f=this.map.get(a);return f?f.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Hy(s,a,l){const d=s.previousIndex;if(null===d)return d;let f=0;return l&&d<l.length&&(f=l[d]),d+a+f}class Bf{constructor(){}supports(a){return a instanceof Map||x0(a)}create(){return new NI}}class NI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||x0(a)))throw new Ve(900,"")}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const _=this._getOrCreateRecordForKey(f,d);l=this._insertBeforeOrAppend(l,_)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const d=a._prev;return l._next=a,l._prev=d,a._prev=l,d&&(d._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,l);const _=f._prev,w=f._next;return _&&(_._next=w),w&&(w._prev=_),f._next=null,f._prev=null,f}const d=new OI(a);return this._records.set(a,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(d=>l(a[d],d))}}class OI{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function RI(){return new ya([new Vc])}let ya=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(null!=d){const f=d.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||RI()),deps:[[s,new ra,new na]]}}find(l){const d=this.factories.find(f=>f.supports(l));if(null!=d)return d;throw new Ve(901,"")}}return s.\u0275prov=we({token:s,providedIn:"root",factory:RI}),s})();function vs(){return new $y([new Bf])}let $y=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(d){const f=d.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||vs()),deps:[[s,new ra,new na]]}}find(l){const d=this.factories.find(_=>_.supports(l));if(d)return d;throw new Ve(901,"")}}return s.\u0275prov=we({token:s,providedIn:"root",factory:vs}),s})();const yx=Qw(null,"core",[{provide:im,useValue:"unknown"},{provide:Qn,deps:[Fo]},{provide:sm,deps:[]},{provide:qw,deps:[]}]);let vx=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(nr(Fc))},s.\u0275mod=Z({type:s}),s.\u0275inj=Bt({}),s})()},3942:(rt,Te,L)=>{L.d(Te,{Z:()=>Ve});var c=L(2090),X=L(4859),V=L(6881),ce=L(1877);class le{constructor(ge,Re){this._delegate=ge,this.firebase=Re,(0,V._addComponent)(ge,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,V.deleteApp)(this._delegate)))}_getService(ge,Re=V._DEFAULT_ENTRY_NAME){var ot;this._delegate.checkDestroyed();const ut=this._delegate.container.getProvider(ge);return!ut.isInitialized()&&"EXPLICIT"===(null===(ot=ut.getComponent())||void 0===ot?void 0:ot.instantiationMode)&&ut.initialize(),ut.getImmediate({identifier:Re})}_removeServiceInstance(ge,Re=V._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(Re)}_addComponent(ge){(0,V._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,V._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function ye(){const Ge=function _e(Ge){const ge={},Re={__esModule:!0,initializeApp:function Fe(je,Ct={}){const oe=V.initializeApp(je,Ct);if((0,c.r3)(ge,oe.name))return ge[oe.name];const xt=new Ge(oe,Re);return ge[oe.name]=xt,xt},app:ut,registerVersion:V.registerVersion,setLogLevel:V.setLogLevel,onLog:V.onLog,apps:null,SDK_VERSION:V.SDK_VERSION,INTERNAL:{registerComponent:function ve(je){const Ct=je.name,oe=Ct.replace("-compat","");if(V._registerComponent(je)&&"PUBLIC"===je.type){const xt=(Rt=ut())=>{if("function"!=typeof Rt[oe])throw he.create("invalid-app-argument",{appName:Ct});return Rt[oe]()};void 0!==je.serviceProps&&(0,c.ZB)(xt,je.serviceProps),Re[oe]=xt,Ge.prototype[oe]=function(...Rt){return this._getService.bind(this,Ct).apply(this,je.multipleInstances?Rt:[])}}return"PUBLIC"===je.type?Re[oe]:null},removeApp:function ot(je){delete ge[je]},useAsService:function ze(je,Ct){return"serverAuth"===Ct?null:Ct},modularAPIs:V}};function ut(je){if(!(0,c.r3)(ge,je=je||V._DEFAULT_ENTRY_NAME))throw he.create("no-app",{appName:je});return ge[je]}return Re.default=Re,Object.defineProperty(Re,"apps",{get:function Ee(){return Object.keys(ge).map(je=>ge[je])}}),ut.App=Ge,Re}(le);return Ge.INTERNAL=Object.assign(Object.assign({},Ge.INTERNAL),{createFirebaseNamespace:ye,extendNamespace:function ge(Re){(0,c.ZB)(Ge,Re)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),Ge}(),q=new ce.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ge=self.firebase.SDK_VERSION;Ge&&Ge.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ve=z;!function xe(Ge){(0,V.registerVersion)("@firebase/app-compat","0.2.13",Ge)}()},6881:(rt,Te,L)=>{L.r(Te),L.d(Te,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>At,_DEFAULT_ENTRY_NAME:()=>lr,_addComponent:()=>Lt,_addOrOverwriteComponent:()=>wt,_apps:()=>br,_clearComponents:()=>$t,_components:()=>Di,_getProvider:()=>mo,_registerComponent:()=>Mt,_removeServiceInstance:()=>Gs,deleteApp:()=>Yr,getApp:()=>Xt,getApps:()=>is,initializeApp:()=>qs,onLog:()=>_o,registerVersion:()=>Gn,setLogLevel:()=>Xn});var c=L(5861),X=L(4859),V=L(1877),ce=L(2090);let pe,he;const z=new WeakMap,q=new WeakMap,ee=new WeakMap,Ze=new WeakMap,xe=new WeakMap;let ge={get(ae,ne,Me){if(ae instanceof IDBTransaction){if("done"===ne)return q.get(ae);if("objectStoreNames"===ne)return ae.objectStoreNames||ee.get(ae);if("store"===ne)return Me.objectStoreNames[1]?void 0:Me.objectStore(Me.objectStoreNames[0])}return Fe(ae[ne])},set:(ae,ne,Me)=>(ae[ne]=Me,!0),has:(ae,ne)=>ae instanceof IDBTransaction&&("done"===ne||"store"===ne)||ne in ae};function ut(ae){return"function"==typeof ae?function ot(ae){return ae!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ae)?function(...ne){return ae.apply(Ee(this),ne),Fe(z.get(this))}:function(...ne){return Fe(ae.apply(Ee(this),ne))}:function(ne,...Me){const me=ae.call(Ee(this),ne,...Me);return ee.set(me,ne.sort?ne.sort():[ne]),Fe(me)}}(ae):(ae instanceof IDBTransaction&&function Ge(ae){if(q.has(ae))return;const ne=new Promise((Me,me)=>{const He=()=>{ae.removeEventListener("complete",lt),ae.removeEventListener("error",Gt),ae.removeEventListener("abort",Gt)},lt=()=>{Me(),He()},Gt=()=>{me(ae.error||new DOMException("AbortError","AbortError")),He()};ae.addEventListener("complete",lt),ae.addEventListener("error",Gt),ae.addEventListener("abort",Gt)});q.set(ae,ne)}(ae),((ae,ne)=>ne.some(Me=>ae instanceof Me))(ae,function _e(){return pe||(pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ae,ge):ae)}function Fe(ae){if(ae instanceof IDBRequest)return function Ve(ae){const ne=new Promise((Me,me)=>{const He=()=>{ae.removeEventListener("success",lt),ae.removeEventListener("error",Gt)},lt=()=>{Me(Fe(ae.result)),He()},Gt=()=>{me(ae.error),He()};ae.addEventListener("success",lt),ae.addEventListener("error",Gt)});return ne.then(Me=>{Me instanceof IDBCursor&&z.set(Me,ae)}).catch(()=>{}),xe.set(ne,ae),ne}(ae);if(Ze.has(ae))return Ze.get(ae);const ne=ut(ae);return ne!==ae&&(Ze.set(ae,ne),xe.set(ne,ae)),ne}const Ee=ae=>xe.get(ae),je=["get","getKey","getAll","getAllKeys","count"],Ct=["put","add","delete","clear"],oe=new Map;function xt(ae,ne){if(!(ae instanceof IDBDatabase)||ne in ae||"string"!=typeof ne)return;if(oe.get(ne))return oe.get(ne);const Me=ne.replace(/FromIndex$/,""),me=ne!==Me,He=Ct.includes(Me);if(!(Me in(me?IDBIndex:IDBObjectStore).prototype)||!He&&!je.includes(Me))return;const lt=function(){var Gt=(0,c.Z)(function*(qn,...rn){const Tr=this.transaction(qn,He?"readwrite":"readonly");let vn=Tr.store;return me&&(vn=vn.index(rn.shift())),(yield Promise.all([vn[Me](...rn),He&&Tr.done]))[0]});return function(rn){return Gt.apply(this,arguments)}}();return oe.set(ne,lt),lt}!function Re(ae){ge=ae(ge)}(ae=>AA(DA({},ae),{get:(ne,Me,me)=>xt(ne,Me)||ae.get(ne,Me,me),has:(ne,Me)=>!!xt(ne,Me)||ae.has(ne,Me)}));class Rt{constructor(ne){this.container=ne}getPlatformInfoString(){return this.container.getProviders().map(Me=>{if(function Tt(ae){const ne=ae.getComponent();return"VERSION"===(null==ne?void 0:ne.type)}(Me)){const me=Me.getImmediate();return`${me.library}/${me.version}`}return null}).filter(Me=>Me).join(" ")}}const sn="@firebase/app",$i=new V.Yd("@firebase/app"),lr="[DEFAULT]",kr={[sn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},br=new Map,Di=new Map;function Lt(ae,ne){try{ae.container.addComponent(ne)}catch(Me){$i.debug(`Component ${ne.name} failed to register with FirebaseApp ${ae.name}`,Me)}}function wt(ae,ne){ae.container.addOrOverwriteComponent(ne)}function Mt(ae){const ne=ae.name;if(Di.has(ne))return $i.debug(`There were multiple attempts to register component ${ne}.`),!1;Di.set(ne,ae);for(const Me of br.values())Lt(Me,ae);return!0}function mo(ae,ne){const Me=ae.container.getProvider("heartbeat").getImmediate({optional:!0});return Me&&Me.triggerHeartbeat(),ae.container.getProvider(ne)}function Gs(ae,ne,Me=lr){mo(ae,ne).clearInstance(Me)}function $t(){Di.clear()}const $n=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ai{constructor(ne,Me,me){this._isDeleted=!1,this._options=Object.assign({},ne),this._config=Object.assign({},Me),this._name=Me.name,this._automaticDataCollectionEnabled=Me.automaticDataCollectionEnabled,this._container=me,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ne){this.checkDestroyed(),this._automaticDataCollectionEnabled=ne}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ne){this._isDeleted=ne}checkDestroyed(){if(this.isDeleted)throw $n.create("app-deleted",{appName:this._name})}}const At="9.23.0";function qs(ae,ne={}){let Me=ae;"object"!=typeof ne&&(ne={name:ne});const me=Object.assign({name:lr,automaticDataCollectionEnabled:!1},ne),He=me.name;if("string"!=typeof He||!He)throw $n.create("bad-app-name",{appName:String(He)});if(Me||(Me=(0,ce.aH)()),!Me)throw $n.create("no-options");const lt=br.get(He);if(lt){if((0,ce.vZ)(Me,lt.options)&&(0,ce.vZ)(me,lt.config))return lt;throw $n.create("duplicate-app",{appName:He})}const Gt=new X.H0(He);for(const rn of Di.values())Gt.addComponent(rn);const qn=new Ai(Me,me,Gt);return br.set(He,qn),qn}function Xt(ae=lr){const ne=br.get(ae);if(!ne&&ae===lr&&(0,ce.aH)())return qs();if(!ne)throw $n.create("no-app",{appName:ae});return ne}function is(){return Array.from(br.values())}function Yr(ae){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,c.Z)(function*(ae){const ne=ae.name;br.has(ne)&&(br.delete(ne),yield Promise.all(ae.container.getProviders().map(Me=>Me.delete())),ae.isDeleted=!0)})).apply(this,arguments)}function Gn(ae,ne,Me){var me;let He=null!==(me=kr[ae])&&void 0!==me?me:ae;Me&&(He+=`-${Me}`);const lt=He.match(/\s|\//),Gt=ne.match(/\s|\//);if(lt||Gt){const qn=[`Unable to register library "${He}" with version "${ne}":`];return lt&&qn.push(`library name "${He}" contains illegal characters (whitespace or "/")`),lt&&Gt&&qn.push("and"),Gt&&qn.push(`version name "${ne}" contains illegal characters (whitespace or "/")`),void $i.warn(qn.join(" "))}Mt(new X.wA(`${He}-version`,()=>({library:He,version:ne}),"VERSION"))}function _o(ae,ne){if(null!==ae&&"function"!=typeof ae)throw $n.create("invalid-log-argument");(0,V.Am)(ae,ne)}function Xn(ae){(0,V.Ub)(ae)}const H="firebase-heartbeat-store";let B=null;function Z(){return B||(B=function ve(ae,ne,{blocked:Me,upgrade:me,blocking:He,terminated:lt}={}){const Gt=indexedDB.open(ae,ne),qn=Fe(Gt);return me&&Gt.addEventListener("upgradeneeded",rn=>{me(Fe(Gt.result),rn.oldVersion,rn.newVersion,Fe(Gt.transaction),rn)}),Me&&Gt.addEventListener("blocked",rn=>Me(rn.oldVersion,rn.newVersion,rn)),qn.then(rn=>{lt&&rn.addEventListener("close",()=>lt()),He&&rn.addEventListener("versionchange",Tr=>He(Tr.oldVersion,Tr.newVersion,Tr))}).catch(()=>{}),qn}("firebase-heartbeat-database",1,{upgrade:(ae,ne)=>{0===ne&&ae.createObjectStore(H)}}).catch(ae=>{throw $n.create("idb-open",{originalErrorMessage:ae.message})})),B}function se(){return(se=(0,c.Z)(function*(ae){try{return yield(yield Z()).transaction(H).objectStore(H).get(Pt(ae))}catch(ne){if(ne instanceof ce.ZR)$i.warn(ne.message);else{const Me=$n.create("idb-get",{originalErrorMessage:null==ne?void 0:ne.message});$i.warn(Me.message)}}})).apply(this,arguments)}function nt(ae,ne){return kt.apply(this,arguments)}function kt(){return(kt=(0,c.Z)(function*(ae,ne){try{const me=(yield Z()).transaction(H,"readwrite");yield me.objectStore(H).put(ne,Pt(ae)),yield me.done}catch(Me){if(Me instanceof ce.ZR)$i.warn(Me.message);else{const me=$n.create("idb-set",{originalErrorMessage:null==Me?void 0:Me.message});$i.warn(me.message)}}})).apply(this,arguments)}function Pt(ae){return`${ae.name}!${ae.options.appId}`}class hn{constructor(ne){this.container=ne,this._heartbeatsCache=null;const Me=this.container.getProvider("app").getImmediate();this._storage=new Gi(Me),this._heartbeatsCachePromise=this._storage.read().then(me=>(this._heartbeatsCache=me,me))}triggerHeartbeat(){var ne=this;return(0,c.Z)(function*(){const me=ne.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),He=zt();if(null===ne._heartbeatsCache&&(ne._heartbeatsCache=yield ne._heartbeatsCachePromise),ne._heartbeatsCache.lastSentHeartbeatDate!==He&&!ne._heartbeatsCache.heartbeats.some(lt=>lt.date===He))return ne._heartbeatsCache.heartbeats.push({date:He,agent:me}),ne._heartbeatsCache.heartbeats=ne._heartbeatsCache.heartbeats.filter(lt=>{const Gt=new Date(lt.date).valueOf();return Date.now()-Gt<=2592e6}),ne._storage.overwrite(ne._heartbeatsCache)})()}getHeartbeatsHeader(){var ne=this;return(0,c.Z)(function*(){if(null===ne._heartbeatsCache&&(yield ne._heartbeatsCachePromise),null===ne._heartbeatsCache||0===ne._heartbeatsCache.heartbeats.length)return"";const Me=zt(),{heartbeatsToSend:me,unsentEntries:He}=function Fr(ae,ne=1024){const Me=[];let me=ae.slice();for(const He of ae){const lt=Me.find(Gt=>Gt.agent===He.agent);if(lt){if(lt.dates.push(He.date),ci(Me)>ne){lt.dates.pop();break}}else if(Me.push({agent:He.agent,dates:[He.date]}),ci(Me)>ne){Me.pop();break}me=me.slice(1)}return{heartbeatsToSend:Me,unsentEntries:me}}(ne._heartbeatsCache.heartbeats),lt=(0,ce.L)(JSON.stringify({version:2,heartbeats:me}));return ne._heartbeatsCache.lastSentHeartbeatDate=Me,He.length>0?(ne._heartbeatsCache.heartbeats=He,yield ne._storage.overwrite(ne._heartbeatsCache)):(ne._heartbeatsCache.heartbeats=[],ne._storage.overwrite(ne._heartbeatsCache)),lt})()}}function zt(){return(new Date).toISOString().substring(0,10)}class Gi{constructor(ne){this.app=ne,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ne=this;return(0,c.Z)(function*(){return(yield ne._canUseIndexedDBPromise)&&(yield function Ae(ae){return se.apply(this,arguments)}(ne.app))||{heartbeats:[]}})()}overwrite(ne){var Me=this;return(0,c.Z)(function*(){var me;if(yield Me._canUseIndexedDBPromise){const lt=yield Me.read();return nt(Me.app,{lastSentHeartbeatDate:null!==(me=ne.lastSentHeartbeatDate)&&void 0!==me?me:lt.lastSentHeartbeatDate,heartbeats:ne.heartbeats})}})()}add(ne){var Me=this;return(0,c.Z)(function*(){var me;if(yield Me._canUseIndexedDBPromise){const lt=yield Me.read();return nt(Me.app,{lastSentHeartbeatDate:null!==(me=ne.lastSentHeartbeatDate)&&void 0!==me?me:lt.lastSentHeartbeatDate,heartbeats:[...lt.heartbeats,...ne.heartbeats]})}})()}}function ci(ae){return(0,ce.L)(JSON.stringify({version:2,heartbeats:ae})).length}!function qi(ae){Mt(new X.wA("platform-logger",ne=>new Rt(ne),"PRIVATE")),Mt(new X.wA("heartbeat",ne=>new hn(ne),"PRIVATE")),Gn(sn,"0.9.13",ae),Gn(sn,"0.9.13","esm2017"),Gn("fire-js","")}("")},4859:(rt,Te,L)=>{L.d(Te,{wA:()=>V,H0:()=>_e,zt:()=>le});var c=L(5861),X=L(2090);class V{constructor(z,q,ee){this.name=z,this.instanceFactory=q,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const ce="[DEFAULT]";class le{constructor(z,q){this.name=z,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const q=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(q)){const ee=new X.BH;if(this.instancesDeferred.set(q,ee),this.isInitialized(q)||this.shouldAutoInitialize())try{const Ze=this.getOrInitializeService({instanceIdentifier:q});Ze&&ee.resolve(Ze)}catch(Ze){}}return this.instancesDeferred.get(q).promise}getImmediate(z){var q;const ee=this.normalizeInstanceIdentifier(null==z?void 0:z.identifier),Ze=null!==(q=null==z?void 0:z.optional)&&void 0!==q&&q;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(Ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(xe){if(Ze)return null;throw xe}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function he(ye){return"EAGER"===ye.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:ce})}catch(q){}for(const[q,ee]of this.instancesDeferred.entries()){const Ze=this.normalizeInstanceIdentifier(q);try{const xe=this.getOrInitializeService({instanceIdentifier:Ze});ee.resolve(xe)}catch(xe){}}}}clearInstance(z=ce){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,c.Z)(function*(){const q=Array.from(z.instances.values());yield Promise.all([...q.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...q.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=ce){return this.instances.has(z)}getOptions(z=ce){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:q={}}=z,ee=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ze=this.getOrInitializeService({instanceIdentifier:ee,options:q});for(const[xe,Ve]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(xe)&&Ve.resolve(Ze);return Ze}onInit(z,q){var ee;const Ze=this.normalizeInstanceIdentifier(q),xe=null!==(ee=this.onInitCallbacks.get(Ze))&&void 0!==ee?ee:new Set;xe.add(z),this.onInitCallbacks.set(Ze,xe);const Ve=this.instances.get(Ze);return Ve&&z(Ve,Ze),()=>{xe.delete(z)}}invokeOnInitCallbacks(z,q){const ee=this.onInitCallbacks.get(q);if(ee)for(const Ze of ee)try{Ze(z,q)}catch(xe){}}getOrInitializeService({instanceIdentifier:z,options:q={}}){let ee=this.instances.get(z);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(ye=z,ye===ce?void 0:ye),options:q}),this.instances.set(z,ee),this.instancesOptions.set(z,q),this.invokeOnInitCallbacks(ee,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,ee)}catch(Ze){}var ye;return ee||null}normalizeInstanceIdentifier(z=ce){return this.component?this.component.multipleInstances?z:ce:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _e{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const q=this.getProvider(z.name);if(q.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);q.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const q=new le(z,this);return this.providers.set(z,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(rt,Te,L)=>{L.d(Te,{in:()=>X,Yd:()=>he,Ub:()=>_e,Am:()=>ye});const c=[];var X=(()=>{return(z=X||(X={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",X;var z})();const V={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ce=X.INFO,le={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},pe=(z,q,...ee)=>{if(q<z.logLevel)return;const Ze=(new Date).toISOString(),xe=le[q];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[xe](`[${Ze}]  ${z.name}:`,...ee)};class he{constructor(q){this.name=q,this._logLevel=ce,this._logHandler=pe,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in X))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?V[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...q),this._logHandler(this,X.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...q),this._logHandler(this,X.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,X.INFO,...q),this._logHandler(this,X.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,X.WARN,...q),this._logHandler(this,X.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...q),this._logHandler(this,X.ERROR,...q)}}function _e(z){c.forEach(q=>{q.setLogLevel(z)})}function ye(z,q){for(const ee of c){let Ze=null;q&&q.level&&(Ze=V[q.level]),ee.userLogHandler=null===z?null:(xe,Ve,...Ge)=>{const ge=Ge.map(Re=>{if(null==Re)return null;if("string"==typeof Re)return Re;if("number"==typeof Re||"boolean"==typeof Re)return Re.toString();if(Re instanceof Error)return Re.message;try{return JSON.stringify(Re)}catch(ot){return null}}).filter(Re=>Re).join(" ");Ve>=(null!=Ze?Ze:xe.logLevel)&&z({level:X[Ve].toLowerCase(),message:ge,args:Ge,type:xe.name})}}}},259:(rt,Te,L)=>{L.d(Te,{Mq:()=>c.getApp,C6:()=>c.getApps});var c=L(6881);(0,c.registerVersion)("firebase","9.23.0","app")},9260:(rt,Te,L)=>{L.d(Te,{Z:()=>c.Z});var c=L(3942);c.Z.registerVersion("firebase","9.23.0","app-compat")},2644:(rt,Te,L)=>{L.r(Te);var c=L(5861),X=L(3942),V=L(2090),ce=L(6881),le=L(7582),pe=L(1877),he=L(4859);const Ve=function Ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ge=function xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ot=new pe.Yd("@firebase/auth");function Fe(y,...p){ot.logLevel<=pe.in.ERROR&&ot.error(`Auth (${ce.SDK_VERSION}): ${y}`,...p)}function Ee(y,...p){throw Ct(y,...p)}function ve(y,...p){return Ct(y,...p)}function ze(y,p,g){const E=Object.assign(Object.assign({},Ge()),{[p]:g});return new V.LL("auth","Firebase",E).create(p,{appName:y.name})}function je(y,p,g){if(!(p instanceof g))throw g.name!==p.constructor.name&&Ee(y,"argument-error"),ze(y,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ct(y,...p){if("string"!=typeof y){const g=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(g,...E)}return ge.create(y,...p)}function oe(y,p,...g){if(!y)throw Ct(p,...g)}function xt(y){const p="INTERNAL ASSERTION FAILED: "+y;throw Fe(p),new Error(p)}function Rt(y,p){y||xt(p)}function Tt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function sn(){return"http:"===ht()||"https:"===ht()}function ht(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class bs{constructor(p,g){this.shortDelay=p,this.longDelay=g,Rt(g>p,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function $i(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(sn()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function re(y,p){Rt(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return p?`${g}${p.startsWith("/")?p.slice(1):p}`:g}class te{static initialize(p,g,E){this.fetchImpl=p,g&&(this.headersImpl=g),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void xt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void xt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void xt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ie={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},De=new bs(3e4,6e4);function ke(y,p){return y.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:y.tenantId}):p}function we(y,p,g,E){return ct.apply(this,arguments)}function ct(){return(ct=(0,c.Z)(function*(y,p,g,E,S={}){return Bt(y,S,(0,c.Z)(function*(){let N={},$={};E&&("GET"===p?$=E:N={body:JSON.stringify(E)});const J=(0,V.xO)(Object.assign({key:y.config.apiKey},$)).slice(1),Se=yield y._getAdditionalHeaders();return Se["Content-Type"]="application/json",y.languageCode&&(Se["X-Firebase-Locale"]=y.languageCode),te.fetch()(Hn(y,y.config.apiHost,g,J),Object.assign({method:p,headers:Se,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function Bt(y,p,g){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,c.Z)(function*(y,p,g){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},Ie),p);try{const S=new xn(y),N=yield Promise.race([g(),S.promise]);S.clearNetworkTimeout();const $=yield N.json();if("needConfirmation"in $)throw Ln(y,"account-exists-with-different-credential",$);if(N.ok&&!("errorMessage"in $))return $;{const J=N.ok?$.errorMessage:$.error.message,[Se,Ue]=J.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Se)throw Ln(y,"credential-already-in-use",$);if("EMAIL_EXISTS"===Se)throw Ln(y,"email-already-in-use",$);if("USER_DISABLED"===Se)throw Ln(y,"user-disabled",$);const tt=E[Se]||Se.toLowerCase().replace(/[_\s]+/g,"-");if(Ue)throw ze(y,tt,Ue);Ee(y,tt)}}catch(S){if(S instanceof V.ZR)throw S;Ee(y,"network-request-failed",{message:String(S)})}})).apply(this,arguments)}function ft(y,p,g,E){return on.apply(this,arguments)}function on(){return(on=(0,c.Z)(function*(y,p,g,E,S={}){const N=yield we(y,p,g,E,S);return"mfaPendingCredential"in N&&Ee(y,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Hn(y,p,g,E){const S=`${p}${g}?${E}`;return y.config.emulator?re(y.config,S):`${y.config.apiScheme}://${S}`}class xn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((g,E)=>{this.timer=setTimeout(()=>E(ve(this.auth,"network-request-failed")),De.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ln(y,p,g){const E={appName:y.name};g.email&&(E.email=g.email),g.phoneNumber&&(E.phoneNumber=g.phoneNumber);const S=ve(y,p,E);return S.customData._tokenResponse=g,S}function or(){return(or=(0,c.Z)(function*(y,p){return we(y,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Ii(y,p){return mt.apply(this,arguments)}function mt(){return(mt=(0,c.Z)(function*(y,p){return we(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ta(y,p){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,c.Z)(function*(y,p){return we(y,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function ar(y){if(y)try{const p=new Date(Number(y));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function lr(){return(lr=(0,c.Z)(function*(y,p=!1){const g=(0,V.m9)(y),E=yield g.getIdToken(p),S=br(E);oe(S&&S.exp&&S.auth_time&&S.iat,g.auth,"internal-error");const N="object"==typeof S.firebase?S.firebase:void 0,$=null==N?void 0:N.sign_in_provider;return{claims:S,token:E,authTime:ar(kr(S.auth_time)),issuedAtTime:ar(kr(S.iat)),expirationTime:ar(kr(S.exp)),signInProvider:$||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function kr(y){return 1e3*Number(y)}function br(y){const[p,g,E]=y.split(".");if(void 0===p||void 0===g||void 0===E)return Fe("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,V.tV)(g);return S?JSON.parse(S):(Fe("Failed to decode base64 JWT payload"),null)}catch(S){return Fe("Caught error parsing JWT payload as JSON",null==S?void 0:S.toString()),null}}function Lt(y,p){return wt.apply(this,arguments)}function wt(){return(wt=(0,c.Z)(function*(y,p,g=!1){if(g)return p;try{return yield p}catch(E){throw E instanceof V.ZR&&Mt(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}function Mt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class mo{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var g;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const S=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(p=!1){var g=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,c.Z)(function*(){yield g.iteration()}),E)}iteration(){var p=this;return(0,c.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===(null==g?void 0:g.code)&&p.schedule(!0))}p.schedule()})()}}class Gs{constructor(p,g){this.createdAt=p,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=ar(this.lastLoginAt),this.creationTime=ar(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function $t(y){return ui.apply(this,arguments)}function ui(){return(ui=(0,c.Z)(function*(y){var p;const g=y.auth,E=yield y.getIdToken(),S=yield Lt(y,Ta(g,{idToken:E}));oe(null==S?void 0:S.users.length,g,"internal-error");const N=S.users[0];y._notifyReloadListener(N);const $=(null===(p=N.providerUserInfo)||void 0===p?void 0:p.length)?qs(N.providerUserInfo):[],J=At(y.providerData,$),tt=!!y.isAnonymous&&!(y.email&&N.passwordHash||(null==J?void 0:J.length)),st={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:J,metadata:new Gs(N.createdAt,N.lastLoginAt),isAnonymous:tt};Object.assign(y,st)})).apply(this,arguments)}function Ai(){return(Ai=(0,c.Z)(function*(y){const p=(0,V.m9)(y);yield $t(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function At(y,p){return[...y.filter(E=>!p.some(S=>S.providerId===E.providerId)),...p]}function qs(y){return y.map(p=>{var{providerId:g}=p,E=(0,le._T)(p,["providerId"]);return{providerId:g,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function is(){return(is=(0,c.Z)(function*(y,p){const g=yield Bt(y,{},(0,c.Z)(function*(){const E=(0,V.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:S,apiKey:N}=y.config,$=Hn(y,S,"/v1/token",`key=${N}`),J=yield y._getAdditionalHeaders();return J["Content-Type"]="application/x-www-form-urlencoded",te.fetch()($,{method:"POST",headers:J,body:E})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Yr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){oe(p.idToken,"internal-error"),oe(void 0!==p.idToken,"internal-error"),oe(void 0!==p.refreshToken,"internal-error");const g="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function Di(y){const p=br(y);return oe(p,"internal-error"),oe(void 0!==p.exp,"internal-error"),oe(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,g)}getToken(p,g=!1){var E=this;return(0,c.Z)(function*(){return oe(!E.accessToken||E.refreshToken,p,"user-token-expired"),g||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,g){var E=this;return(0,c.Z)(function*(){const{accessToken:S,refreshToken:N,expiresIn:$}=yield function Xt(y,p){return is.apply(this,arguments)}(p,g);E.updateTokensAndExpiration(S,N,Number($))})()}updateTokensAndExpiration(p,g,E){this.refreshToken=g||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,g){const{refreshToken:E,accessToken:S,expirationTime:N}=g,$=new Yr;return E&&(oe("string"==typeof E,"internal-error",{appName:p}),$.refreshToken=E),S&&(oe("string"==typeof S,"internal-error",{appName:p}),$.accessToken=S),N&&(oe("number"==typeof N,"internal-error",{appName:p}),$.expirationTime=N),$}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Yr,this.toJSON())}_performRefresh(){return xt("not implemented")}}function Mn(y,p){oe("string"==typeof y||void 0===y,"internal-error",{appName:p})}class Gn{constructor(p){var{uid:g,auth:E,stsTokenManager:S}=p,N=(0,le._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=E,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new Gs(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(p){var g=this;return(0,c.Z)(function*(){const E=yield Lt(g,g.stsTokenManager.getToken(g.auth,p));return oe(E,g.auth,"internal-error"),g.accessToken!==E&&(g.accessToken=E,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),E})()}getIdTokenResult(p){return function xu(y){return lr.apply(this,arguments)}(this,p)}reload(){return function $n(y){return Ai.apply(this,arguments)}(this)}_assign(p){this!==p&&(oe(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(g=>Object.assign({},g)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const g=new Gn(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(p){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,g=!1){var E=this;return(0,c.Z)(function*(){let S=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),S=!0),g&&(yield $t(E)),yield E.auth._persistUserIfCurrent(E),S&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,c.Z)(function*(){const g=yield p.getIdToken();return yield Lt(p,function Cr(y,p){return or.apply(this,arguments)}(p.auth,{idToken:g})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,g){var E,S,N,$,J,Se,Ue,tt;const st=null!==(E=g.displayName)&&void 0!==E?E:void 0,Fn=null!==(S=g.email)&&void 0!==S?S:void 0,io=null!==(N=g.phoneNumber)&&void 0!==N?N:void 0,Rd=null!==($=g.photoURL)&&void 0!==$?$:void 0,Zp=null!==(J=g.tenantId)&&void 0!==J?J:void 0,kd=null!==(Se=g._redirectEventId)&&void 0!==Se?Se:void 0,rf=null!==(Ue=g.createdAt)&&void 0!==Ue?Ue:void 0,Kp=null!==(tt=g.lastLoginAt)&&void 0!==tt?tt:void 0,{uid:mc,emailVerified:su,isAnonymous:Yp,providerData:Fd,stsTokenManager:sf}=g;oe(mc&&sf,p,"internal-error");const Qp=Yr.fromJSON(this.name,sf);oe("string"==typeof mc,p,"internal-error"),Mn(st,p.name),Mn(Fn,p.name),oe("boolean"==typeof su,p,"internal-error"),oe("boolean"==typeof Yp,p,"internal-error"),Mn(io,p.name),Mn(Rd,p.name),Mn(Zp,p.name),Mn(kd,p.name),Mn(rf,p.name),Mn(Kp,p.name);const _c=new Gn({uid:mc,auth:p,email:Fn,emailVerified:su,displayName:st,isAnonymous:Yp,photoURL:Rd,phoneNumber:io,tenantId:Zp,stsTokenManager:Qp,createdAt:rf,lastLoginAt:Kp});return Fd&&Array.isArray(Fd)&&(_c.providerData=Fd.map(Bv=>Object.assign({},Bv))),kd&&(_c._redirectEventId=kd),_c}static _fromIdTokenResponse(p,g,E=!1){return(0,c.Z)(function*(){const S=new Yr;S.updateFromServerResponse(g);const N=new Gn({uid:g.localId,auth:p,stsTokenManager:S,isAnonymous:E});return yield $t(N),N})()}}const _o=new Map;function Xn(y){Rt(y instanceof Function,"Expected a class definition");let p=_o.get(y);return p?(Rt(p instanceof y,"Instance stored in cache mismatched with class"),p):(p=new y,_o.set(y,p),p)}const Hr=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(g,E){var S=this;return(0,c.Z)(function*(){S.storage[g]=E})()}_get(g){var E=this;return(0,c.Z)(function*(){const S=E.storage[g];return void 0===S?null:S})()}_remove(g){var E=this;return(0,c.Z)(function*(){delete E.storage[g]})()}_addListener(g,E){}_removeListener(g,E){}}return y.type="NONE",y})();function H(y,p,g){return`firebase:${y}:${p}:${g}`}class B{constructor(p,g,E){this.persistence=p,this.auth=g,this.userKey=E;const{config:S,name:N}=this.auth;this.fullUserKey=H(this.userKey,S.apiKey,N),this.fullPersistenceKey=H("persistence",S.apiKey,N),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,c.Z)(function*(){const g=yield p.persistence._get(p.fullUserKey);return g?Gn._fromJSON(p.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var g=this;return(0,c.Z)(function*(){if(g.persistence===p)return;const E=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=p,E?g.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,g,E="authUser"){return(0,c.Z)(function*(){if(!g.length)return new B(Xn(Hr),p,E);const S=(yield Promise.all(g.map(function(){var Ue=(0,c.Z)(function*(tt){if(yield tt._isAvailable())return tt});return function(tt){return Ue.apply(this,arguments)}}()))).filter(Ue=>Ue);let N=S[0]||Xn(Hr);const $=H(E,p.config.apiKey,p.name);let J=null;for(const Ue of g)try{const tt=yield Ue._get($);if(tt){const st=Gn._fromJSON(p,tt);Ue!==N&&(J=st),N=Ue;break}}catch(tt){}const Se=S.filter(Ue=>Ue._shouldAllowMigration);return N._shouldAllowMigration&&Se.length?(N=Se[0],J&&(yield N._set($,J.toJSON())),yield Promise.all(g.map(function(){var Ue=(0,c.Z)(function*(tt){if(tt!==N)try{yield tt._remove($)}catch(st){}});return function(tt){return Ue.apply(this,arguments)}}())),new B(N,p,E)):new B(N,p,E)})()}}function Z(y){const p=y.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(kt(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Ae(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Vn(p))return"Blackberry";if(Cn(p))return"Webos";if(se(p))return"Safari";if((p.includes("chrome/")||nt(p))&&!p.includes("edge/"))return"Chrome";if(Pt(p))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Ae(y=(0,V.z$)()){return/firefox\//i.test(y)}function se(y=(0,V.z$)()){const p=y.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function nt(y=(0,V.z$)()){return/crios\//i.test(y)}function kt(y=(0,V.z$)()){return/iemobile/i.test(y)}function Pt(y=(0,V.z$)()){return/android/i.test(y)}function Vn(y=(0,V.z$)()){return/blackberry/i.test(y)}function Cn(y=(0,V.z$)()){return/webos/i.test(y)}function hn(y=(0,V.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function ci(y=(0,V.z$)()){return hn(y)||Pt(y)||Cn(y)||Vn(y)||/windows phone/i.test(y)||kt(y)}function ae(y,p=[]){let g;switch(y){case"Browser":g=Z((0,V.z$)());break;case"Worker":g=`${Z((0,V.z$)())}-${y}`;break;default:g=y}const E=p.length?p.join(","):"FirebaseCore-web";return`${g}/JsCore/${ce.SDK_VERSION}/${E}`}function Me(){return(Me=(0,c.Z)(function*(y){return(yield we(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function me(y,p){return He.apply(this,arguments)}function He(){return(He=(0,c.Z)(function*(y,p){return we(y,"GET","/v2/recaptchaConfig",ke(y,p))})).apply(this,arguments)}function lt(y){return void 0!==y&&void 0!==y.getResponse}function Gt(y){return void 0!==y&&void 0!==y.enterprise}class qn{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function Tr(y){return new Promise((p,g)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=p,E.onerror=S=>{const N=ve("internal-error");N.customData=S,g(N)},E.type="text/javascript",E.charset="UTF-8",function rn(){var y,p;return null!==(p=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==p?p:document}().appendChild(E)})}function vn(y){return`__${y}${Math.floor(1e6*Math.random())}`}class bl{constructor(p){this.type="recaptcha-enterprise",this.auth=bn(p)}verify(p="verify",g=!1){var E=this;return(0,c.Z)(function*(){function N(){return N=(0,c.Z)(function*(J){if(!g){if(null==J.tenantId&&null!=J._agentRecaptchaConfig)return J._agentRecaptchaConfig.siteKey;if(null!=J.tenantId&&void 0!==J._tenantRecaptchaConfigs[J.tenantId])return J._tenantRecaptchaConfigs[J.tenantId].siteKey}return new Promise(function(){var Se=(0,c.Z)(function*(Ue,tt){me(J,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(st=>{if(void 0!==st.recaptchaKey){const Fn=new qn(st);return null==J.tenantId?J._agentRecaptchaConfig=Fn:J._tenantRecaptchaConfigs[J.tenantId]=Fn,Ue(Fn.siteKey)}tt(new Error("recaptcha Enterprise site key undefined"))}).catch(st=>{tt(st)})});return function(Ue,tt){return Se.apply(this,arguments)}}())}),N.apply(this,arguments)}function $(J,Se,Ue){const tt=window.grecaptcha;Gt(tt)?tt.enterprise.ready(()=>{tt.enterprise.execute(J,{action:p}).then(st=>{Se(st)}).catch(()=>{Se("NO_RECAPTCHA")})}):Ue(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((J,Se)=>{(function S(J){return N.apply(this,arguments)})(E.auth).then(Ue=>{if(!g&&Gt(window.grecaptcha))$(Ue,J,Se);else{if("undefined"==typeof window)return void Se(new Error("RecaptchaVerifier is only supported in browser"));Tr("https://www.google.com/recaptcha/enterprise.js?render="+Ue).then(()=>{$(Ue,J,Se)}).catch(tt=>{Se(tt)})}}).catch(Ue=>{Se(Ue)})})})()}}function Qr(y,p,g){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,c.Z)(function*(y,p,g,E=!1){const S=new bl(y);let N;try{N=yield S.verify(g)}catch(J){N=yield S.verify(g,!0)}const $=Object.assign({},p);return Object.assign($,E?{captchaResp:N}:{captchaResponse:N}),Object.assign($,{clientType:"CLIENT_TYPE_WEB"}),Object.assign($,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),$})).apply(this,arguments)}class vo{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,g){const E=N=>new Promise(($,J)=>{try{$(p(N))}catch(Se){J(Se)}});E.onAbort=g,this.queue.push(E);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(p){var g=this;return(0,c.Z)(function*(){if(g.auth.currentUser===p)return;const E=[];try{for(const S of g.queue)yield S(p),S.onAbort&&E.push(S.onAbort)}catch(S){E.reverse();for(const N of E)try{N()}catch($){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null==S?void 0:S.message})}})()}}class Ir{constructor(p,g,E,S){this.app=p,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=E,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wo(this),this.idTokenSubscription=new wo(this),this.beforeStateQueue=new vo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(p,g){var E=this;return g&&(this._popupRedirectResolver=Xn(g)),this._initializationPromise=this.queue((0,c.Z)(function*(){var S,N;if(!E._deleted&&(E.persistenceManager=yield B.create(E,p),!E._deleted)){if(null===(S=E._popupRedirectResolver)||void 0===S?void 0:S._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch($){}yield E.initializeCurrentUser(g),E.lastNotifiedUid=(null===(N=E.currentUser)||void 0===N?void 0:N.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,c.Z)(function*(){if(p._deleted)return;const g=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||g){if(p.currentUser&&g&&p.currentUser.uid===g.uid)return p._currentUser._assign(g),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(g,!0)}})()}initializeCurrentUser(p){var g=this;return(0,c.Z)(function*(){var E;const S=yield g.assertedPersistence.getCurrentUser();let N=S,$=!1;if(p&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const J=null===(E=g.redirectUser)||void 0===E?void 0:E._redirectEventId,Se=null==N?void 0:N._redirectEventId,Ue=yield g.tryRedirectSignIn(p);(!J||J===Se)&&(null==Ue?void 0:Ue.user)&&(N=Ue.user,$=!0)}if(!N)return g.directlySetCurrentUser(null);if(!N._redirectEventId){if($)try{yield g.beforeStateQueue.runMiddleware(N)}catch(J){N=S,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(J))}return N?g.reloadAndSetCurrentUserOrClear(N):g.directlySetCurrentUser(null)}return oe(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===N._redirectEventId?g.directlySetCurrentUser(N):g.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(p){var g=this;return(0,c.Z)(function*(){let E=null;try{E=yield g._popupRedirectResolver._completeRedirectFn(g,p,!0)}catch(S){yield g._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var g=this;return(0,c.Z)(function*(){try{yield $t(p)}catch(E){if("auth/network-request-failed"!==(null==E?void 0:E.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function go(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var p=this;return(0,c.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var g=this;return(0,c.Z)(function*(){const E=p?(0,V.m9)(p):null;return E&&oe(E.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(E&&E._clone(g))})()}_updateCurrentUser(p,g=!1){var E=this;return(0,c.Z)(function*(){if(!E._deleted)return p&&oe(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),g||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,c.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,c.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var g=this;return this.queue((0,c.Z)(function*(){yield g.assertedPersistence.setPersistence(Xn(p))}))}initializeRecaptchaConfig(){var p=this;return(0,c.Z)(function*(){const g=yield me(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new qn(g);null==p.tenantId?p._agentRecaptchaConfig=E:p._tenantRecaptchaConfigs[p.tenantId]=E,E.emailPasswordEnabled&&new bl(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new V.LL("auth","Firebase",p())}onAuthStateChanged(p,g,E){return this.registerStateListener(this.authStateSubscription,p,g,E)}beforeAuthStateChanged(p,g){return this.beforeStateQueue.pushCallback(p,g)}onIdTokenChanged(p,g,E){return this.registerStateListener(this.idTokenSubscription,p,g,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,g){var E=this;return(0,c.Z)(function*(){const S=yield E.getOrInitRedirectPersistenceManager(g);return null===p?S.removeCurrentUser():S.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var g=this;return(0,c.Z)(function*(){if(!g.redirectPersistenceManager){const E=p&&Xn(p)||g._popupRedirectResolver;oe(E,g,"argument-error"),g.redirectPersistenceManager=yield B.create(g,[Xn(E._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(p){var g=this;return(0,c.Z)(function*(){var E,S;return g._isInitialized&&(yield g.queue((0,c.Z)(function*(){}))),(null===(E=g._currentUser)||void 0===E?void 0:E._redirectEventId)===p?g._currentUser:(null===(S=g.redirectUser)||void 0===S?void 0:S._redirectEventId)===p?g.redirectUser:null})()}_persistUserIfCurrent(p){var g=this;return(0,c.Z)(function*(){if(p===g.currentUser)return g.queue((0,c.Z)(function*(){return g.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(g=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,g,E,S){if(this._deleted)return()=>{};const N="function"==typeof g?g:g.next.bind(g),$=this._isInitialized?Promise.resolve():this._initializationPromise;return oe($,this,"internal-error"),$.then(()=>N(this.currentUser)),"function"==typeof g?p.addObserver(g,E,S):p.addObserver(g)}directlySetCurrentUser(p){var g=this;return(0,c.Z)(function*(){g.currentUser&&g.currentUser!==p&&g._currentUser._stopProactiveRefresh(),p&&g.isProactiveRefreshEnabled&&p._startProactiveRefresh(),g.currentUser=p,p?yield g.assertedPersistence.setCurrentUser(p):yield g.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=ae(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,c.Z)(function*(){var g;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const S=yield null===(g=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();S&&(E["X-Firebase-Client"]=S);const N=yield p._getAppCheckToken();return N&&(E["X-Firebase-AppCheck"]=N),E})()}_getAppCheckToken(){var p=this;return(0,c.Z)(function*(){var g;const E=yield null===(g=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return(null==E?void 0:E.error)&&function ut(y,...p){ot.logLevel<=pe.in.WARN&&ot.warn(`Auth (${ce.SDK_VERSION}): ${y}`,...p)}(`Error while retrieving App Check token: ${E.error}`),null==E?void 0:E.token})()}}function bn(y){return(0,V.m9)(y)}class wo{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,V.ne)(g=>this.observer=g)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Da(y){const p=y.indexOf(":");return p<0?"":y.substr(0,p+1)}function zi(y){if(!y)return null;const p=Number(y);return isNaN(p)?null:p}class Eo{constructor(p,g){this.providerId=p,this.signInMethod=g}toJSON(){return xt("not implemented")}_getIdTokenResponse(p){return xt("not implemented")}_linkToIdToken(p,g){return xt("not implemented")}_getReauthenticationResolver(p){return xt("not implemented")}}function Aa(y,p){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,c.Z)(function*(y,p){return we(y,"POST","/v1/accounts:resetPassword",ke(y,p))})).apply(this,arguments)}function Qc(y,p){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,c.Z)(function*(y,p){return we(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function fp(y,p){return xi.apply(this,arguments)}function xi(){return(xi=(0,c.Z)(function*(y,p){return we(y,"POST","/v1/accounts:update",ke(y,p))})).apply(this,arguments)}function Xr(y,p){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,c.Z)(function*(y,p){return ft(y,"POST","/v1/accounts:signInWithPassword",ke(y,p))})).apply(this,arguments)}function Jc(y,p){return bh.apply(this,arguments)}function bh(){return(bh=(0,c.Z)(function*(y,p){return we(y,"POST","/v1/accounts:sendOobCode",ke(y,p))})).apply(this,arguments)}function pp(y,p){return Th.apply(this,arguments)}function Th(){return(Th=(0,c.Z)(function*(y,p){return Jc(y,p)})).apply(this,arguments)}function Mu(y,p){return gp.apply(this,arguments)}function gp(){return(gp=(0,c.Z)(function*(y,p){return Jc(y,p)})).apply(this,arguments)}function Ih(y,p){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,c.Z)(function*(y,p){return Jc(y,p)})).apply(this,arguments)}function Wm(y,p){return Dh.apply(this,arguments)}function Dh(){return(Dh=(0,c.Z)(function*(y,p){return Jc(y,p)})).apply(this,arguments)}function mp(){return(mp=(0,c.Z)(function*(y,p){return ft(y,"POST","/v1/accounts:signInWithEmailLink",ke(y,p))})).apply(this,arguments)}function Nu(){return(Nu=(0,c.Z)(function*(y,p){return ft(y,"POST","/v1/accounts:signInWithEmailLink",ke(y,p))})).apply(this,arguments)}class Xc extends Eo{constructor(p,g,E,S=null){super("password",E),this._email=p,this._password=g,this._tenantId=S}static _fromEmailAndPassword(p,g){return new Xc(p,g,"password")}static _fromEmailAndCode(p,g,E=null){return new Xc(p,g,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(p){var g=this;return(0,c.Z)(function*(){var E;switch(g.signInMethod){case"password":const S={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null===(E=p._getRecaptchaConfig())||void 0===E?void 0:E.emailPasswordEnabled){const N=yield Qr(p,S,"signInWithPassword");return Xr(p,N)}return Xr(p,S).catch(function(){var N=(0,c.Z)(function*($){if("auth/missing-recaptcha-token"===$.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const J=yield Qr(p,S,"signInWithPassword");return Xr(p,J)}return Promise.reject($)});return function($){return N.apply(this,arguments)}}());case"emailLink":return function Ah(y,p){return mp.apply(this,arguments)}(p,{email:g._email,oobCode:g._password});default:Ee(p,"internal-error")}})()}_linkToIdToken(p,g){var E=this;return(0,c.Z)(function*(){switch(E.signInMethod){case"password":return Qc(p,{idToken:g,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function _p(y,p){return Nu.apply(this,arguments)}(p,{idToken:g,email:E._email,oobCode:E._password});default:Ee(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Wi(y,p){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,c.Z)(function*(y,p){return ft(y,"POST","/v1/accounts:signInWithIdp",ke(y,p))})).apply(this,arguments)}class Mi extends Eo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const g=new Mi(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(g.idToken=p.idToken),p.accessToken&&(g.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(g.nonce=p.nonce),p.pendingToken&&(g.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(g.accessToken=p.oauthToken,g.secret=p.oauthTokenSecret):Ee("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:S}=g,N=(0,le._T)(g,["providerId","signInMethod"]);if(!E||!S)return null;const $=new Mi(E,S);return $.idToken=N.idToken||void 0,$.accessToken=N.accessToken||void 0,$.secret=N.secret,$.nonce=N.nonce,$.pendingToken=N.pendingToken||null,$}_getIdTokenResponse(p){return Wi(p,this.buildRequest())}_linkToIdToken(p,g){const E=this.buildRequest();return E.idToken=g,Wi(p,E)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,Wi(p,g)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),p.postBody=(0,V.xO)(g)}return p}}function Il(y,p){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,c.Z)(function*(y,p){return we(y,"POST","/v1/accounts:sendVerificationCode",ke(y,p))})).apply(this,arguments)}function xh(){return(xh=(0,c.Z)(function*(y,p){return ft(y,"POST","/v1/accounts:signInWithPhoneNumber",ke(y,p))})).apply(this,arguments)}function Dl(){return(Dl=(0,c.Z)(function*(y,p){const g=yield ft(y,"POST","/v1/accounts:signInWithPhoneNumber",ke(y,p));if(g.temporaryProof)throw Ln(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const vp={USER_NOT_FOUND:"user-not-found"};function xa(){return(xa=(0,c.Z)(function*(y,p){return ft(y,"POST","/v1/accounts:signInWithPhoneNumber",ke(y,Object.assign(Object.assign({},p),{operation:"REAUTH"})),vp)})).apply(this,arguments)}class Nn extends Eo{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,g){return new Nn({verificationId:p,verificationCode:g})}static _fromTokenResponse(p,g){return new Nn({phoneNumber:p,temporaryProof:g})}_getIdTokenResponse(p){return function yp(y,p){return xh.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,g){return function ed(y,p){return Dl.apply(this,arguments)}(p,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function td(y,p){return xa.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:g,verificationId:E,verificationCode:S}=this.params;return p&&g?{temporaryProof:p,phoneNumber:g}:{sessionInfo:E,code:S}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:g,verificationCode:E,phoneNumber:S,temporaryProof:N}=p;return E||g||S||N?new Nn({verificationId:g,verificationCode:E,phoneNumber:S,temporaryProof:N}):null}}class Ma{constructor(p){var g,E,S,N,$,J;const Se=(0,V.zd)((0,V.pd)(p)),Ue=null!==(g=Se.apiKey)&&void 0!==g?g:null,tt=null!==(E=Se.oobCode)&&void 0!==E?E:null,st=function Ou(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Se.mode)&&void 0!==S?S:null);oe(Ue&&tt&&st,"argument-error"),this.apiKey=Ue,this.operation=st,this.code=tt,this.continueUrl=null!==(N=Se.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==($=Se.languageCode)&&void 0!==$?$:null,this.tenantId=null!==(J=Se.tenantId)&&void 0!==J?J:null}static parseLink(p){const g=function Zm(y){const p=(0,V.zd)((0,V.pd)(y)).link,g=p?(0,V.zd)((0,V.pd)(p)).deep_link_id:null,E=(0,V.zd)((0,V.pd)(y)).deep_link_id;return(E?(0,V.zd)((0,V.pd)(E)).link:null)||E||g||p||y}(p);try{return new Ma(g)}catch(E){return null}}}let nd=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,E){return Xc._fromEmailAndPassword(g,E)}static credentialWithLink(g,E){const S=Ma.parseLink(E);return oe(S,"argument-error"),Xc._fromEmailAndCode(g,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class ss{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Pa extends ss{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Is extends Pa{static credentialFromJSON(p){const g="string"==typeof p?JSON.parse(p):p;return oe("providerId"in g&&"signInMethod"in g,"argument-error"),Mi._fromParams(g)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return oe(p.idToken||p.accessToken,"argument-error"),Mi._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Is.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Is.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:g,oauthAccessToken:E,oauthTokenSecret:S,pendingToken:N,nonce:$,providerId:J}=p;if(!E&&!S&&!g&&!N||!J)return null;try{return new Is(J)._credential({idToken:g,accessToken:E,nonce:$,pendingToken:N})}catch(Se){return null}}}let Km=(()=>{class y extends Pa{constructor(){super("facebook.com")}static credential(g){return Mi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(E){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),On=(()=>{class y extends Pa{constructor(){super("google.com"),this.addScope("profile")}static credential(g,E){return Mi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:E})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:E,oauthAccessToken:S}=g;if(!E&&!S)return null;try{return y.credential(E,S)}catch(N){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),rd=(()=>{class y extends Pa{constructor(){super("github.com")}static credential(g){return Mi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(E){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class pn extends Eo{constructor(p,g){super(p,p),this.pendingToken=g}_getIdTokenResponse(p){return Wi(p,this.buildRequest())}_linkToIdToken(p,g){const E=this.buildRequest();return E.idToken=g,Wi(p,E)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,Wi(p,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:S,pendingToken:N}=g;return E&&S&&N&&E===S?new pn(E,N):null}static _create(p,g){return new pn(p,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Na extends ss{constructor(p){oe(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Na.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Na.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const g=pn.fromJSON(p);return oe(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:g,providerId:E}=p;if(!g||!E)return null;try{return pn._create(E,g)}catch(S){return null}}}let Oa=(()=>{class y extends Pa{constructor(){super("twitter.com")}static credential(g,E){return Mi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:E})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:E,oauthTokenSecret:S}=g;if(!E||!S)return null;try{return y.credential(E,S)}catch(N){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Dr(y,p){return ku.apply(this,arguments)}function ku(){return(ku=(0,c.Z)(function*(y,p){return ft(y,"POST","/v1/accounts:signUp",ke(y,p))})).apply(this,arguments)}class Gr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,g,E,S=!1){return(0,c.Z)(function*(){const N=yield Gn._fromIdTokenResponse(p,E,S),$=os(E);return new Gr({user:N,providerId:$,_tokenResponse:E,operationType:g})})()}static _forOperation(p,g,E){return(0,c.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const S=os(E);return new Gr({user:p,providerId:S,_tokenResponse:E,operationType:g})})()}}function os(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function zo(){return(zo=(0,c.Z)(function*(y){var p;const g=bn(y);if(yield g._initializationPromise,null===(p=g.currentUser)||void 0===p?void 0:p.isAnonymous)return new Gr({user:g.currentUser,providerId:null,operationType:"signIn"});const E=yield Dr(g,{returnSecureToken:!0}),S=yield Gr._fromIdTokenResponse(g,"signIn",E,!0);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class as extends V.ZR{constructor(p,g,E,S){var N;super(g.code,g.message),this.operationType=E,this.user=S,Object.setPrototypeOf(this,as.prototype),this.customData={appName:p.name,tenantId:null!==(N=p.tenantId)&&void 0!==N?N:void 0,_serverResponse:g.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,g,E,S){return new as(p,g,E,S)}}function id(y,p,g,E){return("reauthenticate"===p?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?as._fromErrorAndOperation(y,N,p,E):N})}function Ds(y){return new Set(y.map(({providerId:p})=>p).filter(p=>!!p))}function di(){return(di=(0,c.Z)(function*(y,p){const g=(0,V.m9)(y);yield Wo(!0,g,p);const{providerUserInfo:E}=yield Ii(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[p]}),S=Ds(E||[]);return g.providerData=g.providerData.filter(N=>S.has(N.providerId)),S.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Dt(y,p){return Al.apply(this,arguments)}function Al(){return(Al=(0,c.Z)(function*(y,p,g=!1){const E=yield Lt(y,p._linkToIdToken(y.auth,yield y.getIdToken()),g);return Gr._forOperation(y,"link",E)})).apply(this,arguments)}function Wo(y,p,g){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,c.Z)(function*(y,p,g){yield $t(p);const S=!1===y?"provider-already-linked":"no-such-provider";oe(Ds(p.providerData).has(g)===y,p.auth,S)})).apply(this,arguments)}function Mh(y,p){return ka.apply(this,arguments)}function ka(){return(ka=(0,c.Z)(function*(y,p,g=!1){const{auth:E}=y,S="reauthenticate";try{const N=yield Lt(y,id(E,S,p,y),g);oe(N.idToken,E,"internal-error");const $=br(N.idToken);oe($,E,"internal-error");const{sub:J}=$;return oe(y.uid===J,E,"user-mismatch"),Gr._forOperation(y,S,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&Ee(E,"user-mismatch"),N}})).apply(this,arguments)}function sd(y,p){return od.apply(this,arguments)}function od(){return(od=(0,c.Z)(function*(y,p,g=!1){const E="signIn",S=yield id(y,E,p),N=yield Gr._fromIdTokenResponse(y,E,S);return g||(yield y._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Pe(y,p){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,c.Z)(function*(y,p){return sd(bn(y),p)})).apply(this,arguments)}function Ph(y,p){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,c.Z)(function*(y,p){const g=(0,V.m9)(y);return yield Wo(!1,g,p.providerId),Dt(g,p)})).apply(this,arguments)}function Sl(y,p){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,c.Z)(function*(y,p){return Mh((0,V.m9)(y),p)})).apply(this,arguments)}function ls(y,p){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,c.Z)(function*(y,p){return ft(y,"POST","/v1/accounts:signInWithCustomToken",ke(y,p))})).apply(this,arguments)}function As(){return(As=(0,c.Z)(function*(y,p){const g=bn(y),E=yield ls(g,{token:p,returnSecureToken:!0}),S=yield Gr._fromIdTokenResponse(g,"signIn",E);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class Fa{constructor(p,g){this.factorId=p,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(p,g){return"phoneInfo"in g?bo._fromServerResponse(p,g):"totpInfo"in g?La._fromServerResponse(p,g):Ee(p,"internal-error")}}class bo extends Fa{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,g){return new bo(g)}}class La extends Fa{constructor(p){super("totp",p)}static _fromServerResponse(p,g){return new La(g)}}function Kn(y,p,g){var E;oe((null===(E=g.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),oe(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),p.continueUrl=g.url,p.dynamicLinkDomain=g.dynamicLinkDomain,p.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(oe(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),p.iOSBundleId=g.iOS.bundleId),g.android&&(oe(g.android.packageName.length>0,y,"missing-android-pkg-name"),p.androidInstallApp=g.android.installApp,p.androidMinimumVersionCode=g.android.minimumVersion,p.androidPackageName=g.android.packageName)}function Va(){return Va=(0,c.Z)(function*(y,p,g){var E;const S=bn(y),N={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null===(E=S._getRecaptchaConfig())||void 0===E?void 0:E.emailPasswordEnabled){const $=yield Qr(S,N,"getOobCode",!0);g&&Kn(S,$,g),yield Mu(S,$)}else g&&Kn(S,N,g),yield Mu(S,N).catch(function(){var $=(0,c.Z)(function*(J){if("auth/missing-recaptcha-token"!==J.code)return Promise.reject(J);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Se=yield Qr(S,N,"getOobCode",!0);g&&Kn(S,Se,g),yield Mu(S,Se)}});return function(J){return $.apply(this,arguments)}}())}),Va.apply(this,arguments)}function us(){return(us=(0,c.Z)(function*(y,p,g){yield Aa((0,V.m9)(y),{oobCode:p,newPassword:g})})).apply(this,arguments)}function Ss(){return(Ss=(0,c.Z)(function*(y,p){yield fp((0,V.m9)(y),{oobCode:p})})).apply(this,arguments)}function Vu(y,p){return xl.apply(this,arguments)}function xl(){return(xl=(0,c.Z)(function*(y,p){const g=(0,V.m9)(y),E=yield Aa(g,{oobCode:p}),S=E.requestType;switch(oe(S,g,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":oe(E.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":oe(E.mfaInfo,g,"internal-error");default:oe(E.email,g,"internal-error")}let N=null;return E.mfaInfo&&(N=Fa._fromServerResponse(bn(g),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:N},operation:S}})).apply(this,arguments)}function To(){return(To=(0,c.Z)(function*(y,p){const{data:g}=yield Vu((0,V.m9)(y),p);return g.email})).apply(this,arguments)}function Ko(){return Ko=(0,c.Z)(function*(y,p,g){var E;const S=bn(y),N={returnSecureToken:!0,email:p,password:g,clientType:"CLIENT_TYPE_WEB"};let $;if(null===(E=S._getRecaptchaConfig())||void 0===E?void 0:E.emailPasswordEnabled){const Ue=yield Qr(S,N,"signUpPassword");$=Dr(S,Ue)}else $=Dr(S,N).catch(function(){var Ue=(0,c.Z)(function*(tt){if("auth/missing-recaptcha-token"===tt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const st=yield Qr(S,N,"signUpPassword");return Dr(S,st)}return Promise.reject(tt)});return function(tt){return Ue.apply(this,arguments)}}());const J=yield $.catch(Ue=>Promise.reject(Ue)),Se=yield Gr._fromIdTokenResponse(S,"signIn",J);return yield S._updateCurrentUser(Se.user),Se}),Ko.apply(this,arguments)}function Io(){return Io=(0,c.Z)(function*(y,p,g){var E;const S=bn(y),N={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function $(J,Se){oe(Se.handleCodeInApp,S,"argument-error"),Se&&Kn(S,J,Se)}if(null===(E=S._getRecaptchaConfig())||void 0===E?void 0:E.emailPasswordEnabled){const J=yield Qr(S,N,"getOobCode",!0);$(J,g),yield Ih(S,J)}else $(N,g),yield Ih(S,N).catch(function(){var J=(0,c.Z)(function*(Se){if("auth/missing-recaptcha-token"!==Se.code)return Promise.reject(Se);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ue=yield Qr(S,N,"getOobCode",!0);$(Ue,g),yield Ih(S,Ue)}});return function(Se){return J.apply(this,arguments)}}())}),Io.apply(this,arguments)}function ud(){return(ud=(0,c.Z)(function*(y,p,g){const E=(0,V.m9)(y),S=nd.credentialWithLink(p,g||Tt());return oe(S._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Pe(E,S)})).apply(this,arguments)}function cd(y,p){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,c.Z)(function*(y,p){return we(y,"POST","/v1/accounts:createAuthUri",ke(y,p))})).apply(this,arguments)}function Bu(){return(Bu=(0,c.Z)(function*(y,p){const E={identifier:p,continueUri:sn()?Tt():"http://localhost"},{signinMethods:S}=yield cd((0,V.m9)(y),E);return S||[]})).apply(this,arguments)}function hi(){return(hi=(0,c.Z)(function*(y,p){const g=(0,V.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};p&&Kn(g.auth,S,p);const{email:N}=yield pp(g.auth,S);N!==y.email&&(yield y.reload())})).apply(this,arguments)}function ju(){return(ju=(0,c.Z)(function*(y,p,g){const E=(0,V.m9)(y),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:p};g&&Kn(E.auth,N,g);const{email:$}=yield Wm(E.auth,N);$!==y.email&&(yield y.reload())})).apply(this,arguments)}function Cp(y,p){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,c.Z)(function*(y,p){return we(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Hu(){return(Hu=(0,c.Z)(function*(y,{displayName:p,photoURL:g}){if(void 0===p&&void 0===g)return;const E=(0,V.m9)(y),N={idToken:yield E.getIdToken(),displayName:p,photoUrl:g,returnSecureToken:!0},$=yield Lt(E,Cp(E.auth,N));E.displayName=$.displayName||null,E.photoURL=$.photoUrl||null;const J=E.providerData.find(({providerId:Se})=>"password"===Se);J&&(J.displayName=E.displayName,J.photoURL=E.photoURL),yield E._updateTokensIfNecessary($)})).apply(this,arguments)}function $u(y,p,g){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,c.Z)(function*(y,p,g){const{auth:E}=y,N={idToken:yield y.getIdToken(),returnSecureToken:!0};p&&(N.email=p),g&&(N.password=g);const $=yield Lt(y,Qc(E,N));yield y._updateTokensIfNecessary($,!0)})).apply(this,arguments)}class Do{constructor(p,g,E={}){this.isNewUser=p,this.providerId=g,this.profile=E}}class Tp extends Do{constructor(p,g,E,S){super(p,g,E),this.username=S}}class Ws extends Do{constructor(p,g){super(p,"facebook.com",g)}}class qu extends Tp{constructor(p,g){super(p,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Ip extends Do{constructor(p,g){super(p,"google.com",g)}}class Qm extends Tp{constructor(p,g,E){super(p,"twitter.com",g,E)}}function Ba(y){const{user:p,_tokenResponse:g}=y;return p.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Gu(y){var p,g;if(!y)return null;const{providerId:E}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},N=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&(null==y?void 0:y.idToken)){const $=null===(g=null===(p=br(y.idToken))||void 0===p?void 0:p.firebase)||void 0===g?void 0:g.sign_in_provider;if($)return new Do(N,"anonymous"!==$&&"custom"!==$?$:null)}if(!E)return null;switch(E){case"facebook.com":return new Ws(N,S);case"github.com":return new qu(N,S);case"google.com":return new Ip(N,S);case"twitter.com":return new Qm(N,S,y.screenName||null);case"custom":case"anonymous":return new Do(N,null);default:return new Do(N,E,S)}}(g)}class Ao{constructor(p,g,E){this.type=p,this.credential=g,this.auth=E}static _fromIdtoken(p,g){return new Ao("enroll",p,g)}static _fromMfaPendingCredential(p){return new Ao("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var g,E;if(null==p?void 0:p.multiFactorSession){if(null===(g=p.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return Ao._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(E=p.multiFactorSession)||void 0===E?void 0:E.idToken)return Ao._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Ms{constructor(p,g,E){this.session=p,this.hints=g,this.signInResolver=E}static _fromError(p,g){const E=bn(p),S=g.customData._serverResponse,N=(S.mfaInfo||[]).map(J=>Fa._fromServerResponse(E,J));oe(S.mfaPendingCredential,E,"internal-error");const $=Ao._fromMfaPendingCredential(S.mfaPendingCredential);return new Ms($,N,function(){var J=(0,c.Z)(function*(Se){const Ue=yield Se._process(E,$);delete S.mfaInfo,delete S.mfaPendingCredential;const tt=Object.assign(Object.assign({},S),{idToken:Ue.idToken,refreshToken:Ue.refreshToken});switch(g.operationType){case"signIn":const st=yield Gr._fromIdTokenResponse(E,g.operationType,tt);return yield E._updateCurrentUser(st.user),st;case"reauthenticate":return oe(g.user,E,"internal-error"),Gr._forOperation(g.user,g.operationType,tt);default:Ee(E,"internal-error")}});return function(Se){return J.apply(this,arguments)}}())}resolveSignIn(p){var g=this;return(0,c.Z)(function*(){return g.signInResolver(p)})()}}function Zs(y,p){return we(y,"POST","/v2/accounts/mfaEnrollment:start",ke(y,p))}class Ha{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(E=>Fa._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new Ha(p)}getSession(){var p=this;return(0,c.Z)(function*(){return Ao._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,g){var E=this;return(0,c.Z)(function*(){const S=p,N=yield E.getSession(),$=yield Lt(E.user,S._process(E.user.auth,N,g));return yield E.user._updateTokensIfNecessary($),E.user.reload()})()}unenroll(p){var g=this;return(0,c.Z)(function*(){const E="string"==typeof p?p:p.uid,S=yield g.user.getIdToken();try{const N=yield Lt(g.user,function Lh(y,p){return we(y,"POST","/v2/accounts/mfaEnrollment:withdraw",ke(y,p))}(g.user.auth,{idToken:S,mfaEnrollmentId:E}));g.enrolledFactors=g.enrolledFactors.filter(({uid:$})=>$!==E),yield g.user._updateTokensIfNecessary(N),yield g.user.reload()}catch(N){throw N}})()}}const $a=new WeakMap,Tn="__sak";class zu{constructor(p,g){this.storageRetriever=p,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Tn,"1"),this.storage.removeItem(Tn),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,g){return this.storage.setItem(p,JSON.stringify(g)),Promise.resolve()}_get(p){const g=this.storage.getItem(p);return Promise.resolve(g?JSON.parse(g):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const ds=(()=>{class y extends zu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,E)=>this.onStorageEvent(g,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function fd(){const y=(0,V.z$)();return se(y)||hn(y)}()&&function qi(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=ci(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const E of Object.keys(this.listeners)){const S=this.storage.getItem(E),N=this.localCache[E];S!==N&&g(E,N,S)}}onStorageEvent(g,E=!1){if(!g.key)return void this.forAllChangedKeys((J,Se,Ue)=>{this.notifyListeners(J,Ue)});const S=g.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const J=this.storage.getItem(S);if(g.newValue!==J)null!==g.newValue?this.storage.setItem(S,g.newValue):this.storage.removeItem(S);else if(this.localCache[S]===g.newValue&&!E)return}const N=()=>{const J=this.storage.getItem(S);!E&&this.localCache[S]===J||this.notifyListeners(S,J)},$=this.storage.getItem(S);!function Gi(){return(0,V.w1)()&&10===document.documentMode}()||$===g.newValue||g.newValue===g.oldValue?N():setTimeout(N,10)}notifyListeners(g,E){this.localCache[g]=E;const S=this.listeners[g];if(S)for(const N of Array.from(S))N(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,E,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:E,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,E){var S=()=>super._set,N=this;return(0,c.Z)(function*(){yield S().call(N,g,E),N.localCache[g]=JSON.stringify(E)})()}_get(g){var E=()=>super._get,S=this;return(0,c.Z)(function*(){const N=yield E().call(S,g);return S.localCache[g]=JSON.stringify(N),N})()}_remove(g){var E=()=>super._remove,S=this;return(0,c.Z)(function*(){yield E().call(S,g),delete S.localCache[g]})()}}return y.type="LOCAL",y})(),hs=(()=>{class y extends zu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,E){}_removeListener(g,E){}}return y.type="SESSION",y})();let pd=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const E=this.receivers.find(N=>N.isListeningto(g));if(E)return E;const S=new y(g);return this.receivers.push(S),S}isListeningto(g){return this.eventTarget===g}handleEvent(g){var E=this;return(0,c.Z)(function*(){const S=g,{eventId:N,eventType:$,data:J}=S.data,Se=E.handlersMap[$];if(!(null==Se?void 0:Se.size))return;S.ports[0].postMessage({status:"ack",eventId:N,eventType:$});const Ue=Array.from(Se).map(function(){var st=(0,c.Z)(function*(Fn){return Fn(S.origin,J)});return function(Fn){return st.apply(this,arguments)}}()),tt=yield function Wu(y){return Promise.all(y.map(function(){var p=(0,c.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(E){return{fulfilled:!1,reason:E}}});return function(g){return p.apply(this,arguments)}}()))}(Ue);S.ports[0].postMessage({status:"done",eventId:N,eventType:$,response:tt})})()}_subscribe(g,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(E)}_unsubscribe(g,E){this.handlersMap[g]&&E&&this.handlersMap[g].delete(E),(!E||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function So(y="",p=10){let g="";for(let E=0;E<p;E++)g+=Math.floor(10*Math.random());return y+g}class Ks{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,g,E=50){var S=this;return(0,c.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let $,J;return new Promise((Se,Ue)=>{const tt=So("",20);N.port1.start();const st=setTimeout(()=>{Ue(new Error("unsupported_event"))},E);J={messageChannel:N,onMessage(Fn){const io=Fn;if(io.data.eventId===tt)switch(io.data.status){case"ack":clearTimeout(st),$=setTimeout(()=>{Ue(new Error("timeout"))},3e3);break;case"done":clearTimeout($),Se(io.data.response);break;default:clearTimeout(st),clearTimeout($),Ue(new Error("invalid_response"))}}},S.handlers.add(J),N.port1.addEventListener("message",J.onMessage),S.target.postMessage({eventType:p,eventId:tt,data:g},[N.port2])}).finally(()=>{J&&S.removeMessageHandler(J)})})()}}function gn(){return window}function Nl(){return void 0!==gn().WorkerGlobalScope&&"function"==typeof gn().importScripts}function Ys(){return(Ys=(0,c.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const ti="firebaseLocalStorageDb",Qs="firebaseLocalStorage",fi="fbase_key";class ur{constructor(p){this.request=p}toPromise(){return new Promise((p,g)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Ni(y,p){return y.transaction([Qs],p?"readwrite":"readonly").objectStore(Qs)}function Ga(){const y=indexedDB.open(ti,1);return new Promise((p,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(Qs,{keyPath:fi})}catch(S){g(S)}}),y.addEventListener("success",(0,c.Z)(function*(){const E=y.result;E.objectStoreNames.contains(Qs)?p(E):(E.close(),yield function Wn(){const y=indexedDB.deleteDatabase(ti);return new ur(y).toPromise()}(),p(yield Ga()))}))})}function qa(y,p,g){return Un.apply(this,arguments)}function Un(){return(Un=(0,c.Z)(function*(y,p,g){const E=Ni(y,!0).put({[fi]:p,value:g});return new ur(E).toPromise()})).apply(this,arguments)}function md(){return(md=(0,c.Z)(function*(y,p){const g=Ni(y,!1).get(p),E=yield new ur(g).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function xp(y,p){const g=Ni(y,!0).delete(p);return new ur(g).toPromise()}const Ri=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,c.Z)(function*(){return g.db||(g.db=yield Ga()),g.db})()}_withRetries(g){var E=this;return(0,c.Z)(function*(){let S=0;for(;;)try{const N=yield E._openDb();return yield g(N)}catch(N){if(S++>3)throw N;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,c.Z)(function*(){return Nl()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,c.Z)(function*(){g.receiver=pd._getInstance(function Kt(){return Nl()?self:null}()),g.receiver._subscribe("keyChanged",function(){var E=(0,c.Z)(function*(S,N){return{keyProcessed:(yield g._poll()).includes(N.key)}});return function(S,N){return E.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var E=(0,c.Z)(function*(S,N){return["keyChanged"]});return function(S,N){return E.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,c.Z)(function*(){var E,S;if(g.activeServiceWorker=yield function _r(){return Ys.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Ks(g.activeServiceWorker);const N=yield g.sender._send("ping",{},800);!N||(null===(E=N[0])||void 0===E?void 0:E.fulfilled)&&(null===(S=N[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var E=this;return(0,c.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Ol(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:g},E.serviceWorkerReceiverAvailable?800:50)}catch(S){}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Ga();return yield qa(g,Tn,"1"),yield xp(g,Tn),!0}catch(g){}return!1})()}_withPendingWrite(g){var E=this;return(0,c.Z)(function*(){E.pendingWrites++;try{yield g()}finally{E.pendingWrites--}})()}_set(g,E){var S=this;return(0,c.Z)(function*(){return S._withPendingWrite((0,c.Z)(function*(){return yield S._withRetries(N=>qa(N,g,E)),S.localCache[g]=E,S.notifyServiceWorker(g)}))})()}_get(g){var E=this;return(0,c.Z)(function*(){const S=yield E._withRetries(N=>function gd(y,p){return md.apply(this,arguments)}(N,g));return E.localCache[g]=S,S})()}_remove(g){var E=this;return(0,c.Z)(function*(){return E._withPendingWrite((0,c.Z)(function*(){return yield E._withRetries(S=>xp(S,g)),delete E.localCache[g],E.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,c.Z)(function*(){const E=yield g._withRetries($=>{const J=Ni($,!1).getAll();return new ur(J).toPromise()});if(!E)return[];if(0!==g.pendingWrites)return[];const S=[],N=new Set;for(const{fbase_key:$,value:J}of E)N.add($),JSON.stringify(g.localCache[$])!==JSON.stringify(J)&&(g.notifyListeners($,J),S.push($));for(const $ of Object.keys(g.localCache))g.localCache[$]&&!N.has($)&&(g.notifyListeners($,null),S.push($));return S})()}notifyListeners(g,E){this.localCache[g]=E;const S=this.listeners[g];if(S)for(const N of Array.from(S))N(E)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function xo(y,p){return we(y,"POST","/v2/accounts/mfaSignIn:start",ke(y,p))}const Fl=1e12;class Vh{constructor(p){this.auth=p,this.counter=Fl,this._widgets=new Map}render(p,g){const E=this.counter;return this._widgets.set(E,new pi(p,this.auth.name,g||{})),this.counter++,E}reset(p){var g;const E=p||Fl;null===(g=this._widgets.get(E))||void 0===g||g.delete(),this._widgets.delete(E)}getResponse(p){var g;return(null===(g=this._widgets.get(p||Fl))||void 0===g?void 0:g.getResponse())||""}execute(p){var g=this;return(0,c.Z)(function*(){var E;return null===(E=g._widgets.get(p||Fl))||void 0===E||E.execute(),""})()}}class pi{constructor(p,g,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof p?document.getElementById(p):p;oe(S,"argument-error",{appName:g}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ns(y){const p=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)p.push(g.charAt(Math.floor(Math.random()*g.length)));return p.join("")}(50);const{callback:p,"expired-callback":g}=this.params;if(p)try{p(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ll=vn("rcb"),Vl=new bs(3e4,6e4);class Uh{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(p=gn().grecaptcha)||void 0===p?void 0:p.render)}load(p,g=""){return oe(function _d(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),p,"argument-error"),this.shouldResolveImmediately(g)&&lt(gn().grecaptcha)?Promise.resolve(gn().grecaptcha):new Promise((E,S)=>{const N=gn().setTimeout(()=>{S(ve(p,"network-request-failed"))},Vl.get());gn()[Ll]=()=>{gn().clearTimeout(N),delete gn()[Ll];const J=gn().grecaptcha;if(!J||!lt(J))return void S(ve(p,"internal-error"));const Se=J.render;J.render=(Ue,tt)=>{const st=Se(Ue,tt);return this.counter++,st},this.hostLanguage=g,E(J)},Tr(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:Ll,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(N),S(ve(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var g;return!!(null===(g=gn().grecaptcha)||void 0===g?void 0:g.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Mp{load(p){return(0,c.Z)(function*(){return new Vh(p)})()}clearedOneInstance(){}}const Ku="recaptcha",en={theme:"light",type:"image"};class Yu{constructor(p,g=Object.assign({},en),E){this.parameters=g,this.type=Ku,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bn(E),this.isInvisible="invisible"===this.parameters.size,oe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof p?document.getElementById(p):p;oe(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Mp:new Uh,this.validateStartingState()}verify(){var p=this;return(0,c.Z)(function*(){p.assertNotDestroyed();const g=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(g)||new Promise(N=>{const $=J=>{!J||(p.tokenChangeListeners.delete($),N(J))};p.tokenChangeListeners.add($),p.isInvisible&&E.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){oe(!this.parameters.sitekey,this.auth,"argument-error"),oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),oe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return g=>{if(this.tokenChangeListeners.forEach(E=>E(g)),"function"==typeof p)p(g);else if("string"==typeof p){const E=gn()[p];"function"==typeof E&&E(g)}}}assertNotDestroyed(){oe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,c.Z)(function*(){if(yield p.init(),!p.widgetId){let g=p.container;if(!p.isInvisible){const E=document.createElement("div");g.appendChild(E),g=E}p.widgetId=p.getAssertedRecaptcha().render(g,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,c.Z)(function*(){oe(sn()&&!Nl(),p.auth,"internal-error"),yield function Sr(){let y=null;return new Promise(p=>{"complete"!==document.readyState?(y=()=>p(),window.addEventListener("load",y)):p()}).catch(p=>{throw y&&window.removeEventListener("load",y),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const g=yield function ne(y){return Me.apply(this,arguments)}(p.auth);oe(g,p.auth,"internal-error"),p.parameters.sitekey=g})()}getAssertedRecaptcha(){return oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Mo{constructor(p,g){this.verificationId=p,this.onConfirmation=g}confirm(p){const g=Nn._fromVerification(this.verificationId,p);return this.onConfirmation(g)}}function Qu(){return(Qu=(0,c.Z)(function*(y,p,g){const E=bn(y),S=yield Wa(E,p,(0,V.m9)(g));return new Mo(S,N=>Pe(E,N))})).apply(this,arguments)}function Ul(){return(Ul=(0,c.Z)(function*(y,p,g){const E=(0,V.m9)(y);yield Wo(!1,E,"phone");const S=yield Wa(E.auth,p,(0,V.m9)(g));return new Mo(S,N=>Ph(E,N))})).apply(this,arguments)}function Bl(){return(Bl=(0,c.Z)(function*(y,p,g){const E=(0,V.m9)(y),S=yield Wa(E.auth,p,(0,V.m9)(g));return new Mo(S,N=>Sl(E,N))})).apply(this,arguments)}function Wa(y,p,g){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,c.Z)(function*(y,p,g){var E;const S=yield g.verify();try{let N;if(oe("string"==typeof S,y,"argument-error"),oe(g.type===Ku,y,"argument-error"),N="string"==typeof p?{phoneNumber:p}:p,"session"in N){const $=N.session;if("phoneNumber"in N)return oe("enroll"===$.type,y,"internal-error"),(yield Zs(y,{idToken:$.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{oe("signin"===$.type,y,"internal-error");const J=(null===(E=N.multiFactorHint)||void 0===E?void 0:E.uid)||N.multiFactorUid;return oe(J,y,"missing-multi-factor-info"),(yield xo(y,{mfaPendingCredential:$.credential,mfaEnrollmentId:J,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:$}=yield Il(y,{phoneNumber:N.phoneNumber,recaptchaToken:S});return $}}finally{g._reset()}})).apply(this,arguments)}function tr(){return(tr=(0,c.Z)(function*(y,p){yield Dt((0,V.m9)(y),p)})).apply(this,arguments)}let yr=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=bn(g)}verifyPhoneNumber(g,E){return Wa(this.auth,g,(0,V.m9)(E))}static credential(g,E){return Nn._fromVerification(g,E)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:E,temporaryProof:S}=g;return E&&S?Nn._fromTokenResponse(E,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Za(y,p){return p?Xn(p):(oe(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class zr extends Eo{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Wi(p,this._buildIdpRequest())}_linkToIdToken(p,g){return Wi(p,this._buildIdpRequest(g))}_getReauthenticationResolver(p){return Wi(p,this._buildIdpRequest())}_buildIdpRequest(p){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(g.idToken=p),g}}function jl(y){return sd(y.auth,new zr(y),y.bypassAuthState)}function Ka(y){const{auth:p,user:g}=y;return oe(g,p,"internal-error"),Mh(g,new zr(y),y.bypassAuthState)}function Xu(y){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,c.Z)(function*(y){const{auth:p,user:g}=y;return oe(g,p,"internal-error"),Dt(g,new zr(y),y.bypassAuthState)})).apply(this,arguments)}class vd{constructor(p,g,E,S,N=!1){this.auth=p,this.resolver=E,this.user=S,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var p=this;return new Promise(function(){var g=(0,c.Z)(function*(E,S){p.pendingPromise={resolve:E,reject:S};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(N){p.reject(N)}});return function(E,S){return g.apply(this,arguments)}}())}onAuthEvent(p){var g=this;return(0,c.Z)(function*(){const{urlResponse:E,sessionId:S,postBody:N,tenantId:$,error:J,type:Se}=p;if(J)return void g.reject(J);const Ue={auth:g.auth,requestUri:E,sessionId:S,tenantId:$||void 0,postBody:N||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Se)(Ue))}catch(tt){g.reject(tt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return jl;case"linkViaPopup":case"linkViaRedirect":return Xu;case"reauthViaPopup":case"reauthViaRedirect":return Ka;default:Ee(this.auth,"internal-error")}}resolve(p){Rt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Rt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ki=new bs(2e3,1e4);function Js(){return(Js=(0,c.Z)(function*(y,p,g){const E=bn(y);je(y,p,ss);const S=Za(E,g);return new Xs(E,"signInViaPopup",p,S).executeNotNull()})).apply(this,arguments)}function Qt(){return(Qt=(0,c.Z)(function*(y,p,g){const E=(0,V.m9)(y);je(E.auth,p,ss);const S=Za(E.auth,g);return new Xs(E.auth,"reauthViaPopup",p,S,E).executeNotNull()})).apply(this,arguments)}function tc(){return(tc=(0,c.Z)(function*(y,p,g){const E=(0,V.m9)(y);je(E.auth,p,ss);const S=Za(E.auth,g);return new Xs(E.auth,"linkViaPopup",p,S,E).executeNotNull()})).apply(this,arguments)}let Xs=(()=>{class y extends vd{constructor(g,E,S,N,$){super(g,E,N,$),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,c.Z)(function*(){const E=yield g.execute();return oe(E,g.auth,"internal-error"),E})()}onExecution(){var g=this;return(0,c.Z)(function*(){Rt(1===g.filter.length,"Popup operations only handle one event");const E=So();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],E),g.authWindow.associatedEvent=E,g.resolver._originValidation(g.auth).catch(S=>{g.reject(S)}),g.resolver._isIframeWebStorageSupported(g.auth,S=>{S||g.reject(ve(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var E,S;this.pollId=(null===(S=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===S?void 0:S.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,Ki.get())};g()}}return y.currentPopupAction=null,y})();const eo=new Map;class Pp extends vd{constructor(p,g,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,g=this;return(0,c.Z)(function*(){let E=eo.get(g.auth._key());if(!E){try{const N=(yield function wd(y,p){return Gl.apply(this,arguments)}(g.resolver,g.auth))?yield p().call(g):null;E=()=>Promise.resolve(N)}catch(S){E=()=>Promise.reject(S)}eo.set(g.auth._key(),E)}return g.bypassAuthState||eo.set(g.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var g=()=>super.onAuthEvent,E=this;return(0,c.Z)(function*(){if("signInViaRedirect"===p.type)return g().call(E,p);if("unknown"!==p.type){if(p.eventId){const S=yield E.auth._redirectUserForId(p.eventId);if(S)return E.user=S,g().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function Gl(){return(Gl=(0,c.Z)(function*(y,p){const g=ia(p),E=Ed(y);if(!(yield E._isAvailable()))return!1;const S="true"===(yield E._get(g));return yield E._remove(g),S})).apply(this,arguments)}function to(y,p){return na.apply(this,arguments)}function na(){return(na=(0,c.Z)(function*(y,p){return Ed(y)._set(ia(p),"true")})).apply(this,arguments)}function ra(y,p){eo.set(y._key(),p)}function Ed(y){return Xn(y._redirectPersistence)}function ia(y){return H("pendingRedirect",y.config.apiKey,y.name)}function rc(){return(rc=(0,c.Z)(function*(y,p,g){const E=bn(y);je(y,p,ss),yield E._initializationPromise;const S=Za(E,g);return yield to(S,E),S._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function fs(){return(fs=(0,c.Z)(function*(y,p,g){const E=(0,V.m9)(y);je(E.auth,p,ss),yield E.auth._initializationPromise;const S=Za(E.auth,g);yield to(S,E.auth);const N=yield Ya(E);return S._openRedirect(E.auth,p,"reauthViaRedirect",N)})).apply(this,arguments)}function jh(){return(jh=(0,c.Z)(function*(y,p,g){const E=(0,V.m9)(y);je(E.auth,p,ss),yield E.auth._initializationPromise;const S=Za(E.auth,g);yield Wo(!1,E,p.providerId),yield to(S,E.auth);const N=yield Ya(E);return S._openRedirect(E.auth,p,"linkViaRedirect",N)})).apply(this,arguments)}function Cd(){return(Cd=(0,c.Z)(function*(y,p){return yield bn(y)._initializationPromise,ic(y,p,!1)})).apply(this,arguments)}function ic(y,p){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,c.Z)(function*(y,p,g=!1){const E=bn(y),S=Za(E,p),$=yield new Pp(E,S,g).execute();return $&&!g&&(delete $.user._redirectEventId,yield E._persistUserIfCurrent($.user),yield E._setRedirectUser(null,p)),$})).apply(this,arguments)}function Ya(y){return ki.apply(this,arguments)}function ki(){return(ki=(0,c.Z)(function*(y){const p=So(`${y.uid}:::`);return y._redirectEventId=p,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),p})).apply(this,arguments)}class sa{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let g=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(g=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function no(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sc(y);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=p,g=!0)),g}sendToConsumer(p,g){var E;if(p.error&&!sc(p)){const S=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";g.onError(ve(this.auth,S))}else g.onAuthEvent(p)}isEventForConsumer(p,g){const E=null===g.eventId||!!p.eventId&&p.eventId===g.eventId;return g.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Os(p))}saveEventToCache(p){this.cachedEventUids.add(Os(p)),this.lastProcessedEventTime=Date.now()}}function Os(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(p=>p).join("-")}function sc({type:y,error:p}){return"unknown"===y&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Rp(y){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,c.Z)(function*(y,p={}){return we(y,"GET","/v1/projects",p)})).apply(this,arguments)}const Yl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bd=/^https?/;function Rs(){return(Rs=(0,c.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:p}=yield Rp(y);for(const g of p)try{if(ks(g))return}catch(E){}Ee(y,"unauthorized-domain")})).apply(this,arguments)}function ks(y){const p=Tt(),{protocol:g,hostname:E}=new URL(p);if(y.startsWith("chrome-extension://")){const $=new URL(y);return""===$.hostname&&""===E?"chrome-extension:"===g&&y.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===g&&$.hostname===E}if(!bd.test(g))return!1;if(Yl.test(y))return E===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(E)}const Td=new bs(3e4,6e4);function $h(){const y=gn().___jsl;if(null==y?void 0:y.H)for(const p of Object.keys(y.H))if(y.H[p].r=y.H[p].r||[],y.H[p].L=y.H[p].L||[],y.H[p].r=[...y.H[p].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let ac=null;function oa(y){return ac=ac||function gs(y){return new Promise((p,g)=>{var E,S,N;function $(){$h(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{$h(),g(ve(y,"network-request-failed"))},timeout:Td.get()})}if(null===(S=null===(E=gn().gapi)||void 0===E?void 0:E.iframes)||void 0===S?void 0:S.Iframe)p(gapi.iframes.getContext());else{if(!(null===(N=gn().gapi)||void 0===N?void 0:N.load)){const J=vn("iframefcb");return gn()[J]=()=>{gapi.load?$():g(ve(y,"network-request-failed"))},Tr(`https://apis.google.com/js/api.js?onload=${J}`).catch(Se=>g(Se))}$()}}).catch(p=>{throw ac=null,p})}(y),ac}const Oo=new bs(5e3,15e3),Id={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kp(y){const p=y.config;oe(p.authDomain,y,"auth-domain-config-required");const g=p.emulator?re(p,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,E={apiKey:p.apiKey,appName:y.name,v:ce.SDK_VERSION},S=Gh.get(y.config.apiHost);S&&(E.eid=S);const N=y._getFrameworks();return N.length&&(E.fw=N.join(",")),`${g}?${(0,V.xO)(E).slice(1)}`}function I(){return I=(0,c.Z)(function*(y){const p=yield oa(y),g=gn().gapi;return oe(g,y,"internal-error"),p.open({where:document.body,url:kp(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Id,dontclear:!0},E=>new Promise(function(){var S=(0,c.Z)(function*(N,$){yield E.restyle({setHideOnLeave:!1});const J=ve(y,"network-request-failed"),Se=gn().setTimeout(()=>{$(J)},Oo.get());function Ue(){gn().clearTimeout(Se),N(E)}E.ping(Ue).then(Ue,()=>{$(J)})});return function(N,$){return S.apply(this,arguments)}}()))}),I.apply(this,arguments)}const M={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ke{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}const Wr=encodeURIComponent("fac");function dr(y,p,g,E,S,N){return la.apply(this,arguments)}function la(){return(la=(0,c.Z)(function*(y,p,g,E,S,N){oe(y.config.authDomain,y,"auth-domain-config-required"),oe(y.config.apiKey,y,"invalid-api-key");const $={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:E,v:ce.SDK_VERSION,eventId:S};if(p instanceof ss){p.setDefaultLanguage(y.languageCode),$.providerId=p.providerId||"",(0,V.xb)(p.getCustomParameters())||($.customParameters=JSON.stringify(p.getCustomParameters()));for(const[tt,st]of Object.entries(N||{}))$[tt]=st}if(p instanceof Pa){const tt=p.getScopes().filter(st=>""!==st);tt.length>0&&($.scopes=tt.join(","))}y.tenantId&&($.tid=y.tenantId);const J=$;for(const tt of Object.keys(J))void 0===J[tt]&&delete J[tt];const Se=yield y._getAppCheckToken(),Ue=Se?`#${Wr}=${encodeURIComponent(Se)}`:"";return`${Qa(y)}?${(0,V.xO)(J).slice(1)}${Ue}`})).apply(this,arguments)}function Qa({config:y}){return y.emulator?re(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}const Fi="webStorageSupport";class Dd extends class lc{constructor(p){this.factorId=p}_process(p,g,E){switch(g.type){case"enroll":return this._finalizeEnroll(p,g.credential,E);case"signin":return this._finalizeSignIn(p,g.credential);default:return xt("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Dd(p)}_finalizeEnroll(p,g,E){return function dd(y,p){return we(y,"POST","/v2/accounts/mfaEnrollment:finalize",ke(y,p))}(p,{idToken:g,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,g){return function Zu(y,p){return we(y,"POST","/v2/accounts/mfaSignIn:finalize",ke(y,p))}(p,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Fp=(()=>{class y{constructor(){}static assertion(g){return Dd._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var cc="@firebase/auth";class Dv{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var g=this;return(0,c.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const g=this.auth.onIdTokenChanged(E=>{p((null==E?void 0:E.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,g),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const g=this.internalListeners.get(p);!g||(this.internalListeners.delete(p),g(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ja(){return window}function Up(){return(Up=(0,c.Z)(function*(y,p,g){var E;const{BuildInfo:S}=Ja();Rt(p.sessionId,"AuthEvent did not contain a session ID");const N=yield Xa(p.sessionId),$={};return hn()?$.ibi=S.packageName:Pt()?$.apn=S.packageName:Ee(y,"operation-not-supported-in-this-environment"),S.displayName&&($.appDisplayName=S.displayName),$.sessionId=N,dr(y,g,p.type,void 0,null!==(E=p.eventId)&&void 0!==E?E:void 0,$)})).apply(this,arguments)}function Bp(){return(Bp=(0,c.Z)(function*(y){const{BuildInfo:p}=Ja(),g={};hn()?g.iosBundleId=p.packageName:Pt()?g.androidPackageName=p.packageName:Ee(y,"operation-not-supported-in-this-environment"),yield Rp(y,g)})).apply(this,arguments)}function jp(){return(jp=(0,c.Z)(function*(y,p,g){const{cordova:E}=Ja();let S=()=>{};try{yield new Promise((N,$)=>{let J=null;function Se(){var st;N();const Fn=null===(st=E.plugins.browsertab)||void 0===st?void 0:st.close;"function"==typeof Fn&&Fn(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Ue(){J||(J=window.setTimeout(()=>{$(ve(y,"redirect-cancelled-by-user"))},2e3))}function tt(){"visible"===(null==document?void 0:document.visibilityState)&&Ue()}p.addPassiveListener(Se),document.addEventListener("resume",Ue,!1),Pt()&&document.addEventListener("visibilitychange",tt,!1),S=()=>{p.removePassiveListener(Se),document.removeEventListener("resume",Ue,!1),document.removeEventListener("visibilitychange",tt,!1),J&&window.clearTimeout(J)}})}finally{S()}})).apply(this,arguments)}function Xa(y){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,c.Z)(function*(y){const p=Jl(y),g=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(g)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Jl(y){if(Rt(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const p=new ArrayBuffer(y.length),g=new Uint8Array(p);for(let E=0;E<y.length;E++)g[E]=y.charCodeAt(E);return g}(0,V.Pz)("authIdTokenMaxAge"),function Sd(y){(0,ce._registerComponent)(new he.wA("auth",(p,{options:g})=>{const E=p.getProvider("app").getImmediate(),S=p.getProvider("heartbeat"),N=p.getProvider("app-check-internal"),{apiKey:$,authDomain:J}=E.options;oe($&&!$.includes(":"),"invalid-api-key",{appName:E.name});const Se={apiKey:$,authDomain:J,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ae(y)},Ue=new Ir(E,S,N,Se);return function Pn(y,p){const g=(null==p?void 0:p.persistence)||[],E=(Array.isArray(g)?g:[g]).map(Xn);(null==p?void 0:p.errorMap)&&y._updateErrorMap(p.errorMap),y._initializeWithPersistence(E,null==p?void 0:p.popupRedirectResolver)}(Ue,g),Ue},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,g,E)=>{p.getProvider("auth-internal").initialize()})),(0,ce._registerComponent)(new he.wA("auth-internal",p=>{const g=bn(p.getProvider("auth").getImmediate());return new Dv(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ce.registerVersion)(cc,"0.23.2",function Lp(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ce.registerVersion)(cc,"0.23.2","esm2017")}("Browser");class t_ extends sa{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(p)),super.onEvent(p)}initialized(){var p=this;return(0,c.Z)(function*(){yield p.initPromise})()}}function Zh(y){return $p.apply(this,arguments)}function $p(){return($p=(0,c.Z)(function*(y){const p=yield Kh()._get(Xl(y));return p&&(yield Kh()._remove(Xl(y))),p})).apply(this,arguments)}function n_(){const y=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const E=Math.floor(Math.random()*p.length);y.push(p.charAt(E))}return y.join("")}function Kh(){return Xn(ds)}function Xl(y){return H("authEvent",y.config.apiKey,y.name)}function eu(y){if(!(null==y?void 0:y.includes("?")))return{};const[p,...g]=y.split("?");return(0,V.zd)(g.join("?"))}function i_(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function Pd(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function s_(y=(0,V.z$)()){return!("file:"!==Pd()&&"ionic:"!==Pd()&&"capacitor:"!==Pd()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function l_(){try{const y=self.localStorage,p=So();if(y)return y.setItem(p,"1"),y.removeItem(p),!function a_(y=(0,V.z$)()){return function Lv(){return(0,V.w1)()&&11===(null==document?void 0:document.documentMode)}()||function o_(y=(0,V.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,V.hl)()}catch(y){return qp()&&(0,V.hl)()}return!1}function qp(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function zp(){return(function kv(){return"http:"===Pd()||"https:"===Pd()}()||(0,V.ru)()||s_())&&!function Fv(){return(0,V.b$)()||(0,V.UG)()}()&&l_()&&!qp()}function u_(){return s_()&&"undefined"!=typeof document}function Qh(){return(Qh=(0,c.Z)(function*(){return!!u_()&&new Promise(y=>{const p=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),y(!0)})})})).apply(this,arguments)}const Vr={LOCAL:"local",NONE:"none",SESSION:"session"},Li=oe,c_="persistence";function Jh(y){return d_.apply(this,arguments)}function d_(){return(d_=(0,c.Z)(function*(y){yield y._initializationPromise;const p=Xh(),g=H(c_,y.config.apiKey,y.name);p&&p.setItem(g,y._getPersistence())})).apply(this,arguments)}function Xh(){var y;try{return(null===(y=function CC(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(p){return null}}const ef=oe;class el{constructor(){this.browserResolver=Xn(class Fs{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hs,this._completeRedirectFn=ic,this._overrideRedirectResult=ra}_openPopup(p,g,E,S){var N=this;return(0,c.Z)(function*(){var $;Rt(null===($=N.eventManagers[p._key()])||void 0===$?void 0:$.manager,"_initialize() not called before _openPopup()");const J=yield dr(p,g,E,Tt(),S);return function $e(y,p,g,E=500,S=600){const N=Math.max((window.screen.availHeight-S)/2,0).toString(),$=Math.max((window.screen.availWidth-E)/2,0).toString();let J="";const Se=Object.assign(Object.assign({},M),{width:E.toString(),height:S.toString(),top:N,left:$}),Ue=(0,V.z$)().toLowerCase();g&&(J=nt(Ue)?"_blank":g),Ae(Ue)&&(p=p||"http://localhost",Se.scrollbars="yes");const tt=Object.entries(Se).reduce((Fn,[io,Rd])=>`${Fn}${io}=${Rd},`,"");if(function Fr(y=(0,V.z$)()){var p;return hn(y)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Ue)&&"_self"!==J)return function it(y,p){const g=document.createElement("a");g.href=y,g.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(E)}(p||"",J),new Ke(null);const st=window.open(p||"",J,tt);oe(st,y,"popup-blocked");try{st.focus()}catch(Fn){}return new Ke(st)}(p,J,So())})()}_openRedirect(p,g,E,S){var N=this;return(0,c.Z)(function*(){return yield N._originValidation(p),function ea(y){gn().location.href=y}(yield dr(p,g,E,Tt(),S)),new Promise(()=>{})})()}_initialize(p){const g=p._key();if(this.eventManagers[g]){const{manager:S,promise:N}=this.eventManagers[g];return S?Promise.resolve(S):(Rt(N,"If manager is not set, promise should be"),N)}const E=this.initAndGetManager(p);return this.eventManagers[g]={promise:E},E.catch(()=>{delete this.eventManagers[g]}),E}initAndGetManager(p){var g=this;return(0,c.Z)(function*(){const E=yield function C(y){return I.apply(this,arguments)}(p),S=new sa(p);return E.register("authEvent",N=>(oe(null==N?void 0:N.authEvent,p,"invalid-auth-event"),{status:S.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[p._key()]={manager:S},g.iframes[p._key()]=E,S})()}_isIframeWebStorageSupported(p,g){this.iframes[p._key()].send(Fi,{type:Fi},S=>{var N;const $=null===(N=null==S?void 0:S[0])||void 0===N?void 0:N[Fi];void 0!==$&&g(!!$),Ee(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function oc(y){return Rs.apply(this,arguments)}(p)),this.originValidationPromises[g]}get _shouldInitProactively(){return ci()||se()||hn()}}),this.cordovaResolver=Xn(class tu{constructor(){this._redirectPersistence=hs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ic,this._overrideRedirectResult=ra}_initialize(p){var g=this;return(0,c.Z)(function*(){const E=p._key();let S=g.eventManagers.get(E);return S||(S=new t_(p),g.eventManagers.set(E,S),g.attachCallbackListeners(p,S)),S})()}_openPopup(p){Ee(p,"operation-not-supported-in-this-environment")}_openRedirect(p,g,E,S){var N=this;return(0,c.Z)(function*(){!function xv(y){var p,g,E,S,N,$,J,Se,Ue,tt;const st=Ja();oe("function"==typeof(null===(p=null==st?void 0:st.universalLinks)||void 0===p?void 0:p.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),oe(void 0!==(null===(g=null==st?void 0:st.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),oe("function"==typeof(null===(N=null===(S=null===(E=null==st?void 0:st.cordova)||void 0===E?void 0:E.plugins)||void 0===S?void 0:S.browsertab)||void 0===N?void 0:N.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe("function"==typeof(null===(Se=null===(J=null===($=null==st?void 0:st.cordova)||void 0===$?void 0:$.plugins)||void 0===J?void 0:J.browsertab)||void 0===Se?void 0:Se.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe("function"==typeof(null===(tt=null===(Ue=null==st?void 0:st.cordova)||void 0===Ue?void 0:Ue.InAppBrowser)||void 0===tt?void 0:tt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const $=yield N._initialize(p);yield $.initialized(),$.resetRedirect(),function nc(){eo.clear()}(),yield N._originValidation(p);const J=function mi(y,p,g=null){return{type:p,eventId:g,urlResponse:null,sessionId:n_(),postBody:null,tenantId:y.tenantId,error:ve(y,"no-auth-event")}}(p,E,S);yield function Md(y,p){return Kh()._set(Xl(y),p)}(p,J);const Se=yield function xd(y,p,g){return Up.apply(this,arguments)}(p,J,g),Ue=yield function Sv(y){const{cordova:p}=Ja();return new Promise(g=>{p.plugins.browsertab.isAvailable(E=>{let S=null;E?p.plugins.browsertab.openUrl(y):S=p.InAppBrowser.open(y,function zt(y=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(S)})})}(Se);return function Wh(y,p,g){return jp.apply(this,arguments)}(p,$,Ue)})()}_isIframeWebStorageSupported(p,g){throw new Error("Method not implemented.")}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Av(y){return Bp.apply(this,arguments)}(p)),this.originValidationPromises[g]}attachCallbackListeners(p,g){const{universalLinks:E,handleOpenURL:S,BuildInfo:N}=Ja(),$=setTimeout((0,c.Z)(function*(){yield Zh(p),g.onEvent(i_())}),500),J=function(){var tt=(0,c.Z)(function*(st){clearTimeout($);const Fn=yield Zh(p);let io=null;Fn&&(null==st?void 0:st.url)&&(io=function Gp(y,p){var g,E;const S=function r_(y){const p=eu(y),g=p.link?decodeURIComponent(p.link):void 0,E=eu(g).link,S=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return eu(S).link||S||E||g||y}(p);if(S.includes("/__/auth/callback")){const N=eu(S),$=N.firebaseError?function Mv(y){try{return JSON.parse(y)}catch(p){return null}}(decodeURIComponent(N.firebaseError)):null,J=null===(E=null===(g=null==$?void 0:$.code)||void 0===g?void 0:g.split("auth/"))||void 0===E?void 0:E[1],Se=J?ve(J):null;return Se?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Se,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(Fn,st.url)),g.onEvent(io||i_())});return function(Fn){return tt.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,J);const Se=S,Ue=`${N.packageName.toLowerCase()}://`;Ja().handleOpenURL=function(){var tt=(0,c.Z)(function*(st){if(st.toLowerCase().startsWith(Ue)&&J({url:st}),"function"==typeof Se)try{Se(st)}catch(Fn){console.error(Fn)}});return function(st){return tt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=hs,this._completeRedirectFn=ic,this._overrideRedirectResult=ra}_initialize(p){var g=this;return(0,c.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,g,E,S){var N=this;return(0,c.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(p,g,E,S)})()}_openRedirect(p,g,E,S){var N=this;return(0,c.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(p,g,E,S)})()}_isIframeWebStorageSupported(p,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,g)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return u_()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ef(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,c.Z)(function*(){if(p.underlyingResolver)return;const g=yield function Vv(){return Qh.apply(this,arguments)}();p.underlyingResolver=g?p.cordovaResolver:p.browserResolver})()}}function Nd(y){return y.unwrap()}function h_(y){return hc(y)}function hc(y){const{_tokenResponse:p}=y instanceof V.ZR?y.customData:y;if(!p)return null;if(!(y instanceof V.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return yr.credentialFromResult(y);const g=p.providerId;if(!g||"password"===g)return null;let E;switch(g){case"google.com":E=On;break;case"facebook.com":E=Km;break;case"github.com":E=rd;break;case"twitter.com":E=Oa;break;default:const{oauthIdToken:S,oauthAccessToken:N,oauthTokenSecret:$,pendingToken:J,nonce:Se}=p;return N||$||S||J?J?g.startsWith("saml.")?pn._create(g,J):Mi._fromParams({providerId:g,signInMethod:g,pendingToken:J,idToken:S,accessToken:N}):new Is(g).credential({idToken:S,accessToken:N,rawNonce:Se}):null}return y instanceof V.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function ni(y,p){return p.catch(g=>{throw g instanceof V.ZR&&function f_(y,p){var g;const E=null===(g=p.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null==p?void 0:p.code))p.resolver=new fc(y,function Fh(y,p){var g;const E=(0,V.m9)(y),S=p;return oe(p.customData.operationType,E,"argument-error"),oe(null===(g=S.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,E,"argument-error"),Ms._fromError(E,S)}(y,p));else if(E){const S=hc(p),N=p;S&&(N.credential=S,N.tenantId=E.tenantId||void 0,N.email=E.email||void 0,N.phoneNumber=E.phoneNumber||void 0)}}(y,g),g}).then(g=>{const S=g.user;return{operationType:g.operationType,credential:h_(g),additionalUserInfo:Ba(g),user:ro.getOrCreate(S)}})}function tf(y,p){return p_.apply(this,arguments)}function p_(){return(p_=(0,c.Z)(function*(y,p){const g=yield p;return{verificationId:g.verificationId,confirm:E=>ni(y,g.confirm(E))}})).apply(this,arguments)}class fc{constructor(p,g){this.resolver=g,this.auth=function Od(y){return y.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return ni(Nd(this.auth),this.resolver.resolveSignIn(p))}}class ro{constructor(p){this._delegate=p,this.multiFactor=function hd(y){const p=(0,V.m9)(y);return $a.has(p)||$a.set(p,Ha._fromUser(p)),$a.get(p)}(p)}static getOrCreate(p){return ro.USER_MAP.has(p)||ro.USER_MAP.set(p,new ro(p)),ro.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var g=this;return(0,c.Z)(function*(){return ni(g.auth,Ph(g._delegate,p))})()}linkWithPhoneNumber(p,g){var E=this;return(0,c.Z)(function*(){return tf(E.auth,function Bh(y,p,g){return Ul.apply(this,arguments)}(E._delegate,p,g))})()}linkWithPopup(p){var g=this;return(0,c.Z)(function*(){return ni(g.auth,function nr(y,p,g){return tc.apply(this,arguments)}(g._delegate,p,el))})()}linkWithRedirect(p){var g=this;return(0,c.Z)(function*(){return yield Jh(bn(g.auth)),function Wl(y,p,g){return function Jm(y,p,g){return jh.apply(this,arguments)}(y,p,g)}(g._delegate,p,el)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var g=this;return(0,c.Z)(function*(){return ni(g.auth,Sl(g._delegate,p))})()}reauthenticateWithPhoneNumber(p,g){return tf(this.auth,function Zi(y,p,g){return Bl.apply(this,arguments)}(this._delegate,p,g))}reauthenticateWithPopup(p){return ni(this.auth,function No(y,p,g){return Qt.apply(this,arguments)}(this._delegate,p,el))}reauthenticateWithRedirect(p){var g=this;return(0,c.Z)(function*(){return yield Jh(bn(g.auth)),function Np(y,p,g){return function Op(y,p,g){return fs.apply(this,arguments)}(y,p,g)}(g._delegate,p,el)})()}sendEmailVerification(p){return function Lr(y,p){return hi.apply(this,arguments)}(this._delegate,p)}unlink(p){var g=this;return(0,c.Z)(function*(){return yield function Ra(y,p){return di.apply(this,arguments)}(g._delegate,p),g})()}updateEmail(p){return function Rh(y,p){return $u((0,V.m9)(y),p,null)}(this._delegate,p)}updatePassword(p){return function Ml(y,p){return $u((0,V.m9)(y),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function yd(y,p){return tr.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function bp(y,p){return Hu.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,g){return function kn(y,p,g){return ju.apply(this,arguments)}(this._delegate,p,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ro.USER_MAP=new WeakMap;const ru=oe;let g_=(()=>{class y{constructor(g,E){if(this.app=g,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=g.options;ru(S,"invalid-api-key",{appName:g.name}),ru(S,"invalid-api-key",{appName:g.name});const N="undefined"!=typeof window?el:void 0;this._delegate=E.initialize({options:{persistence:Ur(S,g.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Ve),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ro.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,E){!function Kc(y,p,g){const E=bn(y);oe(E._canInitEmulator,E,"emulator-config-failed"),oe(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const S=!!(null==g?void 0:g.disableWarnings),N=Da(p),{host:$,port:J}=function Si(y){const p=Da(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(p.length));if(!g)return{host:"",port:null};const E=g[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(E);if(S){const N=S[1];return{host:N,port:zi(E.substr(N.length+1))}}{const[N,$]=E.split(":");return{host:N,port:zi($)}}}(p);E.config.emulator={url:`${N}//${$}${null===J?"":`:${J}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:$,port:J,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function Yc(){function y(){const p=document.createElement("p"),g=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,E)}applyActionCode(g){return function Ep(y,p){return Ss.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Vu(this._delegate,g)}confirmPasswordReset(g,E){return function Ua(y,p,g){return us.apply(this,arguments)}(this._delegate,g,E)}createUserWithEmailAndPassword(g,E){var S=this;return(0,c.Z)(function*(){return ni(S._delegate,function ad(y,p,g){return Ko.apply(this,arguments)}(S._delegate,g,E))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function xs(y,p){return Bu.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Nh(y,p){const g=Ma.parseLink(p);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,c.Z)(function*(){ru(zp(),g._delegate,"operation-not-supported-in-this-environment");const E=yield function Hh(y,p){return Cd.apply(this,arguments)}(g._delegate,el);return E?ni(g._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function nu(y,p){bn(y)._logFramework(p)}(this._delegate,g)}onAuthStateChanged(g,E,S){const{next:N,error:$,complete:J}=nf(g,E,S);return this._delegate.onAuthStateChanged(N,$,J)}onIdTokenChanged(g,E,S){const{next:N,error:$,complete:J}=nf(g,E,S);return this._delegate.onIdTokenChanged(N,$,J)}sendSignInLinkToEmail(g,E){return function ld(y,p,g){return Io.apply(this,arguments)}(this._delegate,g,E)}sendPasswordResetEmail(g,E){return function zs(y,p,g){return Va.apply(this,arguments)}(this._delegate,g,E||void 0)}setPersistence(g){var E=this;return(0,c.Z)(function*(){let S;switch(function Uv(y,p){Li(Object.values(Vr).includes(p),y,"invalid-persistence-type"),(0,V.b$)()?Li(p!==Vr.SESSION,y,"unsupported-persistence-type"):(0,V.UG)()?Li(p===Vr.NONE,y,"unsupported-persistence-type"):qp()?Li(p===Vr.NONE||p===Vr.LOCAL&&(0,V.hl)(),y,"unsupported-persistence-type"):Li(p===Vr.NONE||l_(),y,"unsupported-persistence-type")}(E._delegate,g),g){case Vr.SESSION:S=hs;break;case Vr.LOCAL:S=(yield Xn(Ri)._isAvailable())?Ri:ds;break;case Vr.NONE:S=Hr;break;default:return Ee("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return ni(this._delegate,function Pi(y){return zo.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return ni(this._delegate,Pe(this._delegate,g))}signInWithCustomToken(g){return ni(this._delegate,function Co(y,p){return As.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,E){return ni(this._delegate,function Ym(y,p,g){return Pe((0,V.m9)(y),nd.credential(p,g))}(this._delegate,g,E))}signInWithEmailLink(g,E){return ni(this._delegate,function Ar(y,p,g){return ud.apply(this,arguments)}(this._delegate,g,E))}signInWithPhoneNumber(g,E){return tf(this._delegate,function Po(y,p,g){return Qu.apply(this,arguments)}(this._delegate,g,E))}signInWithPopup(g){var E=this;return(0,c.Z)(function*(){return ru(zp(),E._delegate,"operation-not-supported-in-this-environment"),ni(E._delegate,function ec(y,p,g){return Js.apply(this,arguments)}(E._delegate,g,el))})()}signInWithRedirect(g){var E=this;return(0,c.Z)(function*(){return ru(zp(),E._delegate,"operation-not-supported-in-this-environment"),yield Jh(E._delegate),function ql(y,p,g){return function zl(y,p,g){return rc.apply(this,arguments)}(y,p,g)}(E._delegate,g,el)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Uu(y,p){return To.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Vr,y})();function nf(y,p,g){let E=y;"function"!=typeof y&&({next:E,error:p,complete:g}=y);const S=E;return{next:$=>S($&&ro.getOrCreate($)),error:p,complete:g}}function Ur(y,p){const g=function ko(y,p){const g=Xh();if(!g)return[];const E=H(c_,y,p);switch(g.getItem(E)){case Vr.NONE:return[Hr];case Vr.LOCAL:return[Ri,hs];case Vr.SESSION:return[hs];default:return[]}}(y,p);if("undefined"!=typeof self&&!g.includes(Ri)&&g.push(Ri),"undefined"!=typeof window)for(const E of[ds,hs])g.includes(E)||g.push(E);return g.includes(Hr)||g.push(Hr),g}class Wp{constructor(){this.providerId="phone",this._delegate=new yr(Nd(X.Z.auth()))}static credential(p,g){return yr.credential(p,g)}verifyPhoneNumber(p,g){return this._delegate.verifyPhoneNumber(p,g)}unwrap(){return this._delegate}}Wp.PHONE_SIGN_IN_METHOD=yr.PHONE_SIGN_IN_METHOD,Wp.PROVIDER_ID=yr.PROVIDER_ID;const m_=oe;class iu{constructor(p,g,E=X.Z.app()){var S;m_(null===(S=E.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Yu(p,g,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function gc(y){y.INTERNAL.registerComponent(new he.wA("auth-compat",p=>{const g=p.getProvider("app-compat").getImmediate(),E=p.getProvider("auth");return new g_(g,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:nd,FacebookAuthProvider:Km,GithubAuthProvider:rd,GoogleAuthProvider:On,OAuthProvider:Is,SAMLAuthProvider:Na,PhoneAuthProvider:Wp,PhoneMultiFactorGenerator:Fp,RecaptchaVerifier:iu,TwitterAuthProvider:Oa,Auth:g_,AuthCredential:Eo,Error:V.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.4.2")}(X.Z)},5861:(rt,Te,L)=>{function c(V,ce,le,pe,he,_e,ye){try{var z=V[_e](ye),q=z.value}catch(ee){return void le(ee)}z.done?ce(q):Promise.resolve(q).then(pe,he)}function X(V){return function(){var ce=this,le=arguments;return new Promise(function(pe,he){var _e=V.apply(ce,le);function ye(q){c(_e,pe,he,ye,z,"next",q)}function z(q){c(_e,pe,he,ye,z,"throw",q)}ye(void 0)})}}L.d(Te,{Z:()=>X})},7582:(rt,Te,L)=>{function ce(re,te){var Ie={};for(var De in re)Object.prototype.hasOwnProperty.call(re,De)&&te.indexOf(De)<0&&(Ie[De]=re[De]);if(null!=re&&"function"==typeof Object.getOwnPropertySymbols){var ke=0;for(De=Object.getOwnPropertySymbols(re);ke<De.length;ke++)te.indexOf(De[ke])<0&&Object.prototype.propertyIsEnumerable.call(re,De[ke])&&(Ie[De[ke]]=re[De[ke]])}return Ie}function ee(re,te,Ie,De){return new(Ie||(Ie=Promise))(function(we,ct){function Bt(on){try{ft(De.next(on))}catch(Hn){ct(Hn)}}function Jt(on){try{ft(De.throw(on))}catch(Hn){ct(Hn)}}function ft(on){on.done?we(on.value):function ke(we){return we instanceof Ie?we:new Ie(function(ct){ct(we)})}(on.value).then(Bt,Jt)}ft((De=De.apply(re,te||[])).next())})}function Fe(re){return this instanceof Fe?(this.v=re,this):new Fe(re)}function Ee(re,te,Ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,De=Ie.apply(re,te||[]),we=[];return ke={},ct("next"),ct("throw"),ct("return"),ke[Symbol.asyncIterator]=function(){return this},ke;function ct(xn){De[xn]&&(ke[xn]=function(Ln){return new Promise(function(Cr,or){we.push([xn,Ln,Cr,or])>1||Bt(xn,Ln)})})}function Bt(xn,Ln){try{!function Jt(xn){xn.value instanceof Fe?Promise.resolve(xn.value.v).then(ft,on):Hn(we[0][2],xn)}(De[xn](Ln))}catch(Cr){Hn(we[0][3],Cr)}}function ft(xn){Bt("next",xn)}function on(xn){Bt("throw",xn)}function Hn(xn,Ln){xn(Ln),we.shift(),we.length&&Bt(we[0][0],we[0][1])}}function ze(re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie,te=re[Symbol.asyncIterator];return te?te.call(re):(re=function Ge(re){var te="function"==typeof Symbol&&Symbol.iterator,Ie=te&&re[te],De=0;if(Ie)return Ie.call(re);if(re&&"number"==typeof re.length)return{next:function(){return re&&De>=re.length&&(re=void 0),{value:re&&re[De++],done:!re}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(re),Ie={},De("next"),De("throw"),De("return"),Ie[Symbol.asyncIterator]=function(){return this},Ie);function De(we){Ie[we]=re[we]&&function(ct){return new Promise(function(Bt,Jt){!function ke(we,ct,Bt,Jt){Promise.resolve(Jt).then(function(ft){we({value:ft,done:Bt})},ct)}(Bt,Jt,(ct=re[we](ct)).done,ct.value)})}}}L.d(Te,{_T:()=>ce,mG:()=>ee,qq:()=>Fe,FC:()=>Ee,KL:()=>ze}),"function"==typeof SuppressedError&&SuppressedError}},rt=>{rt(rt.s=9529)}]);